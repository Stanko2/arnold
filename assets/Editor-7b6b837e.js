var go=Object.defineProperty;var mo=(e,t,r)=>t in e?go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var fe=(e,t,r)=>(mo(e,typeof t!="symbol"?t+"":t,r),r),An=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var V=(e,t,r)=>(An(e,t,"read from private field"),r?r.call(e):t.get(e)),be=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Ie=(e,t,r,i)=>(An(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var Ur=(e,t,r,i)=>({set _(s){Ie(e,t,s,r)},get _(){return V(e,t,i)}}),Ae=(e,t,r)=>(An(e,t,"access private method"),r);import{b as createDecorator,e as eventHub,s as store,c as commonjsGlobal,g as getDefaultExportFromCjs$1,C as Component,V as Vue,n as normalizeComponent,d as getAugmentedNamespace$1,f as defaultColors,u as updateApp}from"./index-c1e689b2.js";import{T as TextAnnotation,g as getViewedDocument,D as Database,I as ImageAnnotation,L as LineAnnotation,E as EllipseAnnotation,R as RectAnnotation,f as fabric,b as PDFdocument,c as PathAnnotation,S as SignAnnotation,e as emojiRegex,C as Color,d as FontsAvailable,a as activeParser,h as Documents,A as AddDocument,i as PDFDocument,j as PDFRawStream,k as PDFName,m as degrees,n as PageSizes,u as utils,o as onEditorStart,l as loadFromDatabase,p as loadFonts}from"./DocumentManager-09b742d2.js";globalThis&&globalThis.__spreadArrays;var reflectMetadataIsSupported=typeof Reflect<"u"&&typeof Reflect.getMetadata<"u";function applyMetadata(e,t,r){if(reflectMetadataIsSupported&&!Array.isArray(e)&&typeof e!="function"&&!e.hasOwnProperty("type")&&typeof e.type>"u"){var i=Reflect.getMetadata("design:type",t,r);i!==Object&&(e.type=i)}}function Prop(e){return e===void 0&&(e={}),function(t,r){applyMetadata(e,t,r),createDecorator(function(i,s){(i.props||(i.props={}))[s]=e})(t,r)}}function Watch(e,t){t===void 0&&(t={});var r=t.deep,i=r===void 0?!1:r,s=t.immediate,c=s===void 0?!1:s;return createDecorator(function(d,m){typeof d.watch!="object"&&(d.watch=Object.create(null));var y=d.watch;typeof y[e]=="object"&&!Array.isArray(y[e])?y[e]=[y[e]]:typeof y[e]>"u"&&(y[e]=[]),y[e].push({handler:m,deep:i,immediate:c})})}var vue=null;eventHub.$on("tool:init",init$1);function init$1(e=void 0){e&&(vue=e,TextAnnotation.toolOptions=tools[0],LineAnnotation.toolOptions=tools[3],EllipseAnnotation.toolOptions=tools[4],RectAnnotation.toolOptions=tools[5]);const t=store.state.settings;t?(ApplySettings(t),store.subscribe((r,i)=>{r.type!=="applySettings"&&r.type!=="loadData"||ApplySettings(i.settings)})):selectTool(tools[0])}function ApplySettings(e){const t=e.tools.settings,r=e.shortcut.settings;t.tools.forEach((i,s)=>{s<tools.length-1&&(tools[s].defaultOptions=Object.assign({},tools[s].defaultOptions,i.defaultOptions))}),r.forEach(i=>{const s=tools.find(c=>c.name==i.name);s&&(s.shortcut=i.shortcut)}),Canvas.selectedTool=tools[t.defaultTool.value],selectTool(tools[t.defaultTool.value])}eventHub.$on("editor:documentChanged",()=>{selectTool(selectedTool)});const tools=[{name:"Text",cursor:"pointer",click:async(e,t,r)=>{var s;console.log(e.pageCanvases),selectedTool.defaultOptions.left=r.x,selectedTool.defaultOptions.top=r.y;var i=new TextAnnotation(t,selectedTool.defaultOptions,e.pageCanvases[t]);return e.addAnnotation(i),selectTool(tools[7]),vue&&(vue.$data.selectedTool.defaultOptions=((s=tools.find(c=>c.name=="Text"))==null?void 0:s.defaultOptions)||{}),i.object},icon:"title",tooltip:"Text",defaultOptions:{width:200,height:0,fontFamily:"Open Sans",fill:"#000000",fontSize:12},options:{hasFill:!0,hasStroke:!1,hasText:!0,hasStrokeWidth:!1},shortcut:"q"},{name:"Draw",cursor:"pointer",icon:"brush",tooltip:"Kreslenie",defaultOptions:{stroke:"#000000",strokeWidth:10},onSelect:()=>{var e;(e=getViewedDocument())==null||e.pageCanvases.forEach(t=>{const r=tools.find(i=>i.name=="Draw");t.freeDrawingBrush.color=(r==null?void 0:r.defaultOptions.stroke)||"#000000",t.freeDrawingBrush.width=(r==null?void 0:r.defaultOptions.strokeWidth)||10,t.isDrawingMode=!0})},onDeselect:()=>{var e;(e=getViewedDocument())==null||e.pageCanvases.forEach(t=>{t.isDrawingMode=!1})},options:{hasFill:!1,hasStroke:!0,hasStrokeWidth:!0,hasText:!1},shortcut:"w"},{name:"Photo",cursor:"pointer",icon:"image",tooltip:"Pridať pečiatku",shortcut:"e",defaultOptions:{name:"",image:""},click:async(e,t,r)=>{const i=Object.assign({},selectedTool.defaultOptions);console.log(i);const s=await Database.getTemplate(i.image),c=new ImageAnnotation(t,{...i,...s.templateOptions},e.pageCanvases[t]);return e.addAnnotation(c),c.object},options:{hasFill:!1,hasStroke:!1,hasText:!1,hasStrokeWidth:!1}},{name:"Arrow",cursor:"pointer",icon:"north_east",tooltip:"Pridať šípku",shortcut:"r",defaultOptions:{stroke:"#000000",strokeWidth:5},click:async(e,t,r)=>{var s;selectedTool.defaultOptions.x2=r.x,selectedTool.defaultOptions.y2=r.y,delete selectedTool.defaultOptions.top,delete selectedTool.defaultOptions.left;const i=new LineAnnotation(t,selectedTool.defaultOptions,e.pageCanvases[t]);return e.addAnnotation(i),selectedTool.defaultOptions=((s=tools.find(c=>c.name=="Arrow"))==null?void 0:s.defaultOptions)||{},i.object},options:{hasFill:!1,hasStroke:!0,hasStrokeWidth:!0,hasText:!1}},{name:"Circle",cursor:"pointer",icon:"circle",tooltip:"Pridať kruh / elipsu",shortcut:"t",defaultOptions:{stroke:"#000000",strokeWidth:5},click:async(e,t,r)=>{var c;const i=Object.assign({},selectedTool.defaultOptions,{width:30,height:30});var s=new EllipseAnnotation(t,i,e.pageCanvases[t]);return e.addAnnotation(s),console.log(s.object),selectTool(tools[7]),selectedTool.defaultOptions=((c=tools.find(d=>d.name=="Circle"))==null?void 0:c.defaultOptions)||{},s.object},options:{hasFill:!0,hasStroke:!0,hasText:!1,hasStrokeWidth:!0}},{name:"Rect",cursor:"pointer",icon:"crop_3_2",tooltip:"Pridať obdĺžnik",defaultOptions:{width:30,height:30},click:async(e,t,r)=>{var c;const i=Object.assign({},selectedTool.defaultOptions,{width:30,height:30});var s=new RectAnnotation(t,i,e.pageCanvases[t]);return e.addAnnotation(s),selectTool(tools[7]),selectedTool.defaultOptions=((c=tools.find(d=>d.name=="Rect"))==null?void 0:c.defaultOptions)||{},s.object},options:{hasFill:!0,hasStroke:!0,hasStrokeWidth:!0,hasText:!1},shortcut:"y"},{name:"Sign",cursor:"pointer",icon:"edit",tooltip:"Pridať podpis",shortcut:"u",defaultOptions:{},click:async(e,t,r)=>{const i=selectedTool.defaultOptions.sign;if(i===void 0)throw new Error("No sign Selected");const s=await Database.getTemplate(i),c=e.pageCanvases[t],d=[];s.data.objects.forEach(g=>{g.stroke=selectedTool.defaultOptions.stroke||"#000000ff",g.strokeWidth=selectedTool.defaultOptions.strokeWidth||10;const b=new fabric.fabric.Path(g.path,g);d.push(b)});const m=selectedTool.defaultOptions,y=new fabric.fabric.Group(d,{left:r.x,top:r.y,...m});return y.sign=i,console.log(y),c.add(y),y},options:{hasFill:!1,hasStroke:!0,hasText:!1,hasStrokeWidth:!0},onDeselect:()=>{},onSelect:()=>{},mouseMove:e=>{},mouseUp:e=>{}},{name:"Select",cursor:"pointer",icon:"select_all",tooltip:"Vybrať objekty",defaultOptions:{},onSelect:()=>{selectedTool.defaultOptions={}},onDeselect:()=>{var e;(e=getViewedDocument())==null||e.pageCanvases.forEach(t=>{t.selection=!1})},options:{hasFill:!1,hasStroke:!1,hasStrokeWidth:!1,hasText:!1},shortcut:"i"}];let selectedTool=tools[1];eventHub.$on("tool:select",selectTool);eventHub.$on("tool:initCurrent",()=>selectTool(selectedTool));function selectTool(e){var t;(t=selectedTool==null?void 0:selectedTool.onDeselect)==null||t.call(selectedTool),selectedTool=e,PDFdocument.activeObject=void 0,e.onSelect&&e.onSelect(),setTimeout(()=>{var r;(r=getViewedDocument())==null||r.pageCanvases.forEach(i=>{i.selection=e.name==="Select",i.setSelectable(e.name==="Select"),i.requestRenderAll()})},200),vue!=null&&(vue.$data.selectedTool=selectedTool,vue.$data.selectedOptions=selectedTool.options)}const ot=class ot extends fabric.fabric.Canvas{constructor(r,i,s){super(r);fe(this,"creating",null);fe(this,"pageIndex",0);fe(this,"drawnShapes",[]);fe(this,"initialized",!1);this.pdf=i,this.page=s,this.selection=!1,eventHub.$on("tool:select",c=>ot.selectedTool=c)}Clear(){try{super.dispose()}catch{return}}setScale(r){if(this.pdf.modifyRef){const{width:i}=this.pdf.modifyRef.getPage(this.page).getSize();this.setZoom(r.width/i)}else setTimeout(()=>{this.setScale(r)},10)}initEvents(){this.uniformScaling=!1,this.on("mouse:down",async r=>{var s,c,d,m;if(r.absolutePointer!=null&&!this.isDrawingMode&&(eventHub.$emit("canvas:tap",this,r.e),!!ot.active&&ot.selectedTool&&ot.selectedTool.name!="Select"&&this.getActiveObjects().length==0&&ot.selectedTool.defaultOptions)){var i=ot.selectedTool.defaultOptions;const y=ot.selectedTool.defaultOptions.width||0,g=ot.selectedTool.defaultOptions.height||0;i.top=((s=r.absolutePointer)==null?void 0:s.y)-g/2,i.left=((c=r.absolutePointer)==null?void 0:c.x)-y/2,ot.selectedTool.defaultOptions=i;const b=this.getPointer(r.e);if(ot.selectedTool.name=="Arrow")ot.selectedTool.defaultOptions.x1=b.x,ot.selectedTool.defaultOptions.y1=b.y;else try{this.creating=await((m=(d=ot.selectedTool).click)==null?void 0:m.call(d,this.pdf,this.page,b)),this.setActiveObject(this.creating),this.requestRenderAll(),eventHub.$emit("tool:select",tools[7])}catch(j){eventHub.$emit("canvas:error",j)}}}),this.on("mouse:up",async r=>{var s,c;if(this.isDrawingMode)return;const i=r.absolutePointer||new fabric.fabric.Point(0,0);ot.selectedTool&&ot.selectedTool.name=="Arrow"&&(ot.selectedTool.defaultOptions.x2=i.x,ot.selectedTool.defaultOptions.y2=i.y,this.creating=await((c=(s=ot.selectedTool).click)==null?void 0:c.call(s,this.pdf,this.page,i)),this.setActiveObject(this.creating),this.requestRenderAll())}),this.on("object:scaling",r=>{var c,d,m,y,g,b,j,B,R,D;(((c=r.target)==null?void 0:c.type)=="textbox"||((d=r.target)==null?void 0:d.type)=="activeSelection")&&((m=r.target)==null||m.setOptions({scaleX:1,scaleY:1}));const i=((y=r.target)==null?void 0:y.scaleX)||1,s=((g=r.target)==null?void 0:g.scaleY)||1;if(((b=r.target)==null?void 0:b.type)==="rect")(R=r.target)==null||R.set({scaleX:1,scaleY:1,width:(((j=r.target)==null?void 0:j.width)||0)*i,height:(((B=r.target)==null?void 0:B.height)||0)*s});else if(((D=r.target)==null?void 0:D.type)==="ellipse"){const N=r.target;N.set({scaleX:1,scaleY:1,rx:(N.rx||0)*i,ry:(N.ry||0)*s})}}),this.on("selection:cleared",r=>{ot.selectedTool&&ot.selectedTool.name=="Select"&&(ot.selectedTool.defaultOptions={},ot.toolbarRef.$data.selectedTool.defaultOptions={},ot.toolbarRef.$data.selectedOptions={hasFill:!1,hasStroke:!1,hasStrokeWidth:!1,hasText:!1})}),this.on("text:changed",r=>{r.target instanceof fabric.fabric.Textbox&&(this.resetStylesForBlankCharacters(r.target),this.setFontForEmojis(r.target))}),this.on("mouse:move",r=>{const i=r.absolutePointer;store.commit("Clipboard/setMousePos",{pos:{x:i==null?void 0:i.x,y:i==null?void 0:i.y},page:this.page})}),this.on("object:scaled",r=>{if(r.target!=null&&r.target.type!="group"&&r.target.type!="ellipse"&&r.target.type!="image"){const i=r.target,s=(i.width||0)*(i.scaleX||0),c=(i.height||0)*(i.scaleY||0);i.set({height:c,width:s,scaleX:1,scaleY:1})}else if(r.target&&r.target.type=="ellipse"){const i=r.target,s=(i.rx||0)*(i.scaleX||0),c=(i.ry||0)*(i.scaleY||0);i.set({ry:c,rx:s,scaleX:1,scaleY:1})}}),this.on("selection:updated",this.HandleSelectionChanged),this.on("selection:created",this.HandleSelectionChanged),setTimeout(()=>{this.on("object:added",r=>{var i=r.target;i instanceof fabric.fabric.Path&&this.isDrawingMode&&this.pdf.addAnnotation(new PathAnnotation(this.page,i,this)),i instanceof fabric.fabric.Group&&!this.getObjects().some(s=>s.type=="group"&&s.name==(i==null?void 0:i.name)&&s!=i)&&(console.log(i.sign),this.pdf.addAnnotation(new SignAnnotation(this.page,i,this)))}),this.initialized=!0,this.discardActiveObject()},100)}HandleSelectionChanged(){if(this.selection){const i=this.getActiveObject();if(i.type=="activeSelection")return;if(PDFdocument.activeObject=i,i.type=="path"){ot.toolbarRef.$data.selectedTool.defaultOptions={stroke:i.stroke,strokeWidth:i.strokeWidth},ot.toolbarRef.$data.selectedOptions={hasStrokeWidth:!0,hasStroke:!0,hasText:!1,hasFill:!1};return}else if(i.type=="group"){const s=i.getObjects()[0];ot.toolbarRef.$data.selectedTool.defaultOptions={stroke:s.stroke,strokeWidth:s.strokeWidth},ot.toolbarRef.$data.selectedOptions={hasStrokeWidth:!0,hasStroke:!0,hasText:!1,hasFill:!1};return}var r=i.tool;r!=null&&(ot.toolbarRef.$data.selectedTool.defaultOptions={stroke:i.stroke,strokeWidth:i.strokeWidth,fill:i.fill,fontFamily:i.fontFamily,fontSize:i.fontSize},ot.toolbarRef.$data.selectedOptions=r.options),this.pdf.pageCanvases.forEach(s=>{s!=this&&(s.discardActiveObject(),s.renderAll())})}else PDFdocument.activeObject=void 0}deleteSelected(){if(this.getActiveObjects().length!=0)for(const r of this.getActiveObjects())r.name&&this.pdf.deleteAnnotation(r.name)}setSelectable(r){this.selection=r,this.discardActiveObject(),this.getObjects().forEach(i=>{i.selectable=r}),this.requestRenderAll()}canOpenCtxMenu(r){var i=this.getPointer(r);return new fabric.fabric.Point(i.x,i.y),!0}updateObjectProps(r){var i=this.getActiveObject();r.top=i.top,r.left=i.left,r.width=i.width,r.height=i.height,i.set(r)}Rotate(r){const i=fabric.fabric.util.degreesToRadians(r);console.log(this.viewportTransform);const s=fabric.fabric.util.multiplyTransformMatrices([1,0,0,1,(this.width||0)/2,(this.height||0)/2],[Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]);this.viewportTransform&&(this.viewportTransform=fabric.fabric.util.multiplyTransformMatrices(this.viewportTransform||[1,0,0,1,0,0],s)),this.renderAll()}resetStylesForBlankCharacters(r){const i=Object.keys(r.styles).map(s=>parseInt(s));for(const s of i){const c=[" ","	",`
`],d=r.textLines[s];if(d===void 0)continue;const m=Object.keys(r.styles[s]).map(y=>parseInt(y));for(const y of m)c.includes(d.charAt(y))&&delete r.styles[s][y]}}setFontForEmojis(r){r.textLines.forEach((i,s)=>{const c=new Set;let d=0;for(const m of i.matchAll(emojiRegex)){console.log(m);const y=(m.index||0)-d;c.add(y),r.styles[s]=r.styles[s]||{},r.styles[s][y]=r.styles[s][y]||{},r.styles[s][y]={fontFamily:"Emoji"},d++}if(r.styles[s]!==void 0)for(let m=0;m<i.length;m++)c.has(m)||r.styles[s][m]!==void 0&&r.styles[s][m].fontFamily==="Emoji"&&delete r.styles[s][m].fontFamily}),console.log(r)}};fe(ot,"toolbarRef"),fe(ot,"active",!0),fe(ot,"selectedTool");let Canvas=ot;function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var c=Function.bind.apply(t,s);return new c}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),r}var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){inited||init();var t,r,i,s,c,d,m=e.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");c=e[m-2]==="="?2:e[m-1]==="="?1:0,d=new Arr(m*3/4-c),i=c>0?m-4:m;var y=0;for(t=0,r=0;t<i;t+=4,r+=3)s=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],d[y++]=s>>16&255,d[y++]=s>>8&255,d[y++]=s&255;return c===2?(s=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,d[y++]=s&255):c===1&&(s=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,d[y++]=s>>8&255,d[y++]=s&255),d}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,r){for(var i,s=[],c=t;c<r;c+=3)i=(e[c]<<16)+(e[c+1]<<8)+e[c+2],s.push(tripletToBase64(i));return s.join("")}function fromByteArray(e){inited||init();for(var t,r=e.length,i=r%3,s="",c=[],d=16383,m=0,y=r-i;m<y;m+=d)c.push(encodeChunk(e,m,m+d>y?y:m+d));return i===1?(t=e[r-1],s+=lookup[t>>2],s+=lookup[t<<4&63],s+="=="):i===2&&(t=(e[r-2]<<8)+e[r-1],s+=lookup[t>>10],s+=lookup[t>>4&63],s+=lookup[t<<2&63],s+="="),c.push(s),c.join("")}function read(e,t,r,i,s){var c,d,m=s*8-i-1,y=(1<<m)-1,g=y>>1,b=-7,j=r?s-1:0,B=r?-1:1,R=e[t+j];for(j+=B,c=R&(1<<-b)-1,R>>=-b,b+=m;b>0;c=c*256+e[t+j],j+=B,b-=8);for(d=c&(1<<-b)-1,c>>=-b,b+=i;b>0;d=d*256+e[t+j],j+=B,b-=8);if(c===0)c=1-g;else{if(c===y)return d?NaN:(R?-1:1)*(1/0);d=d+Math.pow(2,i),c=c-g}return(R?-1:1)*d*Math.pow(2,c-i)}function write(e,t,r,i,s,c){var d,m,y,g=c*8-s-1,b=(1<<g)-1,j=b>>1,B=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=i?0:c-1,D=i?1:-1,N=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(m=isNaN(t)?1:0,d=b):(d=Math.floor(Math.log(t)/Math.LN2),t*(y=Math.pow(2,-d))<1&&(d--,y*=2),d+j>=1?t+=B/y:t+=B*Math.pow(2,1-j),t*y>=2&&(d++,y/=2),d+j>=b?(m=0,d=b):d+j>=1?(m=(t*y-1)*Math.pow(2,s),d=d+j):(m=t*Math.pow(2,j-1)*Math.pow(2,s),d=0));s>=8;e[r+R]=m&255,R+=D,m/=256,s-=8);for(d=d<<s|m,g+=s;g>0;e[r+R]=d&255,R+=D,d/=256,g-=8);e[r+R-D]|=N*128}var toString$1={}.toString,isArray$2=Array.isArray||function(e){return toString$1.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=Buffer.prototype):(e===null&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from$1(this,e,t,r)}Buffer.poolSize=8192;Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e};function from$1(e,t,r,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,i):typeof t=="string"?fromString(e,t,r):fromObject(e,t)}Buffer.from=function(e,t,r){return from$1(null,e,t,r)};Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer[Symbol.species]);function assertSize(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r,i){return assertSize(t),t<=0?createBuffer(e,t):r!==void 0?typeof i=="string"?createBuffer(e,t).fill(r,i):createBuffer(e,t).fill(r):createBuffer(e,t)}Buffer.alloc=function(e,t,r){return alloc(null,e,t,r)};function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:checked(t)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)};Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)};function fromString(e,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=byteLength(t,r)|0;e=createBuffer(e,i);var s=e.write(t,r);return s!==i&&(e=e.slice(0,s)),e}function fromArrayLike(e,t){var r=t.length<0?0:checked(t.length)|0;e=createBuffer(e,r);for(var i=0;i<r;i+=1)e[i]=t[i]&255;return e}function fromArrayBuffer(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return r===void 0&&i===void 0?t=new Uint8Array(t):i===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,i),Buffer.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=Buffer.prototype):e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var r=checked(t.length)|0;return e=createBuffer(e,r),e.length===0||t.copy(e,0,0,r),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if(t.type==="Buffer"&&isArray$2(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return e|0}Buffer.isBuffer=isBuffer;function internalIsBuffer(e){return!!(e!=null&&e._isBuffer)}Buffer.compare=function(t,r){if(!internalIsBuffer(t)||!internalIsBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var i=t.length,s=r.length,c=0,d=Math.min(i,s);c<d;++c)if(t[c]!==r[c]){i=t[c],s=r[c];break}return i<s?-1:s<i?1:0};Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(t,r){if(!isArray$2(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Buffer.alloc(0);var i;if(r===void 0)for(r=0,i=0;i<t.length;++i)r+=t[i].length;var s=Buffer.allocUnsafe(r),c=0;for(i=0;i<t.length;++i){var d=t[i];if(!internalIsBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(s,c),c+=d.length}return s};function byteLength(e,t){if(internalIsBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}Buffer.byteLength=byteLength;function slowToString(e,t,r){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}Buffer.prototype._isBuffer=!0;function swap(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)swap(this,r,r+1);return this};Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)swap(this,r,r+3),swap(this,r+1,r+2);return this};Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)swap(this,r,r+7),swap(this,r+1,r+6),swap(this,r+2,r+5),swap(this,r+3,r+4);return this};Buffer.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?utf8Slice(this,0,t):slowToString.apply(this,arguments)};Buffer.prototype.equals=function(t){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Buffer.compare(this,t)===0};Buffer.prototype.inspect=function(){var t="",r=INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"};Buffer.prototype.compare=function(t,r,i,s,c){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),i===void 0&&(i=t?t.length:0),s===void 0&&(s=0),c===void 0&&(c=this.length),r<0||i>t.length||s<0||c>this.length)throw new RangeError("out of range index");if(s>=c&&r>=i)return 0;if(s>=c)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,s>>>=0,c>>>=0,this===t)return 0;for(var d=c-s,m=i-r,y=Math.min(d,m),g=this.slice(s,c),b=t.slice(r,i),j=0;j<y;++j)if(g[j]!==b[j]){d=g[j],m=b[j];break}return d<m?-1:m<d?1:0};function bidirectionalIndexOf(e,t,r,i,s){if(e.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof t=="string"&&(t=Buffer.from(t,i)),internalIsBuffer(t))return t.length===0?-1:arrayIndexOf(e,t,r,i,s);if(typeof t=="number")return t=t&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,i,s);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,i,s){var c=1,d=e.length,m=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;c=2,d/=2,m/=2,r/=2}function y(R,D){return c===1?R[D]:R.readUInt16BE(D*c)}var g;if(s){var b=-1;for(g=r;g<d;g++)if(y(e,g)===y(t,b===-1?0:g-b)){if(b===-1&&(b=g),g-b+1===m)return b*c}else b!==-1&&(g-=g-b),b=-1}else for(r+m>d&&(r=d-m),g=r;g>=0;g--){for(var j=!0,B=0;B<m;B++)if(y(e,g+B)!==y(t,B)){j=!1;break}if(j)return g}return-1}Buffer.prototype.includes=function(t,r,i){return this.indexOf(t,r,i)!==-1};Buffer.prototype.indexOf=function(t,r,i){return bidirectionalIndexOf(this,t,r,i,!0)};Buffer.prototype.lastIndexOf=function(t,r,i){return bidirectionalIndexOf(this,t,r,i,!1)};function hexWrite(e,t,r,i){r=Number(r)||0;var s=e.length-r;i?(i=Number(i),i>s&&(i=s)):i=s;var c=t.length;if(c%2!==0)throw new TypeError("Invalid hex string");i>c/2&&(i=c/2);for(var d=0;d<i;++d){var m=parseInt(t.substr(d*2,2),16);if(isNaN(m))return d;e[r+d]=m}return d}function utf8Write(e,t,r,i){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,i)}function asciiWrite(e,t,r,i){return blitBuffer(asciiToBytes(t),e,r,i)}function latin1Write(e,t,r,i){return asciiWrite(e,t,r,i)}function base64Write(e,t,r,i){return blitBuffer(base64ToBytes(t),e,r,i)}function ucs2Write(e,t,r,i){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,i)}Buffer.prototype.write=function(t,r,i,s){if(r===void 0)s="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")s=r,i=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(i)?(i=i|0,s===void 0&&(s="utf8")):(s=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var c=this.length-r;if((i===void 0||i>c)&&(i=c),t.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var d=!1;;)switch(s){case"hex":return hexWrite(this,t,r,i);case"utf8":case"utf-8":return utf8Write(this,t,r,i);case"ascii":return asciiWrite(this,t,r,i);case"latin1":case"binary":return latin1Write(this,t,r,i);case"base64":return base64Write(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,r,i);default:if(d)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),d=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(e,t,r){return t===0&&r===e.length?fromByteArray(e):fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var i=[],s=t;s<r;){var c=e[s],d=null,m=c>239?4:c>223?3:c>191?2:1;if(s+m<=r){var y,g,b,j;switch(m){case 1:c<128&&(d=c);break;case 2:y=e[s+1],(y&192)===128&&(j=(c&31)<<6|y&63,j>127&&(d=j));break;case 3:y=e[s+1],g=e[s+2],(y&192)===128&&(g&192)===128&&(j=(c&15)<<12|(y&63)<<6|g&63,j>2047&&(j<55296||j>57343)&&(d=j));break;case 4:y=e[s+1],g=e[s+2],b=e[s+3],(y&192)===128&&(g&192)===128&&(b&192)===128&&(j=(c&15)<<18|(y&63)<<12|(g&63)<<6|b&63,j>65535&&j<1114112&&(d=j))}}d===null?(d=65533,m=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d),s+=m}return decodeCodePointsArray(i)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(e[s]&127);return i}function latin1Slice(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(e[s]);return i}function hexSlice(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var s="",c=t;c<r;++c)s+=toHex(e[c]);return s}function utf16leSlice(e,t,r){for(var i=e.slice(t,r),s="",c=0;c<i.length;c+=2)s+=String.fromCharCode(i[c]+i[c+1]*256);return s}Buffer.prototype.slice=function(t,r){var i=this.length;t=~~t,r=r===void 0?i:~~r,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<t&&(r=t);var s;if(Buffer.TYPED_ARRAY_SUPPORT)s=this.subarray(t,r),s.__proto__=Buffer.prototype;else{var c=r-t;s=new Buffer(c,void 0);for(var d=0;d<c;++d)s[d]=this[d+t]}return s};function checkOffset(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function(t,r,i){t=t|0,r=r|0,i||checkOffset(t,r,this.length);for(var s=this[t],c=1,d=0;++d<r&&(c*=256);)s+=this[t+d]*c;return s};Buffer.prototype.readUIntBE=function(t,r,i){t=t|0,r=r|0,i||checkOffset(t,r,this.length);for(var s=this[t+--r],c=1;r>0&&(c*=256);)s+=this[t+--r]*c;return s};Buffer.prototype.readUInt8=function(t,r){return r||checkOffset(t,1,this.length),this[t]};Buffer.prototype.readUInt16LE=function(t,r){return r||checkOffset(t,2,this.length),this[t]|this[t+1]<<8};Buffer.prototype.readUInt16BE=function(t,r){return r||checkOffset(t,2,this.length),this[t]<<8|this[t+1]};Buffer.prototype.readUInt32LE=function(t,r){return r||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Buffer.prototype.readUInt32BE=function(t,r){return r||checkOffset(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Buffer.prototype.readIntLE=function(t,r,i){t=t|0,r=r|0,i||checkOffset(t,r,this.length);for(var s=this[t],c=1,d=0;++d<r&&(c*=256);)s+=this[t+d]*c;return c*=128,s>=c&&(s-=Math.pow(2,8*r)),s};Buffer.prototype.readIntBE=function(t,r,i){t=t|0,r=r|0,i||checkOffset(t,r,this.length);for(var s=r,c=1,d=this[t+--s];s>0&&(c*=256);)d+=this[t+--s]*c;return c*=128,d>=c&&(d-=Math.pow(2,8*r)),d};Buffer.prototype.readInt8=function(t,r){return r||checkOffset(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Buffer.prototype.readInt16LE=function(t,r){r||checkOffset(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Buffer.prototype.readInt16BE=function(t,r){r||checkOffset(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Buffer.prototype.readInt32LE=function(t,r){return r||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Buffer.prototype.readInt32BE=function(t,r){return r||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Buffer.prototype.readFloatLE=function(t,r){return r||checkOffset(t,4,this.length),read(this,t,!0,23,4)};Buffer.prototype.readFloatBE=function(t,r){return r||checkOffset(t,4,this.length),read(this,t,!1,23,4)};Buffer.prototype.readDoubleLE=function(t,r){return r||checkOffset(t,8,this.length),read(this,t,!0,52,8)};Buffer.prototype.readDoubleBE=function(t,r){return r||checkOffset(t,8,this.length),read(this,t,!1,52,8)};function checkInt(e,t,r,i,s,c){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<c)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function(t,r,i,s){if(t=+t,r=r|0,i=i|0,!s){var c=Math.pow(2,8*i)-1;checkInt(this,t,r,i,c,0)}var d=1,m=0;for(this[r]=t&255;++m<i&&(d*=256);)this[r+m]=t/d&255;return r+i};Buffer.prototype.writeUIntBE=function(t,r,i,s){if(t=+t,r=r|0,i=i|0,!s){var c=Math.pow(2,8*i)-1;checkInt(this,t,r,i,c,0)}var d=i-1,m=1;for(this[r+d]=t&255;--d>=0&&(m*=256);)this[r+d]=t/m&255;return r+i};Buffer.prototype.writeUInt8=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function objectWriteUInt16(e,t,r,i){t<0&&(t=65535+t+1);for(var s=0,c=Math.min(e.length-r,2);s<c;++s)e[r+s]=(t&255<<8*(i?s:1-s))>>>(i?s:1-s)*8}Buffer.prototype.writeUInt16LE=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):objectWriteUInt16(this,t,r,!0),r+2};Buffer.prototype.writeUInt16BE=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):objectWriteUInt16(this,t,r,!1),r+2};function objectWriteUInt32(e,t,r,i){t<0&&(t=4294967295+t+1);for(var s=0,c=Math.min(e.length-r,4);s<c;++s)e[r+s]=t>>>(i?s:3-s)*8&255}Buffer.prototype.writeUInt32LE=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):objectWriteUInt32(this,t,r,!0),r+4};Buffer.prototype.writeUInt32BE=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):objectWriteUInt32(this,t,r,!1),r+4};Buffer.prototype.writeIntLE=function(t,r,i,s){if(t=+t,r=r|0,!s){var c=Math.pow(2,8*i-1);checkInt(this,t,r,i,c-1,-c)}var d=0,m=1,y=0;for(this[r]=t&255;++d<i&&(m*=256);)t<0&&y===0&&this[r+d-1]!==0&&(y=1),this[r+d]=(t/m>>0)-y&255;return r+i};Buffer.prototype.writeIntBE=function(t,r,i,s){if(t=+t,r=r|0,!s){var c=Math.pow(2,8*i-1);checkInt(this,t,r,i,c-1,-c)}var d=i-1,m=1,y=0;for(this[r+d]=t&255;--d>=0&&(m*=256);)t<0&&y===0&&this[r+d+1]!==0&&(y=1),this[r+d]=(t/m>>0)-y&255;return r+i};Buffer.prototype.writeInt8=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1};Buffer.prototype.writeInt16LE=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):objectWriteUInt16(this,t,r,!0),r+2};Buffer.prototype.writeInt16BE=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):objectWriteUInt16(this,t,r,!1),r+2};Buffer.prototype.writeInt32LE=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):objectWriteUInt32(this,t,r,!0),r+4};Buffer.prototype.writeInt32BE=function(t,r,i){return t=+t,r=r|0,i||checkInt(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):objectWriteUInt32(this,t,r,!1),r+4};function checkIEEE754(e,t,r,i,s,c){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,i,s){return s||checkIEEE754(e,t,r,4),write(e,t,r,i,23,4),r+4}Buffer.prototype.writeFloatLE=function(t,r,i){return writeFloat(this,t,r,!0,i)};Buffer.prototype.writeFloatBE=function(t,r,i){return writeFloat(this,t,r,!1,i)};function writeDouble(e,t,r,i,s){return s||checkIEEE754(e,t,r,8),write(e,t,r,i,52,8),r+8}Buffer.prototype.writeDoubleLE=function(t,r,i){return writeDouble(this,t,r,!0,i)};Buffer.prototype.writeDoubleBE=function(t,r,i){return writeDouble(this,t,r,!1,i)};Buffer.prototype.copy=function(t,r,i,s){if(i||(i=0),!s&&s!==0&&(s=this.length),r>=t.length&&(r=t.length),r||(r=0),s>0&&s<i&&(s=i),s===i||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-r<s-i&&(s=t.length-r+i);var c=s-i,d;if(this===t&&i<r&&r<s)for(d=c-1;d>=0;--d)t[d+r]=this[d+i];else if(c<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(d=0;d<c;++d)t[d+r]=this[d+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+c),r);return c};Buffer.prototype.fill=function(t,r,i,s){if(typeof t=="string"){if(typeof r=="string"?(s=r,r=0,i=this.length):typeof i=="string"&&(s=i,i=this.length),t.length===1){var c=t.charCodeAt(0);c<256&&(t=c)}if(s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!Buffer.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var d;if(typeof t=="number")for(d=r;d<i;++d)this[d]=t;else{var m=internalIsBuffer(t)?t:utf8ToBytes(new Buffer(t,s).toString()),y=m.length;for(d=0;d<i-r;++d)this[d+r]=m[d%y]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if(e=stringtrim(e).replace(INVALID_BASE64_RE,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var r,i=e.length,s=null,c=[],d=0;d<i;++d){if(r=e.charCodeAt(d),r>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&c.push(239,191,189);continue}else if(d+1===i){(t-=3)>-1&&c.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&c.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&c.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;c.push(r)}else if(r<2048){if((t-=2)<0)break;c.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;c.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;c.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return c}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function utf16leToBytes(e,t){for(var r,i,s,c=[],d=0;d<e.length&&!((t-=2)<0);++d)r=e.charCodeAt(d),i=r>>8,s=r%256,c.push(s),c.push(i);return c}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,r,i){for(var s=0;s<i&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function isnan(e){return e!==e}function isBuffer(e){return e!=null&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isFastBuffer(e.slice(0,0))}function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch{try{return cachedSetTimeout.call(null,e,0)}catch{return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch{try{return cachedClearTimeout.call(null,e)}catch{return cachedClearTimeout.call(this,e)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding$1(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()};function hrtime(e){var t=performanceNow.call(performance)*.001,r=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(r=r-e[0],i=i-e[1],i<0&&(r--,i+=1e9)),[r,i]}var startTime=new Date;function uptime(){var e=new Date,t=e-startTime;return t/1e3}var browser$1={nextTick,title,browser,env,argv,version,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding:binding$1,cwd,chdir,umask,hrtime,platform,release,config,uptime};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0$1=getAugmentedNamespace(_polyfillNode_fs$1),_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$1=getAugmentedNamespace(_nodeResolve_empty$1),hasFetch=isFunction$1(global$1.fetch)&&isFunction$1(global$1.ReadableStream),_blobConstructor;function blobConstructor(){if(typeof _blobConstructor<"u")return _blobConstructor;try{new global$1.Blob([new ArrayBuffer(1)]),_blobConstructor=!0}catch{_blobConstructor=!1}return _blobConstructor}var xhr;function checkTypeSupport(e){xhr||(xhr=new global$1.XMLHttpRequest,xhr.open("GET",global$1.location.host?"/":"https://example.com"));try{return xhr.responseType=e,xhr.responseType===e}catch{return!1}}var haveArrayBuffer=typeof global$1.ArrayBuffer<"u",haveSlice=haveArrayBuffer&&isFunction$1(global$1.ArrayBuffer.prototype.slice),arraybuffer=haveArrayBuffer&&checkTypeSupport("arraybuffer"),msstream=!hasFetch&&haveSlice&&checkTypeSupport("ms-stream"),mozchunkedarraybuffer=!hasFetch&&haveArrayBuffer&&checkTypeSupport("moz-chunked-arraybuffer"),overrideMimeType=isFunction$1(xhr.overrideMimeType),vbArray=isFunction$1(global$1.VBArray);function isFunction$1(e){return typeof e=="function"}xhr=null;var inherits;typeof Object.create=="function"?inherits=function(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:inherits=function(t,r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t};var inherits$1=inherits,formatRegExp=/%[sdj%]/g;function format$1(e){if(!isString$1(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(inspect$1(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,s=i.length,c=String(e).replace(formatRegExp,function(m){if(m==="%%")return"%";if(r>=s)return m;switch(m){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch{return"[Circular]"}default:return m}}),d=i[r];r<s;d=i[++r])isNull(d)||!isObject$1(d)?c+=" "+d:c+=" "+inspect$1(d);return c}function deprecate$1(e,t){if(isUndefined$1(global$1.process))return function(){return deprecate$1(e,t).apply(this,arguments)};if(browser$1.noDeprecation===!0)return e;var r=!1;function i(){if(!r){if(browser$1.throwDeprecation)throw new Error(t);browser$1.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return i}var debugs={},debugEnviron;function debuglog(e){if(isUndefined$1(debugEnviron)&&(debugEnviron=browser$1.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var t=0;debugs[e]=function(){var r=format$1.apply(null,arguments);console.error("%s %d: %s",e,t,r)}}else debugs[e]=function(){};return debugs[e]}function inspect$1(e,t){var r={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),isBoolean(t)?r.showHidden=t:t&&_extend(r,t),isUndefined$1(r.showHidden)&&(r.showHidden=!1),isUndefined$1(r.depth)&&(r.depth=2),isUndefined$1(r.colors)&&(r.colors=!1),isUndefined$1(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}inspect$1.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect$1.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(e,t){var r=inspect$1.styles[t];return r?"\x1B["+inspect$1.colors[r][0]+"m"+e+"\x1B["+inspect$1.colors[r][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(r,i){t[r]=!0}),t}function formatValue(e,t,r){if(e.customInspect&&t&&isFunction$2(t.inspect)&&t.inspect!==inspect$1&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(r,e);return isString$1(i)||(i=formatValue(e,i,r)),i}var s=formatPrimitive(e,t);if(s)return s;var c=Object.keys(t),d=arrayToHash(c);if(e.showHidden&&(c=Object.getOwnPropertyNames(t)),isError(t)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return formatError(t);if(c.length===0){if(isFunction$2(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate$1(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var y="",g=!1,b=["{","}"];if(isArray$1(t)&&(g=!0,b=["[","]"]),isFunction$2(t)){var j=t.name?": "+t.name:"";y=" [Function"+j+"]"}if(isRegExp(t)&&(y=" "+RegExp.prototype.toString.call(t)),isDate$1(t)&&(y=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(y=" "+formatError(t)),c.length===0&&(!g||t.length==0))return b[0]+y+b[1];if(r<0)return isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var B;return g?B=formatArray(e,t,r,d,c):B=c.map(function(R){return formatProperty(e,t,r,d,R,g)}),e.seen.pop(),reduceToSingleString(B,y,b)}function formatPrimitive(e,t){if(isUndefined$1(t))return e.stylize("undefined","undefined");if(isString$1(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(isNumber$1(t))return e.stylize(""+t,"number");if(isBoolean(t))return e.stylize(""+t,"boolean");if(isNull(t))return e.stylize("null","null")}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,r,i,s){for(var c=[],d=0,m=t.length;d<m;++d)hasOwnProperty$1(t,String(d))?c.push(formatProperty(e,t,r,i,String(d),!0)):c.push("");return s.forEach(function(y){y.match(/^\d+$/)||c.push(formatProperty(e,t,r,i,y,!0))}),c}function formatProperty(e,t,r,i,s,c){var d,m,y;if(y=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},y.get?y.set?m=e.stylize("[Getter/Setter]","special"):m=e.stylize("[Getter]","special"):y.set&&(m=e.stylize("[Setter]","special")),hasOwnProperty$1(i,s)||(d="["+s+"]"),m||(e.seen.indexOf(y.value)<0?(isNull(r)?m=formatValue(e,y.value,null):m=formatValue(e,y.value,r-1),m.indexOf(`
`)>-1&&(c?m=m.split(`
`).map(function(g){return"  "+g}).join(`
`).substr(2):m=`
`+m.split(`
`).map(function(g){return"   "+g}).join(`
`))):m=e.stylize("[Circular]","special")),isUndefined$1(d)){if(c&&s.match(/^\d+$/))return m;d=JSON.stringify(""+s),d.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(d=d.substr(1,d.length-2),d=e.stylize(d,"name")):(d=d.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),d=e.stylize(d,"string"))}return d+": "+m}function reduceToSingleString(e,t,r){var i=e.reduce(function(s,c){return c.indexOf(`
`)>=0,s+c.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return typeof e=="boolean"}function isNull(e){return e===null}function isNullOrUndefined(e){return e==null}function isNumber$1(e){return typeof e=="number"}function isString$1(e){return typeof e=="string"}function isUndefined$1(e){return e===void 0}function isRegExp(e){return isObject$1(e)&&objectToString(e)==="[object RegExp]"}function isObject$1(e){return typeof e=="object"&&e!==null}function isDate$1(e){return isObject$1(e)&&objectToString(e)==="[object Date]"}function isError(e){return isObject$1(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}function isFunction$2(e){return typeof e=="function"}function objectToString(e){return Object.prototype.toString.call(e)}function _extend(e,t){if(!t||!isObject$1(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}function hasOwnProperty$1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var domain;function EventHandlers(){}EventHandlers.prototype=Object.create(null);function EventEmitter(){EventEmitter.init.call(this)}EventEmitter.EventEmitter=EventEmitter;EventEmitter.usingDomains=!1;EventEmitter.prototype.domain=void 0;EventEmitter.prototype._events=void 0;EventEmitter.prototype._maxListeners=void 0;EventEmitter.defaultMaxListeners=10;EventEmitter.init=function(){this.domain=null,EventEmitter.usingDomains&&domain.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new EventHandlers,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function $getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)};function emitNone(e,t,r){if(t)e.call(r);else for(var i=e.length,s=arrayClone(e,i),c=0;c<i;++c)s[c].call(r)}function emitOne(e,t,r,i){if(t)e.call(r,i);else for(var s=e.length,c=arrayClone(e,s),d=0;d<s;++d)c[d].call(r,i)}function emitTwo(e,t,r,i,s){if(t)e.call(r,i,s);else for(var c=e.length,d=arrayClone(e,c),m=0;m<c;++m)d[m].call(r,i,s)}function emitThree(e,t,r,i,s,c){if(t)e.call(r,i,s,c);else for(var d=e.length,m=arrayClone(e,d),y=0;y<d;++y)m[y].call(r,i,s,c)}function emitMany(e,t,r,i){if(t)e.apply(r,i);else for(var s=e.length,c=arrayClone(e,s),d=0;d<s;++d)c[d].apply(r,i)}EventEmitter.prototype.emit=function(t){var r,i,s,c,d,m,y,g=t==="error";if(m=this._events,m)g=g&&m.error==null;else if(!g)return!1;if(y=this.domain,g){if(r=arguments[1],y)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=y,r.domainThrown=!1,y.emit("error",r);else{if(r instanceof Error)throw r;var b=new Error('Uncaught, unspecified "error" event. ('+r+")");throw b.context=r,b}return!1}if(i=m[t],!i)return!1;var j=typeof i=="function";switch(s=arguments.length,s){case 1:emitNone(i,j,this);break;case 2:emitOne(i,j,this,arguments[1]);break;case 3:emitTwo(i,j,this,arguments[1],arguments[2]);break;case 4:emitThree(i,j,this,arguments[1],arguments[2],arguments[3]);break;default:for(c=new Array(s-1),d=1;d<s;d++)c[d-1]=arguments[d];emitMany(i,j,this,c)}return!0};function _addListener(e,t,r,i){var s,c,d;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(c=e._events,c?(c.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),c=e._events),d=c[t]):(c=e._events=new EventHandlers,e._eventsCount=0),!d)d=c[t]=r,++e._eventsCount;else if(typeof d=="function"?d=c[t]=i?[r,d]:[d,r]:i?d.unshift(r):d.push(r),!d.warned&&(s=$getMaxListeners(e),s&&s>0&&d.length>s)){d.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=e,m.type=t,m.count=d.length,emitWarning(m)}return e}function emitWarning(e){typeof console.warn=="function"?console.warn(e):console.log(e)}EventEmitter.prototype.addListener=function(t,r){return _addListener(this,t,r,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(t,r){return _addListener(this,t,r,!0)};function _onceWrap(e,t,r){var i=!1;function s(){e.removeListener(t,s),i||(i=!0,r.apply(e,arguments))}return s.listener=r,s}EventEmitter.prototype.once=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,_onceWrap(this,t,r)),this};EventEmitter.prototype.prependOnceListener=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_onceWrap(this,t,r)),this};EventEmitter.prototype.removeListener=function(t,r){var i,s,c,d,m;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(s=this._events,!s)return this;if(i=s[t],!i)return this;if(i===r||i.listener&&i.listener===r)--this._eventsCount===0?this._events=new EventHandlers:(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(c=-1,d=i.length;d-- >0;)if(i[d]===r||i[d].listener&&i[d].listener===r){m=i[d].listener,c=d;break}if(c<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new EventHandlers,this;delete s[t]}else spliceOne(i,c);s.removeListener&&this.emit("removeListener",t,m||r)}return this};EventEmitter.prototype.off=function(e,t){return this.removeListener(e,t)};EventEmitter.prototype.removeAllListeners=function(t){var r,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new EventHandlers,this._eventsCount=0):i[t]&&(--this._eventsCount===0?this._events=new EventHandlers:delete i[t]),this;if(arguments.length===0){for(var s=Object.keys(i),c=0,d;c<s.length;++c)d=s[c],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=new EventHandlers,this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r)do this.removeListener(t,r[r.length-1]);while(r[0]);return this};EventEmitter.prototype.listeners=function(t){var r,i,s=this._events;return s?(r=s[t],r?typeof r=="function"?i=[r.listener||r]:i=unwrapListeners(r):i=[]):i=[],i};EventEmitter.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):listenerCount$1.call(e,t)};EventEmitter.prototype.listenerCount=listenerCount$1;function listenerCount$1(e){var t=this._events;if(t){var r=t[e];if(typeof r=="function")return 1;if(r)return r.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(e,t){for(var r=t,i=r+1,s=e.length;i<s;r+=1,i+=1)e[r]=e[i];e.pop()}function arrayClone(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function unwrapListeners(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};BufferList.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r};BufferList.prototype.concat=function(e){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;for(var t=Buffer.allocUnsafe(e>>>0),r=this.head,i=0;r;)r.data.copy(t,i),i+=r.data.length,r=r.next;return t};var isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function StringDecoder(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0}StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var s=t.charCodeAt(t.length-1);if(s>=55296&&s<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,s=t.charCodeAt(i);if(s>=55296&&s<=56319){var c=this.surrogateSize;return this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),e.copy(this.charBuffer,0,0,c),t.substring(0,i)}return t};StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(t==1&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t};StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,i=this.charBuffer,s=this.encoding;t+=i.slice(0,r).toString(s)}return t};function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Readable.ReadableState=ReadableState;var debug=debuglog("stream");inherits$1(Readable,EventEmitter);function prependListener(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function listenerCount(e,t){return e.listeners(t).length}function ReadableState(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),EventEmitter.call(this)}Readable.prototype.push=function(e,t){var r=this._readableState;return!r.objectMode&&typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Buffer.from(e,t),t="")),readableAddChunk(this,r,e,t,!1)};Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(e,t,r,i,s){var c=chunkInvalid(t,r);if(c)e.emit("error",c);else if(r===null)t.reading=!1,onEofChunk(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!s){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&s){var m=new Error("stream.unshift() after end event");e.emit("error",m)}else{var y;t.decoder&&!s&&!i&&(r=t.decoder.write(r),y=!t.objectMode&&r.length===0),s||(t.reading=!1),y||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,s?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e))),maybeReadMore(e,t)}else s||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}Readable.prototype.setEncoding=function(e){return this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?endReadable(this):emitReadable(this),null;if(e=howMuchToRead(e,t),e===0&&t.ended)return t.length===0&&endReadable(this),null;var i=t.needReadable;debug("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,debug("length less than watermark",i)),t.ended||t.reading?(i=!1,debug("reading or ended",i)):i&&(debug("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t)));var s;return e>0?s=fromList(e,t):s=null,s===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),s!==null&&this.emit("data",s),s};function chunkInvalid(e,t){var r=null;return!Buffer.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,debug("pipe count=%d opts=%j",i.pipesCount,t);var s=!t||t.end!==!1,c=s?m:b;i.endEmitted?nextTick(c):r.once("end",c),e.on("unpipe",d);function d($){debug("onunpipe"),$===r&&b()}function m(){debug("onend"),e.end()}var y=pipeOnDrain(r);e.on("drain",y);var g=!1;function b(){debug("cleanup"),e.removeListener("close",D),e.removeListener("finish",N),e.removeListener("drain",y),e.removeListener("error",R),e.removeListener("unpipe",d),r.removeListener("end",m),r.removeListener("end",b),r.removeListener("data",B),g=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&y()}var j=!1;r.on("data",B);function B($){debug("ondata"),j=!1;var q=e.write($);q===!1&&!j&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&indexOf$1(i.pipes,e)!==-1)&&!g&&(debug("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,j=!0),r.pause())}function R($){debug("onerror",$),E(),e.removeListener("error",R),listenerCount(e,"error")===0&&e.emit("error",$)}prependListener(e,"error",R);function D(){e.removeListener("finish",N),E()}e.once("close",D);function N(){debug("onfinish"),e.removeListener("close",D),E()}e.once("finish",N);function E(){debug("unpipe"),r.unpipe(e)}return e.emit("pipe",r),i.flowing||(debug("pipe resume"),r.resume()),e};function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,flow(e))}}Readable.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this);return this}var c=indexOf$1(t.pipes,e);return c===-1?this:(t.pipes.splice(c,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};Readable.prototype.on=function(e,t){var r=EventEmitter.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):nextTick(nReadingNextTick,this))}return r};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this};function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&e.read()!==null;);}Readable.prototype.wrap=function(e){var t=this._readableState,r=!1,i=this;e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var d=t.decoder.end();d&&d.length&&i.push(d)}i.push(null)}),e.on("data",function(d){if(debug("wrapped data"),t.decoder&&(d=t.decoder.write(d)),!(t.objectMode&&d==null)&&!(!t.objectMode&&(!d||!d.length))){var m=i.push(d);m||(r=!0,e.pause())}});for(var s in e)this[s]===void 0&&typeof e[s]=="function"&&(this[s]=function(d){return function(){return e[d].apply(e,arguments)}}(s));var c=["error","close","destroy","pause","resume"];return forEach(c,function(d){e.on(d,i.emit.bind(i,d))}),i._read=function(d){debug("wrapped _read",d),r&&(r=!1,e.resume())},i};Readable._fromList=fromList;function fromList(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=fromListPartial(e,t.buffer,t.decoder),r}function fromListPartial(e,t,r){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?i=t.shift():i=r?copyFromBufferString(e,t):copyFromBuffer(e,t),i}function copyFromBufferString(e,t){var r=t.head,i=1,s=r.data;for(e-=s.length;r=r.next;){var c=r.data,d=e>c.length?c.length:e;if(d===c.length?s+=c:s+=c.slice(0,e),e-=d,e===0){d===c.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=c.slice(d));break}++i}return t.length-=i,s}function copyFromBuffer(e,t){var r=Buffer.allocUnsafe(e),i=t.head,s=1;for(i.data.copy(r),e-=i.data.length;i=i.next;){var c=i.data,d=e>c.length?c.length:e;if(c.copy(r,r.length-e,0,d),e-=d,e===0){d===c.length?(++s,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=c.slice(d));break}++s}return t.length-=s,r}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,nextTick(endReadableNT,t,e))}function endReadableNT(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function forEach(e,t){for(var r=0,i=e.length;r<i;r++)t(e[r],r)}function indexOf$1(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}Writable.WritableState=WritableState;inherits$1(Writable,EventEmitter);function nop(){}function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function WritableState(e,t){Object.defineProperty(this,"buffer",{get:deprecate$1(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(c){onwrite(t,c)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};function Writable(e){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),nextTick(t,r)}function validChunk(e,t,r,i){var s=!0,c=!1;return r===null?c=new TypeError("May not write null values to stream"):!Buffer.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!t.objectMode&&(c=new TypeError("Invalid non-string/buffer chunk")),c&&(e.emit("error",c),nextTick(i,c),s=!1),s}Writable.prototype.write=function(e,t,r){var i=this._writableState,s=!1;return typeof t=="function"&&(r=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),typeof r!="function"&&(r=nop),i.ended?writeAfterEnd(this,r):validChunk(this,i,e,r)&&(i.pendingcb++,s=writeOrBuffer(this,i,e,t,r)),s};Writable.prototype.cork=function(){var e=this._writableState;e.corked++};Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&clearBuffer(this,e))};Writable.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function decodeChunk(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Buffer.from(t,r)),t}function writeOrBuffer(e,t,r,i,s){r=decodeChunk(t,r,i),Buffer.isBuffer(r)&&(i="buffer");var c=t.objectMode?1:r.length;t.length+=c;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var m=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(r,i,s),m?m.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,c,r,i,s);return d}function doWrite(e,t,r,i,s,c,d){t.writelen=i,t.writecb=d,t.writing=!0,t.sync=!0,r?e._writev(s,t.onwrite):e._write(s,c,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,s){--t.pendingcb,r?nextTick(s,i):s(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,s);else{var c=needFinish(r);!c&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&clearBuffer(e,r),i?nextTick(afterWrite,e,r,c,s):afterWrite(e,r,c,s)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),c=t.corkedRequestsFree;c.entry=r;for(var d=0;r;)s[d]=r,r=r.next,d+=1;doWrite(e,t,!0,t.length,s,"",c.finish),t.pendingcb++,t.lastBufferedRequest=null,c.next?(t.corkedRequestsFree=c.next,c.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;r;){var m=r.chunk,y=r.encoding,g=r.callback,b=t.objectMode?1:m.length;if(doWrite(e,t,!1,b,m,y,g),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}Writable.prototype._write=function(e,t,r){r(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,r){var i=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&endWritable(this,i,r)};function needFinish(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var r=needFinish(t);return r&&(t.pendingcb===0?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var i=t.entry;for(t.entry=null;i;){var s=i.callback;e.pendingcb--,s(r),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}inherits$1(Duplex,Readable);var keys$1=Object.keys(Writable.prototype);for(var v=0;v<keys$1.length;v++){var method=keys$1[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||nextTick(onEndNT,this)}function onEndNT(e){e.end()}inherits$1(Transform,Duplex);function TransformState(e){this.afterTransform=function(t,r){return afterTransform(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(e,t,r){var i=e._transformState;i.transforming=!1;var s=i.writecb;if(!s)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,r!=null&&e.push(r),s(t);var c=e._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&e._read(c.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);Duplex.call(this,e),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){done(t,r)}):done(t)})}Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,t)};Transform.prototype._transform=function(e,t,r){throw new Error("Not implemented")};Transform.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var s=this._readableState;(i.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};Transform.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function done(e,t){if(t)return e.emit("error",t);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}inherits$1(PassThrough,Transform);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform.call(this,e)}PassThrough.prototype._transform=function(e,t,r){r(null,e)};inherits$1(Stream,EventEmitter);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter.call(this)}Stream.prototype.pipe=function(e,t){var r=this;function i(b){e.writable&&e.write(b)===!1&&r.pause&&r.pause()}r.on("data",i);function s(){r.readable&&r.resume&&r.resume()}e.on("drain",s),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",d),r.on("close",m));var c=!1;function d(){c||(c=!0,e.end())}function m(){c||(c=!0,typeof e.destroy=="function"&&e.destroy())}function y(b){if(g(),EventEmitter.listenerCount(this,"error")===0)throw b}r.on("error",y),e.on("error",y);function g(){r.removeListener("data",i),e.removeListener("drain",s),r.removeListener("end",d),r.removeListener("close",m),r.removeListener("error",y),e.removeListener("error",y),r.removeListener("end",g),r.removeListener("close",g),e.removeListener("close",g)}return r.on("end",g),r.on("close",g),e.on("close",g),e.emit("pipe",r),e};var rStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function IncomingMessage(e,t,r){var i=this;Readable.call(i),i._mode=r,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){browser$1.nextTick(function(){i.emit("close")})});var s;if(r==="fetch"){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var c,d,m=t.headers[Symbol.iterator]();c=(d=m.next()).value,!d.done;)i.headers[c[0].toLowerCase()]=c[1],i.rawHeaders.push(c[0],c[1]);var y=t.body.getReader();s=function(){y.read().then(function(B){if(!i._destroyed){if(B.done){i.push(null);return}i.push(new Buffer(B.value)),s()}})},s()}else{i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText;var g=e.getAllResponseHeaders().split(/\r?\n/);if(g.forEach(function(B){var R=B.match(/^([^:]+):\s*(.*)/);if(R){var D=R[1].toLowerCase();D==="set-cookie"?(i.headers[D]===void 0&&(i.headers[D]=[]),i.headers[D].push(R[2])):i.headers[D]!==void 0?i.headers[D]+=", "+R[2]:i.headers[D]=R[2],i.rawHeaders.push(R[1],R[2])}}),i._charset="x-user-defined",!overrideMimeType){var b=i.rawHeaders["mime-type"];if(b){var j=b.match(/;\s*charset=([^;])(;|$)/);j&&(i._charset=j[1].toLowerCase())}i._charset||(i._charset="utf-8")}}}inherits$1(IncomingMessage,Readable);IncomingMessage.prototype._read=function(){};IncomingMessage.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==rStates.DONE)break;try{r=new global$1.VBArray(t.responseBody).toArray()}catch{}if(r!==null){e.push(new Buffer(r));break}case"text":try{r=t.responseText}catch{e._mode="text:vbarray";break}if(r.length>e._pos){var i=r.substr(e._pos);if(e._charset==="x-user-defined"){for(var s=new Buffer(i.length),c=0;c<i.length;c++)s[c]=i.charCodeAt(c)&255;e.push(s)}else e.push(i,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==rStates.DONE||!t.response)break;r=t.response,e.push(new Buffer(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==rStates.LOADING||!r)break;e.push(new Buffer(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==rStates.LOADING)break;var d=new global$1.MSStreamReader;d.onprogress=function(){d.result.byteLength>e._pos&&(e.push(new Buffer(new Uint8Array(d.result.slice(e._pos)))),e._pos=d.result.byteLength)},d.onload=function(){e.push(null)},d.readAsArrayBuffer(r);break}e._xhr.readyState===rStates.DONE&&e._mode!=="ms-stream"&&e.push(null)};function toArrayBuffer(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,i=0;i<r;i++)t[i]=e[i];return t.buffer}else throw new Error("Argument must be a Buffer")}function decideMode(e,t){return hasFetch&&t?"fetch":mozchunkedarraybuffer?"moz-chunked-arraybuffer":msstream?"ms-stream":arraybuffer&&e?"arraybuffer":vbArray&&e?"text:vbarray":"text"}function ClientRequest(e){var t=this;Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new Buffer(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(s){t.setHeader(s,e.headers[s])});var r,i=!0;if(e.mode==="disable-fetch")i=!1,r=!0;else if(e.mode==="prefer-streaming")r=!1;else if(e.mode==="allow-wrong-content-type")r=!overrideMimeType;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")r=!0;else throw new Error("Invalid value for opts.mode");t._mode=decideMode(r,i),t.on("finish",function(){t._onFinish()})}inherits$1(ClientRequest,Writable);var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];ClientRequest.prototype.setHeader=function(e,t){var r=this,i=e.toLowerCase();unsafeHeaders.indexOf(i)===-1&&(r._headers[i]={name:e,value:t})};ClientRequest.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value};ClientRequest.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]};ClientRequest.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,r=e._headers,i;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(blobConstructor()?i=new global$1.Blob(e._body.map(function(d){return toArrayBuffer(d)}),{type:(r["content-type"]||{}).value||""}):i=Buffer.concat(e._body).toString()),e._mode==="fetch"){var s=Object.keys(r).map(function(d){return[r[d].name,r[d].value]});global$1.fetch(e._opts.url,{method:e._opts.method,headers:s,body:i,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(d){e._fetchResponse=d,e._connect()},function(d){e.emit("error",d)})}else{var c=e._xhr=new global$1.XMLHttpRequest;try{c.open(e._opts.method,e._opts.url,!0)}catch(d){browser$1.nextTick(function(){e.emit("error",d)});return}"responseType"in c&&(c.responseType=e._mode.split(":")[0]),"withCredentials"in c&&(c.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(r).forEach(function(d){c.setRequestHeader(r[d].name,r[d].value)}),e._response=null,c.onreadystatechange=function(){switch(c.readyState){case rStates.LOADING:case rStates.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(c.onprogress=function(){e._onXHRProgress()}),c.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{c.send(i)}catch(d){browser$1.nextTick(function(){e.emit("error",d)});return}}}};function statusValid(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}ClientRequest.prototype._onXHRProgress=function(){var e=this;!statusValid(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())};ClientRequest.prototype._connect=function(){var e=this;e._destroyed||(e._response=new IncomingMessage(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))};ClientRequest.prototype._write=function(e,t,r){var i=this;i._body.push(e),r()};ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()};ClientRequest.prototype.end=function(e,t,r){var i=this;typeof e=="function"&&(r=e,e=void 0),Writable.prototype.end.call(i,e,t,r)};ClientRequest.prototype.flushHeaders=function(){};ClientRequest.prototype.setTimeout=function(){};ClientRequest.prototype.setNoDelay=function(){};ClientRequest.prototype.setSocketKeepAlive=function(){};/*! https://mths.be/punycode v1.4.1 by @mathias */var maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map$1(e,t){for(var r=e.length,i=[];r--;)i[r]=t(e[r]);return i}function mapDomain(e,t){var r=e.split("@"),i="";r.length>1&&(i=r[0]+"@",e=r[1]),e=e.replace(regexSeparators,".");var s=e.split("."),c=map$1(s,t).join(".");return i+c}function ucs2decode(e){for(var t=[],r=0,i=e.length,s,c;r<i;)s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<i?(c=e.charCodeAt(r++),(c&64512)==56320?t.push(((s&1023)<<10)+(c&1023)+65536):(t.push(s),r--)):t.push(s);return t}function digitToBasic(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function adapt(e,t,r){var i=0;for(e=r?floor(e/damp):e>>1,e+=floor(e/t);e>baseMinusTMin*tMax>>1;i+=base)e=floor(e/baseMinusTMin);return floor(i+(baseMinusTMin+1)*e/(e+skew))}function encode(e){var t,r,i,s,c,d,m,y,g,b,j,B=[],R,D,N,E;for(e=ucs2decode(e),R=e.length,t=initialN,r=0,c=initialBias,d=0;d<R;++d)j=e[d],j<128&&B.push(stringFromCharCode(j));for(i=s=B.length,s&&B.push(delimiter);i<R;){for(m=maxInt,d=0;d<R;++d)j=e[d],j>=t&&j<m&&(m=j);for(D=i+1,m-t>floor((maxInt-r)/D)&&error("overflow"),r+=(m-t)*D,t=m,d=0;d<R;++d)if(j=e[d],j<t&&++r>maxInt&&error("overflow"),j==t){for(y=r,g=base;b=g<=c?tMin:g>=c+tMax?tMax:g-c,!(y<b);g+=base)E=y-b,N=base-b,B.push(stringFromCharCode(digitToBasic(b+E%N,0))),y=floor(E/N);B.push(stringFromCharCode(digitToBasic(y,0))),c=adapt(r,D,i==s),r=0,++i}++r,++t}return B.join("")}function toASCII(e){return mapDomain(e,function(t){return regexNonASCII.test(t)?"xn--"+encode(t):t})}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var isArray$3=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function stringifyPrimitive(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function stringify(e,t,r,i){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?map$2(objectKeys(e),function(s){var c=encodeURIComponent(stringifyPrimitive(s))+r;return isArray$3(e[s])?map$2(e[s],function(d){return c+encodeURIComponent(stringifyPrimitive(d))}).join(t):c+encodeURIComponent(stringifyPrimitive(e[s]))}).join(t):i?encodeURIComponent(stringifyPrimitive(i))+r+encodeURIComponent(stringifyPrimitive(e)):""}function map$2(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var objectKeys=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function parse$1(e,t,r,i){t=t||"&",r=r||"=";var s={};if(typeof e!="string"||e.length===0)return s;var c=/\+/g;e=e.split(t);var d=1e3;i&&typeof i.maxKeys=="number"&&(d=i.maxKeys);var m=e.length;d>0&&m>d&&(m=d);for(var y=0;y<m;++y){var g=e[y].replace(c,"%20"),b=g.indexOf(r),j,B,R,D;b>=0?(j=g.substr(0,b),B=g.substr(b+1)):(j=g,B=""),R=decodeURIComponent(j),D=decodeURIComponent(B),hasOwnProperty(s,R)?isArray$3(s[R])?s[R].push(D):s[R]=[s[R],D]:s[R]=D}return s}const URL$1=global$1.URL,URLSearchParams=global$1.URLSearchParams;var _polyfillNode_url={parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,fileURLToPath:urlFileURLToPath,format:urlFormat,Url,URL:URL$1,URLSearchParams};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t,r){if(e&&isObject$1(e)&&e instanceof Url)return e;var i=new Url;return i.parse(e,t,r),i}Url.prototype.parse=function(e,t,r){return parse(this,e,t,r)};function parse(e,t,r,i){if(!isString$1(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),c=s!==-1&&s<t.indexOf("#")?"?":"#",d=t.split(c),m=/\\/g;d[0]=d[0].replace(m,"/"),t=d.join(c);var y=t;if(y=y.trim(),!i&&t.split("#").length===1){var g=simplePathPattern.exec(y);if(g)return e.path=y,e.href=y,e.pathname=g[1],g[2]?(e.search=g[2],r?e.query=parse$1(e.search.substr(1)):e.query=e.search.substr(1)):r&&(e.search="",e.query={}),e}var b=protocolPattern.exec(y);if(b){b=b[0];var j=b.toLowerCase();e.protocol=j,y=y.substr(b.length)}if(i||b||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var B=y.substr(0,2)==="//";B&&!(b&&hostlessProtocol[b])&&(y=y.substr(2),e.slashes=!0)}var R,D,N,E;if(!hostlessProtocol[b]&&(B||b&&!slashedProtocol[b])){var $=-1;for(R=0;R<hostEndingChars.length;R++)D=y.indexOf(hostEndingChars[R]),D!==-1&&($===-1||D<$)&&($=D);var q,Y;for($===-1?Y=y.lastIndexOf("@"):Y=y.lastIndexOf("@",$),Y!==-1&&(q=y.slice(0,Y),y=y.slice(Y+1),e.auth=decodeURIComponent(q)),$=-1,R=0;R<nonHostChars.length;R++)D=y.indexOf(nonHostChars[R]),D!==-1&&($===-1||D<$)&&($=D);$===-1&&($=y.length),e.host=y.slice(0,$),y=y.slice($),parseHost(e),e.hostname=e.hostname||"";var T=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!T){var w=e.hostname.split(/\./);for(R=0,N=w.length;R<N;R++){var C=w[R];if(C&&!C.match(hostnamePartPattern)){for(var A="",S=0,F=C.length;S<F;S++)C.charCodeAt(S)>127?A+="x":A+=C[S];if(!A.match(hostnamePartPattern)){var Z=w.slice(0,R),P=w.slice(R+1),ie=C.match(hostnamePartStart);ie&&(Z.push(ie[1]),P.unshift(ie[2])),P.length&&(y="/"+P.join(".")+y),e.hostname=Z.join(".");break}}}}e.hostname.length>hostnameMaxLen?e.hostname="":e.hostname=e.hostname.toLowerCase(),T||(e.hostname=toASCII(e.hostname)),E=e.port?":"+e.port:"";var ue=e.hostname||"";e.host=ue+E,e.href+=e.host,T&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),y[0]!=="/"&&(y="/"+y))}if(!unsafeProtocol[j])for(R=0,N=autoEscape.length;R<N;R++){var pe=autoEscape[R];if(y.indexOf(pe)!==-1){var _e=encodeURIComponent(pe);_e===pe&&(_e=escape(pe)),y=y.split(pe).join(_e)}}var we=y.indexOf("#");we!==-1&&(e.hash=y.substr(we),y=y.slice(0,we));var Pe=y.indexOf("?");if(Pe!==-1?(e.search=y.substr(Pe),e.query=y.substr(Pe+1),r&&(e.query=parse$1(e.query)),y=y.slice(0,Pe)):r&&(e.search="",e.query={}),y&&(e.pathname=y),slashedProtocol[j]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){E=e.pathname||"";var Se=e.search||"";e.path=E+Se}return e.href=format$2(e),e}function urlFileURLToPath(e){if(typeof e=="string")e=new Url().parse(e);else if(!(e instanceof Url))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+String(e));if(e.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(e)}function getPathFromURLPosix(e){const t=e.pathname;for(let r=0;r<t.length;r++)if(t[r]==="%"){const i=t.codePointAt(r+2)|32;if(t[r+1]==="2"&&i===102)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(t)}function urlFormat(e){return isString$1(e)&&(e=parse({},e)),format$2(e)}function format$2(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=e.protocol||"",i=e.pathname||"",s=e.hash||"",c=!1,d="";e.host?c=t+e.host:e.hostname&&(c=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(c+=":"+e.port)),e.query&&isObject$1(e.query)&&Object.keys(e.query).length&&(d=stringify(e.query));var m=e.search||d&&"?"+d||"";return r&&r.substr(-1)!==":"&&(r+=":"),e.slashes||(!r||slashedProtocol[r])&&c!==!1?(c="//"+(c||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):c||(c=""),s&&s.charAt(0)!=="#"&&(s="#"+s),m&&m.charAt(0)!=="?"&&(m="?"+m),i=i.replace(/[?#]/g,function(y){return encodeURIComponent(y)}),m=m.replace("#","%23"),r+c+i+m+s}Url.prototype.format=function(){return format$2(this)};function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()};function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}Url.prototype.resolveObject=function(e){if(isString$1(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var r=new Url,i=Object.keys(this),s=0;s<i.length;s++){var c=i[s];r[c]=this[c]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var d=Object.keys(e),m=0;m<d.length;m++){var y=d[m];y!=="protocol"&&(r[y]=e[y])}return slashedProtocol[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}var g;if(e.protocol&&e.protocol!==r.protocol){if(!slashedProtocol[e.protocol]){for(var b=Object.keys(e),j=0;j<b.length;j++){var B=b[j];r[B]=e[B]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!hostlessProtocol[e.protocol]){for(g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),r.pathname=g.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var R=r.pathname||"",D=r.search||"";r.path=R+D}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var N=r.pathname&&r.pathname.charAt(0)==="/",E=e.host||e.pathname&&e.pathname.charAt(0)==="/",$=E||N||r.host&&e.pathname,q=$,Y=r.pathname&&r.pathname.split("/")||[],T=r.protocol&&!slashedProtocol[r.protocol];g=e.pathname&&e.pathname.split("/")||[],T&&(r.hostname="",r.port=null,r.host&&(Y[0]===""?Y[0]=r.host:Y.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(g[0]===""?g[0]=e.host:g.unshift(e.host)),e.host=null),$=$&&(g[0]===""||Y[0]===""));var w;if(E)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,Y=g;else if(g.length)Y||(Y=[]),Y.pop(),Y=Y.concat(g),r.search=e.search,r.query=e.query;else if(!isNullOrUndefined(e.search))return T&&(r.hostname=r.host=Y.shift(),w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,w&&(r.auth=w.shift(),r.host=r.hostname=w.shift())),r.search=e.search,r.query=e.query,(!isNull(r.pathname)||!isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!Y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var C=Y.slice(-1)[0],A=(r.host||e.host||Y.length>1)&&(C==="."||C==="..")||C==="",S=0,F=Y.length;F>=0;F--)C=Y[F],C==="."?Y.splice(F,1):C===".."?(Y.splice(F,1),S++):S&&(Y.splice(F,1),S--);if(!$&&!q)for(;S--;S)Y.unshift("..");$&&Y[0]!==""&&(!Y[0]||Y[0].charAt(0)!=="/")&&Y.unshift(""),A&&Y.join("/").substr(-1)!=="/"&&Y.push("");var Z=Y[0]===""||Y[0]&&Y[0].charAt(0)==="/";return T&&(r.hostname=r.host=Z?"":Y.length?Y.shift():"",w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,w&&(r.auth=w.shift(),r.host=r.hostname=w.shift())),$=$||r.host&&Y.length,$&&!Z&&Y.unshift(""),Y.length?r.pathname=Y.join("/"):(r.pathname=null,r.path=null),(!isNull(r.pathname)||!isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Url.prototype.parseHost=function(){return parseHost(this)};function parseHost(e){var t=e.host,r=portPattern.exec(t);r&&(r=r[0],r!==":"&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}var _polyfillNode_url$1=Object.freeze({__proto__:null,URL:URL$1,URLSearchParams,Url,default:_polyfillNode_url,fileURLToPath:urlFileURLToPath,format:urlFormat,parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject});function request$1(e,t){typeof e=="string"&&(e=urlParse(e));var r=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",i=e.protocol||r,s=e.hostname||e.host,c=e.port,d=e.path||"/";s&&s.indexOf(":")!==-1&&(s="["+s+"]"),e.url=(s?i+"//"+s:"")+(c?":"+c:"")+d,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var m=new ClientRequest(e);return t&&m.on("response",t),m}function get$1$1(e,t){var r=request$1(e,t);return r.end(),r}function Agent$1(){}Agent$1.defaultMaxSockets=4;var METHODS$1=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES$1={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_http={request:request$1,get:get$1$1,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1},_polyfillNode_http$1=Object.freeze({__proto__:null,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1,default:_polyfillNode_http,get:get$1$1,request:request$1}),require$$2=getAugmentedNamespace(_polyfillNode_http$1);function request(e,t){typeof e=="string"&&(e=urlParse(e));var r=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",i=e.protocol||r,s=e.hostname||e.host,c=e.port,d=e.path||"/";s&&s.indexOf(":")!==-1&&(s="["+s+"]"),e.url=(s?i+"//"+s:"")+(c?":"+c:"")+d,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var m=new ClientRequest(e);return t&&m.on("response",t),m}function get$3(e,t){var r=request(e,t);return r.end(),r}function Agent(){}Agent.defaultMaxSockets=4;var METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_https={request,get:get$3,Agent,METHODS,STATUS_CODES},_polyfillNode_https$1=Object.freeze({__proto__:null,Agent,METHODS,STATUS_CODES,default:_polyfillNode_https,get:get$3,request}),require$$3=getAugmentedNamespace(_polyfillNode_https$1),require$$4=getAugmentedNamespace(_polyfillNode_url$1),msg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function arraySet(e,t,r,i,s){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+i),s);return}for(var c=0;c<i;c++)e[s+c]=t[r+c]}var Buf8=Uint8Array,Buf16=Uint16Array,Buf32=Int32Array,Z_FIXED$2=4,Z_BINARY$1=0,Z_TEXT$1=1,Z_UNKNOWN$2=2;function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,r,i,s){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=s,this.has_stree=e&&e.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,r){e.bi_valid>Buf_size-r?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=r-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function send_code(e,t,r){send_bits(e,r[t*2],r[t*2+1])}function bi_reverse(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function bi_flush(e){e.bi_valid===16?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var r=t.dyn_tree,i=t.max_code,s=t.stat_desc.static_tree,c=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,y=t.stat_desc.max_length,g,b,j,B,R,D,N=0;for(B=0;B<=MAX_BITS$1;B++)e.bl_count[B]=0;for(r[e.heap[e.heap_max]*2+1]=0,g=e.heap_max+1;g<HEAP_SIZE$1;g++)b=e.heap[g],B=r[r[b*2+1]*2+1]+1,B>y&&(B=y,N++),r[b*2+1]=B,!(b>i)&&(e.bl_count[B]++,R=0,b>=m&&(R=d[b-m]),D=r[b*2],e.opt_len+=D*(B+R),c&&(e.static_len+=D*(s[b*2+1]+R)));if(N!==0){do{for(B=y-1;e.bl_count[B]===0;)B--;e.bl_count[B]--,e.bl_count[B+1]+=2,e.bl_count[y]--,N-=2}while(N>0);for(B=y;B!==0;B--)for(b=e.bl_count[B];b!==0;)j=e.heap[--g],!(j>i)&&(r[j*2+1]!==B&&(e.opt_len+=(B-r[j*2+1])*r[j*2],r[j*2+1]=B),b--)}}function gen_codes(e,t,r){var i=new Array(MAX_BITS$1+1),s=0,c,d;for(c=1;c<=MAX_BITS$1;c++)i[c]=s=s+r[c-1]<<1;for(d=0;d<=t;d++){var m=e[d*2+1];m!==0&&(e[d*2]=bi_reverse(i[m]++,m))}}function tr_static_init(){var e,t,r,i,s,c=new Array(MAX_BITS$1+1);for(r=0,i=0;i<LENGTH_CODES$1-1;i++)for(base_length[i]=r,e=0;e<1<<extra_lbits[i];e++)_length_code[r++]=i;for(_length_code[r-1]=i,s=0,i=0;i<16;i++)for(base_dist[i]=s,e=0;e<1<<extra_dbits[i];e++)_dist_code[s++]=i;for(s>>=7;i<D_CODES$1;i++)for(base_dist[i]=s<<7,e=0;e<1<<extra_dbits[i]-7;e++)_dist_code[256+s++]=i;for(t=0;t<=MAX_BITS$1;t++)c[t]=0;for(e=0;e<=143;)static_ltree[e*2+1]=8,e++,c[8]++;for(;e<=255;)static_ltree[e*2+1]=9,e++,c[9]++;for(;e<=279;)static_ltree[e*2+1]=7,e++,c[7]++;for(;e<=287;)static_ltree[e*2+1]=8,e++,c[8]++;for(gen_codes(static_ltree,L_CODES$1+1,c),e=0;e<D_CODES$1;e++)static_dtree[e*2+1]=5,static_dtree[e*2]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[t*2]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[t*2]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[t*2]=0;e.dyn_ltree[END_BLOCK*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,r,i){bi_windup(e),i&&(put_short(e,r),put_short(e,~r)),arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function smaller(e,t,r,i){var s=t*2,c=r*2;return e[s]<e[c]||e[s]===e[c]&&i[t]<=i[r]}function pqdownheap(e,t,r){for(var i=e.heap[r],s=r<<1;s<=e.heap_len&&(s<e.heap_len&&smaller(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!smaller(t,i,e.heap[s],e.depth));)e.heap[r]=e.heap[s],r=s,s<<=1;e.heap[r]=i}function compress_block(e,t,r){var i,s,c=0,d,m;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+c*2]<<8|e.pending_buf[e.d_buf+c*2+1],s=e.pending_buf[e.l_buf+c],c++,i===0?send_code(e,s,t):(d=_length_code[s],send_code(e,d+LITERALS$1+1,t),m=extra_lbits[d],m!==0&&(s-=base_length[d],send_bits(e,s,m)),i--,d=d_code(i),send_code(e,d,r),m=extra_dbits[d],m!==0&&(i-=base_dist[d],send_bits(e,i,m)));while(c<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var r=t.dyn_tree,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,d,m,y=-1,g;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,d=0;d<c;d++)r[d*2]!==0?(e.heap[++e.heap_len]=y=d,e.depth[d]=0):r[d*2+1]=0;for(;e.heap_len<2;)g=e.heap[++e.heap_len]=y<2?++y:0,r[g*2]=1,e.depth[g]=0,e.opt_len--,s&&(e.static_len-=i[g*2+1]);for(t.max_code=y,d=e.heap_len>>1;d>=1;d--)pqdownheap(e,r,d);g=c;do d=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,r,1),m=e.heap[1],e.heap[--e.heap_max]=d,e.heap[--e.heap_max]=m,r[g*2]=r[d*2]+r[m*2],e.depth[g]=(e.depth[d]>=e.depth[m]?e.depth[d]:e.depth[m])+1,r[d*2+1]=r[m*2+1]=g,e.heap[1]=g++,pqdownheap(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(r,y,e.bl_count)}function scan_tree(e,t,r){var i,s=-1,c,d=t[0*2+1],m=0,y=7,g=4;for(d===0&&(y=138,g=3),t[(r+1)*2+1]=65535,i=0;i<=r;i++)c=d,d=t[(i+1)*2+1],!(++m<y&&c===d)&&(m<g?e.bl_tree[c*2]+=m:c!==0?(c!==s&&e.bl_tree[c*2]++,e.bl_tree[REP_3_6*2]++):m<=10?e.bl_tree[REPZ_3_10*2]++:e.bl_tree[REPZ_11_138*2]++,m=0,s=c,d===0?(y=138,g=3):c===d?(y=6,g=3):(y=7,g=4))}function send_tree(e,t,r){var i,s=-1,c,d=t[0*2+1],m=0,y=7,g=4;for(d===0&&(y=138,g=3),i=0;i<=r;i++)if(c=d,d=t[(i+1)*2+1],!(++m<y&&c===d)){if(m<g)do send_code(e,c,e.bl_tree);while(--m!==0);else c!==0?(c!==s&&(send_code(e,c,e.bl_tree),m--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,m-3,2)):m<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,m-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,m-11,7));m=0,s=c,d===0?(y=138,g=3):c===d?(y=6,g=3):(y=7,g=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&e.bl_tree[bl_order[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,r,i){var s;for(send_bits(e,t-257,5),send_bits(e,r-1,5),send_bits(e,i-4,4),s=0;s<i;s++)send_bits(e,e.bl_tree[bl_order[s]*2+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,r-1)}function detect_data_type(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Z_BINARY$1;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Z_TEXT$1;for(r=32;r<LITERALS$1;r++)if(e.dyn_ltree[r*2]!==0)return Z_TEXT$1;return Z_BINARY$1}var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,r,i){send_bits(e,(STORED_BLOCK<<1)+(i?1:0),3),copy_block(e,t,r,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,r,i){var s,c,d=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$2&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),d=build_bl_tree(e),s=e.opt_len+3+7>>>3,c=e.static_len+3+7>>>3,c<=s&&(s=c)):s=c=r+5,r+4<=s&&t!==-1?_tr_stored_block(e,t,r,i):e.strategy===Z_FIXED$2||c===s?(send_bits(e,(STATIC_TREES<<1)+(i?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(i?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,d+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),i&&bi_windup(e)}function _tr_tally(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(_length_code[r]+LITERALS$1+1)*2]++,e.dyn_dtree[d_code(t)*2]++),e.last_lit===e.lit_bufsize-1}function adler32(e,t,r,i){for(var s=e&65535|0,c=e>>>16&65535|0,d=0;r!==0;){d=r>2e3?2e3:r,r-=d;do s=s+t[i++]|0,c=c+s|0;while(--d);s%=65521,c%=65521}return s|c<<16|0}function makeTable(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var crcTable=makeTable();function crc32(e,t,r,i){var s=crcTable,c=i+r;e^=-1;for(var d=i;d<c;d++)e=e>>>8^s[(e^t[d])&255];return e^-1}var Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH$1=1,Z_FULL_FLUSH$1=3,Z_FINISH$2=4,Z_BLOCK$2=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$2=-2,Z_DATA_ERROR$2=-3,Z_BUF_ERROR$2=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED$1=1,Z_HUFFMAN_ONLY$1=2,Z_RLE$1=3,Z_FIXED$1=4,Z_UNKNOWN$1=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(e,t){return e.msg=msg[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function flush_block_only(e,t){_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function read_buf(e,t,r,i){var s=e.avail_in;return s>i&&(s=i),s===0?0:(e.avail_in-=s,arraySet(t,e.input,e.next_in,s,r),e.state.wrap===1?e.adler=adler32(e.adler,t,s,r):e.state.wrap===2&&(e.adler=crc32(e.adler,t,s,r)),e.next_in+=s,e.total_in+=s,s)}function longest_match(e,t){var r=e.max_chain_length,i=e.strstart,s,c,d=e.prev_length,m=e.nice_match,y=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,g=e.window,b=e.w_mask,j=e.prev,B=e.strstart+MAX_MATCH,R=g[i+d-1],D=g[i+d];e.prev_length>=e.good_match&&(r>>=2),m>e.lookahead&&(m=e.lookahead);do if(s=t,!(g[s+d]!==D||g[s+d-1]!==R||g[s]!==g[i]||g[++s]!==g[i+1])){i+=2,s++;do;while(g[++i]===g[++s]&&g[++i]===g[++s]&&g[++i]===g[++s]&&g[++i]===g[++s]&&g[++i]===g[++s]&&g[++i]===g[++s]&&g[++i]===g[++s]&&g[++i]===g[++s]&&i<B);if(c=MAX_MATCH-(B-i),i=B-MAX_MATCH,c>d){if(e.match_start=t,d=c,c>=m)break;R=g[i+d-1],D=g[i+d]}}while((t=j[t&b])>y&&--r!==0);return d<=e.lookahead?d:e.lookahead}function fill_window(e){var t=e.w_size,r,i,s,c,d;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)){arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,r=i;do s=e.head[--r],e.head[r]=s>=t?s-t:0;while(--i);i=t,r=i;do s=e.prev[--r],e.prev[r]=s>=t?s-t:0;while(--i);c+=t}if(e.strm.avail_in===0)break;if(i=read_buf(e.strm,e.window,e.strstart+e.lookahead,c),e.lookahead+=i,e.lookahead+e.insert>=MIN_MATCH)for(d=e.strstart-e.insert,e.ins_h=e.window[d],e.ins_h=(e.ins_h<<e.hash_shift^e.window[d+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[d+MIN_MATCH-1])&e.hash_mask,e.prev[d&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=d,d++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)}function deflate_stored(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),e.lookahead===0&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,flush_block_only(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(e,t){for(var r,i;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(r=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r)),e.match_length>=MIN_MATCH)if(i=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var r,i,s;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(r=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r),e.match_length<=5&&(e.strategy===Z_FILTERED$1||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-MIN_MATCH,i=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}else if(e.match_available){if(i=_tr_tally(e,0,e.window[e.strstart-1]),i&&flush_block_only(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var r,i,s,c,d=e.window;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(s=e.strstart-1,i=d[s],i===d[++s]&&i===d[++s]&&i===d[++s])){c=e.strstart+MAX_MATCH;do;while(i===d[++s]&&i===d[++s]&&i===d[++s]&&i===d[++s]&&i===d[++s]&&i===d[++s]&&i===d[++s]&&i===d[++s]&&s<c);e.match_length=MAX_MATCH-(c-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(r=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var r;;){if(e.lookahead===0&&(fill_window(e),e.lookahead===0)){if(t===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(e.match_length=0,r=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,r,i,s){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=s}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(e){e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Buf16(HEAP_SIZE*2),this.dyn_dtree=new Buf16((2*D_CODES+1)*2),this.bl_tree=new Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Buf16(MAX_BITS+1),this.heap=new Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return!e||!e.state?err(e,Z_STREAM_ERROR$2):(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=t.wrap===2?0:1,t.last_flush=Z_NO_FLUSH$1,_tr_init(t),Z_OK$2)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK$2&&lm_init(e.state),t}function deflateInit2(e,t,r,i,s,c){if(!e)return Z_STREAM_ERROR$2;var d=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),i<0?(d=0,i=-i):i>15&&(d=2,i-=16),s<1||s>MAX_MEM_LEVEL||r!==Z_DEFLATED$2||i<8||i>15||t<0||t>9||c<0||c>Z_FIXED$1)return err(e,Z_STREAM_ERROR$2);i===8&&(i=9);var m=new DeflateState;return e.state=m,m.strm=e,m.wrap=d,m.gzhead=null,m.w_bits=i,m.w_size=1<<m.w_bits,m.w_mask=m.w_size-1,m.hash_bits=s+7,m.hash_size=1<<m.hash_bits,m.hash_mask=m.hash_size-1,m.hash_shift=~~((m.hash_bits+MIN_MATCH-1)/MIN_MATCH),m.window=new Buf8(m.w_size*2),m.head=new Buf16(m.hash_size),m.prev=new Buf16(m.w_size),m.lit_bufsize=1<<s+6,m.pending_buf_size=m.lit_bufsize*4,m.pending_buf=new Buf8(m.pending_buf_size),m.d_buf=1*m.lit_bufsize,m.l_buf=(1+2)*m.lit_bufsize,m.level=t,m.strategy=c,m.method=r,deflateReset(e)}function deflate$1(e,t){var r,i,s,c;if(!e||!e.state||t>Z_BLOCK$2||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===FINISH_STATE&&t!==Z_FINISH$2)return err(e,e.avail_out===0?Z_BUF_ERROR$2:Z_STREAM_ERROR$2);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===INIT_STATE)if(i.wrap===2)e.adler=0,put_byte(i,31),put_byte(i,139),put_byte(i,8),i.gzhead?(put_byte(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),put_byte(i,i.gzhead.time&255),put_byte(i,i.gzhead.time>>8&255),put_byte(i,i.gzhead.time>>16&255),put_byte(i,i.gzhead.time>>24&255),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(put_byte(i,i.gzhead.extra.length&255),put_byte(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=crc32(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=EXTRA_STATE):(put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,OS_CODE),i.status=BUSY_STATE);else{var d=Z_DEFLATED$2+(i.w_bits-8<<4)<<8,m=-1;i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?m=0:i.level<6?m=1:i.level===6?m=2:m=3,d|=m<<6,i.strstart!==0&&(d|=PRESET_DICT),d+=31-d%31,i.status=BUSY_STATE,putShortMSB(i,d),i.strstart!==0&&(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),e.adler=1}if(i.status===EXTRA_STATE)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),flush_pending(e),s=i.pending,i.pending===i.pending_buf_size));)put_byte(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=NAME_STATE)}else i.status=NAME_STATE;if(i.status===NAME_STATE)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),flush_pending(e),s=i.pending,i.pending===i.pending_buf_size)){c=1;break}i.gzindex<i.gzhead.name.length?c=i.gzhead.name.charCodeAt(i.gzindex++)&255:c=0,put_byte(i,c)}while(c!==0);i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),c===0&&(i.gzindex=0,i.status=COMMENT_STATE)}else i.status=COMMENT_STATE;if(i.status===COMMENT_STATE)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),flush_pending(e),s=i.pending,i.pending===i.pending_buf_size)){c=1;break}i.gzindex<i.gzhead.comment.length?c=i.gzhead.comment.charCodeAt(i.gzindex++)&255:c=0,put_byte(i,c)}while(c!==0);i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),c===0&&(i.status=HCRC_STATE)}else i.status=HCRC_STATE;if(i.status===HCRC_STATE&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&flush_pending(e),i.pending+2<=i.pending_buf_size&&(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),e.adler=0,i.status=BUSY_STATE)):i.status=BUSY_STATE),i.pending!==0){if(flush_pending(e),e.avail_out===0)return i.last_flush=-1,Z_OK$2}else if(e.avail_in===0&&rank(t)<=rank(r)&&t!==Z_FINISH$2)return err(e,Z_BUF_ERROR$2);if(i.status===FINISH_STATE&&e.avail_in!==0)return err(e,Z_BUF_ERROR$2);if(e.avail_in!==0||i.lookahead!==0||t!==Z_NO_FLUSH$1&&i.status!==FINISH_STATE){var y=i.strategy===Z_HUFFMAN_ONLY$1?deflate_huff(i,t):i.strategy===Z_RLE$1?deflate_rle(i,t):configuration_table[i.level].func(i,t);if((y===BS_FINISH_STARTED||y===BS_FINISH_DONE)&&(i.status=FINISH_STATE),y===BS_NEED_MORE||y===BS_FINISH_STARTED)return e.avail_out===0&&(i.last_flush=-1),Z_OK$2;if(y===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH$1?_tr_align(i):t!==Z_BLOCK$2&&(_tr_stored_block(i,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),flush_pending(e),e.avail_out===0))return i.last_flush=-1,Z_OK$2}return t!==Z_FINISH$2?Z_OK$2:i.wrap<=0?Z_STREAM_END$2:(i.wrap===2?(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),put_byte(i,e.adler>>16&255),put_byte(i,e.adler>>24&255),put_byte(i,e.total_in&255),put_byte(i,e.total_in>>8&255),put_byte(i,e.total_in>>16&255),put_byte(i,e.total_in>>24&255)):(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),flush_pending(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(e){var t;return!e||!e.state?Z_STREAM_ERROR$2:(t=e.state.status,t!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR$2):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$2))}var BAD$1=30,TYPE$1=12;function inflate_fast(e,t){var r,i,s,c,d,m,y,g,b,j,B,R,D,N,E,$,q,Y,T,w,C,A,S,F,Z;r=e.state,i=e.next_in,F=e.input,s=i+(e.avail_in-5),c=e.next_out,Z=e.output,d=c-(t-e.avail_out),m=c+(e.avail_out-257),y=r.dmax,g=r.wsize,b=r.whave,j=r.wnext,B=r.window,R=r.hold,D=r.bits,N=r.lencode,E=r.distcode,$=(1<<r.lenbits)-1,q=(1<<r.distbits)-1;e:do{D<15&&(R+=F[i++]<<D,D+=8,R+=F[i++]<<D,D+=8),Y=N[R&$];t:for(;;){if(T=Y>>>24,R>>>=T,D-=T,T=Y>>>16&255,T===0)Z[c++]=Y&65535;else if(T&16){w=Y&65535,T&=15,T&&(D<T&&(R+=F[i++]<<D,D+=8),w+=R&(1<<T)-1,R>>>=T,D-=T),D<15&&(R+=F[i++]<<D,D+=8,R+=F[i++]<<D,D+=8),Y=E[R&q];r:for(;;){if(T=Y>>>24,R>>>=T,D-=T,T=Y>>>16&255,T&16){if(C=Y&65535,T&=15,D<T&&(R+=F[i++]<<D,D+=8,D<T&&(R+=F[i++]<<D,D+=8)),C+=R&(1<<T)-1,C>y){e.msg="invalid distance too far back",r.mode=BAD$1;break e}if(R>>>=T,D-=T,T=c-d,C>T){if(T=C-T,T>b&&r.sane){e.msg="invalid distance too far back",r.mode=BAD$1;break e}if(A=0,S=B,j===0){if(A+=g-T,T<w){w-=T;do Z[c++]=B[A++];while(--T);A=c-C,S=Z}}else if(j<T){if(A+=g+j-T,T-=j,T<w){w-=T;do Z[c++]=B[A++];while(--T);if(A=0,j<w){T=j,w-=T;do Z[c++]=B[A++];while(--T);A=c-C,S=Z}}}else if(A+=j-T,T<w){w-=T;do Z[c++]=B[A++];while(--T);A=c-C,S=Z}for(;w>2;)Z[c++]=S[A++],Z[c++]=S[A++],Z[c++]=S[A++],w-=3;w&&(Z[c++]=S[A++],w>1&&(Z[c++]=S[A++]))}else{A=c-C;do Z[c++]=Z[A++],Z[c++]=Z[A++],Z[c++]=Z[A++],w-=3;while(w>2);w&&(Z[c++]=Z[A++],w>1&&(Z[c++]=Z[A++]))}}else if(T&64){e.msg="invalid distance code",r.mode=BAD$1;break e}else{Y=E[(Y&65535)+(R&(1<<T)-1)];continue r}break}}else if(T&64)if(T&32){r.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",r.mode=BAD$1;break e}else{Y=N[(Y&65535)+(R&(1<<T)-1)];continue t}break}}while(i<s&&c<m);w=D>>3,i-=w,D-=w<<3,R&=(1<<D)-1,e.next_in=i,e.next_out=c,e.avail_in=i<s?5+(s-i):5-(i-s),e.avail_out=c<m?257+(m-c):257-(c-m),r.hold=R,r.bits=D}var MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function inflate_table(e,t,r,i,s,c,d,m){var y=m.bits,g=0,b=0,j=0,B=0,R=0,D=0,N=0,E=0,$=0,q=0,Y,T,w,C,A,S=null,F=0,Z,P=new Buf16(MAXBITS+1),ie=new Buf16(MAXBITS+1),ue=null,pe=0,_e,we,Pe;for(g=0;g<=MAXBITS;g++)P[g]=0;for(b=0;b<i;b++)P[t[r+b]]++;for(R=y,B=MAXBITS;B>=1&&P[B]===0;B--);if(R>B&&(R=B),B===0)return s[c++]=1<<24|64<<16|0,s[c++]=1<<24|64<<16|0,m.bits=1,0;for(j=1;j<B&&P[j]===0;j++);for(R<j&&(R=j),E=1,g=1;g<=MAXBITS;g++)if(E<<=1,E-=P[g],E<0)return-1;if(E>0&&(e===CODES$1||B!==1))return-1;for(ie[1]=0,g=1;g<MAXBITS;g++)ie[g+1]=ie[g]+P[g];for(b=0;b<i;b++)t[r+b]!==0&&(d[ie[t[r+b]]++]=b);if(e===CODES$1?(S=ue=d,Z=19):e===LENS$1?(S=lbase,F-=257,ue=lext,pe-=257,Z=256):(S=dbase,ue=dext,Z=-1),q=0,b=0,g=j,A=c,D=R,N=0,w=-1,$=1<<R,C=$-1,e===LENS$1&&$>ENOUGH_LENS$1||e===DISTS$1&&$>ENOUGH_DISTS$1)return 1;for(;;){_e=g-N,d[b]<Z?(we=0,Pe=d[b]):d[b]>Z?(we=ue[pe+d[b]],Pe=S[F+d[b]]):(we=32+64,Pe=0),Y=1<<g-N,T=1<<D,j=T;do T-=Y,s[A+(q>>N)+T]=_e<<24|we<<16|Pe|0;while(T!==0);for(Y=1<<g-1;q&Y;)Y>>=1;if(Y!==0?(q&=Y-1,q+=Y):q=0,b++,--P[g]===0){if(g===B)break;g=t[r+d[b]]}if(g>R&&(q&C)!==w){for(N===0&&(N=R),A+=j,D=g-N,E=1<<D;D+N<B&&(E-=P[D+N],!(E<=0));)D++,E<<=1;if($+=1<<D,e===LENS$1&&$>ENOUGH_LENS$1||e===DISTS$1&&$>ENOUGH_DISTS$1)return 1;w=q&C,s[w]=R<<24|D<<16|A-c|0}}return q!==0&&(s[A+q]=g-N<<24|64<<16|0),m.bits=R,0}var CODES=0,LENS=1,DISTS=2,Z_FINISH$1=4,Z_BLOCK$1=5,Z_TREES$1=6,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$1=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Buf16(320),this.work=new Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1)}function inflateReset(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e))}function inflateReset2(e,t){var r,i;return!e||!e.state||(i=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Z_STREAM_ERROR$1:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,inflateReset(e))}function inflateInit2(e,t){var r,i;return e?(i=new InflateState,e.state=i,i.window=null,r=inflateReset2(e,t),r!==Z_OK$1&&(e.state=null),r):Z_STREAM_ERROR$1}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new Buf32(512),distfix=new Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,r,i){var s,c=e.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Buf8(c.wsize)),i>=c.wsize?(arraySet(c.window,t,r-c.wsize,c.wsize,0),c.wnext=0,c.whave=c.wsize):(s=c.wsize-c.wnext,s>i&&(s=i),arraySet(c.window,t,r-i,s,c.wnext),i-=s,i?(arraySet(c.window,t,r-i,i,0),c.wnext=i,c.whave=c.wsize):(c.wnext+=s,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=s))),0}function inflate$1(e,t){var r,i,s,c,d,m,y,g,b,j,B,R,D,N,E=0,$,q,Y,T,w,C,A,S,F=new Buf8(4),Z,P,ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;r=e.state,r.mode===TYPE&&(r.mode=TYPEDO),d=e.next_out,s=e.output,y=e.avail_out,c=e.next_in,i=e.input,m=e.avail_in,g=r.hold,b=r.bits,j=m,B=y,S=Z_OK$1;e:for(;;)switch(r.mode){case HEAD:if(r.wrap===0){r.mode=TYPEDO;break}for(;b<16;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(r.wrap&2&&g===35615){r.check=0,F[0]=g&255,F[1]=g>>>8&255,r.check=crc32(r.check,F,2,0),g=0,b=0,r.mode=FLAGS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((g&255)<<8)+(g>>8))%31){e.msg="incorrect header check",r.mode=BAD;break}if((g&15)!==Z_DEFLATED$1){e.msg="unknown compression method",r.mode=BAD;break}if(g>>>=4,b-=4,A=(g&15)+8,r.wbits===0)r.wbits=A;else if(A>r.wbits){e.msg="invalid window size",r.mode=BAD;break}r.dmax=1<<A,e.adler=r.check=1,r.mode=g&512?DICTID:TYPE,g=0,b=0;break;case FLAGS:for(;b<16;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(r.flags=g,(r.flags&255)!==Z_DEFLATED$1){e.msg="unknown compression method",r.mode=BAD;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=BAD;break}r.head&&(r.head.text=g>>8&1),r.flags&512&&(F[0]=g&255,F[1]=g>>>8&255,r.check=crc32(r.check,F,2,0)),g=0,b=0,r.mode=TIME;case TIME:for(;b<32;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}r.head&&(r.head.time=g),r.flags&512&&(F[0]=g&255,F[1]=g>>>8&255,F[2]=g>>>16&255,F[3]=g>>>24&255,r.check=crc32(r.check,F,4,0)),g=0,b=0,r.mode=OS;case OS:for(;b<16;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}r.head&&(r.head.xflags=g&255,r.head.os=g>>8),r.flags&512&&(F[0]=g&255,F[1]=g>>>8&255,r.check=crc32(r.check,F,2,0)),g=0,b=0,r.mode=EXLEN;case EXLEN:if(r.flags&1024){for(;b<16;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}r.length=g,r.head&&(r.head.extra_len=g),r.flags&512&&(F[0]=g&255,F[1]=g>>>8&255,r.check=crc32(r.check,F,2,0)),g=0,b=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(r.flags&1024&&(R=r.length,R>m&&(R=m),R&&(r.head&&(A=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),arraySet(r.head.extra,i,c,R,A)),r.flags&512&&(r.check=crc32(r.check,i,R,c)),m-=R,c+=R,r.length-=R),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(r.flags&2048){if(m===0)break e;R=0;do A=i[c+R++],r.head&&A&&r.length<65536&&(r.head.name+=String.fromCharCode(A));while(A&&R<m);if(r.flags&512&&(r.check=crc32(r.check,i,R,c)),m-=R,c+=R,A)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(r.flags&4096){if(m===0)break e;R=0;do A=i[c+R++],r.head&&A&&r.length<65536&&(r.head.comment+=String.fromCharCode(A));while(A&&R<m);if(r.flags&512&&(r.check=crc32(r.check,i,R,c)),m-=R,c+=R,A)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(r.flags&512){for(;b<16;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(g!==(r.check&65535)){e.msg="header crc mismatch",r.mode=BAD;break}g=0,b=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE;break;case DICTID:for(;b<32;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}e.adler=r.check=zswap32(g),g=0,b=0,r.mode=DICT;case DICT:if(r.havedict===0)return e.next_out=d,e.avail_out=y,e.next_in=c,e.avail_in=m,r.hold=g,r.bits=b,Z_NEED_DICT$1;e.adler=r.check=1,r.mode=TYPE;case TYPE:if(t===Z_BLOCK$1||t===Z_TREES$1)break e;case TYPEDO:if(r.last){g>>>=b&7,b-=b&7,r.mode=CHECK;break}for(;b<3;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}switch(r.last=g&1,g>>>=1,b-=1,g&3){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES$1){g>>>=2,b-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type",r.mode=BAD}g>>>=2,b-=2;break;case STORED:for(g>>>=b&7,b-=b&7;b<32;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if((g&65535)!==(g>>>16^65535)){e.msg="invalid stored block lengths",r.mode=BAD;break}if(r.length=g&65535,g=0,b=0,r.mode=COPY_,t===Z_TREES$1)break e;case COPY_:r.mode=COPY;case COPY:if(R=r.length,R){if(R>m&&(R=m),R>y&&(R=y),R===0)break e;arraySet(s,i,c,R,d),m-=R,c+=R,y-=R,d+=R,r.length-=R;break}r.mode=TYPE;break;case TABLE:for(;b<14;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(r.nlen=(g&31)+257,g>>>=5,b-=5,r.ndist=(g&31)+1,g>>>=5,b-=5,r.ncode=(g&15)+4,g>>>=4,b-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=BAD;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;b<3;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}r.lens[ie[r.have++]]=g&7,g>>>=3,b-=3}for(;r.have<19;)r.lens[ie[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Z={bits:r.lenbits},S=inflate_table(CODES,r.lens,0,19,r.lencode,0,r.work,Z),r.lenbits=Z.bits,S){e.msg="invalid code lengths set",r.mode=BAD;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[g&(1<<r.lenbits)-1],$=E>>>24,q=E>>>16&255,Y=E&65535,!($<=b);){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(Y<16)g>>>=$,b-=$,r.lens[r.have++]=Y;else{if(Y===16){for(P=$+2;b<P;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(g>>>=$,b-=$,r.have===0){e.msg="invalid bit length repeat",r.mode=BAD;break}A=r.lens[r.have-1],R=3+(g&3),g>>>=2,b-=2}else if(Y===17){for(P=$+3;b<P;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}g>>>=$,b-=$,A=0,R=3+(g&7),g>>>=3,b-=3}else{for(P=$+7;b<P;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}g>>>=$,b-=$,A=0,R=11+(g&127),g>>>=7,b-=7}if(r.have+R>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=BAD;break}for(;R--;)r.lens[r.have++]=A}}if(r.mode===BAD)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=BAD;break}if(r.lenbits=9,Z={bits:r.lenbits},S=inflate_table(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,Z),r.lenbits=Z.bits,S){e.msg="invalid literal/lengths set",r.mode=BAD;break}if(r.distbits=6,r.distcode=r.distdyn,Z={bits:r.distbits},S=inflate_table(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Z),r.distbits=Z.bits,S){e.msg="invalid distances set",r.mode=BAD;break}if(r.mode=LEN_,t===Z_TREES$1)break e;case LEN_:r.mode=LEN;case LEN:if(m>=6&&y>=258){e.next_out=d,e.avail_out=y,e.next_in=c,e.avail_in=m,r.hold=g,r.bits=b,inflate_fast(e,B),d=e.next_out,s=e.output,y=e.avail_out,c=e.next_in,i=e.input,m=e.avail_in,g=r.hold,b=r.bits,r.mode===TYPE&&(r.back=-1);break}for(r.back=0;E=r.lencode[g&(1<<r.lenbits)-1],$=E>>>24,q=E>>>16&255,Y=E&65535,!($<=b);){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(q&&!(q&240)){for(T=$,w=q,C=Y;E=r.lencode[C+((g&(1<<T+w)-1)>>T)],$=E>>>24,q=E>>>16&255,Y=E&65535,!(T+$<=b);){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}g>>>=T,b-=T,r.back+=T}if(g>>>=$,b-=$,r.back+=$,r.length=Y,q===0){r.mode=LIT;break}if(q&32){r.back=-1,r.mode=TYPE;break}if(q&64){e.msg="invalid literal/length code",r.mode=BAD;break}r.extra=q&15,r.mode=LENEXT;case LENEXT:if(r.extra){for(P=r.extra;b<P;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;E=r.distcode[g&(1<<r.distbits)-1],$=E>>>24,q=E>>>16&255,Y=E&65535,!($<=b);){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(!(q&240)){for(T=$,w=q,C=Y;E=r.distcode[C+((g&(1<<T+w)-1)>>T)],$=E>>>24,q=E>>>16&255,Y=E&65535,!(T+$<=b);){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}g>>>=T,b-=T,r.back+=T}if(g>>>=$,b-=$,r.back+=$,q&64){e.msg="invalid distance code",r.mode=BAD;break}r.offset=Y,r.extra=q&15,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(P=r.extra;b<P;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=BAD;break}r.mode=MATCH;case MATCH:if(y===0)break e;if(R=B-y,r.offset>R){if(R=r.offset-R,R>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=BAD;break}R>r.wnext?(R-=r.wnext,D=r.wsize-R):D=r.wnext-R,R>r.length&&(R=r.length),N=r.window}else N=s,D=d-r.offset,R=r.length;R>y&&(R=y),y-=R,r.length-=R;do s[d++]=N[D++];while(--R);r.length===0&&(r.mode=LEN);break;case LIT:if(y===0)break e;s[d++]=r.length,y--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;b<32;){if(m===0)break e;m--,g|=i[c++]<<b,b+=8}if(B-=y,e.total_out+=B,r.total+=B,B&&(e.adler=r.check=r.flags?crc32(r.check,s,B,d-B):adler32(r.check,s,B,d-B)),B=y,(r.flags?g:zswap32(g))!==r.check){e.msg="incorrect data check",r.mode=BAD;break}g=0,b=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;b<32;){if(m===0)break e;m--,g+=i[c++]<<b,b+=8}if(g!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=BAD;break}g=0,b=0}r.mode=DONE;case DONE:S=Z_STREAM_END$1;break e;case BAD:S=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=d,e.avail_out=y,e.next_in=c,e.avail_in=m,r.hold=g,r.bits=b,(r.wsize||B!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,B-e.avail_out),j-=e.avail_in,B-=e.avail_out,e.total_in+=j,e.total_out+=B,r.total+=B,r.wrap&&B&&(e.adler=r.check=r.flags?crc32(r.check,s,B,e.next_out-B):adler32(r.check,s,B,e.next_out-B)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(j===0&&B===0||t===Z_FINISH$1)&&S===Z_OK$1&&(S=Z_BUF_ERROR$1),S}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1}var NONE=0,DEFLATE=1,INFLATE=2,GZIP=3,GUNZIP=4,DEFLATERAW=5,INFLATERAW=6,UNZIP=7,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_SYNC_FLUSH=2,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_ERRNO=-1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_NO_COMPRESSION=0,Z_BEST_SPEED=1,Z_BEST_COMPRESSION=9,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,Z_DEFLATED=8;function Zlib$1(e){if(e<DEFLATE||e>UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Zlib$1.prototype.init=function(e,t,r,i,s){this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=i,(this.mode===GZIP||this.mode===GUNZIP)&&(this.windowBits+=16),this.mode===UNZIP&&(this.windowBits+=32),(this.mode===DEFLATERAW||this.mode===INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new ZStream;var c;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:c=deflateInit2(this.strm,this.level,Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case INFLATE:case GUNZIP:case INFLATERAW:case UNZIP:c=inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(c!==Z_OK){this._error(c);return}this.write_in_progress=!1,this.init_done=!0};Zlib$1.prototype.params=function(){throw new Error("deflateParams Not supported")};Zlib$1.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Zlib$1.prototype.write=function(e,t,r,i,s,c,d){this._writeCheck(),this.write_in_progress=!0;var m=this;return browser$1.nextTick(function(){m.write_in_progress=!1;var y=m._write(e,t,r,i,s,c,d);m.callback(y[0],y[1]),m.pending_close&&m.close()}),this};function bufferSet(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}Zlib$1.prototype.writeSync=function(e,t,r,i,s,c,d){return this._writeCheck(),this._write(e,t,r,i,s,c,d)};Zlib$1.prototype._write=function(e,t,r,i,s,c,d){if(this.write_in_progress=!0,e!==Z_NO_FLUSH&&e!==Z_PARTIAL_FLUSH&&e!==Z_SYNC_FLUSH&&e!==Z_FULL_FLUSH&&e!==Z_FINISH&&e!==Z_BLOCK)throw new Error("Invalid flush value");t==null&&(t=new Buffer(0),i=0,r=0),s._set?s.set=s._set:s.set=bufferSet;var m=this.strm;m.avail_in=i,m.input=t,m.next_in=r,m.avail_out=d,m.output=s,m.next_out=c;var y;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:y=deflate$1(m,e);break;case UNZIP:case INFLATE:case GUNZIP:case INFLATERAW:y=inflate$1(m,e);break;default:throw new Error("Unknown mode "+this.mode)}return y!==Z_STREAM_END&&y!==Z_OK&&this._error(y),this.write_in_progress=!1,[m.avail_in,m.avail_out]};Zlib$1.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===DEFLATE||this.mode===GZIP||this.mode===DEFLATERAW?deflateEnd(this.strm):inflateEnd(this.strm),this.mode=NONE};var status;Zlib$1.prototype.reset=function(){switch(this.mode){case DEFLATE:case DEFLATERAW:status=deflateReset(this.strm);break;case INFLATE:case INFLATERAW:status=inflateReset(this.strm);break}status!==Z_OK&&this._error(status)};Zlib$1.prototype._error=function(e){this.onerror(msg[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var _binding=Object.freeze({__proto__:null,DEFLATE,DEFLATERAW,GUNZIP,GZIP,INFLATE,INFLATERAW,NONE,UNZIP,Z_BEST_COMPRESSION,Z_BEST_SPEED,Z_BINARY,Z_BLOCK,Z_BUF_ERROR,Z_DATA_ERROR,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED,Z_ERRNO,Z_FILTERED,Z_FINISH,Z_FIXED,Z_FULL_FLUSH,Z_HUFFMAN_ONLY,Z_NEED_DICT,Z_NO_COMPRESSION,Z_NO_FLUSH,Z_OK,Z_PARTIAL_FLUSH,Z_RLE,Z_STREAM_END,Z_STREAM_ERROR,Z_SYNC_FLUSH,Z_TEXT,Z_TREES,Z_UNKNOWN,Zlib:Zlib$1});function assert(e,t){if(!e)throw new Error(t)}var binding={};Object.keys(_binding).forEach(function(e){binding[e]=_binding[e]});binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=1/0;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};Object.keys(codes).forEach(function(e){codes[codes[e]]=e});function createDeflate(e){return new Deflate(e)}function createInflate(e){return new Inflate(e)}function createDeflateRaw(e){return new DeflateRaw(e)}function createInflateRaw(e){return new InflateRaw(e)}function createGzip(e){return new Gzip(e)}function createGunzip(e){return new Gunzip(e)}function createUnzip(e){return new Unzip(e)}function deflate(e,t,r){return typeof t=="function"&&(r=t,t={}),zlibBuffer(new Deflate(t),e,r)}function deflateSync(e,t){return zlibBufferSync(new Deflate(t),e)}function gzip(e,t,r){return typeof t=="function"&&(r=t,t={}),zlibBuffer(new Gzip(t),e,r)}function gzipSync(e,t){return zlibBufferSync(new Gzip(t),e)}function deflateRaw(e,t,r){return typeof t=="function"&&(r=t,t={}),zlibBuffer(new DeflateRaw(t),e,r)}function deflateRawSync(e,t){return zlibBufferSync(new DeflateRaw(t),e)}function unzip(e,t,r){return typeof t=="function"&&(r=t,t={}),zlibBuffer(new Unzip(t),e,r)}function unzipSync(e,t){return zlibBufferSync(new Unzip(t),e)}function inflate(e,t,r){return typeof t=="function"&&(r=t,t={}),zlibBuffer(new Inflate(t),e,r)}function inflateSync(e,t){return zlibBufferSync(new Inflate(t),e)}function gunzip(e,t,r){return typeof t=="function"&&(r=t,t={}),zlibBuffer(new Gunzip(t),e,r)}function gunzipSync(e,t){return zlibBufferSync(new Gunzip(t),e)}function inflateRaw(e,t,r){return typeof t=="function"&&(r=t,t={}),zlibBuffer(new InflateRaw(t),e,r)}function inflateRawSync(e,t){return zlibBufferSync(new InflateRaw(t),e)}function zlibBuffer(e,t,r){var i=[],s=0;e.on("error",d),e.on("end",m),e.end(t),c();function c(){for(var y;(y=e.read())!==null;)i.push(y),s+=y.length;e.once("readable",c)}function d(y){e.removeListener("end",m),e.removeListener("readable",c),r(y)}function m(){var y=Buffer.concat(i,s);i=[],r(null,y),e.close()}}function zlibBufferSync(e,t){if(typeof t=="string"&&(t=new Buffer(t)),!Buffer.isBuffer(t))throw new TypeError("Not a string or buffer");var r=binding.Z_FINISH;return e._processChunk(t,r)}function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);Zlib.call(this,e,binding.DEFLATE)}function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);Zlib.call(this,e,binding.INFLATE)}function Gzip(e){if(!(this instanceof Gzip))return new Gzip(e);Zlib.call(this,e,binding.GZIP)}function Gunzip(e){if(!(this instanceof Gunzip))return new Gunzip(e);Zlib.call(this,e,binding.GUNZIP)}function DeflateRaw(e){if(!(this instanceof DeflateRaw))return new DeflateRaw(e);Zlib.call(this,e,binding.DEFLATERAW)}function InflateRaw(e){if(!(this instanceof InflateRaw))return new InflateRaw(e);Zlib.call(this,e,binding.INFLATERAW)}function Unzip(e){if(!(this instanceof Unzip))return new Unzip(e);Zlib.call(this,e,binding.UNZIP)}function Zlib(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||binding.Z_DEFAULT_CHUNK,Transform.call(this,e),e.flush&&e.flush!==binding.Z_NO_FLUSH&&e.flush!==binding.Z_PARTIAL_FLUSH&&e.flush!==binding.Z_SYNC_FLUSH&&e.flush!==binding.Z_FULL_FLUSH&&e.flush!==binding.Z_FINISH&&e.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<binding.Z_MIN_CHUNK||e.chunkSize>binding.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<binding.Z_MIN_WINDOWBITS||e.windowBits>binding.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<binding.Z_MIN_LEVEL||e.level>binding.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<binding.Z_MIN_MEMLEVEL||e.memLevel>binding.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=binding.Z_FILTERED&&e.strategy!=binding.Z_HUFFMAN_ONLY&&e.strategy!=binding.Z_RLE&&e.strategy!=binding.Z_FIXED&&e.strategy!=binding.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(t);var r=this;this._hadError=!1,this._binding.onerror=function(c,d){r._binding=null,r._hadError=!0;var m=new Error(c);m.errno=d,m.code=binding.codes[d],r.emit("error",m)};var i=binding.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(i=e.level);var s=binding.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(s=e.strategy),this._binding.init(e.windowBits||binding.Z_DEFAULT_WINDOWBITS,i,e.memLevel||binding.Z_DEFAULT_MEMLEVEL,s,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=s,this.once("end",this.close)}inherits$1(Zlib,Transform);Zlib.prototype.params=function(e,t,r){if(e<binding.Z_MIN_LEVEL||e>binding.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=binding.Z_FILTERED&&t!=binding.Z_HUFFMAN_ONLY&&t!=binding.Z_RLE&&t!=binding.Z_FIXED&&t!=binding.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var i=this;this.flush(binding.Z_SYNC_FLUSH,function(){i._binding.params(e,t),i._hadError||(i._level=e,i._strategy=t,r&&r())})}else browser$1.nextTick(r)};Zlib.prototype.reset=function(){return this._binding.reset()};Zlib.prototype._flush=function(e){this._transform(new Buffer(0),"",e)};Zlib.prototype.flush=function(e,t){var r=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=binding.Z_FULL_FLUSH),r.ended)t&&browser$1.nextTick(t);else if(r.ending)t&&this.once("end",t);else if(r.needDrain){var i=this;this.once("drain",function(){i.flush(t)})}else this._flushFlag=e,this.write(new Buffer(0),"",t)};Zlib.prototype.close=function(e){if(e&&browser$1.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;browser$1.nextTick(function(){t.emit("close")})}};Zlib.prototype._transform=function(e,t,r){var i,s=this._writableState,c=s.ending||s.ended,d=c&&(!e||s.length===e.length);if(!e===null&&!Buffer.isBuffer(e))return r(new Error("invalid input"));d?i=binding.Z_FINISH:(i=this._flushFlag,e.length>=s.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH)),this._processChunk(e,i,r)};Zlib.prototype._processChunk=function(e,t,r){var i=e&&e.length,s=this._chunkSize-this._offset,c=0,d=this,m=typeof r=="function";if(!m){var y=[],g=0,b;this.on("error",function(N){b=N});do var j=this._binding.writeSync(t,e,c,i,this._buffer,this._offset,s);while(!this._hadError&&D(j[0],j[1]));if(this._hadError)throw b;var B=Buffer.concat(y,g);return this.close(),B}var R=this._binding.write(t,e,c,i,this._buffer,this._offset,s);R.buffer=e,R.callback=D;function D(N,E){if(!d._hadError){var $=s-E;if(assert($>=0,"have should not go down"),$>0){var q=d._buffer.slice(d._offset,d._offset+$);d._offset+=$,m?d.push(q):(y.push(q),g+=q.length)}if((E===0||d._offset>=d._chunkSize)&&(s=d._chunkSize,d._offset=0,d._buffer=new Buffer(d._chunkSize)),E===0){if(c+=i-N,i=N,!m)return!0;var Y=d._binding.write(t,e,c,i,d._buffer,d._offset,d._chunkSize);Y.callback=D,Y.buffer=e;return}if(!m)return!1;r()}}};inherits$1(Deflate,Zlib);inherits$1(Inflate,Zlib);inherits$1(Gzip,Zlib);inherits$1(Gunzip,Zlib);inherits$1(DeflateRaw,Zlib);inherits$1(InflateRaw,Zlib);inherits$1(Unzip,Zlib);var _polyfillNode_zlib={codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib},_polyfillNode_zlib$1=Object.freeze({__proto__:null,Deflate,DeflateRaw,Gunzip,Gzip,Inflate,InflateRaw,Unzip,Zlib,codes,createDeflate,createDeflateRaw,createGunzip,createGzip,createInflate,createInflateRaw,createUnzip,default:_polyfillNode_zlib,deflate,deflateRaw,deflateRawSync,deflateSync,gunzip,gunzipSync,gzip,gzipSync,inflate,inflateRaw,inflateRawSync,inflateSync,unzip,unzipSync}),require$$5=getAugmentedNamespace(_polyfillNode_zlib$1);(function(module,exports){(function(t,r){module.exports=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var it;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=Ue,t.bytesToString=ne,t.createValidAbsoluteUrl=$e,t.getModificationDate=ze,t.getVerbosityLevel=Pe,t.info=Se,t.isArrayBuffer=Fe,t.isArrayEqual=Ve,t.normalizeUnicode=He,t.objectFromMap=K,t.objectSize=W,t.setVerbosityLevel=we,t.shadow=de,t.string32=O,t.stringToBytes=k,t.stringToPDFString=xe,t.stringToUTF8String=Ce,t.unreachable=Ne,t.utf8StringToString=Oe,t.warn=De;const r=[1,0,0,1,0,0];t.IDENTITY_MATRIX=r;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const s=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=s;const c=1.35;t.LINE_FACTOR=c;const d=.35;t.LINE_DESCENT_FACTOR=d;const m=d/c;t.BASELINE_FACTOR=m;const y={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=y;const g={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=g;const b="pdfjs_internal_editor_";t.AnnotationEditorPrefix=b;const j={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=j;const B={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=B;const R={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=R;const D={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=D;const N={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=N;const E={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=E;const $={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=$;const q={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=q;const Y={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=Y;const T={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=T;const w={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=w;const C={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=C;const A={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=A;const S={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=S;const F={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=F;const Z={O:"PageOpen",C:"PageClose"};t.PageActionEventType=Z;const P={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=P;const ie={NONE:0,BINARY:1};t.CMapCompressionType=ie;const ue={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=ue;const pe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=pe;let _e=P.WARNINGS;function we(Me){Number.isInteger(Me)&&(_e=Me)}function Pe(){return _e}function Se(Me){_e>=P.INFOS&&console.log(`Info: ${Me}`)}function De(Me){_e>=P.WARNINGS&&console.log(`Warning: ${Me}`)}function Ne(Me){throw new Error(Me)}function Ue(Me,te){Me||Ne(te)}function je(Me){switch(Me==null?void 0:Me.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function $e(Me,te=null,ae=null){if(!Me)return null;try{if(ae&&typeof Me=="string"){if(ae.addDefaultProtocol&&Me.startsWith("www.")){const Le=Me.match(/\./g);(Le==null?void 0:Le.length)>=2&&(Me=`http://${Me}`)}if(ae.tryConvertEncoding)try{Me=Ce(Me)}catch{}}const Ee=te?new URL(Me,te):new URL(Me);if(je(Ee))return Ee}catch{}return null}function de(Me,te,ae,Ee=!1){return Object.defineProperty(Me,te,{value:ae,enumerable:!Ee,configurable:!0,writable:!1}),ae}const L=function(){function te(ae,Ee){this.constructor===te&&Ne("Cannot initialize BaseException."),this.message=ae,this.name=Ee}return te.prototype=new Error,te.constructor=te,te}();t.BaseException=L;class H extends L{constructor(te,ae){super(te,"PasswordException"),this.code=ae}}t.PasswordException=H;class Q extends L{constructor(te,ae){super(te,"UnknownErrorException"),this.details=ae}}t.UnknownErrorException=Q;class z extends L{constructor(te){super(te,"InvalidPDFException")}}t.InvalidPDFException=z;class X extends L{constructor(te){super(te,"MissingPDFException")}}t.MissingPDFException=X;class se extends L{constructor(te,ae){super(te,"UnexpectedResponseException"),this.status=ae}}t.UnexpectedResponseException=se;class ee extends L{constructor(te){super(te,"FormatError")}}t.FormatError=ee;class re extends L{constructor(te){super(te,"AbortException")}}t.AbortException=re;function ne(Me){(typeof Me!="object"||(Me==null?void 0:Me.length)===void 0)&&Ne("Invalid argument for bytesToString");const te=Me.length,ae=8192;if(te<ae)return String.fromCharCode.apply(null,Me);const Ee=[];for(let Le=0;Le<te;Le+=ae){const qe=Math.min(Le+ae,te),Xe=Me.subarray(Le,qe);Ee.push(String.fromCharCode.apply(null,Xe))}return Ee.join("")}function k(Me){typeof Me!="string"&&Ne("Invalid argument for stringToBytes");const te=Me.length,ae=new Uint8Array(te);for(let Ee=0;Ee<te;++Ee)ae[Ee]=Me.charCodeAt(Ee)&255;return ae}function O(Me){return String.fromCharCode(Me>>24&255,Me>>16&255,Me>>8&255,Me&255)}function W(Me){return Object.keys(Me).length}function K(Me){const te=Object.create(null);for(const[ae,Ee]of Me)te[ae]=Ee;return te}function G(){const Me=new Uint8Array(4);return Me[0]=1,new Uint32Array(Me.buffer,0,1)[0]===1}function ce(){try{return new Function(""),!0}catch{return!1}}class ye{static get isLittleEndian(){return de(this,"isLittleEndian",G())}static get isEvalSupported(){return de(this,"isEvalSupported",ce())}static get isOffscreenCanvasSupported(){return de(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?de(this,"platform",{isWin:!1,isMac:!1}):de(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=ye;const me=[...Array(256).keys()].map(Me=>Me.toString(16).padStart(2,"0"));class ke{static makeHexColor(te,ae,Ee){return`#${me[te]}${me[ae]}${me[Ee]}`}static scaleMinMax(te,ae){let Ee;te[0]?(te[0]<0&&(Ee=ae[0],ae[0]=ae[1],ae[1]=Ee),ae[0]*=te[0],ae[1]*=te[0],te[3]<0&&(Ee=ae[2],ae[2]=ae[3],ae[3]=Ee),ae[2]*=te[3],ae[3]*=te[3]):(Ee=ae[0],ae[0]=ae[2],ae[2]=Ee,Ee=ae[1],ae[1]=ae[3],ae[3]=Ee,te[1]<0&&(Ee=ae[2],ae[2]=ae[3],ae[3]=Ee),ae[2]*=te[1],ae[3]*=te[1],te[2]<0&&(Ee=ae[0],ae[0]=ae[1],ae[1]=Ee),ae[0]*=te[2],ae[1]*=te[2]),ae[0]+=te[4],ae[1]+=te[4],ae[2]+=te[5],ae[3]+=te[5]}static transform(te,ae){return[te[0]*ae[0]+te[2]*ae[1],te[1]*ae[0]+te[3]*ae[1],te[0]*ae[2]+te[2]*ae[3],te[1]*ae[2]+te[3]*ae[3],te[0]*ae[4]+te[2]*ae[5]+te[4],te[1]*ae[4]+te[3]*ae[5]+te[5]]}static applyTransform(te,ae){const Ee=te[0]*ae[0]+te[1]*ae[2]+ae[4],Le=te[0]*ae[1]+te[1]*ae[3]+ae[5];return[Ee,Le]}static applyInverseTransform(te,ae){const Ee=ae[0]*ae[3]-ae[1]*ae[2],Le=(te[0]*ae[3]-te[1]*ae[2]+ae[2]*ae[5]-ae[4]*ae[3])/Ee,qe=(-te[0]*ae[1]+te[1]*ae[0]+ae[4]*ae[1]-ae[5]*ae[0])/Ee;return[Le,qe]}static getAxialAlignedBoundingBox(te,ae){const Ee=ke.applyTransform(te,ae),Le=ke.applyTransform(te.slice(2,4),ae),qe=ke.applyTransform([te[0],te[3]],ae),Xe=ke.applyTransform([te[2],te[1]],ae);return[Math.min(Ee[0],Le[0],qe[0],Xe[0]),Math.min(Ee[1],Le[1],qe[1],Xe[1]),Math.max(Ee[0],Le[0],qe[0],Xe[0]),Math.max(Ee[1],Le[1],qe[1],Xe[1])]}static inverseTransform(te){const ae=te[0]*te[3]-te[1]*te[2];return[te[3]/ae,-te[1]/ae,-te[2]/ae,te[0]/ae,(te[2]*te[5]-te[4]*te[3])/ae,(te[4]*te[1]-te[5]*te[0])/ae]}static singularValueDecompose2dScale(te){const ae=[te[0],te[2],te[1],te[3]],Ee=te[0]*ae[0]+te[1]*ae[2],Le=te[0]*ae[1]+te[1]*ae[3],qe=te[2]*ae[0]+te[3]*ae[2],Xe=te[2]*ae[1]+te[3]*ae[3],Ge=(Ee+Xe)/2,Ke=Math.sqrt((Ee+Xe)**2-4*(Ee*Xe-qe*Le))/2,at=Ge+Ke||1,Ze=Ge-Ke||1;return[Math.sqrt(at),Math.sqrt(Ze)]}static normalizeRect(te){const ae=te.slice(0);return te[0]>te[2]&&(ae[0]=te[2],ae[2]=te[0]),te[1]>te[3]&&(ae[1]=te[3],ae[3]=te[1]),ae}static intersect(te,ae){const Ee=Math.max(Math.min(te[0],te[2]),Math.min(ae[0],ae[2])),Le=Math.min(Math.max(te[0],te[2]),Math.max(ae[0],ae[2]));if(Ee>Le)return null;const qe=Math.max(Math.min(te[1],te[3]),Math.min(ae[1],ae[3])),Xe=Math.min(Math.max(te[1],te[3]),Math.max(ae[1],ae[3]));return qe>Xe?null:[Ee,qe,Le,Xe]}static bezierBoundingBox(te,ae,Ee,Le,qe,Xe,Ge,Ke){const at=[],Ze=[[],[]];let dt,Qe,nt,tt,mt,bt,yt,St;for(let Mt=0;Mt<2;++Mt){if(Mt===0?(Qe=6*te-12*Ee+6*qe,dt=-3*te+9*Ee-9*qe+3*Ge,nt=3*Ee-3*te):(Qe=6*ae-12*Le+6*Xe,dt=-3*ae+9*Le-9*Xe+3*Ke,nt=3*Le-3*ae),Math.abs(dt)<1e-12){if(Math.abs(Qe)<1e-12)continue;tt=-nt/Qe,0<tt&&tt<1&&at.push(tt);continue}yt=Qe*Qe-4*nt*dt,St=Math.sqrt(yt),!(yt<0)&&(mt=(-Qe+St)/(2*dt),0<mt&&mt<1&&at.push(mt),bt=(-Qe-St)/(2*dt),0<bt&&bt<1&&at.push(bt))}let ft=at.length,pt;const Tt=ft;for(;ft--;)tt=at[ft],pt=1-tt,Ze[0][ft]=pt*pt*pt*te+3*pt*pt*tt*Ee+3*pt*tt*tt*qe+tt*tt*tt*Ge,Ze[1][ft]=pt*pt*pt*ae+3*pt*pt*tt*Le+3*pt*tt*tt*Xe+tt*tt*tt*Ke;return Ze[0][Tt]=te,Ze[1][Tt]=ae,Ze[0][Tt+1]=Ge,Ze[1][Tt+1]=Ke,Ze[0].length=Ze[1].length=Tt+2,[Math.min(...Ze[0]),Math.min(...Ze[1]),Math.max(...Ze[0]),Math.max(...Ze[1])]}}t.Util=ke;const Te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function xe(Me){if(Me[0]>="ï"){let ae;if(Me[0]==="þ"&&Me[1]==="ÿ"?ae="utf-16be":Me[0]==="ÿ"&&Me[1]==="þ"?ae="utf-16le":Me[0]==="ï"&&Me[1]==="»"&&Me[2]==="¿"&&(ae="utf-8"),ae)try{const Ee=new TextDecoder(ae,{fatal:!0}),Le=k(Me);return Ee.decode(Le)}catch(Ee){De(`stringToPDFString: "${Ee}".`)}}const te=[];for(let ae=0,Ee=Me.length;ae<Ee;ae++){const Le=Te[Me.charCodeAt(ae)];te.push(Le?String.fromCharCode(Le):Me.charAt(ae))}return te.join("")}function Ce(Me){return decodeURIComponent(escape(Me))}function Oe(Me){return unescape(encodeURIComponent(Me))}function Fe(Me){return typeof Me=="object"&&(Me==null?void 0:Me.byteLength)!==void 0}function Ve(Me,te){if(Me.length!==te.length)return!1;for(let ae=0,Ee=Me.length;ae<Ee;ae++)if(Me[ae]!==te[ae])return!1;return!0}function ze(Me=new Date){return[Me.getUTCFullYear().toString(),(Me.getUTCMonth()+1).toString().padStart(2,"0"),Me.getUTCDate().toString().padStart(2,"0"),Me.getUTCHours().toString().padStart(2,"0"),Me.getUTCMinutes().toString().padStart(2,"0"),Me.getUTCSeconds().toString().padStart(2,"0")].join("")}class U{constructor(){be(this,it,!1);this.promise=new Promise((te,ae)=>{this.resolve=Ee=>{Ie(this,it,!0),te(Ee)},this.reject=Ee=>{Ie(this,it,!0),ae(Ee)}})}get settled(){return V(this,it)}}it=new WeakMap,t.PromiseCapability=U;let ge=null,Be=null;function He(Me){return ge||(ge=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Be=new Map([["ﬅ","ſt"]])),Me.replaceAll(ge,(te,ae,Ee)=>ae?ae.normalize("NFKC"):Be.get(Ee))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,r,i,s,ur,d,zr,y,g,b,j,B,R,D,N,kn,$,q,En,T,w;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:A,NodeCMapReaderFactory:S,NodeFilterFactory:F,NodeStandardFontDataFactory:Z}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=A,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=S,exports.DefaultFilterFactory=DefaultFilterFactory=F,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=Z}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:A}=__w_pdfjs_require__(21);createPDFNetworkStream=S=>new A(S)}else{const{PDFNetworkStream:A}=__w_pdfjs_require__(24),{PDFFetchStream:S}=__w_pdfjs_require__(25);createPDFNetworkStream=F=>(0,_display_utils.isValidFetchUrl)(F.url)?new S(F):new A(F)}function getDocument(A){if(typeof A=="string"||A instanceof URL?A={url:A}:(0,_util.isArrayBuffer)(A)&&(A={data:A}),typeof A!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!A.url&&!A.data&&!A.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const S=new PDFDocumentLoadingTask,{docId:F}=S,Z=A.url?getUrlProp(A.url):null,P=A.data?getDataProp(A.data):null,ie=A.httpHeaders||null,ue=A.withCredentials===!0,pe=A.password??null,_e=A.range instanceof PDFDataRangeTransport?A.range:null,we=Number.isInteger(A.rangeChunkSize)&&A.rangeChunkSize>0?A.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Pe=A.worker instanceof PDFWorker?A.worker:null;const Se=A.verbosity,De=typeof A.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(A.docBaseUrl)?A.docBaseUrl:null,Ne=typeof A.cMapUrl=="string"?A.cMapUrl:null,Ue=A.cMapPacked!==!1,je=A.CMapReaderFactory||DefaultCMapReaderFactory,$e=typeof A.standardFontDataUrl=="string"?A.standardFontDataUrl:null,de=A.StandardFontDataFactory||DefaultStandardFontDataFactory,L=A.stopAtErrors!==!0,H=Number.isInteger(A.maxImageSize)&&A.maxImageSize>-1?A.maxImageSize:-1,Q=A.isEvalSupported!==!1,z=typeof A.isOffscreenCanvasSupported=="boolean"?A.isOffscreenCanvasSupported:!_is_node.isNodeJS,X=Number.isInteger(A.canvasMaxAreaInBytes)?A.canvasMaxAreaInBytes:-1,se=typeof A.disableFontFace=="boolean"?A.disableFontFace:_is_node.isNodeJS,ee=A.fontExtraProperties===!0,re=A.enableXfa===!0,ne=A.ownerDocument||globalThis.document,k=A.disableRange===!0,O=A.disableStream===!0,W=A.disableAutoFetch===!0,K=A.pdfBug===!0,G=_e?_e.length:A.length??NaN,ce=typeof A.useSystemFonts=="boolean"?A.useSystemFonts:!_is_node.isNodeJS&&!se,ye=typeof A.useWorkerFetch=="boolean"?A.useWorkerFetch:je===_display_utils.DOMCMapReaderFactory&&de===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(Ne,document.baseURI)&&(0,_display_utils.isValidFetchUrl)($e,document.baseURI),me=A.canvasFactory||new DefaultCanvasFactory({ownerDocument:ne}),ke=A.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:ne}),Te=null;(0,_util.setVerbosityLevel)(Se);const xe={canvasFactory:me,filterFactory:ke};if(ye||(xe.cMapReaderFactory=new je({baseUrl:Ne,isCompressed:Ue}),xe.standardFontDataFactory=new de({baseUrl:$e})),!Pe){const Fe={verbosity:Se,port:_worker_options.GlobalWorkerOptions.workerPort};Pe=Fe.port?PDFWorker.fromPort(Fe):new PDFWorker(Fe),S._worker=Pe}const Ce={docId:F,apiVersion:"3.6.172",data:P,password:pe,disableAutoFetch:W,rangeChunkSize:we,length:G,docBaseUrl:De,enableXfa:re,evaluatorOptions:{maxImageSize:H,disableFontFace:se,ignoreErrors:L,isEvalSupported:Q,isOffscreenCanvasSupported:z,canvasMaxAreaInBytes:X,fontExtraProperties:ee,useSystemFonts:ce,cMapUrl:ye?Ne:null,standardFontDataUrl:ye?$e:null}},Oe={ignoreErrors:L,isEvalSupported:Q,disableFontFace:se,fontExtraProperties:ee,enableXfa:re,ownerDocument:ne,disableAutoFetch:W,pdfBug:K,styleElement:Te};return Pe.promise.then(function(){if(S.destroyed)throw new Error("Loading aborted");const Fe=_fetchDocument(Pe,Ce),Ve=new Promise(function(ze){let U;_e?U=new _transport_stream.PDFDataTransportStream({length:G,initialData:_e.initialData,progressiveDone:_e.progressiveDone,contentDispositionFilename:_e.contentDispositionFilename,disableRange:k,disableStream:O},_e):P||(U=createPDFNetworkStream({url:Z,length:G,httpHeaders:ie,withCredentials:ue,rangeChunkSize:we,disableRange:k,disableStream:O})),ze(U)});return Promise.all([Fe,Ve]).then(function([ze,U]){if(S.destroyed)throw new Error("Loading aborted");const ge=new _message_handler.MessageHandler(F,ze,Pe.port),Be=new WorkerTransport(ge,S,U,Oe,xe);S._transport=Be,ge.send("Ready",null)})}).catch(S._capability.reject),S}async function _fetchDocument(A,S){if(A.destroyed)throw new Error("Worker was destroyed");const F=await A.messageHandler.sendWithPromise("GetDocRequest",S,S.data?[S.data.buffer]:null);if(A.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(A){if(A instanceof URL)return A.href;try{return new URL(A,window.location).href}catch{if(_is_node.isNodeJS&&typeof A=="string")return A}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(A){if(_is_node.isNodeJS&&typeof Buffer<"u"&&A instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(A);if(A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength)return A;if(typeof A=="string")return(0,_util.stringToBytes)(A);if(typeof A=="object"&&!isNaN(A==null?void 0:A.length)||(0,_util.isArrayBuffer)(A))return new Uint8Array(A);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Ur(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var S;this.destroyed=!0,await((S=this._transport)==null?void 0:S.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,be(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(S,F,Z=!1,P=null){this.length=S,this.initialData=F,this.progressiveDone=Z,this.contentDispositionFilename=P,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(S){this._rangeListeners.push(S)}addProgressListener(S){this._progressListeners.push(S)}addProgressiveReadListener(S){this._progressiveReadListeners.push(S)}addProgressiveDoneListener(S){this._progressiveDoneListeners.push(S)}onDataRange(S,F){for(const Z of this._rangeListeners)Z(S,F)}onDataProgress(S,F){this._readyCapability.promise.then(()=>{for(const Z of this._progressListeners)Z(S,F)})}onDataProgressiveRead(S){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(S)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const S of this._progressiveDoneListeners)S()})}transportReady(){this._readyCapability.resolve()}requestDataRange(S,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(S,F){this._pdfInfo=S,this._transport=F}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(S){return this._transport.getPage(S)}getPageIndex(S){return this._transport.getPageIndex(S)}getDestinations(){return this._transport.getDestinations()}getDestination(S){return this._transport.getDestination(S)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(S=!1){return this._transport.startCleanup(S||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(S,F,Z,P=!1){be(this,s);be(this,d);be(this,r,null);be(this,i,!1);this._pageIndex=S,this._pageInfo=F,this._transport=Z,this._stats=P?new _display_utils.StatTimer:null,this._pdfBug=P,this.commonObjs=Z.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:S,rotation:F=this.rotate,offsetX:Z=0,offsetY:P=0,dontFlip:ie=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:S,rotation:F,offsetX:Z,offsetY:P,dontFlip:ie})}getAnnotations({intent:S="display"}={}){const F=this._transport.getRenderingIntent(S);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var S;return((S=this._transport._htmlForXfa)==null?void 0:S.children[this._pageIndex])||null}render({canvasContext:S,viewport:F,intent:Z="display",annotationMode:P=_util.AnnotationMode.ENABLE,transform:ie=null,background:ue=null,optionalContentConfigPromise:pe=null,annotationCanvasMap:_e=null,pageColors:we=null,printAnnotationStorage:Pe=null}){var de,L,H;if((de=arguments[0])!=null&&de.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(L=this._stats)==null||L.time("Overall");const Se=this._transport.getRenderingIntent(Z,P,Pe);Ie(this,i,!1),Ae(this,d,zr).call(this),pe||(pe=this._transport.getOptionalContentConfig());let De=this._intentStates.get(Se.cacheKey);De||(De=Object.create(null),this._intentStates.set(Se.cacheKey,De)),De.streamReaderCancelTimeout&&(clearTimeout(De.streamReaderCancelTimeout),De.streamReaderCancelTimeout=null);const Ne=!!(Se.renderingIntent&_util.RenderingIntentFlag.PRINT);De.displayReadyCapability||(De.displayReadyCapability=new _util.PromiseCapability,De.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(H=this._stats)==null||H.time("Page Request"),this._pumpOperatorList(Se));const Ue=Q=>{var z,X;De.renderTasks.delete(je),(this._maybeCleanupAfterRender||Ne)&&Ie(this,i,!0),Ae(this,s,ur).call(this,!Ne),Q?(je.capability.reject(Q),this._abortOperatorList({intentState:De,reason:Q instanceof Error?Q:new Error(Q)})):je.capability.resolve(),(z=this._stats)==null||z.timeEnd("Rendering"),(X=this._stats)==null||X.timeEnd("Overall")},je=new InternalRenderTask({callback:Ue,params:{canvasContext:S,viewport:F,transform:ie,background:ue},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:_e,operatorList:De.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ne,pdfBug:this._pdfBug,pageColors:we});(De.renderTasks||(De.renderTasks=new Set)).add(je);const $e=je.task;return Promise.all([De.displayReadyCapability.promise,pe]).then(([Q,z])=>{var X;if(V(this,i)){Ue();return}(X=this._stats)==null||X.time("Rendering"),je.initializeGraphics({transparency:Q,optionalContentConfig:z}),je.operatorListChanged()}).catch(Ue),$e}getOperatorList({intent:S="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:Z=null}={}){var _e;function P(){ue.operatorList.lastChunk&&(ue.opListReadCapability.resolve(ue.operatorList),ue.renderTasks.delete(pe))}const ie=this._transport.getRenderingIntent(S,F,Z,!0);let ue=this._intentStates.get(ie.cacheKey);ue||(ue=Object.create(null),this._intentStates.set(ie.cacheKey,ue));let pe;return ue.opListReadCapability||(pe=Object.create(null),pe.operatorListChanged=P,ue.opListReadCapability=new _util.PromiseCapability,(ue.renderTasks||(ue.renderTasks=new Set)).add(pe),ue.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_e=this._stats)==null||_e.time("Page Request"),this._pumpOperatorList(ie)),ue.opListReadCapability.promise}streamTextContent({includeMarkedContent:S=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:S===!0,disableNormalization:F===!0},{highWaterMark:100,size(P){return P.items.length}})}getTextContent(S={}){if(this._transport._htmlForXfa)return this.getXfa().then(Z=>_xfa_text.XfaText.textContent(Z));const F=this.streamTextContent(S);return new Promise(function(Z,P){function ie(){ue.read().then(function({value:_e,done:we}){if(we){Z(pe);return}Object.assign(pe.styles,_e.styles),pe.items.push(..._e.items),ie()},P)}const ue=F.getReader(),pe={items:[],styles:Object.create(null)};ie()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const S=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const Z of F.renderTasks)S.push(Z.completed),Z.cancel();return this.objs.clear(),Ie(this,i,!1),Ae(this,d,zr).call(this),Promise.all(S)}cleanup(S=!1){Ie(this,i,!0);const F=Ae(this,s,ur).call(this,!1);return S&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(S,F){var P,ie;const Z=this._intentStates.get(F);Z&&((P=this._stats)==null||P.timeEnd("Page Request"),(ie=Z.displayReadyCapability)==null||ie.resolve(S))}_renderPageChunk(S,F){for(let Z=0,P=S.length;Z<P;Z++)F.operatorList.fnArray.push(S.fnArray[Z]),F.operatorList.argsArray.push(S.argsArray[Z]);F.operatorList.lastChunk=S.lastChunk,F.operatorList.separateAnnots=S.separateAnnots;for(const Z of F.renderTasks)Z.operatorListChanged();S.lastChunk&&Ae(this,s,ur).call(this,!0)}_pumpOperatorList({renderingIntent:S,cacheKey:F,annotationStorageMap:Z}){const ie=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:S,cacheKey:F,annotationStorage:Z}).getReader(),ue=this._intentStates.get(F);ue.streamReader=ie;const pe=()=>{ie.read().then(({value:_e,done:we})=>{if(we){ue.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(_e,ue),pe())},_e=>{if(ue.streamReader=null,!this._transport.destroyed){if(ue.operatorList){ue.operatorList.lastChunk=!0;for(const we of ue.renderTasks)we.operatorListChanged();Ae(this,s,ur).call(this,!0)}if(ue.displayReadyCapability)ue.displayReadyCapability.reject(_e);else if(ue.opListReadCapability)ue.opListReadCapability.reject(_e);else throw _e}})};pe()}_abortOperatorList({intentState:S,reason:F,force:Z=!1}){if(S.streamReader){if(S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null),!Z){if(S.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let P=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&(P+=F.extraDelay),S.streamReaderCancelTimeout=setTimeout(()=>{S.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:S,reason:F,force:!0})},P);return}}if(S.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),S.streamReader=null,!this._transport.destroyed){for(const[P,ie]of this._intentStates)if(ie===S){this._intentStates.delete(P);break}this.cleanup()}}}get stats(){return this._stats}}r=new WeakMap,i=new WeakMap,s=new WeakSet,ur=function(S=!1){if(Ae(this,d,zr).call(this),!V(this,i))return!1;if(S)return Ie(this,r,setTimeout(()=>{Ie(this,r,null),Ae(this,s,ur).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:Z}of this._intentStates.values())if(F.size>0||!Z.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Ie(this,i,!1),!0},d=new WeakSet,zr=function(){V(this,r)&&(clearTimeout(V(this,r)),Ie(this,r,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){be(this,y,new Set);be(this,g,Promise.resolve())}postMessage(S,F){const Z={data:structuredClone(S,F?{transfer:F}:null)};V(this,g).then(()=>{for(const P of V(this,y))P.call(this,Z)})}addEventListener(S,F){V(this,y).add(F)}removeEventListener(S,F){V(this,y).delete(F)}terminate(){V(this,y).clear()}}y=new WeakMap,g=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const A=(b=document==null?void 0:document.currentScript)==null?void 0:b.src;A&&(PDFWorkerUtil.fallbackWorkerSrc=A.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(A,S){let F;try{if(F=new URL(A),!F.origin||F.origin==="null")return!1}catch{return!1}const Z=new URL(S,F);return F.origin===Z.origin},PDFWorkerUtil.createCDNWrapper=function(A){const S=`importScripts("${A}");`;return URL.createObjectURL(new Blob([S]))}}const _PDFWorker=class _PDFWorker{constructor({name:A=null,port:S=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){if(S&&V(_PDFWorker,j).has(S))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=A,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,S){V(_PDFWorker,j).set(S,this),this._initializeFromPort(S);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(A){this._port=A,this._messageHandler=new _message_handler.MessageHandler("main","worker",A),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:A}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,A)||(A=PDFWorkerUtil.createCDNWrapper(new URL(A,window.location).href));const S=new Worker(A),F=new _message_handler.MessageHandler("main","worker",S),Z=()=>{S.removeEventListener("error",P),F.destroy(),S.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},P=()=>{this._webWorker||Z()};S.addEventListener("error",P),F.on("test",ue=>{if(S.removeEventListener("error",P),this.destroyed){Z();return}ue?(this._messageHandler=F,this._port=S,this._webWorker=S,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),S.terminate())}),F.on("ready",ue=>{if(S.removeEventListener("error",P),this.destroyed){Z();return}try{ie()}catch{this._setupFakeWorker()}});const ie=()=>{const ue=new Uint8Array;F.send("test",ue,[ue.buffer])};ie();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(A=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const S=new LoopbackPort;this._port=S;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,Z=new _message_handler.MessageHandler(F+"_worker",F,S);A.setup(Z,S);const P=new _message_handler.MessageHandler(F,F+"_worker",S);this._messageHandler=P,this._readyCapability.resolve(),P.send("configure",{verbosity:this.verbosity})}).catch(A=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${A.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),V(_PDFWorker,j).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(A){if(!(A!=null&&A.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return V(this,j).has(A.port)?V(this,j).get(A.port):new _PDFWorker(A)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var A;try{return((A=globalThis.pdfjsWorker)==null?void 0:A.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};j=new WeakMap,be(_PDFWorker,j,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(S,F,Z,P,ie){be(this,N);be(this,B,new Map);be(this,R,new Map);be(this,D,new Map);this.messageHandler=S,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:P.ownerDocument,styleElement:P.styleElement}),this._params=P,this.canvasFactory=ie.canvasFactory,this.filterFactory=ie.filterFactory,this.cMapReaderFactory=ie.cMapReaderFactory,this.standardFontDataFactory=ie.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=Z,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(S,F=_util.AnnotationMode.ENABLE,Z=null,P=!1){let ie=_util.RenderingIntentFlag.DISPLAY,ue=null;switch(S){case"any":ie=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":ie=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${S}`)}switch(F){case _util.AnnotationMode.DISABLE:ie+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:ie+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:ie+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,ue=(ie&_util.RenderingIntentFlag.PRINT&&Z instanceof _annotation_storage.PrintAnnotationStorage?Z:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return P&&(ie+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:ie,cacheKey:`${ie}_${_annotation_storage.AnnotationStorage.getHash(ue)}`,annotationStorageMap:ue}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const S=[];for(const Z of V(this,R).values())S.push(Z._destroy());V(this,R).clear(),V(this,D).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return S.push(F),Promise.all(S).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),V(this,B).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:S,loadingTask:F}=this;S.on("GetReader",(Z,P)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ie=>{this._lastProgress={loaded:ie.loaded,total:ie.total}},P.onPull=()=>{this._fullReader.read().then(function({value:ie,done:ue}){if(ue){P.close();return}(0,_util.assert)(ie instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),P.enqueue(new Uint8Array(ie),1,[ie])}).catch(ie=>{P.error(ie)})},P.onCancel=ie=>{this._fullReader.cancel(ie),P.ready.catch(ue=>{if(!this.destroyed)throw ue})}}),S.on("ReaderHeadersReady",Z=>{const P=new _util.PromiseCapability,ie=this._fullReader;return ie.headersReady.then(()=>{var ue;(!ie.isStreamingSupported||!ie.isRangeSupported)&&(this._lastProgress&&((ue=F.onProgress)==null||ue.call(F,this._lastProgress)),ie.onProgress=pe=>{var _e;(_e=F.onProgress)==null||_e.call(F,{loaded:pe.loaded,total:pe.total})}),P.resolve({isStreamingSupported:ie.isStreamingSupported,isRangeSupported:ie.isRangeSupported,contentLength:ie.contentLength})},P.reject),P.promise}),S.on("GetRangeReader",(Z,P)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ie=this._networkStream.getRangeReader(Z.begin,Z.end);if(!ie){P.close();return}P.onPull=()=>{ie.read().then(function({value:ue,done:pe}){if(pe){P.close();return}(0,_util.assert)(ue instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),P.enqueue(new Uint8Array(ue),1,[ue])}).catch(ue=>{P.error(ue)})},P.onCancel=ue=>{ie.cancel(ue),P.ready.catch(pe=>{if(!this.destroyed)throw pe})}}),S.on("GetDoc",({pdfInfo:Z})=>{this._numPages=Z.numPages,this._htmlForXfa=Z.htmlForXfa,delete Z.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(Z,this))}),S.on("DocException",function(Z){let P;switch(Z.name){case"PasswordException":P=new _util.PasswordException(Z.message,Z.code);break;case"InvalidPDFException":P=new _util.InvalidPDFException(Z.message);break;case"MissingPDFException":P=new _util.MissingPDFException(Z.message);break;case"UnexpectedResponseException":P=new _util.UnexpectedResponseException(Z.message,Z.status);break;case"UnknownErrorException":P=new _util.UnknownErrorException(Z.message,Z.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject(P)}),S.on("PasswordRequest",Z=>{if(this._passwordCapability=new _util.PromiseCapability,F.onPassword){const P=ie=>{ie instanceof Error?this._passwordCapability.reject(ie):this._passwordCapability.resolve({password:ie})};try{F.onPassword(P,Z.code)}catch(ie){this._passwordCapability.reject(ie)}}else this._passwordCapability.reject(new _util.PasswordException(Z.message,Z.code));return this._passwordCapability.promise}),S.on("DataLoaded",Z=>{var P;(P=F.onProgress)==null||P.call(F,{loaded:Z.length,total:Z.length}),this.downloadInfoCapability.resolve(Z)}),S.on("StartRenderPage",Z=>{if(this.destroyed)return;V(this,R).get(Z.pageIndex)._startRenderPage(Z.transparency,Z.cacheKey)}),S.on("commonobj",([Z,P,ie])=>{var ue;if(!this.destroyed&&!this.commonObjs.has(Z))switch(P){case"Font":const pe=this._params;if("error"in ie){const Pe=ie.error;(0,_util.warn)(`Error during font loading: ${Pe}`),this.commonObjs.resolve(Z,Pe);break}const _e=pe.pdfBug&&((ue=globalThis.FontInspector)!=null&&ue.enabled)?(Pe,Se)=>globalThis.FontInspector.fontAdded(Pe,Se):null,we=new _font_loader.FontFaceObject(ie,{isEvalSupported:pe.isEvalSupported,disableFontFace:pe.disableFontFace,ignoreErrors:pe.ignoreErrors,inspectFont:_e});this.fontLoader.bind(we).catch(Pe=>S.sendWithPromise("FontFallback",{id:Z})).finally(()=>{!pe.fontExtraProperties&&we.data&&(we.data=null),this.commonObjs.resolve(Z,we)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Z,ie);break;default:throw new Error(`Got unknown common object type ${P}`)}}),S.on("obj",([Z,P,ie,ue])=>{var _e;if(this.destroyed)return;const pe=V(this,R).get(P);if(!pe.objs.has(Z))switch(ie){case"Image":if(pe.objs.resolve(Z,ue),ue){let we;if(ue.bitmap){const{width:Pe,height:Se}=ue;we=Pe*Se*4}else we=((_e=ue.data)==null?void 0:_e.length)||0;we>_util.MAX_IMAGE_SIZE_TO_CACHE&&(pe._maybeCleanupAfterRender=!0)}break;case"Pattern":pe.objs.resolve(Z,ue);break;default:throw new Error(`Got unknown object type ${ie}`)}}),S.on("DocProgress",Z=>{var P;this.destroyed||(P=F.onProgress)==null||P.call(F,{loaded:Z.loaded,total:Z.total})}),S.on("FetchBuiltInCMap",Z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Z):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),S.on("FetchStandardFontData",Z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Z):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var S;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((S=this._fullReader)==null?void 0:S.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(S){if(!Number.isInteger(S)||S<=0||S>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=S-1,Z=V(this,D).get(F);if(Z)return Z;const P=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(ie=>{if(this.destroyed)throw new Error("Transport destroyed");const ue=new PDFPageProxy(F,ie,this,this._params.pdfBug);return V(this,R).set(F,ue),ue});return V(this,D).set(F,P),P}getPageIndex(S){return typeof S!="object"||S===null||!Number.isInteger(S.num)||S.num<0||!Number.isInteger(S.gen)||S.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:S.num,gen:S.gen})}getAnnotations(S,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:S,intent:F})}getFieldObjects(){return Ae(this,N,kn).call(this,"GetFieldObjects")}hasJSActions(){return Ae(this,N,kn).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(S){return typeof S!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:S})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(S){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:S})}getStructTree(S){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:S})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(S=>new _optional_content_config.OptionalContentConfig(S))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const S="GetMetadata",F=V(this,B).get(S);if(F)return F;const Z=this.messageHandler.sendWithPromise(S,null).then(P=>{var ie,ue;return{info:P[0],metadata:P[1]?new _metadata.Metadata(P[1]):null,contentDispositionFilename:((ie=this._fullReader)==null?void 0:ie.filename)??null,contentLength:((ue=this._fullReader)==null?void 0:ue.contentLength)??null}});return V(this,B).set(S,Z),Z}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(S=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of V(this,R).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),S||this.fontLoader.clear(),V(this,B).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:S,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:S,enableXfa:F})}}B=new WeakMap,R=new WeakMap,D=new WeakMap,N=new WeakSet,kn=function(S,F=null){const Z=V(this,B).get(S);if(Z)return Z;const P=this.messageHandler.sendWithPromise(S,F);return V(this,B).set(S,P),P};class PDFObjects{constructor(){be(this,q);be(this,$,Object.create(null))}get(S,F=null){if(F){const P=Ae(this,q,En).call(this,S);return P.capability.promise.then(()=>F(P.data)),null}const Z=V(this,$)[S];if(!(Z!=null&&Z.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${S}.`);return Z.data}has(S){const F=V(this,$)[S];return(F==null?void 0:F.capability.settled)||!1}resolve(S,F=null){const Z=Ae(this,q,En).call(this,S);Z.data=F,Z.capability.resolve()}clear(){var S;for(const F in V(this,$)){const{data:Z}=V(this,$)[F];(S=Z==null?void 0:Z.bitmap)==null||S.close()}Ie(this,$,Object.create(null))}}$=new WeakMap,q=new WeakSet,En=function(S){const F=V(this,$)[S];return F||(V(this,$)[S]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(S){be(this,T,null);Ie(this,T,S),this.onContinue=null}get promise(){return V(this,T).capability.promise}cancel(S=0){V(this,T).cancel(null,S)}get separateAnnots(){const{separateAnnots:S}=V(this,T).operatorList;if(!S)return!1;const{annotationCanvasMap:F}=V(this,T);return S.form||S.canvas&&(F==null?void 0:F.size)>0}}T=new WeakMap,exports.RenderTask=RenderTask;const C=class C{constructor({callback:S,params:F,objs:Z,commonObjs:P,annotationCanvasMap:ie,operatorList:ue,pageIndex:pe,canvasFactory:_e,filterFactory:we,useRequestAnimationFrame:Pe=!1,pdfBug:Se=!1,pageColors:De=null}){this.callback=S,this.params=F,this.objs=Z,this.commonObjs=P,this.annotationCanvasMap=ie,this.operatorListIdx=null,this.operatorList=ue,this._pageIndex=pe,this.canvasFactory=_e,this.filterFactory=we,this._pdfBug=Se,this.pageColors=De,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Pe===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:S=!1,optionalContentConfig:F}){var pe,_e;if(this.cancelled)return;if(this._canvas){if(V(C,w).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");V(C,w).add(this._canvas)}this._pdfBug&&((pe=globalThis.StepperManager)!=null&&pe.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Z,viewport:P,transform:ie,background:ue}=this.params;this.gfx=new _canvas.CanvasGraphics(Z,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:ie,viewport:P,transparency:S,background:ue}),this.operatorListIdx=0,this.graphicsReady=!0,(_e=this.graphicsReadyCallback)==null||_e.call(this)}cancel(S=null,F=0){var Z;this.running=!1,this.cancelled=!0,(Z=this.gfx)==null||Z.endDrawing(),this._canvas&&V(C,w).delete(this._canvas),this.callback(S||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",F))}operatorListChanged(){var S;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(S=this.stepper)==null||S.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&V(C,w).delete(this._canvas),this.callback())))}};w=new WeakMap,be(C,w,new WeakSet);let InternalRenderTask=C;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(e,t,r)=>{var y,g,b,Fi,B;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=r(1),s=r(4),c=r(8);class d{constructor(){be(this,b);be(this,y,!1);be(this,g,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(D,N){const E=V(this,g).get(D);return E===void 0?N:Object.assign(N,E)}getRawValue(D){return V(this,g).get(D)}remove(D){if(V(this,g).delete(D),V(this,g).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const N of V(this,g).values())if(N instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(D,N){const E=V(this,g).get(D);let $=!1;if(E!==void 0)for(const[q,Y]of Object.entries(N))E[q]!==Y&&($=!0,E[q]=Y);else $=!0,V(this,g).set(D,N);$&&Ae(this,b,Fi).call(this),N instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(N.constructor._type)}has(D){return V(this,g).has(D)}getAll(){return V(this,g).size>0?(0,i.objectFromMap)(V(this,g)):null}setAll(D){for(const[N,E]of Object.entries(D))this.setValue(N,E)}get size(){return V(this,g).size}resetModified(){V(this,y)&&(Ie(this,y,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new m(this)}get serializable(){if(V(this,g).size===0)return null;const D=new Map;for(const[N,E]of V(this,g)){const $=E instanceof s.AnnotationEditor?E.serialize():E;$&&D.set(N,$)}return D}static getHash(D){if(!D)return"";const N=new c.MurmurHash3_64;for(const[E,$]of D)N.update(`${E}:${JSON.stringify($)}`);return N.hexdigest()}}y=new WeakMap,g=new WeakMap,b=new WeakSet,Fi=function(){V(this,y)||(Ie(this,y,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=d;class m extends d{constructor(N){super();be(this,B,null);Ie(this,B,structuredClone(N.serializable))}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return V(this,B)}}B=new WeakMap,t.PrintAnnotationStorage=m},(e,t,r)=>{var d,m,y,g,b,j;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=r(5),s=r(1);const B=class B{constructor(D){be(this,d,this.focusin.bind(this));be(this,m,this.focusout.bind(this));be(this,y,!1);be(this,g,!1);be(this,b,!1);fe(this,"_uiManager",null);be(this,j,B._zIndex++);this.constructor===B&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=D.parent,this.id=D.id,this.width=this.height=null,this.pageIndex=D.parent.pageIndex,this.name=D.name,this.div=null,this._uiManager=D.uiManager;const{rotation:N,rawDims:{pageWidth:E,pageHeight:$,pageX:q,pageY:Y}}=this.parent.viewport;this.rotation=N,this.pageRotation=(360+N-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[E,$],this.pageTranslation=[q,Y];const[T,w]=this.parentDimensions;this.x=D.x/T,this.y=D.y/w,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(D){this._uiManager.addCommands(D)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=V(this,j)}setParent(D){D!==null&&(this.pageIndex=D.pageIndex,this.pageDimensions=D.pageDimensions),this.parent=D}focusin(D){V(this,y)?Ie(this,y,!1):this.parent.setSelected(this)}focusout(D){var E;if(!this.isAttachedToDOM)return;const N=D.relatedTarget;N!=null&&N.closest(`#${this.id}`)||(D.preventDefault(),(E=this.parent)!=null&&E.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(D){const N=this.parent.div.getBoundingClientRect();this.startX=D.clientX-N.x,this.startY=D.clientY-N.y,D.dataTransfer.setData("text/plain",this.id),D.dataTransfer.effectAllowed="move"}setAt(D,N,E,$){const[q,Y]=this.parentDimensions;[E,$]=this.screenToPageTranslation(E,$),this.x=(D+E)/q,this.y=(N+$)/Y,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(D,N){const[E,$]=this.parentDimensions;[D,N]=this.screenToPageTranslation(D,N),this.x+=D/E,this.y+=N/$,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(D,N){switch(this.parentRotation){case 90:return[N,-D];case 180:return[-D,-N];case 270:return[-N,D];default:return[D,N]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:D}=this._uiManager.viewParameters,[N,E]=this.pageDimensions;return[N*D,E*D]}setDims(D,N){const[E,$]=this.parentDimensions;this.div.style.width=`${100*D/E}%`,this.div.style.height=`${100*N/$}%`}fixDims(){const{style:D}=this.div,{height:N,width:E}=D,$=E.endsWith("%"),q=N.endsWith("%");if($&&q)return;const[Y,T]=this.parentDimensions;$||(D.width=`${100*parseFloat(E)/Y}%`),q||(D.height=`${100*parseFloat(N)/T}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",V(this,d)),this.div.addEventListener("focusout",V(this,m));const[D,N]=this.getInitialTranslation();return this.translate(D,N),(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(D){const{isMac:N}=s.FeatureTest.platform;if(D.button!==0||D.ctrlKey&&N){D.preventDefault();return}D.ctrlKey&&!N||D.shiftKey||D.metaKey&&N?this.parent.toggleSelected(this):this.parent.setSelected(this),Ie(this,y,!0)}getRect(D,N){const E=this.parentScale,[$,q]=this.pageDimensions,[Y,T]=this.pageTranslation,w=D/E,C=N/E,A=this.x*$,S=this.y*q,F=this.width*$,Z=this.height*q;switch(this.rotation){case 0:return[A+w+Y,q-S-C-Z+T,A+w+F+Y,q-S-C+T];case 90:return[A+C+Y,q-S+w+T,A+C+Z+Y,q-S+w+F+T];case 180:return[A-w-F+Y,q-S+C+T,A-w+Y,q-S+C+Z+T];case 270:return[A-C-Z+Y,q-S-w-F+T,A-C+Y,q-S-w+T];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(D,N){const[E,$,q,Y]=D,T=q-E,w=Y-$;switch(this.rotation){case 0:return[E,N-Y,T,w];case 90:return[E,N-$,w,T];case 180:return[q,N-$,T,w];case 270:return[q,N-Y,w,T];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Ie(this,b,!0)}disableEditMode(){Ie(this,b,!1)}isInEditMode(){return V(this,b)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var D;(D=this.div)==null||D.addEventListener("focusin",V(this,d))}serialize(){(0,s.unreachable)("An editor must be serializable")}static deserialize(D,N,E){const $=new this.prototype.constructor({parent:N,id:N.getNextId(),uiManager:E});$.rotation=D.rotation;const[q,Y]=$.pageDimensions,[T,w,C,A]=$.getRectInCurrentCoords(D.rect,Y);return $.x=T/q,$.y=w/Y,$.width=C/q,$.height=A/Y,$}remove(){this.div.removeEventListener("focusin",V(this,d)),this.div.removeEventListener("focusout",V(this,m)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var D;(D=this.div)==null||D.classList.add("selectedEditor")}unselect(){var D;(D=this.div)==null||D.classList.remove("selectedEditor")}updateParams(D,N){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return V(this,g)}set isEditing(D){Ie(this,g,D),D?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};d=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,j=new WeakMap,fe(B,"_colorManager",new i.ColorManager),fe(B,"_zIndex",1);let c=B;t.AnnotationEditor=c},(e,t,r)=>{var B,R,D,N,E,$,Ii,T,w,C,A,S,F,Z,P,ie,ue,pe,_e,we,Pe,Se,De,Ne,Ue,je,$e,de,L,H,Q,Li,X,Cn,ee,Ni,ne,$i,O,Pt,K,kr,ce,Bi,me,Ui,Te,Tn,Ce,Er,Fe,Dn;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=c,t.opacityToHex=d;var i=r(1),s=r(6);function c(U,ge,Be){for(const He of Be)ge.addEventListener(He,U[He].bind(U))}function d(U){return Math.round(Math.min(255,Math.max(1,255*U))).toString(16).padStart(2,"0")}class m{constructor(){be(this,B,0)}getId(){return`${i.AnnotationEditorPrefix}${Ur(this,B)._++}`}}B=new WeakMap;class y{constructor(ge=128){be(this,R,[]);be(this,D,!1);be(this,N,void 0);be(this,E,-1);Ie(this,N,ge)}add({cmd:ge,undo:Be,mustExec:He,type:it=NaN,overwriteIfSameType:Me=!1,keepUndo:te=!1}){if(He&&ge(),V(this,D))return;const ae={cmd:ge,undo:Be,type:it};if(V(this,E)===-1){V(this,R).length>0&&(V(this,R).length=0),Ie(this,E,0),V(this,R).push(ae);return}if(Me&&V(this,R)[V(this,E)].type===it){te&&(ae.undo=V(this,R)[V(this,E)].undo),V(this,R)[V(this,E)]=ae;return}const Ee=V(this,E)+1;Ee===V(this,N)?V(this,R).splice(0,1):(Ie(this,E,Ee),Ee<V(this,R).length&&V(this,R).splice(Ee)),V(this,R).push(ae)}undo(){V(this,E)!==-1&&(Ie(this,D,!0),V(this,R)[V(this,E)].undo(),Ie(this,D,!1),Ie(this,E,V(this,E)-1))}redo(){V(this,E)<V(this,R).length-1&&(Ie(this,E,V(this,E)+1),Ie(this,D,!0),V(this,R)[V(this,E)].cmd(),Ie(this,D,!1))}hasSomethingToUndo(){return V(this,E)!==-1}hasSomethingToRedo(){return V(this,E)<V(this,R).length-1}destroy(){Ie(this,R,null)}}R=new WeakMap,D=new WeakMap,N=new WeakMap,E=new WeakMap,t.CommandManager=y;class g{constructor(ge){be(this,$);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Be}=i.FeatureTest.platform;for(const[He,it]of ge)for(const Me of He){const te=Me.startsWith("mac+");Be&&te?(this.callbacks.set(Me.slice(4),it),this.allKeys.add(Me.split("+").at(-1))):!Be&&!te&&(this.callbacks.set(Me,it),this.allKeys.add(Me.split("+").at(-1)))}}exec(ge,Be){if(!this.allKeys.has(Be.key))return;const He=this.callbacks.get(Ae(this,$,Ii).call(this,Be));He&&(He.bind(ge)(),Be.stopPropagation(),Be.preventDefault())}}$=new WeakSet,Ii=function(ge){ge.altKey&&this.buffer.push("alt"),ge.ctrlKey&&this.buffer.push("ctrl"),ge.metaKey&&this.buffer.push("meta"),ge.shiftKey&&this.buffer.push("shift"),this.buffer.push(ge.key);const Be=this.buffer.join("+");return this.buffer.length=0,Be},t.KeyboardManager=g;const Y=class Y{get _colors(){const ge=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(ge),(0,i.shadow)(this,"_colors",ge)}convert(ge){const Be=(0,s.getRGB)(ge);if(!window.matchMedia("(forced-colors: active)").matches)return Be;for(const[He,it]of this._colors)if(it.every((Me,te)=>Me===Be[te]))return Y._colorsMapping.get(He);return Be}getHexCode(ge){const Be=this._colors.get(ge);return Be?i.Util.makeHexColor(...Be):ge}};fe(Y,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let b=Y;t.ColorManager=b;const ze=class ze{constructor(ge,Be,He){be(this,Q);be(this,X);be(this,ee);be(this,ne);be(this,O);be(this,K);be(this,ce);be(this,me);be(this,Te);be(this,Ce);be(this,Fe);be(this,T,null);be(this,w,new Map);be(this,C,new Map);be(this,A,null);be(this,S,new y);be(this,F,0);be(this,Z,null);be(this,P,new Set);be(this,ie,null);be(this,ue,new m);be(this,pe,!1);be(this,_e,i.AnnotationEditorType.NONE);be(this,we,new Set);be(this,Pe,this.copy.bind(this));be(this,Se,this.cut.bind(this));be(this,De,this.paste.bind(this));be(this,Ne,this.keydown.bind(this));be(this,Ue,this.onEditingAction.bind(this));be(this,je,this.onPageChanging.bind(this));be(this,$e,this.onScaleChanging.bind(this));be(this,de,this.onRotationChanging.bind(this));be(this,L,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});be(this,H,null);Ie(this,H,ge),Ie(this,ie,Be),V(this,ie)._on("editingaction",V(this,Ue)),V(this,ie)._on("pagechanging",V(this,je)),V(this,ie)._on("scalechanging",V(this,$e)),V(this,ie)._on("rotationchanging",V(this,de)),Ie(this,A,He),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){Ae(this,X,Cn).call(this),V(this,ie)._off("editingaction",V(this,Ue)),V(this,ie)._off("pagechanging",V(this,je)),V(this,ie)._off("scalechanging",V(this,$e)),V(this,ie)._off("rotationchanging",V(this,de));for(const ge of V(this,C).values())ge.destroy();V(this,C).clear(),V(this,w).clear(),V(this,P).clear(),Ie(this,T,null),V(this,we).clear(),V(this,S).destroy()}onPageChanging({pageNumber:ge}){Ie(this,F,ge-1)}focusMainContainer(){V(this,H).focus()}addShouldRescale(ge){V(this,P).add(ge)}removeShouldRescale(ge){V(this,P).delete(ge)}onScaleChanging({scale:ge}){this.commitOrRemove(),this.viewParameters.realScale=ge*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Be of V(this,P))Be.onScaleChanging()}onRotationChanging({pagesRotation:ge}){this.commitOrRemove(),this.viewParameters.rotation=ge}addToAnnotationStorage(ge){!ge.isEmpty()&&V(this,A)&&!V(this,A).has(ge.id)&&V(this,A).setValue(ge.id,ge)}copy(ge){if(ge.preventDefault(),V(this,T)&&V(this,T).commitOrRemove(),!this.hasSelection)return;const Be=[];for(const He of V(this,we))He.isEmpty()||Be.push(He.serialize());Be.length!==0&&ge.clipboardData.setData("application/pdfjs",JSON.stringify(Be))}cut(ge){this.copy(ge),this.delete()}paste(ge){ge.preventDefault();let Be=ge.clipboardData.getData("application/pdfjs");if(!Be)return;try{Be=JSON.parse(Be)}catch(it){(0,i.warn)(`paste: "${it.message}".`);return}if(!Array.isArray(Be))return;this.unselectAll();const He=V(this,C).get(V(this,F));try{const it=[];for(const ae of Be){const Ee=He.deserialize(ae);if(!Ee)return;it.push(Ee)}const Me=()=>{for(const ae of it)Ae(this,Te,Tn).call(this,ae);Ae(this,Fe,Dn).call(this,it)},te=()=>{for(const ae of it)ae.remove()};this.addCommands({cmd:Me,undo:te,mustExec:!0})}catch(it){(0,i.warn)(`paste: "${it.message}".`)}}keydown(ge){var Be;(Be=this.getActive())!=null&&Be.shouldGetKeyboardEvents()||ze._keyboardManager.exec(this,ge)}onEditingAction(ge){["undo","redo","delete","selectAll"].includes(ge.name)&&this[ge.name]()}setEditingState(ge){ge?(Ae(this,Q,Li).call(this),Ae(this,ee,Ni).call(this),Ae(this,O,Pt).call(this,{isEditing:V(this,_e)!==i.AnnotationEditorType.NONE,isEmpty:Ae(this,Ce,Er).call(this),hasSomethingToUndo:V(this,S).hasSomethingToUndo(),hasSomethingToRedo:V(this,S).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ae(this,X,Cn).call(this),Ae(this,ne,$i).call(this),Ae(this,O,Pt).call(this,{isEditing:!1}))}registerEditorTypes(ge){if(!V(this,Z)){Ie(this,Z,ge);for(const Be of V(this,Z))Ae(this,K,kr).call(this,Be.defaultPropertiesToUpdate)}}getId(){return V(this,ue).getId()}get currentLayer(){return V(this,C).get(V(this,F))}get currentPageIndex(){return V(this,F)}addLayer(ge){V(this,C).set(ge.pageIndex,ge),V(this,pe)?ge.enable():ge.disable()}removeLayer(ge){V(this,C).delete(ge.pageIndex)}updateMode(ge){if(Ie(this,_e,ge),ge===i.AnnotationEditorType.NONE)this.setEditingState(!1),Ae(this,me,Ui).call(this);else{this.setEditingState(!0),Ae(this,ce,Bi).call(this);for(const Be of V(this,C).values())Be.updateMode(ge)}}updateToolbar(ge){ge!==V(this,_e)&&V(this,ie).dispatch("switchannotationeditormode",{source:this,mode:ge})}updateParams(ge,Be){if(V(this,Z)){for(const He of V(this,we))He.updateParams(ge,Be);for(const He of V(this,Z))He.updateDefaultParams(ge,Be)}}getEditors(ge){const Be=[];for(const He of V(this,w).values())He.pageIndex===ge&&Be.push(He);return Be}getEditor(ge){return V(this,w).get(ge)}addEditor(ge){V(this,w).set(ge.id,ge)}removeEditor(ge){var Be;V(this,w).delete(ge.id),this.unselect(ge),(Be=V(this,A))==null||Be.remove(ge.id)}setActiveEditor(ge){V(this,T)!==ge&&(Ie(this,T,ge),ge&&Ae(this,K,kr).call(this,ge.propertiesToUpdate))}toggleSelected(ge){if(V(this,we).has(ge)){V(this,we).delete(ge),ge.unselect(),Ae(this,O,Pt).call(this,{hasSelectedEditor:this.hasSelection});return}V(this,we).add(ge),ge.select(),Ae(this,K,kr).call(this,ge.propertiesToUpdate),Ae(this,O,Pt).call(this,{hasSelectedEditor:!0})}setSelected(ge){for(const Be of V(this,we))Be!==ge&&Be.unselect();V(this,we).clear(),V(this,we).add(ge),ge.select(),Ae(this,K,kr).call(this,ge.propertiesToUpdate),Ae(this,O,Pt).call(this,{hasSelectedEditor:!0})}isSelected(ge){return V(this,we).has(ge)}unselect(ge){ge.unselect(),V(this,we).delete(ge),Ae(this,O,Pt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return V(this,we).size!==0}undo(){V(this,S).undo(),Ae(this,O,Pt).call(this,{hasSomethingToUndo:V(this,S).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ae(this,Ce,Er).call(this)})}redo(){V(this,S).redo(),Ae(this,O,Pt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:V(this,S).hasSomethingToRedo(),isEmpty:Ae(this,Ce,Er).call(this)})}addCommands(ge){V(this,S).add(ge),Ae(this,O,Pt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ae(this,Ce,Er).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const ge=[...V(this,we)],Be=()=>{for(const it of ge)it.remove()},He=()=>{for(const it of ge)Ae(this,Te,Tn).call(this,it)};this.addCommands({cmd:Be,undo:He,mustExec:!0})}commitOrRemove(){var ge;(ge=V(this,T))==null||ge.commitOrRemove()}selectAll(){for(const ge of V(this,we))ge.commit();Ae(this,Fe,Dn).call(this,V(this,w).values())}unselectAll(){if(V(this,T)){V(this,T).commitOrRemove();return}if(V(this,we).size!==0){for(const ge of V(this,we))ge.unselect();V(this,we).clear(),Ae(this,O,Pt).call(this,{hasSelectedEditor:!1})}}isActive(ge){return V(this,T)===ge}getActive(){return V(this,T)}getMode(){return V(this,_e)}};T=new WeakMap,w=new WeakMap,C=new WeakMap,A=new WeakMap,S=new WeakMap,F=new WeakMap,Z=new WeakMap,P=new WeakMap,ie=new WeakMap,ue=new WeakMap,pe=new WeakMap,_e=new WeakMap,we=new WeakMap,Pe=new WeakMap,Se=new WeakMap,De=new WeakMap,Ne=new WeakMap,Ue=new WeakMap,je=new WeakMap,$e=new WeakMap,de=new WeakMap,L=new WeakMap,H=new WeakMap,Q=new WeakSet,Li=function(){V(this,H).addEventListener("keydown",V(this,Ne))},X=new WeakSet,Cn=function(){V(this,H).removeEventListener("keydown",V(this,Ne))},ee=new WeakSet,Ni=function(){document.addEventListener("copy",V(this,Pe)),document.addEventListener("cut",V(this,Se)),document.addEventListener("paste",V(this,De))},ne=new WeakSet,$i=function(){document.removeEventListener("copy",V(this,Pe)),document.removeEventListener("cut",V(this,Se)),document.removeEventListener("paste",V(this,De))},O=new WeakSet,Pt=function(ge){Object.entries(ge).some(([He,it])=>V(this,L)[He]!==it)&&V(this,ie).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(V(this,L),ge)})},K=new WeakSet,kr=function(ge){V(this,ie).dispatch("annotationeditorparamschanged",{source:this,details:ge})},ce=new WeakSet,Bi=function(){if(!V(this,pe)){Ie(this,pe,!0);for(const ge of V(this,C).values())ge.enable()}},me=new WeakSet,Ui=function(){if(this.unselectAll(),V(this,pe)){Ie(this,pe,!1);for(const ge of V(this,C).values())ge.disable()}},Te=new WeakSet,Tn=function(ge){const Be=V(this,C).get(ge.pageIndex);Be?Be.addOrRebuild(ge):this.addEditor(ge)},Ce=new WeakSet,Er=function(){if(V(this,w).size===0)return!0;if(V(this,w).size===1)for(const ge of V(this,w).values())return ge.isEmpty();return!1},Fe=new WeakSet,Dn=function(ge){V(this,we).clear();for(const Be of ge)Be.isEmpty()||(V(this,we).add(Be),Be.select());Ae(this,O,Pt).call(this,{hasSelectedEditor:!0})},fe(ze,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],ze.prototype.selectAll],[["ctrl+z","mac+meta+z"],ze.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ze.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ze.prototype.delete],[["Escape","mac+Escape"],ze.prototype.unselectAll]]));let j=ze;t.AnnotationEditorUIManager=j},(e,t,r)=>{var Pe,Se,De,Ne,Ue,je,$e,de,L,dr,Q,Wt,X,Rt;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=A,t.getColorValues=ie,t.getCurrentTransform=ue,t.getCurrentTransformInverse=pe,t.getFilenameFromUrl=q,t.getPdfFilenameFromUrl=Y,t.getRGB=P,t.getXfaPageViewport=Z,t.isDataScheme=E,t.isPdfFile=$,t.isValidFetchUrl=w,t.loadScript=C,t.setLayerDimensions=_e;var i=r(7),s=r(1);const c="http://www.w3.org/2000/svg",d="pdfjs_internal_id_";t.AnnotationPrefix=d;const we=class we{};fe(we,"CSS",96),fe(we,"PDF",72),fe(we,"PDF_TO_CSS_UNITS",we.CSS/we.PDF);let m=we;t.PixelsPerInch=m;class y extends i.BaseFilterFactory{constructor({docId:ne,ownerDocument:k=globalThis.document}={}){super();be(this,L);be(this,Q);be(this,X);be(this,Pe,void 0);be(this,Se,void 0);be(this,De,void 0);be(this,Ne,void 0);be(this,Ue,void 0);be(this,je,void 0);be(this,$e,void 0);be(this,de,0);Ie(this,De,ne),Ie(this,Ne,k)}addFilter(ne){if(!ne)return"none";let k=V(this,L,dr).get(ne);if(k)return k;let O,W,K,G;if(ne.length===1){const Te=ne[0],xe=new Array(256);for(let Ce=0;Ce<256;Ce++)xe[Ce]=Te[Ce]/255;G=O=W=K=xe.join(",")}else{const[Te,xe,Ce]=ne,Oe=new Array(256),Fe=new Array(256),Ve=new Array(256);for(let ze=0;ze<256;ze++)Oe[ze]=Te[ze]/255,Fe[ze]=xe[ze]/255,Ve[ze]=Ce[ze]/255;O=Oe.join(","),W=Fe.join(","),K=Ve.join(","),G=`${O}${W}${K}`}if(k=V(this,L,dr).get(G),k)return V(this,L,dr).set(ne,k),k;const ce=`g_${V(this,De)}_transfer_map_${Ur(this,de)._++}`,ye=`url(#${ce})`;V(this,L,dr).set(ne,ye),V(this,L,dr).set(G,ye);const me=V(this,Ne).createElementNS(c,"filter",c);me.setAttribute("id",ce),me.setAttribute("color-interpolation-filters","sRGB");const ke=V(this,Ne).createElementNS(c,"feComponentTransfer");return me.append(ke),Ae(this,X,Rt).call(this,ke,"feFuncR",O),Ae(this,X,Rt).call(this,ke,"feFuncG",W),Ae(this,X,Rt).call(this,ke,"feFuncB",K),V(this,Q,Wt).append(me),ye}addHCMFilter(ne,k){var Ce;const O=`${ne}-${k}`;if(V(this,je)===O)return V(this,$e);if(Ie(this,je,O),Ie(this,$e,"none"),(Ce=V(this,Ue))==null||Ce.remove(),!ne||!k)return V(this,$e);V(this,Q,Wt).style.color=ne,ne=getComputedStyle(V(this,Q,Wt)).getPropertyValue("color");const W=P(ne);ne=s.Util.makeHexColor(...W),V(this,Q,Wt).style.color=k,k=getComputedStyle(V(this,Q,Wt)).getPropertyValue("color");const K=P(k);if(k=s.Util.makeHexColor(...K),V(this,Q,Wt).style.color="",ne==="#000000"&&k==="#ffffff"||ne===k)return V(this,$e);const G=new Array(256);for(let Oe=0;Oe<=255;Oe++){const Fe=Oe/255;G[Oe]=Fe<=.03928?Fe/12.92:((Fe+.055)/1.055)**2.4}const ce=G.join(","),ye=`g_${V(this,De)}_hcm_filter`,me=Ie(this,Ue,V(this,Ne).createElementNS(c,"filter",c));me.setAttribute("id",ye),me.setAttribute("color-interpolation-filters","sRGB");let ke=V(this,Ne).createElementNS(c,"feComponentTransfer");me.append(ke),Ae(this,X,Rt).call(this,ke,"feFuncR",ce),Ae(this,X,Rt).call(this,ke,"feFuncG",ce),Ae(this,X,Rt).call(this,ke,"feFuncB",ce);const Te=V(this,Ne).createElementNS(c,"feColorMatrix");Te.setAttribute("type","matrix"),Te.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),me.append(Te),ke=V(this,Ne).createElementNS(c,"feComponentTransfer"),me.append(ke);const xe=(Oe,Fe)=>{const Ve=W[Oe]/255,ze=K[Oe]/255,U=new Array(Fe+1);for(let ge=0;ge<=Fe;ge++)U[ge]=Ve+ge/Fe*(ze-Ve);return U.join(",")};return Ae(this,X,Rt).call(this,ke,"feFuncR",xe(0,5)),Ae(this,X,Rt).call(this,ke,"feFuncG",xe(1,5)),Ae(this,X,Rt).call(this,ke,"feFuncB",xe(2,5)),V(this,Q,Wt).append(me),Ie(this,$e,`url(#${ye})`),V(this,$e)}destroy(ne=!1){ne&&V(this,$e)||(V(this,Se)&&(V(this,Se).parentNode.parentNode.remove(),Ie(this,Se,null)),V(this,Pe)&&(V(this,Pe).clear(),Ie(this,Pe,null)),Ie(this,de,0))}}Pe=new WeakMap,Se=new WeakMap,De=new WeakMap,Ne=new WeakMap,Ue=new WeakMap,je=new WeakMap,$e=new WeakMap,de=new WeakMap,L=new WeakSet,dr=function(){return V(this,Pe)||Ie(this,Pe,new Map)},Q=new WeakSet,Wt=function(){if(!V(this,Se)){const ne=V(this,Ne).createElement("div"),{style:k}=ne;k.visibility="hidden",k.contain="strict",k.width=k.height=0,k.position="absolute",k.top=k.left=0,k.zIndex=-1;const O=V(this,Ne).createElementNS(c,"svg");O.setAttribute("width",0),O.setAttribute("height",0),Ie(this,Se,V(this,Ne).createElementNS(c,"defs")),ne.append(O),O.append(V(this,Se)),V(this,Ne).body.append(ne)}return V(this,Se)},X=new WeakSet,Rt=function(ne,k,O){const W=V(this,Ne).createElementNS(c,k);W.setAttribute("type","discrete"),W.setAttribute("tableValues",O),ne.append(W)},t.DOMFilterFactory=y;class g extends i.BaseCanvasFactory{constructor({ownerDocument:re=globalThis.document}={}){super(),this._document=re}_createCanvas(re,ne){const k=this._document.createElement("canvas");return k.width=re,k.height=ne,k}}t.DOMCanvasFactory=g;async function b(ee,re=!1){if(w(ee,document.baseURI)){const ne=await fetch(ee);if(!ne.ok)throw new Error(ne.statusText);return re?new Uint8Array(await ne.arrayBuffer()):(0,s.stringToBytes)(await ne.text())}return new Promise((ne,k)=>{const O=new XMLHttpRequest;O.open("GET",ee,!0),re&&(O.responseType="arraybuffer"),O.onreadystatechange=()=>{if(O.readyState===XMLHttpRequest.DONE){if(O.status===200||O.status===0){let W;if(re&&O.response?W=new Uint8Array(O.response):!re&&O.responseText&&(W=(0,s.stringToBytes)(O.responseText)),W){ne(W);return}}k(new Error(O.statusText))}},O.send(null)})}class j extends i.BaseCMapReaderFactory{_fetchData(re,ne){return b(re,this.isCompressed).then(k=>({cMapData:k,compressionType:ne}))}}t.DOMCMapReaderFactory=j;class B extends i.BaseStandardFontDataFactory{_fetchData(re){return b(re,!0)}}t.DOMStandardFontDataFactory=B;class R extends i.BaseSVGFactory{_createSVG(re){return document.createElementNS(c,re)}}t.DOMSVGFactory=R;class D{constructor({viewBox:re,scale:ne,rotation:k,offsetX:O=0,offsetY:W=0,dontFlip:K=!1}){this.viewBox=re,this.scale=ne,this.rotation=k,this.offsetX=O,this.offsetY=W;const G=(re[2]+re[0])/2,ce=(re[3]+re[1])/2;let ye,me,ke,Te;switch(k%=360,k<0&&(k+=360),k){case 180:ye=-1,me=0,ke=0,Te=1;break;case 90:ye=0,me=1,ke=1,Te=0;break;case 270:ye=0,me=-1,ke=-1,Te=0;break;case 0:ye=1,me=0,ke=0,Te=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}K&&(ke=-ke,Te=-Te);let xe,Ce,Oe,Fe;ye===0?(xe=Math.abs(ce-re[1])*ne+O,Ce=Math.abs(G-re[0])*ne+W,Oe=(re[3]-re[1])*ne,Fe=(re[2]-re[0])*ne):(xe=Math.abs(G-re[0])*ne+O,Ce=Math.abs(ce-re[1])*ne+W,Oe=(re[2]-re[0])*ne,Fe=(re[3]-re[1])*ne),this.transform=[ye*ne,me*ne,ke*ne,Te*ne,xe-ye*ne*G-ke*ne*ce,Ce-me*ne*G-Te*ne*ce],this.width=Oe,this.height=Fe}get rawDims(){const{viewBox:re}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:re[2]-re[0],pageHeight:re[3]-re[1],pageX:re[0],pageY:re[1]})}clone({scale:re=this.scale,rotation:ne=this.rotation,offsetX:k=this.offsetX,offsetY:O=this.offsetY,dontFlip:W=!1}={}){return new D({viewBox:this.viewBox.slice(),scale:re,rotation:ne,offsetX:k,offsetY:O,dontFlip:W})}convertToViewportPoint(re,ne){return s.Util.applyTransform([re,ne],this.transform)}convertToViewportRectangle(re){const ne=s.Util.applyTransform([re[0],re[1]],this.transform),k=s.Util.applyTransform([re[2],re[3]],this.transform);return[ne[0],ne[1],k[0],k[1]]}convertToPdfPoint(re,ne){return s.Util.applyInverseTransform([re,ne],this.transform)}}t.PageViewport=D;class N extends s.BaseException{constructor(re,ne,k=0){super(re,"RenderingCancelledException"),this.type=ne,this.extraDelay=k}}t.RenderingCancelledException=N;function E(ee){const re=ee.length;let ne=0;for(;ne<re&&ee[ne].trim()==="";)ne++;return ee.substring(ne,ne+5).toLowerCase()==="data:"}function $(ee){return typeof ee=="string"&&/\.pdf$/i.test(ee)}function q(ee,re=!1){return re||([ee]=ee.split(/[#?]/,1)),ee.substring(ee.lastIndexOf("/")+1)}function Y(ee,re="document.pdf"){if(typeof ee!="string")return re;if(E(ee))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),re;const ne=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,k=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,O=ne.exec(ee);let W=k.exec(O[1])||k.exec(O[2])||k.exec(O[3]);if(W&&(W=W[0],W.includes("%")))try{W=k.exec(decodeURIComponent(W))[0]}catch{}return W||re}class T{constructor(){fe(this,"started",Object.create(null));fe(this,"times",[])}time(re){re in this.started&&(0,s.warn)(`Timer is already running for ${re}`),this.started[re]=Date.now()}timeEnd(re){re in this.started||(0,s.warn)(`Timer has not been started for ${re}`),this.times.push({name:re,start:this.started[re],end:Date.now()}),delete this.started[re]}toString(){const re=[];let ne=0;for(const{name:k}of this.times)ne=Math.max(k.length,ne);for(const{name:k,start:O,end:W}of this.times)re.push(`${k.padEnd(ne)} ${W-O}ms
`);return re.join("")}}t.StatTimer=T;function w(ee,re){try{const{protocol:ne}=re?new URL(ee,re):new URL(ee);return ne==="http:"||ne==="https:"}catch{return!1}}function C(ee,re=!1){return new Promise((ne,k)=>{const O=document.createElement("script");O.src=ee,O.onload=function(W){re&&O.remove(),ne(W)},O.onerror=function(){k(new Error(`Cannot load script at: ${O.src}`))},(document.head||document.documentElement).append(O)})}function A(ee){console.log("Deprecated API usage: "+ee)}let S;class F{static toDateObject(re){if(!re||typeof re!="string")return null;S||(S=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ne=S.exec(re);if(!ne)return null;const k=parseInt(ne[1],10);let O=parseInt(ne[2],10);O=O>=1&&O<=12?O-1:0;let W=parseInt(ne[3],10);W=W>=1&&W<=31?W:1;let K=parseInt(ne[4],10);K=K>=0&&K<=23?K:0;let G=parseInt(ne[5],10);G=G>=0&&G<=59?G:0;let ce=parseInt(ne[6],10);ce=ce>=0&&ce<=59?ce:0;const ye=ne[7]||"Z";let me=parseInt(ne[8],10);me=me>=0&&me<=23?me:0;let ke=parseInt(ne[9],10)||0;return ke=ke>=0&&ke<=59?ke:0,ye==="-"?(K+=me,G+=ke):ye==="+"&&(K-=me,G-=ke),new Date(Date.UTC(k,O,W,K,G,ce))}}t.PDFDateString=F;function Z(ee,{scale:re=1,rotation:ne=0}){const{width:k,height:O}=ee.attributes.style,W=[0,0,parseInt(k),parseInt(O)];return new D({viewBox:W,scale:re,rotation:ne})}function P(ee){if(ee.startsWith("#")){const re=parseInt(ee.slice(1),16);return[(re&16711680)>>16,(re&65280)>>8,re&255]}return ee.startsWith("rgb(")?ee.slice(4,-1).split(",").map(re=>parseInt(re)):ee.startsWith("rgba(")?ee.slice(5,-1).split(",").map(re=>parseInt(re)).slice(0,3):((0,s.warn)(`Not a valid color format: "${ee}"`),[0,0,0])}function ie(ee){const re=document.createElement("span");re.style.visibility="hidden",document.body.append(re);for(const ne of ee.keys()){re.style.color=ne;const k=window.getComputedStyle(re).color;ee.set(ne,P(k))}re.remove()}function ue(ee){const{a:re,b:ne,c:k,d:O,e:W,f:K}=ee.getTransform();return[re,ne,k,O,W,K]}function pe(ee){const{a:re,b:ne,c:k,d:O,e:W,f:K}=ee.getTransform().invertSelf();return[re,ne,k,O,W,K]}function _e(ee,re,ne=!1,k=!0){if(re instanceof D){const{pageWidth:O,pageHeight:W}=re.rawDims,{style:K}=ee,G=`calc(var(--scale-factor) * ${O}px)`,ce=`calc(var(--scale-factor) * ${W}px)`;!ne||re.rotation%180===0?(K.width=G,K.height=ce):(K.width=ce,K.height=G)}k&&ee.setAttribute("data-main-rotation",re.rotation)}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=r(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(b){return"none"}addHCMFilter(b,j){return"none"}destroy(b=!1){}}t.BaseFilterFactory=s;class c{constructor(){this.constructor===c&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(b,j){if(b<=0||j<=0)throw new Error("Invalid canvas size");const B=this._createCanvas(b,j);return{canvas:B,context:B.getContext("2d")}}reset(b,j,B){if(!b.canvas)throw new Error("Canvas is not specified");if(j<=0||B<=0)throw new Error("Invalid canvas size");b.canvas.width=j,b.canvas.height=B}destroy(b){if(!b.canvas)throw new Error("Canvas is not specified");b.canvas.width=0,b.canvas.height=0,b.canvas=null,b.context=null}_createCanvas(b,j){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=c;class d{constructor({baseUrl:b=null,isCompressed:j=!0}){this.constructor===d&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=b,this.isCompressed=j}async fetch({name:b}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!b)throw new Error("CMap name must be specified.");const j=this.baseUrl+b+(this.isCompressed?".bcmap":""),B=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(j,B).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${j}`)})}_fetchData(b,j){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=d;class m{constructor({baseUrl:b=null}){this.constructor===m&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=b}async fetch({filename:b}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!b)throw new Error("Font filename must be specified.");const j=`${this.baseUrl}${b}`;return this._fetchData(j).catch(B=>{throw new Error(`Unable to load font data at: ${j}`)})}_fetchData(b){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=m;class y{constructor(){this.constructor===y&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(b,j,B=!1){if(b<=0||j<=0)throw new Error("Invalid SVG dimensions");const R=this._createSVG("svg:svg");return R.setAttribute("version","1.1"),B||(R.setAttribute("width",`${b}px`),R.setAttribute("height",`${j}px`)),R.setAttribute("preserveAspectRatio","none"),R.setAttribute("viewBox",`0 0 ${b} ${j}`),R}createElement(b){if(typeof b!="string")throw new Error("Invalid SVG element type");return this._createSVG(b)}_createSVG(b){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=y},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=r(1);const s=3285377520,c=4294901760,d=65535;class m{constructor(g){this.h1=g?g&4294967295:s,this.h2=g?g&4294967295:s}update(g){let b,j;if(typeof g=="string"){b=new Uint8Array(g.length*2),j=0;for(let A=0,S=g.length;A<S;A++){const F=g.charCodeAt(A);F<=255?b[j++]=F:(b[j++]=F>>>8,b[j++]=F&255)}}else if((0,i.isArrayBuffer)(g))b=g.slice(),j=b.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const B=j>>2,R=j-B*4,D=new Uint32Array(b.buffer,0,B);let N=0,E=0,$=this.h1,q=this.h2;const Y=3432918353,T=461845907,w=Y&d,C=T&d;for(let A=0;A<B;A++)A&1?(N=D[A],N=N*Y&c|N*w&d,N=N<<15|N>>>17,N=N*T&c|N*C&d,$^=N,$=$<<13|$>>>19,$=$*5+3864292196):(E=D[A],E=E*Y&c|E*w&d,E=E<<15|E>>>17,E=E*T&c|E*C&d,q^=E,q=q<<13|q>>>19,q=q*5+3864292196);switch(N=0,R){case 3:N^=b[B*4+2]<<16;case 2:N^=b[B*4+1]<<8;case 1:N^=b[B*4],N=N*Y&c|N*w&d,N=N<<15|N>>>17,N=N*T&c|N*C&d,B&1?$^=N:q^=N}this.h1=$,this.h2=q}hexdigest(){let g=this.h1,b=this.h2;return g^=b>>>1,g=g*3981806797&c|g*36045&d,b=b*4283543511&c|((b<<16|g>>>16)*2950163797&c)>>>16,g^=b>>>1,g=g*444984403&c|g*60499&d,b=b*3301882366&c|((b<<16|g>>>16)*3120437893&c)>>>16,g^=b>>>1,(g>>>0).toString(16).padStart(8,"0")+(b>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=m},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=r(1),s=r(10);class c{constructor({ownerDocument:y=globalThis.document,styleElement:g=null}){this._document=y,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(y){this.nativeFontFaces.push(y),this._document.fonts.add(y)}insertRule(y){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const g=this.styleElement.sheet;g.insertRule(y,g.cssRules.length)}clear(){for(const y of this.nativeFontFaces)this._document.fonts.delete(y);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(y){if(y.attached||y.missingFile)return;if(y.attached=!0,this.isFontLoadingAPISupported){const b=y.createNativeFontFace();if(b){this.addNativeFontFace(b);try{await b.loaded}catch(j){throw(0,i.warn)(`Failed to load font '${b.family}': '${j}'.`),y.disableFontFace=!0,j}}return}const g=y.createFontFaceRule();if(g){if(this.insertRule(g),this.isSyncFontLoadingSupported)return;await new Promise(b=>{const j=this._queueLoadingCallback(b);this._prepareFontLoadEvent(y,j)})}}get isFontLoadingAPISupported(){var g;const y=!!((g=this._document)!=null&&g.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",y)}get isSyncFontLoadingSupported(){let y=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(y=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",y)}_queueLoadingCallback(y){function g(){for((0,i.assert)(!j.done,"completeRequest() cannot be called twice."),j.done=!0;b.length>0&&b[0].done;){const B=b.shift();setTimeout(B.callback,0)}}const{loadingRequests:b}=this,j={done:!1,complete:g,callback:y};return b.push(j),j}get _loadTestFont(){const y=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",y)}_prepareFontLoadEvent(y,g){function b(P,ie){return P.charCodeAt(ie)<<24|P.charCodeAt(ie+1)<<16|P.charCodeAt(ie+2)<<8|P.charCodeAt(ie+3)&255}function j(P,ie,ue,pe){const _e=P.substring(0,ie),we=P.substring(ie+ue);return _e+pe+we}let B,R;const D=this._document.createElement("canvas");D.width=1,D.height=1;const N=D.getContext("2d");let E=0;function $(P,ie){if(++E>30){(0,i.warn)("Load test font never loaded."),ie();return}if(N.font="30px "+P,N.fillText(".",0,20),N.getImageData(0,0,1,1).data[3]>0){ie();return}setTimeout($.bind(null,P,ie))}const q=`lt${Date.now()}${this.loadTestFontId++}`;let Y=this._loadTestFont;Y=j(Y,976,q.length,q);const w=16,C=1482184792;let A=b(Y,w);for(B=0,R=q.length-3;B<R;B+=4)A=A-C+b(q,B)|0;B<q.length&&(A=A-C+b(q+"XXX",B)|0),Y=j(Y,w,4,(0,i.string32)(A));const S=`url(data:font/opentype;base64,${btoa(Y)});`,F=`@font-face {font-family:"${q}";src:${S}}`;this.insertRule(F);const Z=this._document.createElement("div");Z.style.visibility="hidden",Z.style.width=Z.style.height="10px",Z.style.position="absolute",Z.style.top=Z.style.left="0px";for(const P of[y.loadedName,q]){const ie=this._document.createElement("span");ie.textContent="Hi",ie.style.fontFamily=P,Z.append(ie)}this._document.body.append(Z),$(q,()=>{Z.remove(),g.complete()})}}t.FontLoader=c;class d{constructor(y,{isEvalSupported:g=!0,disableFontFace:b=!1,ignoreErrors:j=!1,inspectFont:B=null}){this.compiledGlyphs=Object.create(null);for(const R in y)this[R]=y[R];this.isEvalSupported=g!==!1,this.disableFontFace=b===!0,this.ignoreErrors=j===!0,this._inspectFont=B}createNativeFontFace(){var g;if(!this.data||this.disableFontFace)return null;let y;if(!this.cssFontInfo)y=new FontFace(this.loadedName,this.data,{});else{const b={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(b.style=`oblique ${this.cssFontInfo.italicAngle}deg`),y=new FontFace(this.cssFontInfo.fontFamily,this.data,b)}return(g=this._inspectFont)==null||g.call(this,this),y}createFontFaceRule(){var j;if(!this.data||this.disableFontFace)return null;const y=(0,i.bytesToString)(this.data),g=`url(data:${this.mimetype};base64,${btoa(y)});`;let b;if(!this.cssFontInfo)b=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let B=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(B+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),b=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${B}src:${g}}`}return(j=this._inspectFont)==null||j.call(this,this,g),b}getPathGenerator(y,g){if(this.compiledGlyphs[g]!==void 0)return this.compiledGlyphs[g];let b;try{b=y.get(this.loadedName+"_path_"+g)}catch(j){if(!this.ignoreErrors)throw j;return(0,i.warn)(`getPathGenerator - ignoring character: "${j}".`),this.compiledGlyphs[g]=function(B,R){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const j=[];for(const B of b){const R=B.args!==void 0?B.args.join(","):"";j.push("c.",B.cmd,"(",R,`);
`)}return this.compiledGlyphs[g]=new Function("c","size",j.join(""))}return this.compiledGlyphs[g]=function(j,B){for(const R of b)R.cmd==="scale"&&(R.args=[B,-B]),j[R.cmd].apply(j,R.args)}}}t.FontFaceObject=d},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const r=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");t.isNodeJS=r},(e,t,r)=>{var De,Pn,Ue,Mn;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=r(1),s=r(6),c=r(12),d=r(13),m=r(10);const y=16,g=100,b=4096,j=15,B=10,R=1e3,D=16;function N(de,L){if(de._removeMirroring)throw new Error("Context is already forwarding operations.");de.__originalSave=de.save,de.__originalRestore=de.restore,de.__originalRotate=de.rotate,de.__originalScale=de.scale,de.__originalTranslate=de.translate,de.__originalTransform=de.transform,de.__originalSetTransform=de.setTransform,de.__originalResetTransform=de.resetTransform,de.__originalClip=de.clip,de.__originalMoveTo=de.moveTo,de.__originalLineTo=de.lineTo,de.__originalBezierCurveTo=de.bezierCurveTo,de.__originalRect=de.rect,de.__originalClosePath=de.closePath,de.__originalBeginPath=de.beginPath,de._removeMirroring=()=>{de.save=de.__originalSave,de.restore=de.__originalRestore,de.rotate=de.__originalRotate,de.scale=de.__originalScale,de.translate=de.__originalTranslate,de.transform=de.__originalTransform,de.setTransform=de.__originalSetTransform,de.resetTransform=de.__originalResetTransform,de.clip=de.__originalClip,de.moveTo=de.__originalMoveTo,de.lineTo=de.__originalLineTo,de.bezierCurveTo=de.__originalBezierCurveTo,de.rect=de.__originalRect,de.closePath=de.__originalClosePath,de.beginPath=de.__originalBeginPath,delete de._removeMirroring},de.save=function(){L.save(),this.__originalSave()},de.restore=function(){L.restore(),this.__originalRestore()},de.translate=function(Q,z){L.translate(Q,z),this.__originalTranslate(Q,z)},de.scale=function(Q,z){L.scale(Q,z),this.__originalScale(Q,z)},de.transform=function(Q,z,X,se,ee,re){L.transform(Q,z,X,se,ee,re),this.__originalTransform(Q,z,X,se,ee,re)},de.setTransform=function(Q,z,X,se,ee,re){L.setTransform(Q,z,X,se,ee,re),this.__originalSetTransform(Q,z,X,se,ee,re)},de.resetTransform=function(){L.resetTransform(),this.__originalResetTransform()},de.rotate=function(Q){L.rotate(Q),this.__originalRotate(Q)},de.clip=function(Q){L.clip(Q),this.__originalClip(Q)},de.moveTo=function(H,Q){L.moveTo(H,Q),this.__originalMoveTo(H,Q)},de.lineTo=function(H,Q){L.lineTo(H,Q),this.__originalLineTo(H,Q)},de.bezierCurveTo=function(H,Q,z,X,se,ee){L.bezierCurveTo(H,Q,z,X,se,ee),this.__originalBezierCurveTo(H,Q,z,X,se,ee)},de.rect=function(H,Q,z,X){L.rect(H,Q,z,X),this.__originalRect(H,Q,z,X)},de.closePath=function(){L.closePath(),this.__originalClosePath()},de.beginPath=function(){L.beginPath(),this.__originalBeginPath()}}class E{constructor(L){this.canvasFactory=L,this.cache=Object.create(null)}getCanvas(L,H,Q){let z;return this.cache[L]!==void 0?(z=this.cache[L],this.canvasFactory.reset(z,H,Q)):(z=this.canvasFactory.create(H,Q),this.cache[L]=z),z}delete(L){delete this.cache[L]}clear(){for(const L in this.cache){const H=this.cache[L];this.canvasFactory.destroy(H),delete this.cache[L]}}}function $(de,L,H,Q,z,X,se,ee,re,ne){const[k,O,W,K,G,ce]=(0,s.getCurrentTransform)(de);if(O===0&&W===0){const ke=se*k+G,Te=Math.round(ke),xe=ee*K+ce,Ce=Math.round(xe),Oe=(se+re)*k+G,Fe=Math.abs(Math.round(Oe)-Te)||1,Ve=(ee+ne)*K+ce,ze=Math.abs(Math.round(Ve)-Ce)||1;return de.setTransform(Math.sign(k),0,0,Math.sign(K),Te,Ce),de.drawImage(L,H,Q,z,X,0,0,Fe,ze),de.setTransform(k,O,W,K,G,ce),[Fe,ze]}if(k===0&&K===0){const ke=ee*W+G,Te=Math.round(ke),xe=se*O+ce,Ce=Math.round(xe),Oe=(ee+ne)*W+G,Fe=Math.abs(Math.round(Oe)-Te)||1,Ve=(se+re)*O+ce,ze=Math.abs(Math.round(Ve)-Ce)||1;return de.setTransform(0,Math.sign(O),Math.sign(W),0,Te,Ce),de.drawImage(L,H,Q,z,X,0,0,ze,Fe),de.setTransform(k,O,W,K,G,ce),[ze,Fe]}de.drawImage(L,H,Q,z,X,se,ee,re,ne);const ye=Math.hypot(k,O),me=Math.hypot(W,K);return[ye*re,me*ne]}function q(de){const{width:L,height:H}=de;if(L>R||H>R)return null;const Q=1e3,z=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),X=L+1;let se=new Uint8Array(X*(H+1)),ee,re,ne;const k=L+7&-8;let O=new Uint8Array(k*H),W=0;for(const me of de.data){let ke=128;for(;ke>0;)O[W++]=me&ke?0:255,ke>>=1}let K=0;for(W=0,O[W]!==0&&(se[0]=1,++K),re=1;re<L;re++)O[W]!==O[W+1]&&(se[re]=O[W]?2:1,++K),W++;for(O[W]!==0&&(se[re]=2,++K),ee=1;ee<H;ee++){W=ee*k,ne=ee*X,O[W-k]!==O[W]&&(se[ne]=O[W]?1:8,++K);let me=(O[W]?4:0)+(O[W-k]?8:0);for(re=1;re<L;re++)me=(me>>2)+(O[W+1]?4:0)+(O[W-k+1]?8:0),z[me]&&(se[ne+re]=z[me],++K),W++;if(O[W-k]!==O[W]&&(se[ne+re]=O[W]?2:4,++K),K>Q)return null}for(W=k*(H-1),ne=ee*X,O[W]!==0&&(se[ne]=8,++K),re=1;re<L;re++)O[W]!==O[W+1]&&(se[ne+re]=O[W]?4:8,++K),W++;if(O[W]!==0&&(se[ne+re]=4,++K),K>Q)return null;const G=new Int32Array([0,X,-1,0,-X,0,0,0,1]),ce=new Path2D;for(ee=0;K&&ee<=H;ee++){let me=ee*X;const ke=me+L;for(;me<ke&&!se[me];)me++;if(me===ke)continue;ce.moveTo(me%X,ee);const Te=me;let xe=se[me];do{const Ce=G[xe];do me+=Ce;while(!se[me]);const Oe=se[me];Oe!==5&&Oe!==10?(xe=Oe,se[me]=0):(xe=Oe&51*xe>>4,se[me]&=xe>>2|xe<<2),ce.lineTo(me%X,me/X|0),se[me]||--K}while(Te!==me);--ee}return O=null,se=null,function(me){me.save(),me.scale(1/L,-1/H),me.translate(0,-H),me.fill(ce),me.beginPath(),me.restore()}}class Y{constructor(L,H){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,L,H])}clone(){const L=Object.create(this);return L.clipBox=this.clipBox.slice(),L}setCurrentPoint(L,H){this.x=L,this.y=H}updatePathMinMax(L,H,Q){[H,Q]=i.Util.applyTransform([H,Q],L),this.minX=Math.min(this.minX,H),this.minY=Math.min(this.minY,Q),this.maxX=Math.max(this.maxX,H),this.maxY=Math.max(this.maxY,Q)}updateRectMinMax(L,H){const Q=i.Util.applyTransform(H,L),z=i.Util.applyTransform(H.slice(2),L);this.minX=Math.min(this.minX,Q[0],z[0]),this.minY=Math.min(this.minY,Q[1],z[1]),this.maxX=Math.max(this.maxX,Q[0],z[0]),this.maxY=Math.max(this.maxY,Q[1],z[1])}updateScalingPathMinMax(L,H){i.Util.scaleMinMax(L,H),this.minX=Math.min(this.minX,H[0]),this.maxX=Math.max(this.maxX,H[1]),this.minY=Math.min(this.minY,H[2]),this.maxY=Math.max(this.maxY,H[3])}updateCurvePathMinMax(L,H,Q,z,X,se,ee,re,ne,k){const O=i.Util.bezierBoundingBox(H,Q,z,X,se,ee,re,ne);if(k){k[0]=Math.min(k[0],O[0],O[2]),k[1]=Math.max(k[1],O[0],O[2]),k[2]=Math.min(k[2],O[1],O[3]),k[3]=Math.max(k[3],O[1],O[3]);return}this.updateRectMinMax(L,O)}getPathBoundingBox(L=c.PathType.FILL,H=null){const Q=[this.minX,this.minY,this.maxX,this.maxY];if(L===c.PathType.STROKE){H||(0,i.unreachable)("Stroke bounding box must include transform.");const z=i.Util.singularValueDecompose2dScale(H),X=z[0]*this.lineWidth/2,se=z[1]*this.lineWidth/2;Q[0]-=X,Q[1]-=se,Q[2]+=X,Q[3]+=se}return Q}updateClipFromPath(){const L=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(L||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(L){this.clipBox=L,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(L=c.PathType.FILL,H=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(L,H))}}function T(de,L){if(typeof ImageData<"u"&&L instanceof ImageData){de.putImageData(L,0,0);return}const H=L.height,Q=L.width,z=H%D,X=(H-z)/D,se=z===0?X:X+1,ee=de.createImageData(Q,D);let re=0,ne;const k=L.data,O=ee.data;let W,K,G,ce;if(L.kind===i.ImageKind.GRAYSCALE_1BPP){const ye=k.byteLength,me=new Uint32Array(O.buffer,0,O.byteLength>>2),ke=me.length,Te=Q+7>>3,xe=4294967295,Ce=i.FeatureTest.isLittleEndian?4278190080:255;for(W=0;W<se;W++){for(G=W<X?D:z,ne=0,K=0;K<G;K++){const Oe=ye-re;let Fe=0;const Ve=Oe>Te?Q:Oe*8-7,ze=Ve&-8;let U=0,ge=0;for(;Fe<ze;Fe+=8)ge=k[re++],me[ne++]=ge&128?xe:Ce,me[ne++]=ge&64?xe:Ce,me[ne++]=ge&32?xe:Ce,me[ne++]=ge&16?xe:Ce,me[ne++]=ge&8?xe:Ce,me[ne++]=ge&4?xe:Ce,me[ne++]=ge&2?xe:Ce,me[ne++]=ge&1?xe:Ce;for(;Fe<Ve;Fe++)U===0&&(ge=k[re++],U=128),me[ne++]=ge&U?xe:Ce,U>>=1}for(;ne<ke;)me[ne++]=0;de.putImageData(ee,0,W*D)}}else if(L.kind===i.ImageKind.RGBA_32BPP){for(K=0,ce=Q*D*4,W=0;W<X;W++)O.set(k.subarray(re,re+ce)),re+=ce,de.putImageData(ee,0,K),K+=D;W<se&&(ce=Q*z*4,O.set(k.subarray(re,re+ce)),de.putImageData(ee,0,K))}else if(L.kind===i.ImageKind.RGB_24BPP)for(G=D,ce=Q*G,W=0;W<se;W++){for(W>=X&&(G=z,ce=Q*G),ne=0,K=ce;K--;)O[ne++]=k[re++],O[ne++]=k[re++],O[ne++]=k[re++],O[ne++]=255;de.putImageData(ee,0,W*D)}else throw new Error(`bad image kind: ${L.kind}`)}function w(de,L){if(L.bitmap){de.drawImage(L.bitmap,0,0);return}const H=L.height,Q=L.width,z=H%D,X=(H-z)/D,se=z===0?X:X+1,ee=de.createImageData(Q,D);let re=0;const ne=L.data,k=ee.data;for(let O=0;O<se;O++){const W=O<X?D:z;({srcPos:re}=(0,d.convertBlackAndWhiteToRGBA)({src:ne,srcPos:re,dest:k,width:Q,height:W,nonBlackColor:0})),de.putImageData(ee,0,O*D)}}function C(de,L){const H=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Q of H)de[Q]!==void 0&&(L[Q]=de[Q]);de.setLineDash!==void 0&&(L.setLineDash(de.getLineDash()),L.lineDashOffset=de.lineDashOffset)}function A(de){de.strokeStyle=de.fillStyle="#000000",de.fillRule="nonzero",de.globalAlpha=1,de.lineWidth=1,de.lineCap="butt",de.lineJoin="miter",de.miterLimit=10,de.globalCompositeOperation="source-over",de.font="10px sans-serif",de.setLineDash!==void 0&&(de.setLineDash([]),de.lineDashOffset=0),m.isNodeJS||(de.filter="none")}function S(de,L,H,Q){const z=de.length;for(let X=3;X<z;X+=4){const se=de[X];if(se===0)de[X-3]=L,de[X-2]=H,de[X-1]=Q;else if(se<255){const ee=255-se;de[X-3]=de[X-3]*se+L*ee>>8,de[X-2]=de[X-2]*se+H*ee>>8,de[X-1]=de[X-1]*se+Q*ee>>8}}}function F(de,L,H){const Q=de.length,z=1/255;for(let X=3;X<Q;X+=4){const se=H?H[de[X]]:de[X];L[X]=L[X]*se*z|0}}function Z(de,L,H){const Q=de.length;for(let z=3;z<Q;z+=4){const X=de[z-3]*77+de[z-2]*152+de[z-1]*28;L[z]=H?L[z]*H[X>>8]>>8:L[z]*X>>16}}function P(de,L,H,Q,z,X,se,ee,re,ne,k){const O=!!X,W=O?X[0]:0,K=O?X[1]:0,G=O?X[2]:0;let ce;z==="Luminosity"?ce=Z:ce=F;const me=Math.min(Q,Math.ceil(1048576/H));for(let ke=0;ke<Q;ke+=me){const Te=Math.min(me,Q-ke),xe=de.getImageData(ee-ne,ke+(re-k),H,Te),Ce=L.getImageData(ee,ke+re,H,Te);O&&S(xe.data,W,K,G),ce(xe.data,Ce.data,se),L.putImageData(Ce,ee,ke+re)}}function ie(de,L,H,Q){const z=Q[0],X=Q[1],se=Q[2]-z,ee=Q[3]-X;se===0||ee===0||(P(L.context,H,se,ee,L.subtype,L.backdrop,L.transferMap,z,X,L.offsetX,L.offsetY),de.save(),de.globalAlpha=1,de.globalCompositeOperation="source-over",de.setTransform(1,0,0,1,0,0),de.drawImage(H.canvas,0,0),de.restore())}function ue(de,L){const H=i.Util.singularValueDecompose2dScale(de);H[0]=Math.fround(H[0]),H[1]=Math.fround(H[1]);const Q=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return L!==void 0?L:H[0]<=Q||H[1]<=Q}const pe=["butt","round","square"],_e=["miter","round","bevel"],we={},Pe={},$e=class $e{constructor(L,H,Q,z,X,{optionalContentConfig:se,markedContentStack:ee=null},re,ne){be(this,De);be(this,Ue);this.ctx=L,this.current=new Y(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=H,this.objs=Q,this.canvasFactory=z,this.filterFactory=X,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ee||[],this.optionalContentConfig=se,this.cachedCanvases=new E(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=re,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ne,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(L,H=null){return typeof L=="string"?L.startsWith("g_")?this.commonObjs.get(L):this.objs.get(L):H}beginDrawing({transform:L,viewport:H,transparency:Q=!1,background:z=null}){const X=this.ctx.canvas.width,se=this.ctx.canvas.height,ee=this.ctx.fillStyle;if(this.ctx.fillStyle=z||"#ffffff",this.ctx.fillRect(0,0,X,se),this.ctx.fillStyle=ee,Q){const re=this.cachedCanvases.getCanvas("transparent",X,se);this.compositeCtx=this.ctx,this.transparentCanvas=re.canvas,this.ctx=re.context,this.ctx.save(),this.ctx.transform(...(0,s.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx),L&&(this.ctx.transform(...L),this.outputScaleX=L[0],this.outputScaleY=L[0]),this.ctx.transform(...H.transform),this.viewportScale=H.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}executeOperatorList(L,H,Q,z){const X=L.argsArray,se=L.fnArray;let ee=H||0;const re=X.length;if(re===ee)return ee;const ne=re-ee>B&&typeof Q=="function",k=ne?Date.now()+j:0;let O=0;const W=this.commonObjs,K=this.objs;let G;for(;;){if(z!==void 0&&ee===z.nextBreakPoint)return z.breakIt(ee,Q),ee;if(G=se[ee],G!==i.OPS.dependency)this[G].apply(this,X[ee]);else for(const ce of X[ee]){const ye=ce.startsWith("g_")?W:K;if(!ye.has(ce))return ye.get(ce,Q),ee}if(ee++,ee===re)return ee;if(ne&&++O>B){if(Date.now()>k)return Q(),ee;O=0}}}endDrawing(){Ae(this,De,Pn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const L of this._cachedBitmapsMap.values()){for(const H of L.values())typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement&&(H.width=H.height=0);L.clear()}this._cachedBitmapsMap.clear(),Ae(this,Ue,Mn).call(this)}_scaleImage(L,H){const Q=L.width,z=L.height;let X=Math.max(Math.hypot(H[0],H[1]),1),se=Math.max(Math.hypot(H[2],H[3]),1),ee=Q,re=z,ne="prescale1",k,O;for(;X>2&&ee>1||se>2&&re>1;){let W=ee,K=re;X>2&&ee>1&&(W=ee>=16384?Math.floor(ee/2)-1||1:Math.ceil(ee/2),X/=ee/W),se>2&&re>1&&(K=re>=16384?Math.floor(re/2)-1||1:Math.ceil(re)/2,se/=re/K),k=this.cachedCanvases.getCanvas(ne,W,K),O=k.context,O.clearRect(0,0,W,K),O.drawImage(L,0,0,ee,re,0,0,W,K),L=k.canvas,ee=W,re=K,ne=ne==="prescale1"?"prescale2":"prescale1"}return{img:L,paintWidth:ee,paintHeight:re}}_createMaskCanvas(L){const H=this.ctx,{width:Q,height:z}=L,X=this.current.fillColor,se=this.current.patternFill,ee=(0,s.getCurrentTransform)(H);let re,ne,k,O;if((L.bitmap||L.data)&&L.count>1){const Fe=L.bitmap||L.data.buffer;ne=JSON.stringify(se?ee:[ee.slice(0,4),X]),re=this._cachedBitmapsMap.get(Fe),re||(re=new Map,this._cachedBitmapsMap.set(Fe,re));const Ve=re.get(ne);if(Ve&&!se){const ze=Math.round(Math.min(ee[0],ee[2])+ee[4]),U=Math.round(Math.min(ee[1],ee[3])+ee[5]);return{canvas:Ve,offsetX:ze,offsetY:U}}k=Ve}k||(O=this.cachedCanvases.getCanvas("maskCanvas",Q,z),w(O.context,L));let W=i.Util.transform(ee,[1/Q,0,0,-1/z,0,0]);W=i.Util.transform(W,[1,0,0,1,0,-z]);const K=i.Util.applyTransform([0,0],W),G=i.Util.applyTransform([Q,z],W),ce=i.Util.normalizeRect([K[0],K[1],G[0],G[1]]),ye=Math.round(ce[2]-ce[0])||1,me=Math.round(ce[3]-ce[1])||1,ke=this.cachedCanvases.getCanvas("fillCanvas",ye,me),Te=ke.context,xe=Math.min(K[0],G[0]),Ce=Math.min(K[1],G[1]);Te.translate(-xe,-Ce),Te.transform(...W),k||(k=this._scaleImage(O.canvas,(0,s.getCurrentTransformInverse)(Te)),k=k.img,re&&se&&re.set(ne,k)),Te.imageSmoothingEnabled=ue((0,s.getCurrentTransform)(Te),L.interpolate),$(Te,k,0,0,k.width,k.height,0,0,Q,z),Te.globalCompositeOperation="source-in";const Oe=i.Util.transform((0,s.getCurrentTransformInverse)(Te),[1,0,0,1,-xe,-Ce]);return Te.fillStyle=se?X.getPattern(H,this,Oe,c.PathType.FILL):X,Te.fillRect(0,0,Q,z),re&&!se&&(this.cachedCanvases.delete("fillCanvas"),re.set(ne,ke.canvas)),{canvas:ke.canvas,offsetX:Math.round(xe),offsetY:Math.round(Ce)}}setLineWidth(L){L!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=L,this.ctx.lineWidth=L}setLineCap(L){this.ctx.lineCap=pe[L]}setLineJoin(L){this.ctx.lineJoin=_e[L]}setMiterLimit(L){this.ctx.miterLimit=L}setDash(L,H){const Q=this.ctx;Q.setLineDash!==void 0&&(Q.setLineDash(L),Q.lineDashOffset=H)}setRenderingIntent(L){}setFlatness(L){}setGState(L){for(const[H,Q]of L)switch(H){case"LW":this.setLineWidth(Q);break;case"LC":this.setLineCap(Q);break;case"LJ":this.setLineJoin(Q);break;case"ML":this.setMiterLimit(Q);break;case"D":this.setDash(Q[0],Q[1]);break;case"RI":this.setRenderingIntent(Q);break;case"FL":this.setFlatness(Q);break;case"Font":this.setFont(Q[0],Q[1]);break;case"CA":this.current.strokeAlpha=Q;break;case"ca":this.current.fillAlpha=Q,this.ctx.globalAlpha=Q;break;case"BM":this.ctx.globalCompositeOperation=Q;break;case"SMask":this.current.activeSMask=Q?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Q);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const L=this.inSMaskMode;this.current.activeSMask&&!L?this.beginSMaskMode():!this.current.activeSMask&&L&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const L=this.ctx.canvas.width,H=this.ctx.canvas.height,Q="smaskGroupAt"+this.groupLevel,z=this.cachedCanvases.getCanvas(Q,L,H);this.suspendedCtx=this.ctx,this.ctx=z.context;const X=this.ctx;X.setTransform(...(0,s.getCurrentTransform)(this.suspendedCtx)),C(this.suspendedCtx,X),N(X,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),C(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(L){if(!this.current.activeSMask)return;L?(L[0]=Math.floor(L[0]),L[1]=Math.floor(L[1]),L[2]=Math.ceil(L[2]),L[3]=Math.ceil(L[3])):L=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const H=this.current.activeSMask,Q=this.suspendedCtx;ie(Q,H,this.ctx,L),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(C(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const L=this.current;this.stateStack.push(L),this.current=L.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),C(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(L,H,Q,z,X,se){this.ctx.transform(L,H,Q,z,X,se),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(L,H,Q){const z=this.ctx,X=this.current;let se=X.x,ee=X.y,re,ne;const k=(0,s.getCurrentTransform)(z),O=k[0]===0&&k[3]===0||k[1]===0&&k[2]===0,W=O?Q.slice(0):null;for(let K=0,G=0,ce=L.length;K<ce;K++)switch(L[K]|0){case i.OPS.rectangle:se=H[G++],ee=H[G++];const ye=H[G++],me=H[G++],ke=se+ye,Te=ee+me;z.moveTo(se,ee),ye===0||me===0?z.lineTo(ke,Te):(z.lineTo(ke,ee),z.lineTo(ke,Te),z.lineTo(se,Te)),O||X.updateRectMinMax(k,[se,ee,ke,Te]),z.closePath();break;case i.OPS.moveTo:se=H[G++],ee=H[G++],z.moveTo(se,ee),O||X.updatePathMinMax(k,se,ee);break;case i.OPS.lineTo:se=H[G++],ee=H[G++],z.lineTo(se,ee),O||X.updatePathMinMax(k,se,ee);break;case i.OPS.curveTo:re=se,ne=ee,se=H[G+4],ee=H[G+5],z.bezierCurveTo(H[G],H[G+1],H[G+2],H[G+3],se,ee),X.updateCurvePathMinMax(k,re,ne,H[G],H[G+1],H[G+2],H[G+3],se,ee,W),G+=6;break;case i.OPS.curveTo2:re=se,ne=ee,z.bezierCurveTo(se,ee,H[G],H[G+1],H[G+2],H[G+3]),X.updateCurvePathMinMax(k,re,ne,se,ee,H[G],H[G+1],H[G+2],H[G+3],W),se=H[G+2],ee=H[G+3],G+=4;break;case i.OPS.curveTo3:re=se,ne=ee,se=H[G+2],ee=H[G+3],z.bezierCurveTo(H[G],H[G+1],se,ee,se,ee),X.updateCurvePathMinMax(k,re,ne,H[G],H[G+1],se,ee,se,ee,W),G+=4;break;case i.OPS.closePath:z.closePath();break}O&&X.updateScalingPathMinMax(k,W),X.setCurrentPoint(se,ee)}closePath(){this.ctx.closePath()}stroke(L=!0){const H=this.ctx,Q=this.current.strokeColor;H.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Q=="object"&&(Q!=null&&Q.getPattern)?(H.save(),H.strokeStyle=Q.getPattern(H,this,(0,s.getCurrentTransformInverse)(H),c.PathType.STROKE),this.rescaleAndStroke(!1),H.restore()):this.rescaleAndStroke(!0)),L&&this.consumePath(this.current.getClippedPathBoundingBox()),H.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(L=!0){const H=this.ctx,Q=this.current.fillColor,z=this.current.patternFill;let X=!1;z&&(H.save(),H.fillStyle=Q.getPattern(H,this,(0,s.getCurrentTransformInverse)(H),c.PathType.FILL),X=!0);const se=this.current.getClippedPathBoundingBox();this.contentVisible&&se!==null&&(this.pendingEOFill?(H.fill("evenodd"),this.pendingEOFill=!1):H.fill()),X&&H.restore(),L&&this.consumePath(se)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=we}eoClip(){this.pendingClip=Pe}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const L=this.pendingTextPaths,H=this.ctx;if(L===void 0){H.beginPath();return}H.save(),H.beginPath();for(const Q of L)H.setTransform(...Q.transform),H.translate(Q.x,Q.y),Q.addToPath(H,Q.fontSize);H.restore(),H.clip(),H.beginPath(),delete this.pendingTextPaths}setCharSpacing(L){this.current.charSpacing=L}setWordSpacing(L){this.current.wordSpacing=L}setHScale(L){this.current.textHScale=L/100}setLeading(L){this.current.leading=-L}setFont(L,H){const Q=this.commonObjs.get(L),z=this.current;if(!Q)throw new Error(`Can't find font for ${L}`);if(z.fontMatrix=Q.fontMatrix||i.FONT_IDENTITY_MATRIX,(z.fontMatrix[0]===0||z.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+L),H<0?(H=-H,z.fontDirection=-1):z.fontDirection=1,this.current.font=Q,this.current.fontSize=H,Q.isType3Font)return;const X=Q.loadedName||"sans-serif";let se="normal";Q.black?se="900":Q.bold&&(se="bold");const ee=Q.italic?"italic":"normal",re=`"${X}", ${Q.fallbackName}`;let ne=H;H<y?ne=y:H>g&&(ne=g),this.current.fontSizeScale=H/ne,this.ctx.font=`${ee} ${se} ${ne}px ${re}`}setTextRenderingMode(L){this.current.textRenderingMode=L}setTextRise(L){this.current.textRise=L}moveText(L,H){this.current.x=this.current.lineX+=L,this.current.y=this.current.lineY+=H}setLeadingMoveText(L,H){this.setLeading(-H),this.moveText(L,H)}setTextMatrix(L,H,Q,z,X,se){this.current.textMatrix=[L,H,Q,z,X,se],this.current.textMatrixScale=Math.hypot(L,H),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(L,H,Q,z){const X=this.ctx,se=this.current,ee=se.font,re=se.textRenderingMode,ne=se.fontSize/se.fontSizeScale,k=re&i.TextRenderingMode.FILL_STROKE_MASK,O=!!(re&i.TextRenderingMode.ADD_TO_PATH_FLAG),W=se.patternFill&&!ee.missingFile;let K;(ee.disableFontFace||O||W)&&(K=ee.getPathGenerator(this.commonObjs,L)),ee.disableFontFace||W?(X.save(),X.translate(H,Q),X.beginPath(),K(X,ne),z&&X.setTransform(...z),(k===i.TextRenderingMode.FILL||k===i.TextRenderingMode.FILL_STROKE)&&X.fill(),(k===i.TextRenderingMode.STROKE||k===i.TextRenderingMode.FILL_STROKE)&&X.stroke(),X.restore()):((k===i.TextRenderingMode.FILL||k===i.TextRenderingMode.FILL_STROKE)&&X.fillText(L,H,Q),(k===i.TextRenderingMode.STROKE||k===i.TextRenderingMode.FILL_STROKE)&&X.strokeText(L,H,Q)),O&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)(X),x:H,y:Q,fontSize:ne,addToPath:K})}get isFontSubpixelAAEnabled(){const{context:L}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);L.scale(1.5,1),L.fillText("I",0,10);const H=L.getImageData(0,0,10,10).data;let Q=!1;for(let z=3;z<H.length;z+=4)if(H[z]>0&&H[z]<255){Q=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",Q)}showText(L){const H=this.current,Q=H.font;if(Q.isType3Font)return this.showType3Text(L);const z=H.fontSize;if(z===0)return;const X=this.ctx,se=H.fontSizeScale,ee=H.charSpacing,re=H.wordSpacing,ne=H.fontDirection,k=H.textHScale*ne,O=L.length,W=Q.vertical,K=W?1:-1,G=Q.defaultVMetrics,ce=z*H.fontMatrix[0],ye=H.textRenderingMode===i.TextRenderingMode.FILL&&!Q.disableFontFace&&!H.patternFill;X.save(),X.transform(...H.textMatrix),X.translate(H.x,H.y+H.textRise),ne>0?X.scale(k,-1):X.scale(k,1);let me;if(H.patternFill){X.save();const Oe=H.fillColor.getPattern(X,this,(0,s.getCurrentTransformInverse)(X),c.PathType.FILL);me=(0,s.getCurrentTransform)(X),X.restore(),X.fillStyle=Oe}let ke=H.lineWidth;const Te=H.textMatrixScale;if(Te===0||ke===0){const Oe=H.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(Oe===i.TextRenderingMode.STROKE||Oe===i.TextRenderingMode.FILL_STROKE)&&(ke=this.getSinglePixelWidth())}else ke/=Te;if(se!==1&&(X.scale(se,se),ke/=se),X.lineWidth=ke,Q.isInvalidPDFjsFont){const Oe=[];let Fe=0;for(const Ve of L)Oe.push(Ve.unicode),Fe+=Ve.width;X.fillText(Oe.join(""),0,0),H.x+=Fe*ce*k,X.restore(),this.compose();return}let xe=0,Ce;for(Ce=0;Ce<O;++Ce){const Oe=L[Ce];if(typeof Oe=="number"){xe+=K*Oe*z/1e3;continue}let Fe=!1;const Ve=(Oe.isSpace?re:0)+ee,ze=Oe.fontChar,U=Oe.accent;let ge,Be,He=Oe.width;if(W){const Me=Oe.vmetric||G,te=-(Oe.vmetric?Me[1]:He*.5)*ce,ae=Me[2]*ce;He=Me?-Me[0]:He,ge=te/se,Be=(xe+ae)/se}else ge=xe/se,Be=0;if(Q.remeasure&&He>0){const Me=X.measureText(ze).width*1e3/z*se;if(He<Me&&this.isFontSubpixelAAEnabled){const te=He/Me;Fe=!0,X.save(),X.scale(te,1),ge/=te}else He!==Me&&(ge+=(He-Me)/2e3*z/se)}if(this.contentVisible&&(Oe.isInFont||Q.missingFile)){if(ye&&!U)X.fillText(ze,ge,Be);else if(this.paintChar(ze,ge,Be,me),U){const Me=ge+z*U.offset.x/se,te=Be-z*U.offset.y/se;this.paintChar(U.fontChar,Me,te,me)}}let it;W?it=He*ce-Ve*ne:it=He*ce+Ve*ne,xe+=it,Fe&&X.restore()}W?H.y-=xe:H.x+=xe*k,X.restore(),this.compose()}showType3Text(L){const H=this.ctx,Q=this.current,z=Q.font,X=Q.fontSize,se=Q.fontDirection,ee=z.vertical?1:-1,re=Q.charSpacing,ne=Q.wordSpacing,k=Q.textHScale*se,O=Q.fontMatrix||i.FONT_IDENTITY_MATRIX,W=L.length,K=Q.textRenderingMode===i.TextRenderingMode.INVISIBLE;let G,ce,ye,me;if(!(K||X===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,H.save(),H.transform(...Q.textMatrix),H.translate(Q.x,Q.y),H.scale(k,se),G=0;G<W;++G){if(ce=L[G],typeof ce=="number"){me=ee*ce*X/1e3,this.ctx.translate(me,0),Q.x+=me*k;continue}const ke=(ce.isSpace?ne:0)+re,Te=z.charProcOperatorList[ce.operatorListId];if(!Te){(0,i.warn)(`Type3 character "${ce.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ce,this.save(),H.scale(X,X),H.transform(...O),this.executeOperatorList(Te),this.restore()),ye=i.Util.applyTransform([ce.width,0],O)[0]*X+ke,H.translate(ye,0),Q.x+=ye*k}H.restore(),this.processingType3=null}}setCharWidth(L,H){}setCharWidthAndBounds(L,H,Q,z,X,se){this.ctx.rect(Q,z,X-Q,se-z),this.ctx.clip(),this.endPath()}getColorN_Pattern(L){let H;if(L[0]==="TilingPattern"){const Q=L[1],z=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),X={createCanvasGraphics:se=>new $e(se,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};H=new c.TilingPattern(L,Q,this.ctx,X,z)}else H=this._getPattern(L[1],L[2]);return H}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(L,H,Q){const z=i.Util.makeHexColor(L,H,Q);this.ctx.strokeStyle=z,this.current.strokeColor=z}setFillRGBColor(L,H,Q){const z=i.Util.makeHexColor(L,H,Q);this.ctx.fillStyle=z,this.current.fillColor=z,this.current.patternFill=!1}_getPattern(L,H=null){let Q;return this.cachedPatterns.has(L)?Q=this.cachedPatterns.get(L):(Q=(0,c.getShadingPattern)(this.getObject(L)),this.cachedPatterns.set(L,Q)),H&&(Q.matrix=H),Q}shadingFill(L){if(!this.contentVisible)return;const H=this.ctx;this.save();const Q=this._getPattern(L);H.fillStyle=Q.getPattern(H,this,(0,s.getCurrentTransformInverse)(H),c.PathType.SHADING);const z=(0,s.getCurrentTransformInverse)(H);if(z){const X=H.canvas,se=X.width,ee=X.height,re=i.Util.applyTransform([0,0],z),ne=i.Util.applyTransform([0,ee],z),k=i.Util.applyTransform([se,0],z),O=i.Util.applyTransform([se,ee],z),W=Math.min(re[0],ne[0],k[0],O[0]),K=Math.min(re[1],ne[1],k[1],O[1]),G=Math.max(re[0],ne[0],k[0],O[0]),ce=Math.max(re[1],ne[1],k[1],O[1]);this.ctx.fillRect(W,K,G-W,ce-K)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(L,H){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(L)&&L.length===6&&this.transform(...L),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),H)){const Q=H[2]-H[0],z=H[3]-H[1];this.ctx.rect(H[0],H[1],Q,z),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),H),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(L){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const H=this.ctx;L.isolated||(0,i.info)("TODO: Support non-isolated groups."),L.knockout&&(0,i.warn)("Knockout groups not supported.");const Q=(0,s.getCurrentTransform)(H);if(L.matrix&&H.transform(...L.matrix),!L.bbox)throw new Error("Bounding box is required.");let z=i.Util.getAxialAlignedBoundingBox(L.bbox,(0,s.getCurrentTransform)(H));const X=[0,0,H.canvas.width,H.canvas.height];z=i.Util.intersect(z,X)||[0,0,0,0];const se=Math.floor(z[0]),ee=Math.floor(z[1]);let re=Math.max(Math.ceil(z[2])-se,1),ne=Math.max(Math.ceil(z[3])-ee,1),k=1,O=1;re>b&&(k=re/b,re=b),ne>b&&(O=ne/b,ne=b),this.current.startNewPathAndClipBox([0,0,re,ne]);let W="groupAt"+this.groupLevel;L.smask&&(W+="_smask_"+this.smaskCounter++%2);const K=this.cachedCanvases.getCanvas(W,re,ne),G=K.context;G.scale(1/k,1/O),G.translate(-se,-ee),G.transform(...Q),L.smask?this.smaskStack.push({canvas:K.canvas,context:G,offsetX:se,offsetY:ee,scaleX:k,scaleY:O,subtype:L.smask.subtype,backdrop:L.smask.backdrop,transferMap:L.smask.transferMap||null,startTransformInverse:null}):(H.setTransform(1,0,0,1,0,0),H.translate(se,ee),H.scale(k,O),H.save()),C(H,G),this.ctx=G,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(H),this.groupLevel++}endGroup(L){if(!this.contentVisible)return;this.groupLevel--;const H=this.ctx,Q=this.groupStack.pop();if(this.ctx=Q,this.ctx.imageSmoothingEnabled=!1,L.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const z=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...z);const X=i.Util.getAxialAlignedBoundingBox([0,0,H.canvas.width,H.canvas.height],z);this.ctx.drawImage(H.canvas,0,0),this.ctx.restore(),this.compose(X)}}beginAnnotation(L,H,Q,z,X){if(Ae(this,De,Pn).call(this),A(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(H)&&H.length===4){const se=H[2]-H[0],ee=H[3]-H[1];if(X&&this.annotationCanvasMap){Q=Q.slice(),Q[4]-=H[0],Q[5]-=H[1],H=H.slice(),H[0]=H[1]=0,H[2]=se,H[3]=ee;const[re,ne]=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),{viewportScale:k}=this,O=Math.ceil(se*this.outputScaleX*k),W=Math.ceil(ee*this.outputScaleY*k);this.annotationCanvas=this.canvasFactory.create(O,W);const{canvas:K,context:G}=this.annotationCanvas;this.annotationCanvasMap.set(L,K),this.annotationCanvas.savedCtx=this.ctx,this.ctx=G,this.ctx.save(),this.ctx.setTransform(re,0,0,-ne,0,ee*ne),A(this.ctx)}else A(this.ctx),this.ctx.rect(H[0],H[1],se,ee),this.ctx.clip(),this.endPath()}this.current=new Y(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Q),this.transform(...z)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Ae(this,Ue,Mn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(L){if(!this.contentVisible)return;const H=L.count;L=this.getObject(L.data,L),L.count=H;const Q=this.ctx,z=this.processingType3;if(z&&(z.compiled===void 0&&(z.compiled=q(L)),z.compiled)){z.compiled(Q);return}const X=this._createMaskCanvas(L),se=X.canvas;Q.save(),Q.setTransform(1,0,0,1,0,0),Q.drawImage(se,X.offsetX,X.offsetY),Q.restore(),this.compose()}paintImageMaskXObjectRepeat(L,H,Q=0,z=0,X,se){if(!this.contentVisible)return;L=this.getObject(L.data,L);const ee=this.ctx;ee.save();const re=(0,s.getCurrentTransform)(ee);ee.transform(H,Q,z,X,0,0);const ne=this._createMaskCanvas(L);ee.setTransform(1,0,0,1,ne.offsetX-re[4],ne.offsetY-re[5]);for(let k=0,O=se.length;k<O;k+=2){const W=i.Util.transform(re,[H,Q,z,X,se[k],se[k+1]]),[K,G]=i.Util.applyTransform([0,0],W);ee.drawImage(ne.canvas,K,G)}ee.restore(),this.compose()}paintImageMaskXObjectGroup(L){if(!this.contentVisible)return;const H=this.ctx,Q=this.current.fillColor,z=this.current.patternFill;for(const X of L){const{data:se,width:ee,height:re,transform:ne}=X,k=this.cachedCanvases.getCanvas("maskCanvas",ee,re),O=k.context;O.save();const W=this.getObject(se,X);w(O,W),O.globalCompositeOperation="source-in",O.fillStyle=z?Q.getPattern(O,this,(0,s.getCurrentTransformInverse)(H),c.PathType.FILL):Q,O.fillRect(0,0,ee,re),O.restore(),H.save(),H.transform(...ne),H.scale(1,-1),$(H,k.canvas,0,0,ee,re,0,-1,1,1),H.restore()}this.compose()}paintImageXObject(L){if(!this.contentVisible)return;const H=this.getObject(L);if(!H){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(H)}paintImageXObjectRepeat(L,H,Q,z){if(!this.contentVisible)return;const X=this.getObject(L);if(!X){(0,i.warn)("Dependent image isn't ready yet");return}const se=X.width,ee=X.height,re=[];for(let ne=0,k=z.length;ne<k;ne+=2)re.push({transform:[H,0,0,Q,z[ne],z[ne+1]],x:0,y:0,w:se,h:ee});this.paintInlineImageXObjectGroup(X,re)}applyTransferMapsToCanvas(L){return this.current.transferMaps!=="none"&&(L.filter=this.current.transferMaps,L.drawImage(L.canvas,0,0),L.filter="none"),L.canvas}applyTransferMapsToBitmap(L){if(this.current.transferMaps==="none")return L.bitmap;const{bitmap:H,width:Q,height:z}=L,X=this.cachedCanvases.getCanvas("inlineImage",Q,z),se=X.context;return se.filter=this.current.transferMaps,se.drawImage(H,0,0),se.filter="none",X.canvas}paintInlineImageXObject(L){if(!this.contentVisible)return;const H=L.width,Q=L.height,z=this.ctx;this.save(),m.isNodeJS||(z.filter="none"),z.scale(1/H,-1/Q);let X;if(L.bitmap)X=this.applyTransferMapsToBitmap(L);else if(typeof HTMLElement=="function"&&L instanceof HTMLElement||!L.data)X=L;else{const re=this.cachedCanvases.getCanvas("inlineImage",H,Q).context;T(re,L),X=this.applyTransferMapsToCanvas(re)}const se=this._scaleImage(X,(0,s.getCurrentTransformInverse)(z));z.imageSmoothingEnabled=ue((0,s.getCurrentTransform)(z),L.interpolate),$(z,se.img,0,0,se.paintWidth,se.paintHeight,0,-Q,H,Q),this.compose(),this.restore()}paintInlineImageXObjectGroup(L,H){if(!this.contentVisible)return;const Q=this.ctx;let z;if(L.bitmap)z=L.bitmap;else{const X=L.width,se=L.height,re=this.cachedCanvases.getCanvas("inlineImage",X,se).context;T(re,L),z=this.applyTransferMapsToCanvas(re)}for(const X of H)Q.save(),Q.transform(...X.transform),Q.scale(1,-1),$(Q,z,X.x,X.y,X.w,X.h,0,-1,1,1),Q.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(L){}markPointProps(L,H){}beginMarkedContent(L){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(L,H){L==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(H)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(L){const H=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(L);const Q=this.ctx;this.pendingClip&&(H||(this.pendingClip===Pe?Q.clip("evenodd"):Q.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Q.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const L=(0,s.getCurrentTransform)(this.ctx);if(L[1]===0&&L[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(L[0]),Math.abs(L[3]));else{const H=Math.abs(L[0]*L[3]-L[2]*L[1]),Q=Math.hypot(L[0],L[2]),z=Math.hypot(L[1],L[3]);this._cachedGetSinglePixelWidth=Math.max(Q,z)/H}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:L}=this.current,H=(0,s.getCurrentTransform)(this.ctx);let Q,z;if(H[1]===0&&H[2]===0){const X=Math.abs(H[0]),se=Math.abs(H[3]);if(L===0)Q=1/X,z=1/se;else{const ee=X*L,re=se*L;Q=ee<1?1/ee:1,z=re<1?1/re:1}}else{const X=Math.abs(H[0]*H[3]-H[2]*H[1]),se=Math.hypot(H[0],H[1]),ee=Math.hypot(H[2],H[3]);if(L===0)Q=ee/X,z=se/X;else{const re=L*X;Q=ee>re?ee/re:1,z=se>re?se/re:1}}this._cachedScaleForStroking=[Q,z]}return this._cachedScaleForStroking}rescaleAndStroke(L){const{ctx:H}=this,{lineWidth:Q}=this.current,[z,X]=this.getScaleForStroking();if(H.lineWidth=Q||1,z===1&&X===1){H.stroke();return}let se,ee,re;L&&(se=(0,s.getCurrentTransform)(H),ee=H.getLineDash().slice(),re=H.lineDashOffset),H.scale(z,X);const ne=Math.max(z,X);H.setLineDash(H.getLineDash().map(k=>k/ne)),H.lineDashOffset/=ne,H.stroke(),L&&(H.setTransform(...se),H.setLineDash(ee),H.lineDashOffset=re)}isContentVisible(){for(let L=this.markedContentStack.length-1;L>=0;L--)if(!this.markedContentStack[L].visible)return!1;return!0}};De=new WeakSet,Pn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ue=new WeakSet,Mn=function(){if(this.pageColors){const L=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(L!=="none"){const H=this.ctx.filter;this.ctx.filter=L,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=H}}};let Se=$e;t.CanvasGraphics=Se;for(const de in i.OPS)Se.prototype[de]!==void 0&&(Se.prototype[i.OPS[de]]=Se.prototype[de])},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=R;var i=r(1),s=r(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=c;function d($,q){if(!q)return;const Y=q[2]-q[0],T=q[3]-q[1],w=new Path2D;w.rect(q[0],q[1],Y,T),$.clip(w)}class m{constructor(){this.constructor===m&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class y extends m{constructor(q){super(),this._type=q[1],this._bbox=q[2],this._colorStops=q[3],this._p0=q[4],this._p1=q[5],this._r0=q[6],this._r1=q[7],this.matrix=null}_createGradient(q){let Y;this._type==="axial"?Y=q.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Y=q.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const T of this._colorStops)Y.addColorStop(T[0],T[1]);return Y}getPattern(q,Y,T,w){let C;if(w===c.STROKE||w===c.FILL){const A=Y.current.getClippedPathBoundingBox(w,(0,s.getCurrentTransform)(q))||[0,0,0,0],S=Math.ceil(A[2]-A[0])||1,F=Math.ceil(A[3]-A[1])||1,Z=Y.cachedCanvases.getCanvas("pattern",S,F,!0),P=Z.context;P.clearRect(0,0,P.canvas.width,P.canvas.height),P.beginPath(),P.rect(0,0,P.canvas.width,P.canvas.height),P.translate(-A[0],-A[1]),T=i.Util.transform(T,[1,0,0,1,A[0],A[1]]),P.transform(...Y.baseTransform),this.matrix&&P.transform(...this.matrix),d(P,this._bbox),P.fillStyle=this._createGradient(P),P.fill(),C=q.createPattern(Z.canvas,"no-repeat");const ie=new DOMMatrix(T);C.setTransform(ie)}else d(q,this._bbox),C=this._createGradient(q);return C}}function g($,q,Y,T,w,C,A,S){const F=q.coords,Z=q.colors,P=$.data,ie=$.width*4;let ue;F[Y+1]>F[T+1]&&(ue=Y,Y=T,T=ue,ue=C,C=A,A=ue),F[T+1]>F[w+1]&&(ue=T,T=w,w=ue,ue=A,A=S,S=ue),F[Y+1]>F[T+1]&&(ue=Y,Y=T,T=ue,ue=C,C=A,A=ue);const pe=(F[Y]+q.offsetX)*q.scaleX,_e=(F[Y+1]+q.offsetY)*q.scaleY,we=(F[T]+q.offsetX)*q.scaleX,Pe=(F[T+1]+q.offsetY)*q.scaleY,Se=(F[w]+q.offsetX)*q.scaleX,De=(F[w+1]+q.offsetY)*q.scaleY;if(_e>=De)return;const Ne=Z[C],Ue=Z[C+1],je=Z[C+2],$e=Z[A],de=Z[A+1],L=Z[A+2],H=Z[S],Q=Z[S+1],z=Z[S+2],X=Math.round(_e),se=Math.round(De);let ee,re,ne,k,O,W,K,G;for(let ce=X;ce<=se;ce++){if(ce<Pe){let xe;ce<_e?xe=0:xe=(_e-ce)/(_e-Pe),ee=pe-(pe-we)*xe,re=Ne-(Ne-$e)*xe,ne=Ue-(Ue-de)*xe,k=je-(je-L)*xe}else{let xe;ce>De?xe=1:Pe===De?xe=0:xe=(Pe-ce)/(Pe-De),ee=we-(we-Se)*xe,re=$e-($e-H)*xe,ne=de-(de-Q)*xe,k=L-(L-z)*xe}let ye;ce<_e?ye=0:ce>De?ye=1:ye=(_e-ce)/(_e-De),O=pe-(pe-Se)*ye,W=Ne-(Ne-H)*ye,K=Ue-(Ue-Q)*ye,G=je-(je-z)*ye;const me=Math.round(Math.min(ee,O)),ke=Math.round(Math.max(ee,O));let Te=ie*ce+me*4;for(let xe=me;xe<=ke;xe++)ye=(ee-xe)/(ee-O),ye<0?ye=0:ye>1&&(ye=1),P[Te++]=re-(re-W)*ye|0,P[Te++]=ne-(ne-K)*ye|0,P[Te++]=k-(k-G)*ye|0,P[Te++]=255}}function b($,q,Y){const T=q.coords,w=q.colors;let C,A;switch(q.type){case"lattice":const S=q.verticesPerRow,F=Math.floor(T.length/S)-1,Z=S-1;for(C=0;C<F;C++){let P=C*S;for(let ie=0;ie<Z;ie++,P++)g($,Y,T[P],T[P+1],T[P+S],w[P],w[P+1],w[P+S]),g($,Y,T[P+S+1],T[P+1],T[P+S],w[P+S+1],w[P+1],w[P+S])}break;case"triangles":for(C=0,A=T.length;C<A;C+=3)g($,Y,T[C],T[C+1],T[C+2],w[C],w[C+1],w[C+2]);break;default:throw new Error("illegal figure")}}class j extends m{constructor(q){super(),this._coords=q[2],this._colors=q[3],this._figures=q[4],this._bounds=q[5],this._bbox=q[7],this._background=q[8],this.matrix=null}_createMeshCanvas(q,Y,T){const S=Math.floor(this._bounds[0]),F=Math.floor(this._bounds[1]),Z=Math.ceil(this._bounds[2])-S,P=Math.ceil(this._bounds[3])-F,ie=Math.min(Math.ceil(Math.abs(Z*q[0]*1.1)),3e3),ue=Math.min(Math.ceil(Math.abs(P*q[1]*1.1)),3e3),pe=Z/ie,_e=P/ue,we={coords:this._coords,colors:this._colors,offsetX:-S,offsetY:-F,scaleX:1/pe,scaleY:1/_e},Pe=ie+2*2,Se=ue+2*2,De=T.getCanvas("mesh",Pe,Se,!1),Ne=De.context,Ue=Ne.createImageData(ie,ue);if(Y){const $e=Ue.data;for(let de=0,L=$e.length;de<L;de+=4)$e[de]=Y[0],$e[de+1]=Y[1],$e[de+2]=Y[2],$e[de+3]=255}for(const $e of this._figures)b(Ue,$e,we);return Ne.putImageData(Ue,2,2),{canvas:De.canvas,offsetX:S-2*pe,offsetY:F-2*_e,scaleX:pe,scaleY:_e}}getPattern(q,Y,T,w){d(q,this._bbox);let C;if(w===c.SHADING)C=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(q));else if(C=i.Util.singularValueDecompose2dScale(Y.baseTransform),this.matrix){const S=i.Util.singularValueDecompose2dScale(this.matrix);C=[C[0]*S[0],C[1]*S[1]]}const A=this._createMeshCanvas(C,w===c.SHADING?null:this._background,Y.cachedCanvases);return w!==c.SHADING&&(q.setTransform(...Y.baseTransform),this.matrix&&q.transform(...this.matrix)),q.translate(A.offsetX,A.offsetY),q.scale(A.scaleX,A.scaleY),q.createPattern(A.canvas,"no-repeat")}}class B extends m{getPattern(){return"hotpink"}}function R($){switch($[0]){case"RadialAxial":return new y($);case"Mesh":return new j($);case"Dummy":return new B}throw new Error(`Unknown IR type: ${$[0]}`)}const D={COLORED:1,UNCOLORED:2},E=class E{constructor(q,Y,T,w,C){this.operatorList=q[2],this.matrix=q[3]||[1,0,0,1,0,0],this.bbox=q[4],this.xstep=q[5],this.ystep=q[6],this.paintType=q[7],this.tilingType=q[8],this.color=Y,this.ctx=T,this.canvasGraphicsFactory=w,this.baseTransform=C}createPatternCanvas(q){const Y=this.operatorList,T=this.bbox,w=this.xstep,C=this.ystep,A=this.paintType,S=this.tilingType,F=this.color,Z=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+S);const P=T[0],ie=T[1],ue=T[2],pe=T[3],_e=i.Util.singularValueDecompose2dScale(this.matrix),we=i.Util.singularValueDecompose2dScale(this.baseTransform),Pe=[_e[0]*we[0],_e[1]*we[1]],Se=this.getSizeAndScale(w,this.ctx.canvas.width,Pe[0]),De=this.getSizeAndScale(C,this.ctx.canvas.height,Pe[1]),Ne=q.cachedCanvases.getCanvas("pattern",Se.size,De.size,!0),Ue=Ne.context,je=Z.createCanvasGraphics(Ue);je.groupLevel=q.groupLevel,this.setFillAndStrokeStyleToContext(je,A,F);let $e=P,de=ie,L=ue,H=pe;return P<0&&($e=0,L+=Math.abs(P)),ie<0&&(de=0,H+=Math.abs(ie)),Ue.translate(-(Se.scale*$e),-(De.scale*de)),je.transform(Se.scale,0,0,De.scale,0,0),Ue.save(),this.clipBbox(je,$e,de,L,H),je.baseTransform=(0,s.getCurrentTransform)(je.ctx),je.executeOperatorList(Y),je.endDrawing(),{canvas:Ne.canvas,scaleX:Se.scale,scaleY:De.scale,offsetX:$e,offsetY:de}}getSizeAndScale(q,Y,T){q=Math.abs(q);const w=Math.max(E.MAX_PATTERN_SIZE,Y);let C=Math.ceil(q*T);return C>=w?C=w:T=C/q,{scale:T,size:C}}clipBbox(q,Y,T,w,C){const A=w-Y,S=C-T;q.ctx.rect(Y,T,A,S),q.current.updateRectMinMax((0,s.getCurrentTransform)(q.ctx),[Y,T,w,C]),q.clip(),q.endPath()}setFillAndStrokeStyleToContext(q,Y,T){const w=q.ctx,C=q.current;switch(Y){case D.COLORED:const A=this.ctx;w.fillStyle=A.fillStyle,w.strokeStyle=A.strokeStyle,C.fillColor=A.fillStyle,C.strokeColor=A.strokeStyle;break;case D.UNCOLORED:const S=i.Util.makeHexColor(T[0],T[1],T[2]);w.fillStyle=S,w.strokeStyle=S,C.fillColor=S,C.strokeColor=S;break;default:throw new i.FormatError(`Unsupported paint type: ${Y}`)}}getPattern(q,Y,T,w){let C=T;w!==c.SHADING&&(C=i.Util.transform(C,Y.baseTransform),this.matrix&&(C=i.Util.transform(C,this.matrix)));const A=this.createPatternCanvas(Y);let S=new DOMMatrix(C);S=S.translate(A.offsetX,A.offsetY),S=S.scale(1/A.scaleX,1/A.scaleY);const F=q.createPattern(A.canvas,"repeat");return F.setTransform(S),F}};fe(E,"MAX_PATTERN_SIZE",3e3);let N=E;t.TilingPattern=N},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=c,t.convertToRGBA=s,t.grayToRGBA=m;var i=r(1);function s(y){switch(y.kind){case i.ImageKind.GRAYSCALE_1BPP:return c(y);case i.ImageKind.RGB_24BPP:return d(y)}return null}function c({src:y,srcPos:g=0,dest:b,width:j,height:B,nonBlackColor:R=4294967295,inverseDecode:D=!1}){const N=i.FeatureTest.isLittleEndian?4278190080:255,[E,$]=D?[R,N]:[N,R],q=j>>3,Y=j&7,T=y.length;b=new Uint32Array(b.buffer);let w=0;for(let C=0;C<B;C++){for(const S=g+q;g<S;g++){const F=g<T?y[g]:255;b[w++]=F&128?$:E,b[w++]=F&64?$:E,b[w++]=F&32?$:E,b[w++]=F&16?$:E,b[w++]=F&8?$:E,b[w++]=F&4?$:E,b[w++]=F&2?$:E,b[w++]=F&1?$:E}if(Y===0)continue;const A=g<T?y[g++]:255;for(let S=0;S<Y;S++)b[w++]=A&1<<7-S?$:E}return{srcPos:g,destPos:w}}function d({src:y,srcPos:g=0,dest:b,destPos:j=0,width:B,height:R}){let D=0;const N=y.length>>2,E=new Uint32Array(y.buffer,g,N);if(i.FeatureTest.isLittleEndian){for(;D<N-2;D+=3,j+=4){const $=E[D],q=E[D+1],Y=E[D+2];b[j]=$|4278190080,b[j+1]=$>>>24|q<<8|4278190080,b[j+2]=q>>>16|Y<<16|4278190080,b[j+3]=Y>>>8|4278190080}for(let $=D*4,q=y.length;$<q;$+=3)b[j++]=y[$]|y[$+1]<<8|y[$+2]<<16|4278190080}else{for(;D<N-2;D+=3,j+=4){const $=E[D],q=E[D+1],Y=E[D+2];b[j]=$|255,b[j+1]=$<<24|q>>>8|255,b[j+2]=q<<16|Y>>>16|255,b[j+3]=Y<<8|255}for(let $=D*4,q=y.length;$<q;$+=3)b[j++]=y[$]<<24|y[$+1]<<16|y[$+2]<<8|255}return{srcPos:g,destPos:j}}function m(y,g){if(i.FeatureTest.isLittleEndian)for(let b=0,j=y.length;b<j;b++)g[b]=y[b]*65793|4278190080;else for(let b=0,j=y.length;b<j;b++)g[b]=y[b]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const r=Object.create(null);t.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},(e,t,r)=>{var y,zi,b,ji,B,jr;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=r(1);const s={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(D){switch(D instanceof Error||typeof D=="object"&&D!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),D.name){case"AbortException":return new i.AbortException(D.message);case"MissingPDFException":return new i.MissingPDFException(D.message);case"PasswordException":return new i.PasswordException(D.message,D.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(D.message,D.status);case"UnknownErrorException":return new i.UnknownErrorException(D.message,D.details);default:return new i.UnknownErrorException(D.message,D.toString())}}class m{constructor(N,E,$){be(this,y);be(this,b);be(this,B);this.sourceName=N,this.targetName=E,this.comObj=$,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=q=>{const Y=q.data;if(Y.targetName!==this.sourceName)return;if(Y.stream){Ae(this,b,ji).call(this,Y);return}if(Y.callback){const w=Y.callbackId,C=this.callbackCapabilities[w];if(!C)throw new Error(`Cannot resolve callback ${w}`);if(delete this.callbackCapabilities[w],Y.callback===s.DATA)C.resolve(Y.data);else if(Y.callback===s.ERROR)C.reject(d(Y.reason));else throw new Error("Unexpected callback case");return}const T=this.actionHandler[Y.action];if(!T)throw new Error(`Unknown action from worker: ${Y.action}`);if(Y.callbackId){const w=this.sourceName,C=Y.sourceName;new Promise(function(A){A(T(Y.data))}).then(function(A){$.postMessage({sourceName:w,targetName:C,callback:s.DATA,callbackId:Y.callbackId,data:A})},function(A){$.postMessage({sourceName:w,targetName:C,callback:s.ERROR,callbackId:Y.callbackId,reason:d(A)})});return}if(Y.streamId){Ae(this,y,zi).call(this,Y);return}T(Y.data)},$.addEventListener("message",this._onComObjOnMessage)}on(N,E){const $=this.actionHandler;if($[N])throw new Error(`There is already an actionName called "${N}"`);$[N]=E}send(N,E,$){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:N,data:E},$)}sendWithPromise(N,E,$){const q=this.callbackId++,Y=new i.PromiseCapability;this.callbackCapabilities[q]=Y;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:N,callbackId:q,data:E},$)}catch(T){Y.reject(T)}return Y.promise}sendWithStream(N,E,$,q){const Y=this.streamId++,T=this.sourceName,w=this.targetName,C=this.comObj;return new ReadableStream({start:A=>{const S=new i.PromiseCapability;return this.streamControllers[Y]={controller:A,startCall:S,pullCall:null,cancelCall:null,isClosed:!1},C.postMessage({sourceName:T,targetName:w,action:N,streamId:Y,data:E,desiredSize:A.desiredSize},q),S.promise},pull:A=>{const S=new i.PromiseCapability;return this.streamControllers[Y].pullCall=S,C.postMessage({sourceName:T,targetName:w,stream:c.PULL,streamId:Y,desiredSize:A.desiredSize}),S.promise},cancel:A=>{(0,i.assert)(A instanceof Error,"cancel must have a valid reason");const S=new i.PromiseCapability;return this.streamControllers[Y].cancelCall=S,this.streamControllers[Y].isClosed=!0,C.postMessage({sourceName:T,targetName:w,stream:c.CANCEL,streamId:Y,reason:d(A)}),S.promise}},$)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}y=new WeakSet,zi=function(N){const E=N.streamId,$=this.sourceName,q=N.sourceName,Y=this.comObj,T=this,w=this.actionHandler[N.action],C={enqueue(A,S=1,F){if(this.isCancelled)return;const Z=this.desiredSize;this.desiredSize-=S,Z>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),Y.postMessage({sourceName:$,targetName:q,stream:c.ENQUEUE,streamId:E,chunk:A},F)},close(){this.isCancelled||(this.isCancelled=!0,Y.postMessage({sourceName:$,targetName:q,stream:c.CLOSE,streamId:E}),delete T.streamSinks[E])},error(A){(0,i.assert)(A instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Y.postMessage({sourceName:$,targetName:q,stream:c.ERROR,streamId:E,reason:d(A)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:N.desiredSize,ready:null};C.sinkCapability.resolve(),C.ready=C.sinkCapability.promise,this.streamSinks[E]=C,new Promise(function(A){A(w(N.data,C))}).then(function(){Y.postMessage({sourceName:$,targetName:q,stream:c.START_COMPLETE,streamId:E,success:!0})},function(A){Y.postMessage({sourceName:$,targetName:q,stream:c.START_COMPLETE,streamId:E,reason:d(A)})})},b=new WeakSet,ji=function(N){const E=N.streamId,$=this.sourceName,q=N.sourceName,Y=this.comObj,T=this.streamControllers[E],w=this.streamSinks[E];switch(N.stream){case c.START_COMPLETE:N.success?T.startCall.resolve():T.startCall.reject(d(N.reason));break;case c.PULL_COMPLETE:N.success?T.pullCall.resolve():T.pullCall.reject(d(N.reason));break;case c.PULL:if(!w){Y.postMessage({sourceName:$,targetName:q,stream:c.PULL_COMPLETE,streamId:E,success:!0});break}w.desiredSize<=0&&N.desiredSize>0&&w.sinkCapability.resolve(),w.desiredSize=N.desiredSize,new Promise(function(C){var A;C((A=w.onPull)==null?void 0:A.call(w))}).then(function(){Y.postMessage({sourceName:$,targetName:q,stream:c.PULL_COMPLETE,streamId:E,success:!0})},function(C){Y.postMessage({sourceName:$,targetName:q,stream:c.PULL_COMPLETE,streamId:E,reason:d(C)})});break;case c.ENQUEUE:if((0,i.assert)(T,"enqueue should have stream controller"),T.isClosed)break;T.controller.enqueue(N.chunk);break;case c.CLOSE:if((0,i.assert)(T,"close should have stream controller"),T.isClosed)break;T.isClosed=!0,T.controller.close(),Ae(this,B,jr).call(this,T,E);break;case c.ERROR:(0,i.assert)(T,"error should have stream controller"),T.controller.error(d(N.reason)),Ae(this,B,jr).call(this,T,E);break;case c.CANCEL_COMPLETE:N.success?T.cancelCall.resolve():T.cancelCall.reject(d(N.reason)),Ae(this,B,jr).call(this,T,E);break;case c.CANCEL:if(!w)break;new Promise(function(C){var A;C((A=w.onCancel)==null?void 0:A.call(w,d(N.reason)))}).then(function(){Y.postMessage({sourceName:$,targetName:q,stream:c.CANCEL_COMPLETE,streamId:E,success:!0})},function(C){Y.postMessage({sourceName:$,targetName:q,stream:c.CANCEL_COMPLETE,streamId:E,reason:d(C)})}),w.sinkCapability.reject(d(N.reason)),w.isCancelled=!0,delete this.streamSinks[E];break;default:throw new Error("Unexpected stream case")}},B=new WeakSet,jr=async function(N,E){var $,q,Y;await Promise.allSettled([($=N.startCall)==null?void 0:$.promise,(q=N.pullCall)==null?void 0:q.promise,(Y=N.cancelCall)==null?void 0:Y.promise]),delete this.streamControllers[E]},t.MessageHandler=m},(e,t,r)=>{var c,d;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=r(1);class s{constructor({parsedData:y,rawData:g}){be(this,c,void 0);be(this,d,void 0);Ie(this,c,y),Ie(this,d,g)}getRaw(){return V(this,d)}get(y){return V(this,c).get(y)??null}getAll(){return(0,i.objectFromMap)(V(this,c))}has(y){return V(this,c).has(y)}}c=new WeakMap,d=new WeakMap,t.Metadata=s},(e,t,r)=>{var y,g,b,j,B,R,On;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=r(1),s=r(8);const c=Symbol("INTERNAL");class d{constructor(E,$){be(this,y,!0);this.name=E,this.intent=$}get visible(){return V(this,y)}_setVisible(E,$){E!==c&&(0,i.unreachable)("Internal method `_setVisible` called."),Ie(this,y,$)}}y=new WeakMap;class m{constructor(E){be(this,R);be(this,g,null);be(this,b,new Map);be(this,j,null);be(this,B,null);if(this.name=null,this.creator=null,E!==null){this.name=E.name,this.creator=E.creator,Ie(this,B,E.order);for(const $ of E.groups)V(this,b).set($.id,new d($.name,$.intent));if(E.baseState==="OFF")for(const $ of V(this,b).values())$._setVisible(c,!1);for(const $ of E.on)V(this,b).get($)._setVisible(c,!0);for(const $ of E.off)V(this,b).get($)._setVisible(c,!1);Ie(this,j,this.getHash())}}isVisible(E){if(V(this,b).size===0)return!0;if(!E)return(0,i.warn)("Optional content group not defined."),!0;if(E.type==="OCG")return V(this,b).has(E.id)?V(this,b).get(E.id).visible:((0,i.warn)(`Optional content group not found: ${E.id}`),!0);if(E.type==="OCMD"){if(E.expression)return Ae(this,R,On).call(this,E.expression);if(!E.policy||E.policy==="AnyOn"){for(const $ of E.ids){if(!V(this,b).has($))return(0,i.warn)(`Optional content group not found: ${$}`),!0;if(V(this,b).get($).visible)return!0}return!1}else if(E.policy==="AllOn"){for(const $ of E.ids){if(!V(this,b).has($))return(0,i.warn)(`Optional content group not found: ${$}`),!0;if(!V(this,b).get($).visible)return!1}return!0}else if(E.policy==="AnyOff"){for(const $ of E.ids){if(!V(this,b).has($))return(0,i.warn)(`Optional content group not found: ${$}`),!0;if(!V(this,b).get($).visible)return!0}return!1}else if(E.policy==="AllOff"){for(const $ of E.ids){if(!V(this,b).has($))return(0,i.warn)(`Optional content group not found: ${$}`),!0;if(V(this,b).get($).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${E.policy}.`),!0}return(0,i.warn)(`Unknown group type ${E.type}.`),!0}setVisibility(E,$=!0){if(!V(this,b).has(E)){(0,i.warn)(`Optional content group not found: ${E}`);return}V(this,b).get(E)._setVisible(c,!!$),Ie(this,g,null)}get hasInitialVisibility(){return this.getHash()===V(this,j)}getOrder(){return V(this,b).size?V(this,B)?V(this,B).slice():[...V(this,b).keys()]:null}getGroups(){return V(this,b).size>0?(0,i.objectFromMap)(V(this,b)):null}getGroup(E){return V(this,b).get(E)||null}getHash(){if(V(this,g)!==null)return V(this,g);const E=new s.MurmurHash3_64;for(const[$,q]of V(this,b))E.update(`${$}:${q.visible}`);return Ie(this,g,E.hexdigest())}}g=new WeakMap,b=new WeakMap,j=new WeakMap,B=new WeakMap,R=new WeakSet,On=function(E){const $=E.length;if($<2)return!0;const q=E[0];for(let Y=1;Y<$;Y++){const T=E[Y];let w;if(Array.isArray(T))w=Ae(this,R,On).call(this,T);else if(V(this,b).has(T))w=V(this,b).get(T).visible;else return(0,i.warn)(`Optional content group not found: ${T}`),!0;switch(q){case"And":if(!w)return!1;break;case"Or":if(w)return!0;break;case"Not":return!w;default:return!0}}return q==="And"},t.OptionalContentConfig=m},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=r(1),s=r(6);class c{constructor({length:g,initialData:b,progressiveDone:j=!1,contentDispositionFilename:B=null,disableRange:R=!1,disableStream:D=!1},N){if((0,i.assert)(N,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=j,this._contentDispositionFilename=B,(b==null?void 0:b.length)>0){const E=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;this._queuedChunks.push(E)}this._pdfDataRangeTransport=N,this._isStreamingSupported=!D,this._isRangeSupported=!R,this._contentLength=g,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((E,$)=>{this._onReceiveData({begin:E,chunk:$})}),this._pdfDataRangeTransport.addProgressListener((E,$)=>{this._onProgress({loaded:E,total:$})}),this._pdfDataRangeTransport.addProgressiveReadListener(E=>{this._onReceiveData({chunk:E})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:g,chunk:b}){const j=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(j):this._queuedChunks.push(j);else{const B=this._rangeReaders.some(function(R){return R._begin!==g?!1:(R._enqueue(j),!0)});(0,i.assert)(B,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var b,j,B,R;g.total===void 0?(j=(b=this._rangeReaders[0])==null?void 0:b.onProgress)==null||j.call(b,{loaded:g.loaded}):(R=(B=this._fullRequestReader)==null?void 0:B.onProgress)==null||R.call(B,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const b=this._rangeReaders.indexOf(g);b>=0&&this._rangeReaders.splice(b,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new d(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,b){if(b<=this._progressiveDataLength)return null;const j=new m(this,g,b);return this._pdfDataRangeTransport.requestDataRange(g,b),this._rangeReaders.push(j),j}cancelAllRequests(g){var b;(b=this._fullRequestReader)==null||b.cancel(g);for(const j of this._rangeReaders.slice(0))j.cancel(g);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=c;class d{constructor(g,b,j=!1,B=null){this._stream=g,this._done=j||!1,this._filename=(0,s.isPdfFile)(B)?B:null,this._queuedChunks=b||[],this._loaded=0;for(const R of this._queuedChunks)this._loaded+=R.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=new i.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class m{constructor(g,b,j){this._stream=g,this._begin=b,this._end=j,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const g=new i.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class r{static textContent(s){const c=[],d={items:c,styles:Object.create(null)};function m(y){var j;if(!y)return;let g=null;const b=y.name;if(b==="#text")g=y.value;else if(r.shouldBuildText(b))(j=y==null?void 0:y.attributes)!=null&&j.textContent?g=y.attributes.textContent:y.value&&(g=y.value);else return;if(g!==null&&c.push({str:g}),!!y.children)for(const B of y.children)m(B)}return m(s),d}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}t.XfaText=r},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=r(7);const s=function(g){return new Promise((b,j)=>{require$$0$1.readFile(g,(R,D)=>{if(R||!D){j(new Error(R));return}b(new Uint8Array(D))})})};class c extends i.BaseFilterFactory{}t.NodeFilterFactory=c;class d extends i.BaseCanvasFactory{_createCanvas(b,j){return require$$1.createCanvas(b,j)}}t.NodeCanvasFactory=d;class m extends i.BaseCMapReaderFactory{_fetchData(b,j){return s(b).then(B=>({cMapData:B,compressionType:j}))}}t.NodeCMapReaderFactory=m;class y extends i.BaseStandardFontDataFactory{_fetchData(b){return s(b)}}t.NodeStandardFontDataFactory=y},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=r(1),s=r(22);const c=require$$0$1,d=require$$2,m=require$$3,y=require$$4,g=/^file:\/\/\/[a-zA-Z]:\//;function b(Y){const T=y.parse(Y);return T.protocol==="file:"||T.host?T:/^[a-z]:[/\\]/i.test(Y)?y.parse(`file:///${Y}`):(T.host||(T.protocol="file:"),T)}class j{constructor(T){this.source=T,this.url=b(T.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T;return((T=this._fullRequestReader)==null?void 0:T._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new $(this):new N(this),this._fullRequestReader}getRangeReader(T,w){if(w<=this._progressiveDataLength)return null;const C=this.isFsUrl?new q(this,T,w):new E(this,T,w);return this._rangeRequestReaders.push(C),C}cancelAllRequests(T){var w;(w=this._fullRequestReader)==null||w.cancel(T);for(const C of this._rangeRequestReaders.slice(0))C.cancel(T)}}t.PDFNodeStream=j;class B{constructor(T){this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null;const w=T.source;this._contentLength=w.length,this._loaded=0,this._filename=null,this._disableRange=w.disableRange||!1,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!w.disableStream,this._isRangeSupported=!w.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var C;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const T=this._readableStream.read();return T===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=T.length,(C=this.onProgress)==null||C.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(T).buffer,done:!1})}cancel(T){if(!this._readableStream){this._error(T);return}this._readableStream.destroy(T)}_error(T){this._storedError=T,this._readCapability.resolve()}_setReadableStream(T){this._readableStream=T,T.on("readable",()=>{this._readCapability.resolve()}),T.on("end",()=>{T.destroy(),this._done=!0,this._readCapability.resolve()}),T.on("error",w=>{this._error(w)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class R{constructor(T){this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const w=T.source;this._isStreamingSupported=!w.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var C;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const T=this._readableStream.read();return T===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=T.length,(C=this.onProgress)==null||C.call(this,{loaded:this._loaded}),{value:new Uint8Array(T).buffer,done:!1})}cancel(T){if(!this._readableStream){this._error(T);return}this._readableStream.destroy(T)}_error(T){this._storedError=T,this._readCapability.resolve()}_setReadableStream(T){this._readableStream=T,T.on("readable",()=>{this._readCapability.resolve()}),T.on("end",()=>{T.destroy(),this._done=!0,this._readCapability.resolve()}),T.on("error",w=>{this._error(w)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function D(Y,T){return{protocol:Y.protocol,auth:Y.auth,host:Y.hostname,port:Y.port,path:Y.path,method:"GET",headers:T}}class N extends B{constructor(T){super(T);const w=C=>{if(C.statusCode===404){const Z=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Z,this._headersCapability.reject(Z);return}this._headersCapability.resolve(),this._setReadableStream(C);const A=Z=>this._readableStream.headers[Z.toLowerCase()],{allowRangeRequests:S,suggestedLength:F}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:T.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=F||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(A)};this._request=null,this._url.protocol==="http:"?this._request=d.request(D(this._url,T.httpHeaders),w):this._request=m.request(D(this._url,T.httpHeaders),w),this._request.on("error",C=>{this._storedError=C,this._headersCapability.reject(C)}),this._request.end()}}class E extends R{constructor(T,w,C){super(T),this._httpHeaders={};for(const S in T.httpHeaders){const F=T.httpHeaders[S];F!==void 0&&(this._httpHeaders[S]=F)}this._httpHeaders.Range=`bytes=${w}-${C-1}`;const A=S=>{if(S.statusCode===404){const F=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=F;return}this._setReadableStream(S)};this._request=null,this._url.protocol==="http:"?this._request=d.request(D(this._url,this._httpHeaders),A):this._request=m.request(D(this._url,this._httpHeaders),A),this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class $ extends B{constructor(T){super(T);let w=decodeURIComponent(this._url.path);g.test(this._url.href)&&(w=w.replace(/^\//,"")),c.lstat(w,(C,A)=>{if(C){C.code==="ENOENT"&&(C=new i.MissingPDFException(`Missing PDF "${w}".`)),this._storedError=C,this._headersCapability.reject(C);return}this._contentLength=A.size,this._setReadableStream(c.createReadStream(w)),this._headersCapability.resolve()})}}class q extends R{constructor(T,w,C){super(T);let A=decodeURIComponent(this._url.path);g.test(this._url.href)&&(A=A.replace(/^\//,"")),this._setReadableStream(c.createReadStream(A,{start:w,end:C-1}))}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=y,t.extractFilenameFromHeader=m,t.validateRangeRequestCapabilities=d,t.validateResponseStatus=g;var i=r(1),s=r(23),c=r(6);function d({getResponseHeader:b,isHttp:j,rangeChunkSize:B,disableRange:R}){const D={allowRangeRequests:!1,suggestedLength:void 0},N=parseInt(b("Content-Length"),10);return!Number.isInteger(N)||(D.suggestedLength=N,N<=2*B)||R||!j||b("Accept-Ranges")!=="bytes"||(b("Content-Encoding")||"identity")!=="identity"||(D.allowRangeRequests=!0),D}function m(b){const j=b("Content-Disposition");if(j){let B=(0,s.getFilenameFromContentDispositionHeader)(j);if(B.includes("%"))try{B=decodeURIComponent(B)}catch{}if((0,c.isPdfFile)(B))return B}return null}function y(b,j){return b===404||b===0&&j.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+j+'".'):new i.UnexpectedResponseException(`Unexpected server response (${b}) while retrieving PDF "${j}".`,b)}function g(b){return b===200||b===206}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=s;var i=r(1);function s(c){let d=!0,m=y("filename\\*","i").exec(c);if(m){m=m[1];let N=B(m);return N=unescape(N),N=R(N),N=D(N),b(N)}if(m=j(c),m){const N=D(m);return b(N)}if(m=y("filename","i").exec(c),m){m=m[1];let N=B(m);return N=D(N),b(N)}function y(N,E){return new RegExp("(?:^|;)\\s*"+N+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',E)}function g(N,E){if(N){if(!/^[\x00-\xFF]+$/.test(E))return E;try{const $=new TextDecoder(N,{fatal:!0}),q=(0,i.stringToBytes)(E);E=$.decode(q),d=!1}catch{}}return E}function b(N){return d&&/[\x80-\xff]/.test(N)&&(N=g("utf-8",N),d&&(N=g("iso-8859-1",N))),N}function j(N){const E=[];let $;const q=y("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;($=q.exec(N))!==null;){let[,T,w,C]=$;if(T=parseInt(T,10),T in E){if(T===0)break;continue}E[T]=[w,C]}const Y=[];for(let T=0;T<E.length&&T in E;++T){let[w,C]=E[T];C=B(C),w&&(C=unescape(C),T===0&&(C=R(C))),Y.push(C)}return Y.join("")}function B(N){if(N.startsWith('"')){const E=N.slice(1).split('\\"');for(let $=0;$<E.length;++$){const q=E[$].indexOf('"');q!==-1&&(E[$]=E[$].slice(0,q),E.length=$+1),E[$]=E[$].replaceAll(/\\(.)/g,"$1")}N=E.join('"')}return N}function R(N){const E=N.indexOf("'");if(E===-1)return N;const $=N.slice(0,E),Y=N.slice(E+1).replace(/^[^']*'/,"");return g($,Y)}function D(N){return!N.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(N)?N:N.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(E,$,q,Y){if(q==="q"||q==="Q")return Y=Y.replaceAll("_"," "),Y=Y.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,w){return String.fromCharCode(parseInt(w,16))}),g($,Y);try{Y=atob(Y)}catch{}return g($,Y)})}return""}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=r(1),s=r(22);const c=200,d=206;function m(B){const R=B.response;return typeof R!="string"?R:(0,i.stringToBytes)(R).buffer}class y{constructor(R,D={}){this.url=R,this.isHttp=/^https?:/i.test(R),this.httpHeaders=this.isHttp&&D.httpHeaders||Object.create(null),this.withCredentials=D.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(R,D,N){const E={begin:R,end:D};for(const $ in N)E[$]=N[$];return this.request(E)}requestFull(R){return this.request(R)}request(R){const D=new XMLHttpRequest,N=this.currXhrId++,E=this.pendingRequests[N]={xhr:D};D.open("GET",this.url),D.withCredentials=this.withCredentials;for(const $ in this.httpHeaders){const q=this.httpHeaders[$];q!==void 0&&D.setRequestHeader($,q)}return this.isHttp&&"begin"in R&&"end"in R?(D.setRequestHeader("Range",`bytes=${R.begin}-${R.end-1}`),E.expectedStatus=d):E.expectedStatus=c,D.responseType="arraybuffer",R.onError&&(D.onerror=function($){R.onError(D.status)}),D.onreadystatechange=this.onStateChange.bind(this,N),D.onprogress=this.onProgress.bind(this,N),E.onHeadersReceived=R.onHeadersReceived,E.onDone=R.onDone,E.onError=R.onError,E.onProgress=R.onProgress,D.send(null),N}onProgress(R,D){var E;const N=this.pendingRequests[R];N&&((E=N.onProgress)==null||E.call(N,D))}onStateChange(R,D){var T,w,C;const N=this.pendingRequests[R];if(!N)return;const E=N.xhr;if(E.readyState>=2&&N.onHeadersReceived&&(N.onHeadersReceived(),delete N.onHeadersReceived),E.readyState!==4||!(R in this.pendingRequests))return;if(delete this.pendingRequests[R],E.status===0&&this.isHttp){(T=N.onError)==null||T.call(N,E.status);return}const $=E.status||c;if(!($===c&&N.expectedStatus===d)&&$!==N.expectedStatus){(w=N.onError)==null||w.call(N,E.status);return}const Y=m(E);if($===d){const A=E.getResponseHeader("Content-Range"),S=/bytes (\d+)-(\d+)\/(\d+)/.exec(A);N.onDone({begin:parseInt(S[1],10),chunk:Y})}else Y?N.onDone({begin:0,chunk:Y}):(C=N.onError)==null||C.call(N,E.status)}getRequestXhr(R){return this.pendingRequests[R].xhr}isPendingRequest(R){return R in this.pendingRequests}abortRequest(R){const D=this.pendingRequests[R].xhr;delete this.pendingRequests[R],D.abort()}}class g{constructor(R){this._source=R,this._manager=new y(R.url,{httpHeaders:R.httpHeaders,withCredentials:R.withCredentials}),this._rangeChunkSize=R.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(R){const D=this._rangeRequestReaders.indexOf(R);D>=0&&this._rangeRequestReaders.splice(D,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new b(this._manager,this._source),this._fullRequestReader}getRangeReader(R,D){const N=new j(this._manager,R,D);return N.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(N),N}cancelAllRequests(R){var D;(D=this._fullRequestReader)==null||D.cancel(R);for(const N of this._rangeRequestReaders.slice(0))N.cancel(R)}}t.PDFNetworkStream=g;class b{constructor(R,D){this._manager=R;const N={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._fullRequestId=R.requestFull(N),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=D.disableRange||!1,this._contentLength=D.length,this._rangeChunkSize=D.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const R=this._fullRequestId,D=this._manager.getRequestXhr(R),N=q=>D.getResponseHeader(q),{allowRangeRequests:E,suggestedLength:$}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:N,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});E&&(this._isRangeSupported=!0),this._contentLength=$||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(N),this._isRangeSupported&&this._manager.abortRequest(R),this._headersReceivedCapability.resolve()}_onDone(R){if(R&&(this._requests.length>0?this._requests.shift().resolve({value:R.chunk,done:!1}):this._cachedChunks.push(R.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(R){this._storedError=(0,s.createResponseStatusError)(R,this._url),this._headersReceivedCapability.reject(this._storedError);for(const D of this._requests)D.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(R){var D;(D=this.onProgress)==null||D.call(this,{loaded:R.loaded,total:R.lengthComputable?R.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const R=new i.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0,this._headersReceivedCapability.reject(R);for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class j{constructor(R,D,N){this._manager=R;const E={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._requestId=R.requestRange(D,N,E),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var R;(R=this.onClosed)==null||R.call(this,this)}_onDone(R){const D=R.chunk;this._requests.length>0?this._requests.shift().resolve({value:D,done:!1}):this._queuedChunk=D,this._done=!0;for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(R){this._storedError=(0,s.createResponseStatusError)(R,this._url);for(const D of this._requests)D.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(R){var D;this.isStreamingSupported||(D=this.onProgress)==null||D.call(this,{loaded:R.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const D=this._queuedChunk;return this._queuedChunk=null,{value:D,done:!1}}if(this._done)return{value:void 0,done:!0};const R=new i.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=r(1),s=r(22);function c(j,B,R){return{method:"GET",headers:j,signal:R.signal,mode:"cors",credentials:B?"include":"same-origin",redirect:"follow"}}function d(j){const B=new Headers;for(const R in j){const D=j[R];D!==void 0&&B.append(R,D)}return B}function m(j){return j instanceof Uint8Array?j.buffer:j instanceof ArrayBuffer?j:((0,i.warn)(`getArrayBuffer - unexpected data format: ${j}`),new Uint8Array(j).buffer)}class y{constructor(B){this.source=B,this.isHttp=/^https?:/i.test(B.url),this.httpHeaders=this.isHttp&&B.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var B;return((B=this._fullRequestReader)==null?void 0:B._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new g(this),this._fullRequestReader}getRangeReader(B,R){if(R<=this._progressiveDataLength)return null;const D=new b(this,B,R);return this._rangeRequestReaders.push(D),D}cancelAllRequests(B){var R;(R=this._fullRequestReader)==null||R.cancel(B);for(const D of this._rangeRequestReaders.slice(0))D.cancel(B)}}t.PDFFetchStream=y;class g{constructor(B){this._stream=B,this._reader=null,this._loaded=0,this._filename=null;const R=B.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=new i.PromiseCapability,this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=d(this._stream.httpHeaders);const D=R.url;fetch(D,c(this._headers,this._withCredentials,this._abortController)).then(N=>{if(!(0,s.validateResponseStatus)(N.status))throw(0,s.createResponseStatusError)(N.status,D);this._reader=N.body.getReader(),this._headersCapability.resolve();const E=Y=>N.headers.get(Y),{allowRangeRequests:$,suggestedLength:q}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=$,this._contentLength=q||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(E),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var D;await this._headersCapability.promise;const{value:B,done:R}=await this._reader.read();return R?{value:B,done:R}:(this._loaded+=B.byteLength,(D=this.onProgress)==null||D.call(this,{loaded:this._loaded,total:this._contentLength}),{value:m(B),done:!1})}cancel(B){var R;(R=this._reader)==null||R.cancel(B),this._abortController.abort()}}class b{constructor(B,R,D){this._stream=B,this._reader=null,this._loaded=0;const N=B.source;this._withCredentials=N.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!N.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${D-1}`);const E=N.url;fetch(E,c(this._headers,this._withCredentials,this._abortController)).then($=>{if(!(0,s.validateResponseStatus)($.status))throw(0,s.createResponseStatusError)($.status,E);this._readCapability.resolve(),this._reader=$.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var D;await this._readCapability.promise;const{value:B,done:R}=await this._reader.read();return R?{value:B,done:R}:(this._loaded+=B.byteLength,(D=this.onProgress)==null||D.call(this,{loaded:this._loaded}),{value:m(B),done:!1})}cancel(B){var R;(R=this._reader)==null||R.cancel(B),this._abortController.abort()}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=N,t.updateTextLayer=E;var i=r(1),s=r(6);const c=1e5,d=30,m=.8,y=new Map;function g($,q){let Y;if(q&&i.FeatureTest.isOffscreenCanvasSupported)Y=new OffscreenCanvas($,$).getContext("2d",{alpha:!1});else{const T=document.createElement("canvas");T.width=T.height=$,Y=T.getContext("2d",{alpha:!1})}return Y}function b($,q){const Y=y.get($);if(Y)return Y;const T=g(d,q);T.font=`${d}px ${$}`;const w=T.measureText("");let C=w.fontBoundingBoxAscent,A=Math.abs(w.fontBoundingBoxDescent);if(C){const F=C/(C+A);return y.set($,F),T.canvas.width=T.canvas.height=0,F}T.strokeStyle="red",T.clearRect(0,0,d,d),T.strokeText("g",0,0);let S=T.getImageData(0,0,d,d).data;A=0;for(let F=S.length-1-3;F>=0;F-=4)if(S[F]>0){A=Math.ceil(F/4/d);break}T.clearRect(0,0,d,d),T.strokeText("A",0,d),S=T.getImageData(0,0,d,d).data,C=0;for(let F=0,Z=S.length;F<Z;F+=4)if(S[F]>0){C=d-Math.floor(F/4/d);break}if(T.canvas.width=T.canvas.height=0,C){const F=C/(C+A);return y.set($,F),F}return y.set($,m),m}function j($,q,Y){const T=document.createElement("span"),w={angle:0,canvasWidth:0,hasText:q.str!=="",hasEOL:q.hasEOL,fontSize:0};$._textDivs.push(T);const C=i.Util.transform($._transform,q.transform);let A=Math.atan2(C[1],C[0]);const S=Y[q.fontName];S.vertical&&(A+=Math.PI/2);const F=Math.hypot(C[2],C[3]),Z=F*b(S.fontFamily,$._isOffscreenCanvasSupported);let P,ie;A===0?(P=C[4],ie=C[5]-Z):(P=C[4]+Z*Math.sin(A),ie=C[5]-Z*Math.cos(A));const ue="calc(var(--scale-factor)*",pe=T.style;$._container===$._rootContainer?(pe.left=`${(100*P/$._pageWidth).toFixed(2)}%`,pe.top=`${(100*ie/$._pageHeight).toFixed(2)}%`):(pe.left=`${ue}${P.toFixed(2)}px)`,pe.top=`${ue}${ie.toFixed(2)}px)`),pe.fontSize=`${ue}${F.toFixed(2)}px)`,pe.fontFamily=S.fontFamily,w.fontSize=F,T.setAttribute("role","presentation"),T.textContent=q.str,T.dir=q.dir,$._fontInspectorEnabled&&(T.dataset.fontName=q.fontName),A!==0&&(w.angle=A*(180/Math.PI));let _e=!1;if(q.str.length>1)_e=!0;else if(q.str!==" "&&q.transform[0]!==q.transform[3]){const we=Math.abs(q.transform[0]),Pe=Math.abs(q.transform[3]);we!==Pe&&Math.max(we,Pe)/Math.min(we,Pe)>1.5&&(_e=!0)}_e&&(w.canvasWidth=S.vertical?q.height:q.width),$._textDivProperties.set(T,w),$._isReadableStream&&$._layoutText(T)}function B($){const{div:q,scale:Y,properties:T,ctx:w,prevFontSize:C,prevFontFamily:A}=$,{style:S}=q;let F="";if(T.canvasWidth!==0&&T.hasText){const{fontFamily:Z}=S,{canvasWidth:P,fontSize:ie}=T;(C!==ie||A!==Z)&&(w.font=`${ie*Y}px ${Z}`,$.prevFontSize=ie,$.prevFontFamily=Z);const{width:ue}=w.measureText(q.textContent);ue>0&&(F=`scaleX(${P*Y/ue})`)}T.angle!==0&&(F=`rotate(${T.angle}deg) ${F}`),F.length>0&&(S.transform=F)}function R($){if($._canceled)return;const q=$._textDivs,Y=$._capability;if(q.length>c){Y.resolve();return}if(!$._isReadableStream)for(const w of q)$._layoutText(w);Y.resolve()}class D{constructor({textContentSource:q,container:Y,viewport:T,textDivs:w,textDivProperties:C,textContentItemsStr:A,isOffscreenCanvasSupported:S}){var ue;this._textContentSource=q,this._isReadableStream=q instanceof ReadableStream,this._container=this._rootContainer=Y,this._textDivs=w||[],this._textContentItemsStr=A||[],this._isOffscreenCanvasSupported=S,this._fontInspectorEnabled=!!((ue=globalThis.FontInspector)!=null&&ue.enabled),this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:T.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:g(0,S)};const{pageWidth:F,pageHeight:Z,pageX:P,pageY:ie}=T.rawDims;this._transform=[1,0,0,-1,-P,ie+Z],this._pageWidth=F,this._pageHeight=Z,(0,s.setLayerDimensions)(Y,T),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(q,Y){for(const T of q){if(T.str===void 0){if(T.type==="beginMarkedContentProps"||T.type==="beginMarkedContent"){const w=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),T.id!==null&&this._container.setAttribute("id",`${T.id}`),w.append(this._container)}else T.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(T.str),j(this,T,Y)}}_layoutText(q){const Y=this._layoutTextParams.properties=this._textDivProperties.get(q);if(this._layoutTextParams.div=q,B(this._layoutTextParams),Y.hasText&&this._container.append(q),Y.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),this._container.append(T)}}_render(){const q=new i.PromiseCapability;let Y=Object.create(null);if(this._isReadableStream){const T=()=>{this._reader.read().then(({value:w,done:C})=>{if(C){q.resolve();return}Object.assign(Y,w.styles),this._processItems(w.items,Y),T()},q.reject)};this._reader=this._textContentSource.getReader(),T()}else if(this._textContentSource){const{items:T,styles:w}=this._textContentSource;this._processItems(T,w),q.resolve()}else throw new Error('No "textContentSource" parameter specified.');q.promise.then(()=>{Y=null,R(this)},this._capability.reject)}}t.TextLayerRenderTask=D;function N($){!$.textContentSource&&($.textContent||$.textContentStream)&&((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),$.textContentSource=$.textContent||$.textContentStream);const{container:q,viewport:Y}=$,T=getComputedStyle(q),w=T.getPropertyValue("visibility"),C=parseFloat(T.getPropertyValue("--scale-factor"));w==="visible"&&(!C||Math.abs(C-Y.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const A=new D($);return A._render(),A}function E({container:$,viewport:q,textDivs:Y,textDivProperties:T,isOffscreenCanvasSupported:w,mustRotate:C=!0,mustRescale:A=!0}){if(C&&(0,s.setLayerDimensions)($,{rotation:q.rotation}),A){const S=g(0,w),Z={prevFontSize:null,prevFontFamily:null,div:null,scale:q.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:S};for(const P of Y)Z.properties=T.get(P),Z.div=P,B(Z)}}},(e,t,r)=>{var g,b,j,B,R,D,N,E,$,Rn,Y,Hi,w,Fn,A,In;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=r(1),s=r(5),c=r(28),d=r(29),m=r(6);const F=class F{constructor(P){be(this,$);be(this,Y);be(this,w);be(this,A);be(this,g,void 0);be(this,b,!1);be(this,j,this.pointerup.bind(this));be(this,B,this.pointerdown.bind(this));be(this,R,new Map);be(this,D,!1);be(this,N,!1);be(this,E,void 0);F._initialized||(F._initialized=!0,c.FreeTextEditor.initialize(P.l10n),d.InkEditor.initialize(P.l10n)),P.uiManager.registerEditorTypes([c.FreeTextEditor,d.InkEditor]),Ie(this,E,P.uiManager),this.pageIndex=P.pageIndex,this.div=P.div,Ie(this,g,P.accessibilityManager),V(this,E).addLayer(this)}get isEmpty(){return V(this,R).size===0}updateToolbar(P){V(this,E).updateToolbar(P)}updateMode(P=V(this,E).getMode()){Ae(this,A,In).call(this),P===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),V(this,E).unselectAll(),P!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",P===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",P===i.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(P){if(!P&&V(this,E).getMode()!==i.AnnotationEditorType.INK)return;if(!P){for(const ue of V(this,R).values())if(ue.isEmpty()){ue.setInBackground();return}}Ae(this,w,Fn).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(P){V(this,E).setEditingState(P)}addCommands(P){V(this,E).addCommands(P)}enable(){this.div.style.pointerEvents="auto";for(const P of V(this,R).values())P.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const P of V(this,R).values())P.disableEditing();Ae(this,A,In).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(P){V(this,E).getActive()!==P&&V(this,E).setActiveEditor(P)}enableClick(){this.div.addEventListener("pointerdown",V(this,B)),this.div.addEventListener("pointerup",V(this,j))}disableClick(){this.div.removeEventListener("pointerdown",V(this,B)),this.div.removeEventListener("pointerup",V(this,j))}attach(P){V(this,R).set(P.id,P)}detach(P){var ie;V(this,R).delete(P.id),(ie=V(this,g))==null||ie.removePointerInTextLayer(P.contentDiv)}remove(P){V(this,E).removeEditor(P),this.detach(P),P.div.style.display="none",setTimeout(()=>{P.div.style.display="",P.div.remove(),P.isAttachedToDOM=!1,document.activeElement===document.body&&V(this,E).focusMainContainer()},0),V(this,N)||this.addInkEditorIfNeeded(!1)}add(P){if(Ae(this,$,Rn).call(this,P),V(this,E).addEditor(P),this.attach(P),!P.isAttachedToDOM){const ie=P.render();this.div.append(ie),P.isAttachedToDOM=!0}this.moveEditorInDOM(P),P.onceAdded(),V(this,E).addToAnnotationStorage(P)}moveEditorInDOM(P){var ie;(ie=V(this,g))==null||ie.moveElementInDOM(this.div,P.div,P.contentDiv,!0)}addOrRebuild(P){P.needsToBeRebuilt()?P.rebuild():this.add(P)}addANewEditor(P){const ie=()=>{this.addOrRebuild(P)},ue=()=>{P.remove()};this.addCommands({cmd:ie,undo:ue,mustExec:!0})}addUndoableEditor(P){const ie=()=>{this.addOrRebuild(P)},ue=()=>{P.remove()};this.addCommands({cmd:ie,undo:ue,mustExec:!1})}getNextId(){return V(this,E).getId()}deserialize(P){switch(P.annotationType){case i.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(P,this,V(this,E));case i.AnnotationEditorType.INK:return d.InkEditor.deserialize(P,this,V(this,E))}return null}setSelected(P){V(this,E).setSelected(P)}toggleSelected(P){V(this,E).toggleSelected(P)}isSelected(P){return V(this,E).isSelected(P)}unselect(P){V(this,E).unselect(P)}pointerup(P){const{isMac:ie}=i.FeatureTest.platform;if(!(P.button!==0||P.ctrlKey&&ie)&&P.target===this.div&&V(this,D)){if(Ie(this,D,!1),!V(this,b)){Ie(this,b,!0);return}Ae(this,w,Fn).call(this,P)}}pointerdown(P){const{isMac:ie}=i.FeatureTest.platform;if(P.button!==0||P.ctrlKey&&ie||P.target!==this.div)return;Ie(this,D,!0);const ue=V(this,E).getActive();Ie(this,b,!ue||ue.isEmpty())}drop(P){const ie=P.dataTransfer.getData("text/plain"),ue=V(this,E).getEditor(ie);if(!ue)return;P.preventDefault(),P.dataTransfer.dropEffect="move",Ae(this,$,Rn).call(this,ue);const pe=this.div.getBoundingClientRect(),_e=P.clientX-pe.x,we=P.clientY-pe.y;ue.translate(_e-ue.startX,we-ue.startY),this.moveEditorInDOM(ue),ue.div.focus()}dragover(P){P.preventDefault()}destroy(){var P,ie;((P=V(this,E).getActive())==null?void 0:P.parent)===this&&V(this,E).setActiveEditor(null);for(const ue of V(this,R).values())(ie=V(this,g))==null||ie.removePointerInTextLayer(ue.contentDiv),ue.setParent(null),ue.isAttachedToDOM=!1,ue.div.remove();this.div=null,V(this,R).clear(),V(this,E).removeLayer(this)}render({viewport:P}){this.viewport=P,(0,m.setLayerDimensions)(this.div,P),(0,s.bindEvents)(this,this.div,["dragover","drop"]);for(const ie of V(this,E).getEditors(this.pageIndex))this.add(ie);this.updateMode()}update({viewport:P}){V(this,E).commitOrRemove(),this.viewport=P,(0,m.setLayerDimensions)(this.div,{rotation:P.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:P,pageHeight:ie}=this.viewport.rawDims;return[P,ie]}};g=new WeakMap,b=new WeakMap,j=new WeakMap,B=new WeakMap,R=new WeakMap,D=new WeakMap,N=new WeakMap,E=new WeakMap,$=new WeakSet,Rn=function(P){var ie;P.parent!==this&&(this.attach(P),(ie=P.parent)==null||ie.detach(P),P.setParent(this),P.div&&P.isAttachedToDOM&&(P.div.remove(),this.div.append(P.div)))},Y=new WeakSet,Hi=function(P){switch(V(this,E).getMode()){case i.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(P);case i.AnnotationEditorType.INK:return new d.InkEditor(P)}return null},w=new WeakSet,Fn=function(P){const ie=this.getNextId(),ue=Ae(this,Y,Hi).call(this,{parent:this,id:ie,x:P.offsetX,y:P.offsetY,uiManager:V(this,E)});return ue&&this.add(ue),ue},A=new WeakSet,In=function(){Ie(this,N,!0);for(const P of V(this,R).values())P.isEmpty()&&P.remove();Ie(this,N,!1)},fe(F,"_initialized",!1);let y=F;t.AnnotationEditorLayer=y},(e,t,r)=>{var m,y,g,b,j,B,R,D,N,E,Wi,q,Yi,T,Vi,C,Ln;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=r(1),s=r(5),c=r(4);const S=class S extends c.AnnotationEditor{constructor(P){super({...P,name:"freeTextEditor"});be(this,E);be(this,q);be(this,T);be(this,C);be(this,m,this.editorDivBlur.bind(this));be(this,y,this.editorDivFocus.bind(this));be(this,g,this.editorDivInput.bind(this));be(this,b,this.editorDivKeydown.bind(this));be(this,j,void 0);be(this,B,"");be(this,R,`${this.id}-editor`);be(this,D,!1);be(this,N,void 0);Ie(this,j,P.color||S._defaultColor||c.AnnotationEditor._defaultLineColor),Ie(this,N,P.fontSize||S._defaultFontSize)}static initialize(P){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(ue=>[ue,P.get(ue)]));const ie=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ie.getPropertyValue("--freetext-padding"))}static updateDefaultParams(P,ie){switch(P){case i.AnnotationEditorParamsType.FREETEXT_SIZE:S._defaultFontSize=ie;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:S._defaultColor=ie;break}}updateParams(P,ie){switch(P){case i.AnnotationEditorParamsType.FREETEXT_SIZE:Ae(this,E,Wi).call(this,ie);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:Ae(this,q,Yi).call(this,ie);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,S._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,S._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,V(this,N)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,V(this,j)]]}getInitialTranslation(){const P=this.parentScale;return[-S._internalPadding*P,-(S._internalPadding+V(this,N))*P]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",V(this,b)),this.editorDiv.addEventListener("focus",V(this,y)),this.editorDiv.addEventListener("blur",V(this,m)),this.editorDiv.addEventListener("input",V(this,g)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",V(this,R)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",V(this,b)),this.editorDiv.removeEventListener("focus",V(this,y)),this.editorDiv.removeEventListener("blur",V(this,m)),this.editorDiv.removeEventListener("input",V(this,g)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(P){super.focusin(P),P.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),V(this,D)||(Ie(this,D,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Ie(this,B,Ae(this,T,Vi).call(this).trimEnd()),Ae(this,C,Ln).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(P){this.enableEditMode(),this.editorDiv.focus()}keydown(P){P.target===this.div&&P.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(P){S._keyboardManager.exec(this,P)}editorDivFocus(P){this.isEditing=!0}editorDivBlur(P){this.isEditing=!1}editorDivInput(P){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let P,ie;this.width&&(P=this.x,ie=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",V(this,R)),this.enableEditing(),S._l10nPromise.get("editor_free_text2_aria_label").then(pe=>{var _e;return(_e=this.editorDiv)==null?void 0:_e.setAttribute("aria-label",pe)}),S._l10nPromise.get("free_text2_default_content").then(pe=>{var _e;return(_e=this.editorDiv)==null?void 0:_e.setAttribute("default-content",pe)}),this.editorDiv.contentEditable=!0;const{style:ue}=this.editorDiv;if(ue.fontSize=`calc(${V(this,N)}px * var(--scale-factor))`,ue.color=V(this,j),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[pe,_e]=this.parentDimensions;this.setAt(P*pe,ie*_e,this.width*pe,this.height*_e);for(const we of V(this,B).split(`
`)){const Pe=document.createElement("div");Pe.append(we?document.createTextNode(we):document.createElement("br")),this.editorDiv.append(Pe)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(P,ie,ue){const pe=super.deserialize(P,ie,ue);return Ie(pe,N,P.fontSize),Ie(pe,j,i.Util.makeHexColor(...P.color)),Ie(pe,B,P.value),pe}serialize(){if(this.isEmpty())return null;const P=S._internalPadding*this.parentScale,ie=this.getRect(P,P),ue=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:V(this,j));return{annotationType:i.AnnotationEditorType.FREETEXT,color:ue,fontSize:V(this,N),value:V(this,B),pageIndex:this.pageIndex,rect:ie,rotation:this.rotation}}};m=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,j=new WeakMap,B=new WeakMap,R=new WeakMap,D=new WeakMap,N=new WeakMap,E=new WeakSet,Wi=function(P){const ie=pe=>{this.editorDiv.style.fontSize=`calc(${pe}px * var(--scale-factor))`,this.translate(0,-(pe-V(this,N))*this.parentScale),Ie(this,N,pe),Ae(this,C,Ln).call(this)},ue=V(this,N);this.addCommands({cmd:()=>{ie(P)},undo:()=>{ie(ue)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},q=new WeakSet,Yi=function(P){const ie=V(this,j);this.addCommands({cmd:()=>{Ie(this,j,this.editorDiv.style.color=P)},undo:()=>{Ie(this,j,this.editorDiv.style.color=ie)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},T=new WeakSet,Vi=function(){const P=this.editorDiv.getElementsByTagName("div");if(P.length===0)return this.editorDiv.innerText;const ie=[];for(const ue of P)ie.push(ue.innerText.replace(/\r\n?|\n/,""));return ie.join(`
`)},C=new WeakSet,Ln=function(){const[P,ie]=this.parentDimensions;let ue;if(this.isAttachedToDOM)ue=this.div.getBoundingClientRect();else{const{currentLayer:pe,div:_e}=this,we=_e.style.display;_e.style.display="hidden",pe.div.append(this.div),ue=_e.getBoundingClientRect(),_e.remove(),_e.style.display=we}this.width=ue.width/P,this.height=ue.height/ie},fe(S,"_freeTextDefaultContent",""),fe(S,"_l10nPromise"),fe(S,"_internalPadding",0),fe(S,"_defaultColor",null),fe(S,"_defaultFontSize",10),fe(S,"_keyboardManager",new s.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],S.prototype.commitOrRemove]])),fe(S,"_type","freetext");let d=S;t.FreeTextEditor=d},(e,t,r)=>{var g,b,j,B,R,D,N,E,$,q,Y,T,w,C,A,qi,F,Gi,P,Zi,ue,Xi,_e,Nn,Pe,Ki,De,Ji,Ue,Qi,$e,Ft,L,$n,Q,Hr,X,Wr,ee,hr,ne,Bn,O,Yr,K,Un,ce,ea,me,ta,Te,ra,Ce,zn,Fe,Vr,ze,fr,ge,jn;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return c.fitCurve}});var i=r(1),s=r(4),c=r(30),d=r(5);const m=16,He=class He extends s.AnnotationEditor{constructor(te){super({...te,name:"inkEditor"});be(this,A);be(this,F);be(this,P);be(this,ue);be(this,_e);be(this,Pe);be(this,De);be(this,Ue);be(this,$e);be(this,L);be(this,Q);be(this,X);be(this,ee);be(this,ne);be(this,O);be(this,ce);be(this,me);be(this,Te);be(this,Ce);be(this,Fe);be(this,ze);be(this,ge);be(this,g,0);be(this,b,0);be(this,j,0);be(this,B,this.canvasPointermove.bind(this));be(this,R,this.canvasPointerleave.bind(this));be(this,D,this.canvasPointerup.bind(this));be(this,N,this.canvasPointerdown.bind(this));be(this,E,!1);be(this,$,!1);be(this,q,null);be(this,Y,null);be(this,T,0);be(this,w,0);be(this,C,null);this.color=te.color||null,this.thickness=te.thickness||null,this.opacity=te.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(te){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(ae=>[ae,te.get(ae)]))}static updateDefaultParams(te,ae){switch(te){case i.AnnotationEditorParamsType.INK_THICKNESS:He._defaultThickness=ae;break;case i.AnnotationEditorParamsType.INK_COLOR:He._defaultColor=ae;break;case i.AnnotationEditorParamsType.INK_OPACITY:He._defaultOpacity=ae/100;break}}updateParams(te,ae){switch(te){case i.AnnotationEditorParamsType.INK_THICKNESS:Ae(this,A,qi).call(this,ae);break;case i.AnnotationEditorParamsType.INK_COLOR:Ae(this,F,Gi).call(this,ae);break;case i.AnnotationEditorParamsType.INK_OPACITY:Ae(this,P,Zi).call(this,ae);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,He._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,He._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(He._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||He._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||He._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??He._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Ae(this,Q,Hr).call(this),Ae(this,X,Wr).call(this)),this.isAttachedToDOM||(this.parent.add(this),Ae(this,ee,hr).call(this)),Ae(this,ze,fr).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,V(this,Y).disconnect(),Ie(this,Y,null),super.remove())}setParent(te){!this.parent&&te?this._uiManager.removeShouldRescale(this):this.parent&&te===null&&this._uiManager.addShouldRescale(this),super.setParent(te)}onScaleChanging(){const[te,ae]=this.parentDimensions,Ee=this.width*te,Le=this.height*ae;this.setDimensions(Ee,Le)}enableEditMode(){V(this,E)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",V(this,N)),this.canvas.addEventListener("pointerup",V(this,D)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",V(this,N)),this.canvas.removeEventListener("pointerup",V(this,D)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){V(this,E)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Ie(this,E,!0),this.div.classList.add("disabled"),Ae(this,ze,fr).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(te){super.focusin(te),this.enableEditMode()}canvasPointerdown(te){te.button!==0||!this.isInEditMode()||V(this,E)||(this.setInForeground(),te.type!=="mouse"&&this.div.focus(),te.stopPropagation(),this.canvas.addEventListener("pointerleave",V(this,R)),this.canvas.addEventListener("pointermove",V(this,B)),Ae(this,Pe,Ki).call(this,te.offsetX,te.offsetY))}canvasPointermove(te){te.stopPropagation(),Ae(this,De,Ji).call(this,te.offsetX,te.offsetY)}canvasPointerup(te){te.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(te.stopPropagation(),Ae(this,L,$n).call(this,te),this.setInBackground())}canvasPointerleave(te){Ae(this,L,$n).call(this,te),this.setInBackground()}render(){if(this.div)return this.div;let te,ae;this.width&&(te=this.x,ae=this.y),super.render(),He._l10nPromise.get("editor_ink2_aria_label").then(Ge=>{var Ke;return(Ke=this.div)==null?void 0:Ke.setAttribute("aria-label",Ge)});const[Ee,Le,qe,Xe]=Ae(this,ue,Xi).call(this);if(this.setAt(Ee,Le,0,0),this.setDims(qe,Xe),Ae(this,Q,Hr).call(this),this.width){const[Ge,Ke]=this.parentDimensions;this.setAt(te*Ge,ae*Ke,this.width*Ge,this.height*Ke),Ie(this,$,!0),Ae(this,ee,hr).call(this),this.setDims(this.width*Ge,this.height*Ke),Ae(this,$e,Ft).call(this),Ae(this,ge,jn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Ae(this,X,Wr).call(this),this.div}setDimensions(te,ae){const Ee=Math.round(te),Le=Math.round(ae);if(V(this,T)===Ee&&V(this,w)===Le)return;Ie(this,T,Ee),Ie(this,w,Le),this.canvas.style.visibility="hidden",V(this,g)&&Math.abs(V(this,g)-te/ae)>.01&&(ae=Math.ceil(te/V(this,g)),this.setDims(te,ae));const[qe,Xe]=this.parentDimensions;this.width=te/qe,this.height=ae/Xe,V(this,E)&&Ae(this,ne,Bn).call(this,te,ae),Ae(this,ee,hr).call(this),Ae(this,$e,Ft).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(te,ae,Ee){var Qe,nt;const Le=super.deserialize(te,ae,Ee);Le.thickness=te.thickness,Le.color=i.Util.makeHexColor(...te.color),Le.opacity=te.opacity;const[qe,Xe]=Le.pageDimensions,Ge=Le.width*qe,Ke=Le.height*Xe,at=Le.parentScale,Ze=te.thickness/2;Ie(Le,g,Ge/Ke),Ie(Le,E,!0),Ie(Le,T,Math.round(Ge)),Ie(Le,w,Math.round(Ke));for(const{bezier:tt}of te.paths){const mt=[];Le.paths.push(mt);let bt=at*(tt[0]-Ze),yt=at*(Ke-tt[1]-Ze);for(let ft=2,pt=tt.length;ft<pt;ft+=6){const Tt=at*(tt[ft]-Ze),Mt=at*(Ke-tt[ft+1]-Ze),Yt=at*(tt[ft+2]-Ze),rr=at*(Ke-tt[ft+3]-Ze),Cr=at*(tt[ft+4]-Ze),pr=at*(Ke-tt[ft+5]-Ze);mt.push([[bt,yt],[Tt,Mt],[Yt,rr],[Cr,pr]]),bt=Cr,yt=pr}const St=Ae(this,K,Un).call(this,mt);Le.bezierPath2D.push(St)}const dt=Ae(Qe=Le,Ce,zn).call(Qe);return Ie(Le,j,Math.max(m,dt[2]-dt[0])),Ie(Le,b,Math.max(m,dt[3]-dt[1])),Ae(nt=Le,ne,Bn).call(nt,Ge,Ke),Le}serialize(){if(this.isEmpty())return null;const te=this.getRect(0,0),ae=this.rotation%180===0?te[3]-te[1]:te[2]-te[0],Ee=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:Ee,thickness:this.thickness,opacity:this.opacity,paths:Ae(this,ce,ea).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ae),pageIndex:this.pageIndex,rect:te,rotation:this.rotation}}};g=new WeakMap,b=new WeakMap,j=new WeakMap,B=new WeakMap,R=new WeakMap,D=new WeakMap,N=new WeakMap,E=new WeakMap,$=new WeakMap,q=new WeakMap,Y=new WeakMap,T=new WeakMap,w=new WeakMap,C=new WeakMap,A=new WeakSet,qi=function(te){const ae=this.thickness;this.addCommands({cmd:()=>{this.thickness=te,Ae(this,ze,fr).call(this)},undo:()=>{this.thickness=ae,Ae(this,ze,fr).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},F=new WeakSet,Gi=function(te){const ae=this.color;this.addCommands({cmd:()=>{this.color=te,Ae(this,$e,Ft).call(this)},undo:()=>{this.color=ae,Ae(this,$e,Ft).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Zi=function(te){te/=100;const ae=this.opacity;this.addCommands({cmd:()=>{this.opacity=te,Ae(this,$e,Ft).call(this)},undo:()=>{this.opacity=ae,Ae(this,$e,Ft).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ue=new WeakSet,Xi=function(){const{parentRotation:te,parentDimensions:[ae,Ee]}=this;switch(te){case 90:return[0,Ee,Ee,ae];case 180:return[ae,Ee,ae,Ee];case 270:return[ae,0,Ee,ae];default:return[0,0,ae,Ee]}},_e=new WeakSet,Nn=function(){const{ctx:te,color:ae,opacity:Ee,thickness:Le,parentScale:qe,scaleFactor:Xe}=this;te.lineWidth=Le*qe/Xe,te.lineCap="round",te.lineJoin="round",te.miterLimit=10,te.strokeStyle=`${ae}${(0,d.opacityToHex)(Ee)}`},Pe=new WeakSet,Ki=function(te,ae){this.isEditing=!0,V(this,$)||(Ie(this,$,!0),Ae(this,ee,hr).call(this),this.thickness||(this.thickness=He._defaultThickness),this.color||(this.color=He._defaultColor||s.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=He._defaultOpacity)),this.currentPath.push([te,ae]),Ie(this,q,null),Ae(this,_e,Nn).call(this),this.ctx.beginPath(),this.ctx.moveTo(te,ae),Ie(this,C,()=>{V(this,C)&&(V(this,q)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Ae(this,$e,Ft).call(this),this.ctx.lineTo(...V(this,q)),Ie(this,q,null),this.ctx.stroke()),window.requestAnimationFrame(V(this,C)))}),window.requestAnimationFrame(V(this,C))},De=new WeakSet,Ji=function(te,ae){const[Ee,Le]=this.currentPath.at(-1);te===Ee&&ae===Le||(this.currentPath.push([te,ae]),Ie(this,q,[te,ae]))},Ue=new WeakSet,Qi=function(te,ae){var at;this.ctx.closePath(),Ie(this,C,null),te=Math.min(Math.max(te,0),this.canvas.width),ae=Math.min(Math.max(ae,0),this.canvas.height);const[Ee,Le]=this.currentPath.at(-1);(te!==Ee||ae!==Le)&&this.currentPath.push([te,ae]);let qe;if(this.currentPath.length!==1)qe=(0,c.fitCurve)(this.currentPath,30,null);else{const Ze=[te,ae];qe=[[Ze,Ze.slice(),Ze.slice(),Ze]]}const Xe=Ae(at=He,K,Un).call(at,qe);this.currentPath.length=0;const Ge=()=>{this.paths.push(qe),this.bezierPath2D.push(Xe),this.rebuild()},Ke=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Ae(this,Q,Hr).call(this),Ae(this,X,Wr).call(this)),Ae(this,ze,fr).call(this))};this.addCommands({cmd:Ge,undo:Ke,mustExec:!0})},$e=new WeakSet,Ft=function(){if(this.isEmpty()){Ae(this,O,Yr).call(this);return}Ae(this,_e,Nn).call(this);const{canvas:te,ctx:ae}=this;ae.setTransform(1,0,0,1,0,0),ae.clearRect(0,0,te.width,te.height),Ae(this,O,Yr).call(this);for(const Ee of this.bezierPath2D)ae.stroke(Ee)},L=new WeakSet,$n=function(te){Ae(this,Ue,Qi).call(this,te.offsetX,te.offsetY),this.canvas.removeEventListener("pointerleave",V(this,R)),this.canvas.removeEventListener("pointermove",V(this,B)),this.addToAnnotationStorage()},Q=new WeakSet,Hr=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",He._l10nPromise.get("editor_ink_canvas_aria_label").then(te=>{var ae;return(ae=this.canvas)==null?void 0:ae.setAttribute("aria-label",te)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},X=new WeakSet,Wr=function(){Ie(this,Y,new ResizeObserver(te=>{const ae=te[0].contentRect;ae.width&&ae.height&&this.setDimensions(ae.width,ae.height)})),V(this,Y).observe(this.div)},ee=new WeakSet,hr=function(){if(!V(this,$))return;const[te,ae]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*te),this.canvas.height=Math.ceil(this.height*ae),Ae(this,O,Yr).call(this)},ne=new WeakSet,Bn=function(te,ae){const Ee=Ae(this,Fe,Vr).call(this),Le=(te-Ee)/V(this,j),qe=(ae-Ee)/V(this,b);this.scaleFactor=Math.min(Le,qe)},O=new WeakSet,Yr=function(){const te=Ae(this,Fe,Vr).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+te,this.translationY*this.scaleFactor+te)},K=new WeakSet,Un=function(te){const ae=new Path2D;for(let Ee=0,Le=te.length;Ee<Le;Ee++){const[qe,Xe,Ge,Ke]=te[Ee];Ee===0&&ae.moveTo(...qe),ae.bezierCurveTo(Xe[0],Xe[1],Ge[0],Ge[1],Ke[0],Ke[1])}return ae},ce=new WeakSet,ea=function(te,ae,Ee,Le){const Xe=[],Ge=this.thickness/2;let Ke,at;for(const Ze of this.paths){Ke=[],at=[];for(let dt=0,Qe=Ze.length;dt<Qe;dt++){const[nt,tt,mt,bt]=Ze[dt],yt=te*(nt[0]+ae)+Ge,St=Le-te*(nt[1]+Ee)-Ge,ft=te*(tt[0]+ae)+Ge,pt=Le-te*(tt[1]+Ee)-Ge,Tt=te*(mt[0]+ae)+Ge,Mt=Le-te*(mt[1]+Ee)-Ge,Yt=te*(bt[0]+ae)+Ge,rr=Le-te*(bt[1]+Ee)-Ge;dt===0&&(Ke.push(yt,St),at.push(yt,St)),Ke.push(ft,pt,Tt,Mt,Yt,rr),Ae(this,me,ta).call(this,yt,St,ft,pt,Tt,Mt,Yt,rr,4,at)}Xe.push({bezier:Ke,points:at})}return Xe},me=new WeakSet,ta=function(te,ae,Ee,Le,qe,Xe,Ge,Ke,at,Ze){if(Ae(this,Te,ra).call(this,te,ae,Ee,Le,qe,Xe,Ge,Ke)){Ze.push(Ge,Ke);return}for(let dt=1;dt<at-1;dt++){const Qe=dt/at,nt=1-Qe;let tt=Qe*te+nt*Ee,mt=Qe*ae+nt*Le,bt=Qe*Ee+nt*qe,yt=Qe*Le+nt*Xe;const St=Qe*qe+nt*Ge,ft=Qe*Xe+nt*Ke;tt=Qe*tt+nt*bt,mt=Qe*mt+nt*yt,bt=Qe*bt+nt*St,yt=Qe*yt+nt*ft,tt=Qe*tt+nt*bt,mt=Qe*mt+nt*yt,Ze.push(tt,mt)}Ze.push(Ge,Ke)},Te=new WeakSet,ra=function(te,ae,Ee,Le,qe,Xe,Ge,Ke){const Ze=(3*Ee-2*te-Ge)**2,dt=(3*Le-2*ae-Ke)**2,Qe=(3*qe-te-2*Ge)**2,nt=(3*Xe-ae-2*Ke)**2;return Math.max(Ze,Qe)+Math.max(dt,nt)<=10},Ce=new WeakSet,zn=function(){let te=1/0,ae=-1/0,Ee=1/0,Le=-1/0;for(const qe of this.paths)for(const[Xe,Ge,Ke,at]of qe){const Ze=i.Util.bezierBoundingBox(...Xe,...Ge,...Ke,...at);te=Math.min(te,Ze[0]),Ee=Math.min(Ee,Ze[1]),ae=Math.max(ae,Ze[2]),Le=Math.max(Le,Ze[3])}return[te,Ee,ae,Le]},Fe=new WeakSet,Vr=function(){return V(this,E)?Math.ceil(this.thickness*this.parentScale):0},ze=new WeakSet,fr=function(te=!1){if(this.isEmpty())return;if(!V(this,E)){Ae(this,$e,Ft).call(this);return}const ae=Ae(this,Ce,zn).call(this),Ee=Ae(this,Fe,Vr).call(this);Ie(this,j,Math.max(m,ae[2]-ae[0])),Ie(this,b,Math.max(m,ae[3]-ae[1]));const Le=Math.ceil(Ee+V(this,j)*this.scaleFactor),qe=Math.ceil(Ee+V(this,b)*this.scaleFactor),[Xe,Ge]=this.parentDimensions;this.width=Le/Xe,this.height=qe/Ge,Ie(this,g,Le/qe),Ae(this,ge,jn).call(this);const Ke=this.translationX,at=this.translationY;this.translationX=-ae[0],this.translationY=-ae[1],Ae(this,ee,hr).call(this),Ae(this,$e,Ft).call(this),Ie(this,T,Le),Ie(this,w,qe),this.setDims(Le,qe);const Ze=te?Ee/this.scaleFactor/2:0;this.translate(Ke-this.translationX-Ze,at-this.translationY-Ze)},ge=new WeakSet,jn=function(){const{style:te}=this.div;V(this,g)>=1?(te.minHeight=`${m}px`,te.minWidth=`${Math.round(V(this,g)*m)}px`):(te.minWidth=`${m}px`,te.minHeight=`${Math.round(m/V(this,g))}px`)},be(He,K),fe(He,"_defaultColor",null),fe(He,"_defaultOpacity",1),fe(He,"_defaultThickness",1),fe(He,"_l10nPromise"),fe(He,"_type","ink");let y=He;t.InkEditor=y},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const i=r(31);t.fitCurve=i},e=>{function t(D,N,E){if(!Array.isArray(D))throw new TypeError("First argument should be an array");if(D.forEach(T=>{if(!Array.isArray(T)||T.some(w=>typeof w!="number")||T.length!==D[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),D=D.filter((T,w)=>w===0||!T.every((C,A)=>C===D[w-1][A])),D.length<2)return[];const $=D.length,q=j(D[1],D[0]),Y=j(D[$-2],D[$-1]);return r(D,q,Y,N,E)}function r(D,N,E,$,q){var T,w,C,A,S,F,Z,P,ie,ue,pe,_e,we;if(D.length===2)return _e=B.vectorLen(B.subtract(D[0],D[1]))/3,T=[D[0],B.addArrays(D[0],B.mulItems(N,_e)),B.addArrays(D[1],B.mulItems(E,_e)),D[1]],[T];if(w=m(D),[T,A,F]=i(D,w,w,N,E,q),A===0||A<$)return[T];if(A<$*$)for(C=w,S=A,Z=F,we=0;we<20;we++){if(C=c(T,D,C),[T,A,F]=i(D,w,C,N,E,q),A<$)return[T];if(F===Z){let Pe=A/S;if(Pe>.9999&&Pe<1.0001)break}S=A,Z=F}return pe=[],P=B.subtract(D[F-1],D[F+1]),P.every(Pe=>Pe===0)&&(P=B.subtract(D[F-1],D[F]),[P[0],P[1]]=[-P[1],P[0]]),ie=B.normalize(P),ue=B.mulItems(ie,-1),pe=pe.concat(r(D.slice(0,F+1),N,ie,$,q)),pe=pe.concat(r(D.slice(F),ue,E,$,q)),pe}function i(D,N,E,$,q,Y){var T,w,C;return T=s(D,E,$,q),[w,C]=y(D,T,N),Y&&Y({bez:T,points:D,params:N,maxErr:w,maxPoint:C}),[T,w,C]}function s(D,N,E,$){var q,Y,T,w,C,A,S,F,Z,P,ie,ue,pe,_e,we,Pe,Se,De=D[0],Ne=D[D.length-1];for(q=[De,null,null,Ne],Y=B.zeros_Xx2x2(N.length),pe=0,_e=N.length;pe<_e;pe++)Pe=N[pe],Se=1-Pe,T=Y[pe],T[0]=B.mulItems(E,3*Pe*(Se*Se)),T[1]=B.mulItems($,3*Se*(Pe*Pe));for(w=[[0,0],[0,0]],C=[0,0],pe=0,_e=D.length;pe<_e;pe++)Pe=N[pe],T=Y[pe],w[0][0]+=B.dot(T[0],T[0]),w[0][1]+=B.dot(T[0],T[1]),w[1][0]+=B.dot(T[0],T[1]),w[1][1]+=B.dot(T[1],T[1]),we=B.subtract(D[pe],R.q([De,De,Ne,Ne],Pe)),C[0]+=B.dot(T[0],we),C[1]+=B.dot(T[1],we);return A=w[0][0]*w[1][1]-w[1][0]*w[0][1],S=w[0][0]*C[1]-w[1][0]*C[0],F=C[0]*w[1][1]-C[1]*w[0][1],Z=A===0?0:F/A,P=A===0?0:S/A,ue=B.vectorLen(B.subtract(De,Ne)),ie=1e-6*ue,Z<ie||P<ie?(q[1]=B.addArrays(De,B.mulItems(E,ue/3)),q[2]=B.addArrays(Ne,B.mulItems($,ue/3))):(q[1]=B.addArrays(De,B.mulItems(E,Z)),q[2]=B.addArrays(Ne,B.mulItems($,P))),q}function c(D,N,E){return E.map(($,q)=>d(D,N[q],$))}function d(D,N,E){var $=B.subtract(R.q(D,E),N),q=R.qprime(D,E),Y=B.mulMatrix($,q),T=B.sum(B.squareItems(q))+2*B.mulMatrix($,R.qprimeprime(D,E));return T===0?E:E-Y/T}function m(D){var N=[],E,$,q;return D.forEach((Y,T)=>{E=T?$+B.vectorLen(B.subtract(Y,q)):0,N.push(E),$=E,q=Y}),N=N.map(Y=>Y/$),N}function y(D,N,E){var $,q,Y,T,w,C,A,S;q=0,Y=Math.floor(D.length/2);const F=g(N,10);for(w=0,C=D.length;w<C;w++)A=D[w],S=b(N,E[w],F,10),T=B.subtract(R.q(N,S),A),$=T[0]*T[0]+T[1]*T[1],$>q&&(q=$,Y=w);return[q,Y]}var g=function(D,N){for(var E,$=[0],q=D[0],Y=0,T=1;T<=N;T++)E=R.q(D,T/N),Y+=B.vectorLen(B.subtract(E,q)),$.push(Y),q=E;return $=$.map(w=>w/Y),$};function b(D,N,E,$){if(N<0)return 0;if(N>1)return 1;for(var q,Y,T,w,C,A=1;A<=$;A++)if(N<=E[A]){w=(A-1)/$,T=A/$,Y=E[A-1],q=E[A],C=(N-Y)/(q-Y)*(T-w)+w;break}return C}function j(D,N){return B.normalize(B.subtract(D,N))}class B{static zeros_Xx2x2(N){for(var E=[];N--;)E.push([0,0]);return E}static mulItems(N,E){return N.map($=>$*E)}static mulMatrix(N,E){return N.reduce(($,q,Y)=>$+q*E[Y],0)}static subtract(N,E){return N.map(($,q)=>$-E[q])}static addArrays(N,E){return N.map(($,q)=>$+E[q])}static addItems(N,E){return N.map($=>$+E)}static sum(N){return N.reduce((E,$)=>E+$)}static dot(N,E){return B.mulMatrix(N,E)}static vectorLen(N){return Math.hypot(...N)}static divItems(N,E){return N.map($=>$/E)}static squareItems(N){return N.map(E=>E*E)}static normalize(N){return this.divItems(N,this.vectorLen(N))}}class R{static q(N,E){var $=1-E,q=B.mulItems(N[0],$*$*$),Y=B.mulItems(N[1],3*$*$*E),T=B.mulItems(N[2],3*$*E*E),w=B.mulItems(N[3],E*E*E);return B.addArrays(B.addArrays(q,Y),B.addArrays(T,w))}static qprime(N,E){var $=1-E,q=B.mulItems(B.subtract(N[1],N[0]),3*$*$),Y=B.mulItems(B.subtract(N[2],N[1]),6*$*E),T=B.mulItems(B.subtract(N[3],N[2]),3*E*E);return B.addArrays(B.addArrays(q,Y),T)}static qprimeprime(N,E){return B.addArrays(B.mulItems(B.addArrays(B.subtract(N[2],B.mulItems(N[1],2)),N[0]),6*(1-E)),B.mulItems(B.addArrays(B.subtract(N[3],B.mulItems(N[2],2)),N[1]),6*E))}}e.exports=t,e.exports.fitCubic=r,e.exports.createTangent=j},(e,t,r)=>{var $e,tr,L,na,z,Hn,se,Wn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var i=r(1),s=r(6),c=r(3),d=r(33),m=r(34);const y=1e3,g=9,b=new WeakSet;function j(ne){return{width:ne[2]-ne[0],height:ne[3]-ne[1]}}class B{static create(k){switch(k.data.annotationType){case i.AnnotationType.LINK:return new D(k);case i.AnnotationType.TEXT:return new N(k);case i.AnnotationType.WIDGET:switch(k.data.fieldType){case"Tx":return new $(k);case"Btn":return k.data.radioButton?new Y(k):k.data.checkBox?new q(k):new T(k);case"Ch":return new w(k)}return new E(k);case i.AnnotationType.POPUP:return new C(k);case i.AnnotationType.FREETEXT:return new S(k);case i.AnnotationType.LINE:return new F(k);case i.AnnotationType.SQUARE:return new Z(k);case i.AnnotationType.CIRCLE:return new P(k);case i.AnnotationType.POLYLINE:return new ie(k);case i.AnnotationType.CARET:return new pe(k);case i.AnnotationType.INK:return new _e(k);case i.AnnotationType.POLYGON:return new ue(k);case i.AnnotationType.HIGHLIGHT:return new we(k);case i.AnnotationType.UNDERLINE:return new Pe(k);case i.AnnotationType.SQUIGGLY:return new Se(k);case i.AnnotationType.STRIKEOUT:return new De(k);case i.AnnotationType.STAMP:return new Ne(k);case i.AnnotationType.FILEATTACHMENT:return new Ue(k);default:return new R(k)}}}class R{constructor(k,{isRenderable:O=!1,ignoreBorder:W=!1,createQuadrilaterals:K=!1}={}){this.isRenderable=O,this.data=k.data,this.layer=k.layer,this.page=k.page,this.viewport=k.viewport,this.linkService=k.linkService,this.downloadManager=k.downloadManager,this.imageResourcesPath=k.imageResourcesPath,this.renderForms=k.renderForms,this.svgFactory=k.svgFactory,this.annotationStorage=k.annotationStorage,this.enableScripting=k.enableScripting,this.hasJSActions=k.hasJSActions,this._fieldObjects=k.fieldObjects,O&&(this.container=this._createContainer(W)),K&&(this.quadrilaterals=this._createQuadrilaterals(W))}_createContainer(k=!1){const{data:O,page:W,viewport:K}=this,G=document.createElement("section");G.setAttribute("data-annotation-id",O.id),O.noRotate&&G.classList.add("norotate");const{pageWidth:ce,pageHeight:ye,pageX:me,pageY:ke}=K.rawDims,{width:Te,height:xe}=j(O.rect),Ce=i.Util.normalizeRect([O.rect[0],W.view[3]-O.rect[1]+W.view[1],O.rect[2],W.view[3]-O.rect[3]+W.view[1]]);if(!k&&O.borderStyle.width>0){G.style.borderWidth=`${O.borderStyle.width}px`;const Fe=O.borderStyle.horizontalCornerRadius,Ve=O.borderStyle.verticalCornerRadius;if(Fe>0||Ve>0){const U=`calc(${Fe}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;G.style.borderRadius=U}else if(this instanceof Y){const U=`calc(${Te}px * var(--scale-factor)) / calc(${xe}px * var(--scale-factor))`;G.style.borderRadius=U}switch(O.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:G.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:G.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:G.style.borderBottomStyle="solid";break}const ze=O.borderColor||null;ze?G.style.borderColor=i.Util.makeHexColor(ze[0]|0,ze[1]|0,ze[2]|0):G.style.borderWidth=0}G.style.left=`${100*(Ce[0]-me)/ce}%`,G.style.top=`${100*(Ce[1]-ke)/ye}%`;const{rotation:Oe}=O;return O.hasOwnCanvas||Oe===0?(G.style.width=`${100*Te/ce}%`,G.style.height=`${100*xe/ye}%`):this.setRotation(Oe,G),G}setRotation(k,O=this.container){const{pageWidth:W,pageHeight:K}=this.viewport.rawDims,{width:G,height:ce}=j(this.data.rect);let ye,me;k%180===0?(ye=100*G/W,me=100*ce/K):(ye=100*ce/W,me=100*G/K),O.style.width=`${ye}%`,O.style.height=`${me}%`,O.setAttribute("data-main-rotation",(360-k)%360)}get _commonActions(){const k=(O,W,K)=>{const G=K.detail[O];K.target.style[W]=d.ColorConverters[`${G[0]}_HTML`](G.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:O=>{const W=O.detail.display%2===1;this.container.style.visibility=W?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:W,print:O.detail.display===0||O.detail.display===3})},print:O=>{this.annotationStorage.setValue(this.data.id,{print:O.detail.print})},hidden:O=>{this.container.style.visibility=O.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:O.detail.hidden})},focus:O=>{setTimeout(()=>O.target.focus({preventScroll:!1}),0)},userName:O=>{O.target.title=O.detail.userName},readonly:O=>{O.detail.readonly?O.target.setAttribute("readonly",""):O.target.removeAttribute("readonly")},required:O=>{this._setRequired(O.target,O.detail.required)},bgColor:O=>{k("bgColor","backgroundColor",O)},fillColor:O=>{k("fillColor","backgroundColor",O)},fgColor:O=>{k("fgColor","color",O)},textColor:O=>{k("textColor","color",O)},borderColor:O=>{k("borderColor","borderColor",O)},strokeColor:O=>{k("strokeColor","borderColor",O)},rotation:O=>{const W=O.detail.rotation;this.setRotation(W),this.annotationStorage.setValue(this.data.id,{rotation:W})}})}_dispatchEventFromSandbox(k,O){const W=this._commonActions;for(const K of Object.keys(O.detail)){const G=k[K]||W[K];G==null||G(O)}}_setDefaultPropertiesFromJS(k){if(!this.enableScripting)return;const O=this.annotationStorage.getRawValue(this.data.id);if(!O)return;const W=this._commonActions;for(const[K,G]of Object.entries(O)){const ce=W[K];if(ce){const ye={detail:{[K]:G},target:k};ce(ye),delete O[K]}}}_createQuadrilaterals(k=!1){if(!this.data.quadPoints)return null;const O=[],W=this.data.rect;for(const K of this.data.quadPoints)this.data.rect=[K[2].x,K[2].y,K[1].x,K[1].y],O.push(this._createContainer(k));return this.data.rect=W,O}_createPopup(k,O){let W=this.container;this.quadrilaterals&&(k||(k=this.quadrilaterals),W=this.quadrilaterals[0]),k||(k=document.createElement("div"),k.classList.add("popupTriggerArea"),W.append(k));const G=new A({container:W,trigger:k,color:O.color,titleObj:O.titleObj,modificationDate:O.modificationDate,contentsObj:O.contentsObj,richText:O.richText,hideWrapper:!0}).render();G.style.left="100%",W.append(G)}_renderQuadrilaterals(k){for(const O of this.quadrilaterals)O.classList.add(k);return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(k,O=null){const W=[];if(this._fieldObjects){const K=this._fieldObjects[k];if(K)for(const{page:G,id:ce,exportValues:ye}of K){if(G===-1||ce===O)continue;const me=typeof ye=="string"?ye:null,ke=document.querySelector(`[data-element-id="${ce}"]`);if(ke&&!b.has(ke)){(0,i.warn)(`_getElementsByName - element not allowed: ${ce}`);continue}W.push({id:ce,exportValue:me,domElement:ke})}return W}for(const K of document.getElementsByName(k)){const{exportValue:G}=K,ce=K.getAttribute("data-element-id");ce!==O&&b.has(K)&&W.push({id:ce,exportValue:G,domElement:K})}return W}}class D extends R{constructor(O,W=null){super(O,{isRenderable:!0,ignoreBorder:!!(W!=null&&W.ignoreBorder),createQuadrilaterals:!0});be(this,$e);be(this,L);this.isTooltipOnly=O.data.isTooltipOnly}render(){const{data:O,linkService:W}=this,K=document.createElement("a");K.setAttribute("data-element-id",O.id);let G=!1;return O.url?(W.addLinkAttributes(K,O.url,O.newWindow),G=!0):O.action?(this._bindNamedAction(K,O.action),G=!0):O.attachment?(this._bindAttachment(K,O.attachment),G=!0):O.setOCGState?(Ae(this,L,na).call(this,K,O.setOCGState),G=!0):O.dest?(this._bindLink(K,O.dest),G=!0):(O.actions&&(O.actions.Action||O.actions["Mouse Up"]||O.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(K,O),G=!0),O.resetForm?(this._bindResetFormAction(K,O.resetForm),G=!0):this.isTooltipOnly&&!G&&(this._bindLink(K,""),G=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((ce,ye)=>{const me=ye===0?K:K.cloneNode();return ce.append(me),ce}):(this.container.classList.add("linkAnnotation"),G&&this.container.append(K),this.container)}_bindLink(O,W){O.href=this.linkService.getDestinationHash(W),O.onclick=()=>(W&&this.linkService.goToDestination(W),!1),(W||W==="")&&Ae(this,$e,tr).call(this)}_bindNamedAction(O,W){O.href=this.linkService.getAnchorUrl(""),O.onclick=()=>(this.linkService.executeNamedAction(W),!1),Ae(this,$e,tr).call(this)}_bindAttachment(O,W){O.href=this.linkService.getAnchorUrl(""),O.onclick=()=>{var K;return(K=this.downloadManager)==null||K.openOrDownloadData(this.container,W.content,W.filename),!1},Ae(this,$e,tr).call(this)}_bindJSAction(O,W){O.href=this.linkService.getAnchorUrl("");const K=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const G of Object.keys(W.actions)){const ce=K.get(G);ce&&(O[ce]=()=>{var ye;return(ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:W.id,name:G}}),!1})}O.onclick||(O.onclick=()=>!1),Ae(this,$e,tr).call(this)}_bindResetFormAction(O,W){const K=O.onclick;if(K||(O.href=this.linkService.getAnchorUrl("")),Ae(this,$e,tr).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),K||(O.onclick=()=>!1);return}O.onclick=()=>{var xe;K==null||K();const{fields:G,refs:ce,include:ye}=W,me=[];if(G.length!==0||ce.length!==0){const Ce=new Set(ce);for(const Oe of G){const Fe=this._fieldObjects[Oe]||[];for(const{id:Ve}of Fe)Ce.add(Ve)}for(const Oe of Object.values(this._fieldObjects))for(const Fe of Oe)Ce.has(Fe.id)===ye&&me.push(Fe)}else for(const Ce of Object.values(this._fieldObjects))me.push(...Ce);const ke=this.annotationStorage,Te=[];for(const Ce of me){const{id:Oe}=Ce;switch(Te.push(Oe),Ce.type){case"text":{const Ve=Ce.defaultValue||"";ke.setValue(Oe,{value:Ve});break}case"checkbox":case"radiobutton":{const Ve=Ce.defaultValue===Ce.exportValues;ke.setValue(Oe,{value:Ve});break}case"combobox":case"listbox":{const Ve=Ce.defaultValue||"";ke.setValue(Oe,{value:Ve});break}default:continue}const Fe=document.querySelector(`[data-element-id="${Oe}"]`);if(Fe){if(!b.has(Fe)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Oe}`);continue}}else continue;Fe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Te,name:"ResetForm"}})),!1}}}$e=new WeakSet,tr=function(){this.container.setAttribute("data-internal-link","")},L=new WeakSet,na=function(O,W){O.href=this.linkService.getAnchorUrl(""),O.onclick=()=>(this.linkService.executeSetOCGState(W),!1),Ae(this,$e,tr).call(this)};class N extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O})}render(){this.container.classList.add("textAnnotation");const k=document.createElement("img");return k.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",k.alt="[{{type}} Annotation]",k.dataset.l10nId="text_annotation_type",k.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(k,this.data),this.container.append(k),this.container}}class E extends R{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(k){var O;this.data.hasOwnCanvas&&(((O=k.previousSibling)==null?void 0:O.nodeName)==="CANVAS"&&(k.previousSibling.hidden=!0),k.hidden=!1)}_getKeyModifier(k){const{isWin:O,isMac:W}=i.FeatureTest.platform;return O&&k.ctrlKey||W&&k.metaKey}_setEventListener(k,O,W,K){O.includes("mouse")?k.addEventListener(O,G=>{var ce;(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:K(G),shift:G.shiftKey,modifier:this._getKeyModifier(G)}})}):k.addEventListener(O,G=>{var ce;(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:K(G)}})})}_setEventListeners(k,O,W){var K;for(const[G,ce]of O)(ce==="Action"||(K=this.data.actions)!=null&&K[ce])&&this._setEventListener(k,G,ce,W)}_setBackgroundColor(k){const O=this.data.backgroundColor||null;k.style.backgroundColor=O===null?"transparent":i.Util.makeHexColor(O[0],O[1],O[2])}_setTextStyle(k){const O=["left","center","right"],{fontColor:W}=this.data.defaultAppearanceData,K=this.data.defaultAppearanceData.fontSize||g,G=k.style;let ce;const ye=2,me=ke=>Math.round(10*ke)/10;if(this.data.multiLine){const ke=Math.abs(this.data.rect[3]-this.data.rect[1]-ye),Te=Math.round(ke/(i.LINE_FACTOR*K))||1,xe=ke/Te;ce=Math.min(K,me(xe/i.LINE_FACTOR))}else{const ke=Math.abs(this.data.rect[3]-this.data.rect[1]-ye);ce=Math.min(K,me(ke/i.LINE_FACTOR))}G.fontSize=`calc(${ce}px * var(--scale-factor))`,G.color=i.Util.makeHexColor(W[0],W[1],W[2]),this.data.textAlignment!==null&&(G.textAlign=O[this.data.textAlignment])}_setRequired(k,O){O?k.setAttribute("required",!0):k.removeAttribute("required"),k.setAttribute("aria-required",O)}}class $ extends E{constructor(k){const O=k.renderForms||!k.data.hasAppearance&&!!k.data.fieldValue;super(k,{isRenderable:O})}setPropertyOnSiblings(k,O,W,K){const G=this.annotationStorage;for(const ce of this._getElementsByName(k.name,k.id))ce.domElement&&(ce.domElement[O]=W),G.setValue(ce.id,{[K]:W})}render(){var K;const k=this.annotationStorage,O=this.data.id;this.container.classList.add("textWidgetAnnotation");let W=null;if(this.renderForms){const G=k.getValue(O,{value:this.data.fieldValue});let ce=G.formattedValue||G.value||"";const ye=k.getValue(O,{charLimit:this.data.maxLen}).charLimit;ye&&ce.length>ye&&(ce=ce.slice(0,ye));const me={userValue:ce,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(W=document.createElement("textarea"),W.textContent=ce,this.data.doNotScroll&&(W.style.overflowY="hidden")):(W=document.createElement("input"),W.type="text",W.setAttribute("value",ce),this.data.doNotScroll&&(W.style.overflowX="hidden")),this.data.hasOwnCanvas&&(W.hidden=!0),b.add(W),W.setAttribute("data-element-id",O),W.disabled=this.data.readOnly,W.name=this.data.fieldName,W.tabIndex=y,this._setRequired(W,this.data.required),ye&&(W.maxLength=ye),W.addEventListener("input",Te=>{k.setValue(O,{value:Te.target.value}),this.setPropertyOnSiblings(W,"value",Te.target.value,"value")}),W.addEventListener("resetform",Te=>{const xe=this.data.defaultFieldValue??"";W.value=me.userValue=xe,me.formattedValue=null});let ke=Te=>{const{formattedValue:xe}=me;xe!=null&&(Te.target.value=xe),Te.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){W.addEventListener("focus",xe=>{const{target:Ce}=xe;me.userValue&&(Ce.value=me.userValue),me.lastCommittedValue=Ce.value,me.commitKey=1}),W.addEventListener("updatefromsandbox",xe=>{this.showElementAndHideCanvas(xe.target);const Ce={value(Oe){me.userValue=Oe.detail.value??"",k.setValue(O,{value:me.userValue.toString()}),Oe.target.value=me.userValue},formattedValue(Oe){const{formattedValue:Fe}=Oe.detail;me.formattedValue=Fe,Fe!=null&&Oe.target!==document.activeElement&&(Oe.target.value=Fe),k.setValue(O,{formattedValue:Fe})},selRange(Oe){Oe.target.setSelectionRange(...Oe.detail.selRange)},charLimit:Oe=>{var U;const{charLimit:Fe}=Oe.detail,{target:Ve}=Oe;if(Fe===0){Ve.removeAttribute("maxLength");return}Ve.setAttribute("maxLength",Fe);let ze=me.userValue;!ze||ze.length<=Fe||(ze=ze.slice(0,Fe),Ve.value=me.userValue=ze,k.setValue(O,{value:ze}),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:ze,willCommit:!0,commitKey:1,selStart:Ve.selectionStart,selEnd:Ve.selectionEnd}}))}};this._dispatchEventFromSandbox(Ce,xe)}),W.addEventListener("keydown",xe=>{var Fe;me.commitKey=1;let Ce=-1;if(xe.key==="Escape"?Ce=0:xe.key==="Enter"&&!this.data.multiLine?Ce=2:xe.key==="Tab"&&(me.commitKey=3),Ce===-1)return;const{value:Oe}=xe.target;me.lastCommittedValue!==Oe&&(me.lastCommittedValue=Oe,me.userValue=Oe,(Fe=this.linkService.eventBus)==null||Fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:Oe,willCommit:!0,commitKey:Ce,selStart:xe.target.selectionStart,selEnd:xe.target.selectionEnd}}))});const Te=ke;ke=null,W.addEventListener("blur",xe=>{var Oe;if(!xe.relatedTarget)return;const{value:Ce}=xe.target;me.userValue=Ce,me.lastCommittedValue!==Ce&&((Oe=this.linkService.eventBus)==null||Oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:Ce,willCommit:!0,commitKey:me.commitKey,selStart:xe.target.selectionStart,selEnd:xe.target.selectionEnd}})),Te(xe)}),(K=this.data.actions)!=null&&K.Keystroke&&W.addEventListener("beforeinput",xe=>{var Be;me.lastCommittedValue=null;const{data:Ce,target:Oe}=xe,{value:Fe,selectionStart:Ve,selectionEnd:ze}=Oe;let U=Ve,ge=ze;switch(xe.inputType){case"deleteWordBackward":{const He=Fe.substring(0,Ve).match(/\w*[^\w]*$/);He&&(U-=He[0].length);break}case"deleteWordForward":{const He=Fe.substring(Ve).match(/^[^\w]*\w*/);He&&(ge+=He[0].length);break}case"deleteContentBackward":Ve===ze&&(U-=1);break;case"deleteContentForward":Ve===ze&&(ge+=1);break}xe.preventDefault(),(Be=this.linkService.eventBus)==null||Be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:Fe,change:Ce||"",willCommit:!1,selStart:U,selEnd:ge}})}),this._setEventListeners(W,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xe=>xe.target.value)}if(ke&&W.addEventListener("blur",ke),this.data.comb){const xe=(this.data.rect[2]-this.data.rect[0])/ye;W.classList.add("comb"),W.style.letterSpacing=`calc(${xe}px * var(--scale-factor) - 1ch)`}}else W=document.createElement("div"),W.textContent=this.data.fieldValue,W.style.verticalAlign="middle",W.style.display="table-cell";return this._setTextStyle(W),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class q extends E{constructor(k){super(k,{isRenderable:k.renderForms})}render(){const k=this.annotationStorage,O=this.data,W=O.id;let K=k.getValue(W,{value:O.exportValue===O.fieldValue}).value;typeof K=="string"&&(K=K!=="Off",k.setValue(W,{value:K})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const G=document.createElement("input");return b.add(G),G.setAttribute("data-element-id",W),G.disabled=O.readOnly,this._setRequired(G,this.data.required),G.type="checkbox",G.name=O.fieldName,K&&G.setAttribute("checked",!0),G.setAttribute("exportValue",O.exportValue),G.tabIndex=y,G.addEventListener("change",ce=>{const{name:ye,checked:me}=ce.target;for(const ke of this._getElementsByName(ye,W)){const Te=me&&ke.exportValue===O.exportValue;ke.domElement&&(ke.domElement.checked=Te),k.setValue(ke.id,{value:Te})}k.setValue(W,{value:me})}),G.addEventListener("resetform",ce=>{const ye=O.defaultFieldValue||"Off";ce.target.checked=ye===O.exportValue}),this.enableScripting&&this.hasJSActions&&(G.addEventListener("updatefromsandbox",ce=>{const ye={value(me){me.target.checked=me.detail.value!=="Off",k.setValue(W,{value:me.target.checked})}};this._dispatchEventFromSandbox(ye,ce)}),this._setEventListeners(G,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ce=>ce.target.checked)),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class Y extends E{constructor(k){super(k,{isRenderable:k.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const k=this.annotationStorage,O=this.data,W=O.id;let K=k.getValue(W,{value:O.fieldValue===O.buttonValue}).value;typeof K=="string"&&(K=K!==O.buttonValue,k.setValue(W,{value:K}));const G=document.createElement("input");if(b.add(G),G.setAttribute("data-element-id",W),G.disabled=O.readOnly,this._setRequired(G,this.data.required),G.type="radio",G.name=O.fieldName,K&&G.setAttribute("checked",!0),G.tabIndex=y,G.addEventListener("change",ce=>{const{name:ye,checked:me}=ce.target;for(const ke of this._getElementsByName(ye,W))k.setValue(ke.id,{value:!1});k.setValue(W,{value:me})}),G.addEventListener("resetform",ce=>{const ye=O.defaultFieldValue;ce.target.checked=ye!=null&&ye===O.buttonValue}),this.enableScripting&&this.hasJSActions){const ce=O.buttonValue;G.addEventListener("updatefromsandbox",ye=>{const me={value:ke=>{const Te=ce===ke.detail.value;for(const xe of this._getElementsByName(ke.target.name)){const Ce=Te&&xe.id===W;xe.domElement&&(xe.domElement.checked=Ce),k.setValue(xe.id,{value:Ce})}}};this._dispatchEventFromSandbox(me,ye)}),this._setEventListeners(G,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ye=>ye.target.checked)}return this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class T extends D{constructor(k){super(k,{ignoreBorder:k.data.hasAppearance})}render(){const k=super.render();k.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(k.title=this.data.alternativeText);const O=k.lastChild;return this.enableScripting&&this.hasJSActions&&O&&(this._setDefaultPropertiesFromJS(O),O.addEventListener("updatefromsandbox",W=>{this._dispatchEventFromSandbox({},W)})),k}}class w extends E{constructor(k){super(k,{isRenderable:k.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const k=this.annotationStorage,O=this.data.id,W=k.getValue(O,{value:this.data.fieldValue}),K=document.createElement("select");b.add(K),K.setAttribute("data-element-id",O),K.disabled=this.data.readOnly,this._setRequired(K,this.data.required),K.name=this.data.fieldName,K.tabIndex=y;let G=this.data.combo&&this.data.options.length>0;this.data.combo||(K.size=this.data.options.length,this.data.multiSelect&&(K.multiple=!0)),K.addEventListener("resetform",Te=>{const xe=this.data.defaultFieldValue;for(const Ce of K.options)Ce.selected=Ce.value===xe});for(const Te of this.data.options){const xe=document.createElement("option");xe.textContent=Te.displayValue,xe.value=Te.exportValue,W.value.includes(Te.exportValue)&&(xe.setAttribute("selected",!0),G=!1),K.append(xe)}let ce=null;if(G){const Te=document.createElement("option");Te.value=" ",Te.setAttribute("hidden",!0),Te.setAttribute("selected",!0),K.prepend(Te),ce=()=>{Te.remove(),K.removeEventListener("input",ce),ce=null},K.addEventListener("input",ce)}const ye=Te=>{const xe=Te?"value":"textContent",{options:Ce,multiple:Oe}=K;return Oe?Array.prototype.filter.call(Ce,Fe=>Fe.selected).map(Fe=>Fe[xe]):Ce.selectedIndex===-1?null:Ce[Ce.selectedIndex][xe]};let me=ye(!1);const ke=Te=>{const xe=Te.target.options;return Array.prototype.map.call(xe,Ce=>({displayValue:Ce.textContent,exportValue:Ce.value}))};return this.enableScripting&&this.hasJSActions?(K.addEventListener("updatefromsandbox",Te=>{const xe={value(Ce){ce==null||ce();const Oe=Ce.detail.value,Fe=new Set(Array.isArray(Oe)?Oe:[Oe]);for(const Ve of K.options)Ve.selected=Fe.has(Ve.value);k.setValue(O,{value:ye(!0)}),me=ye(!1)},multipleSelection(Ce){K.multiple=!0},remove(Ce){const Oe=K.options,Fe=Ce.detail.remove;Oe[Fe].selected=!1,K.remove(Fe),Oe.length>0&&Array.prototype.findIndex.call(Oe,ze=>ze.selected)===-1&&(Oe[0].selected=!0),k.setValue(O,{value:ye(!0),items:ke(Ce)}),me=ye(!1)},clear(Ce){for(;K.length!==0;)K.remove(0);k.setValue(O,{value:null,items:[]}),me=ye(!1)},insert(Ce){const{index:Oe,displayValue:Fe,exportValue:Ve}=Ce.detail.insert,ze=K.children[Oe],U=document.createElement("option");U.textContent=Fe,U.value=Ve,ze?ze.before(U):K.append(U),k.setValue(O,{value:ye(!0),items:ke(Ce)}),me=ye(!1)},items(Ce){const{items:Oe}=Ce.detail;for(;K.length!==0;)K.remove(0);for(const Fe of Oe){const{displayValue:Ve,exportValue:ze}=Fe,U=document.createElement("option");U.textContent=Ve,U.value=ze,K.append(U)}K.options.length>0&&(K.options[0].selected=!0),k.setValue(O,{value:ye(!0),items:ke(Ce)}),me=ye(!1)},indices(Ce){const Oe=new Set(Ce.detail.indices);for(const Fe of Ce.target.options)Fe.selected=Oe.has(Fe.index);k.setValue(O,{value:ye(!0)}),me=ye(!1)},editable(Ce){Ce.target.disabled=!Ce.detail.editable}};this._dispatchEventFromSandbox(xe,Te)}),K.addEventListener("input",Te=>{var Ce;const xe=ye(!0);k.setValue(O,{value:xe}),Te.preventDefault(),(Ce=this.linkService.eventBus)==null||Ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O,name:"Keystroke",value:me,changeEx:xe,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(K,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Te=>Te.target.value)):K.addEventListener("input",function(Te){k.setValue(O,{value:ye(!0)})}),this.data.combo&&this._setTextStyle(K),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}const Q=class Q extends R{constructor(k){var K,G,ce;const{data:O}=k,W=!Q.IGNORE_TYPES.has(O.parentType)&&!!((K=O.titleObj)!=null&&K.str||(G=O.contentsObj)!=null&&G.str||(ce=O.richText)!=null&&ce.str);super(k,{isRenderable:W})}render(){this.container.classList.add("popupAnnotation");const k=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(k.length===0)return this.container;const O=new A({container:this.container,trigger:Array.from(k),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),W=this.page,K=i.Util.normalizeRect([this.data.parentRect[0],W.view[3]-this.data.parentRect[1]+W.view[1],this.data.parentRect[2],W.view[3]-this.data.parentRect[3]+W.view[1]]),G=K[0]+this.data.parentRect[2]-this.data.parentRect[0],ce=K[1],{pageWidth:ye,pageHeight:me,pageX:ke,pageY:Te}=this.viewport.rawDims;return this.container.style.left=`${100*(G-ke)/ye}%`,this.container.style.top=`${100*(ce-Te)/me}%`,this.container.append(O.render()),this.container}};fe(Q,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let C=Q;class A{constructor(k){this.container=k.container,this.trigger=k.trigger,this.color=k.color,this.titleObj=k.titleObj,this.modificationDate=k.modificationDate,this.contentsObj=k.contentsObj,this.richText=k.richText,this.hideWrapper=k.hideWrapper||!1,this.pinned=!1}render(){var ye,me;const O=document.createElement("div");O.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?O:this.container,this.hideElement.hidden=!0;const W=document.createElement("div");W.classList.add("popup");const K=this.color;if(K){const ke=.7*(255-K[0])+K[0],Te=.7*(255-K[1])+K[1],xe=.7*(255-K[2])+K[2];W.style.backgroundColor=i.Util.makeHexColor(ke|0,Te|0,xe|0)}const G=document.createElement("h1");G.dir=this.titleObj.dir,G.textContent=this.titleObj.str,W.append(G);const ce=s.PDFDateString.toDateObject(this.modificationDate);if(ce){const ke=document.createElement("span");ke.classList.add("popupDate"),ke.textContent="{{date}}, {{time}}",ke.dataset.l10nId="annotation_date_string",ke.dataset.l10nArgs=JSON.stringify({date:ce.toLocaleDateString(),time:ce.toLocaleTimeString()}),W.append(ke)}if((ye=this.richText)!=null&&ye.str&&(!((me=this.contentsObj)!=null&&me.str)||this.contentsObj.str===this.richText.str))m.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:W}),W.lastChild.classList.add("richText","popupContent");else{const ke=this._formatContents(this.contentsObj);W.append(ke)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ke of this.trigger)ke.addEventListener("click",this._toggle.bind(this)),ke.addEventListener("mouseover",this._show.bind(this,!1)),ke.addEventListener("mouseout",this._hide.bind(this,!1));return W.addEventListener("click",this._hide.bind(this,!0)),O.append(W),O}_formatContents({str:k,dir:O}){const W=document.createElement("p");W.classList.add("popupContent"),W.dir=O;const K=k.split(/(?:\r\n?|\n)/);for(let G=0,ce=K.length;G<ce;++G){const ye=K[G];W.append(document.createTextNode(ye)),G<ce-1&&W.append(document.createElement("br"))}return W}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(k=!1){k&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(k=!0){k&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class S extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0}),this.textContent=k.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const k=document.createElement("div");k.classList.add("annotationTextContent"),k.setAttribute("role","comment");for(const O of this.textContent){const W=document.createElement("span");W.textContent=O,k.append(W)}this.container.append(k)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class F extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const k=this.data,{width:O,height:W}=j(k.rect),K=this.svgFactory.create(O,W,!0),G=this.svgFactory.createElement("svg:line");return G.setAttribute("x1",k.rect[2]-k.lineCoordinates[0]),G.setAttribute("y1",k.rect[3]-k.lineCoordinates[1]),G.setAttribute("x2",k.rect[2]-k.lineCoordinates[2]),G.setAttribute("y2",k.rect[3]-k.lineCoordinates[3]),G.setAttribute("stroke-width",k.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),K.append(G),this.container.append(K),this._createPopup(G,k),this.container}}class Z extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const k=this.data,{width:O,height:W}=j(k.rect),K=this.svgFactory.create(O,W,!0),G=k.borderStyle.width,ce=this.svgFactory.createElement("svg:rect");return ce.setAttribute("x",G/2),ce.setAttribute("y",G/2),ce.setAttribute("width",O-G),ce.setAttribute("height",W-G),ce.setAttribute("stroke-width",G||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),K.append(ce),this.container.append(K),this._createPopup(ce,k),this.container}}class P extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const k=this.data,{width:O,height:W}=j(k.rect),K=this.svgFactory.create(O,W,!0),G=k.borderStyle.width,ce=this.svgFactory.createElement("svg:ellipse");return ce.setAttribute("cx",O/2),ce.setAttribute("cy",W/2),ce.setAttribute("rx",O/2-G/2),ce.setAttribute("ry",W/2-G/2),ce.setAttribute("stroke-width",G||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),K.append(ce),this.container.append(K),this._createPopup(ce,k),this.container}}class ie extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:O,height:W}=j(k.rect),K=this.svgFactory.create(O,W,!0);let G=[];for(const ye of k.vertices){const me=ye.x-k.rect[0],ke=k.rect[3]-ye.y;G.push(me+","+ke)}G=G.join(" ");const ce=this.svgFactory.createElement(this.svgElementName);return ce.setAttribute("points",G),ce.setAttribute("stroke-width",k.borderStyle.width||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),K.append(ce),this.container.append(K),this._createPopup(ce,k),this.container}}class ue extends ie{constructor(k){super(k),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pe extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class _e extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:O,height:W}=j(k.rect),K=this.svgFactory.create(O,W,!0);for(const G of k.inkLists){let ce=[];for(const me of G){const ke=me.x-k.rect[0],Te=k.rect[3]-me.y;ce.push(`${ke},${Te}`)}ce=ce.join(" ");const ye=this.svgFactory.createElement(this.svgElementName);ye.setAttribute("points",ce),ye.setAttribute("stroke-width",k.borderStyle.width||1),ye.setAttribute("stroke","transparent"),ye.setAttribute("fill","transparent"),this._createPopup(ye,k),K.append(ye)}return this.container.append(K),this.container}}class we extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class Pe extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class Se extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class De extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class Ne extends R{constructor(k){var W,K,G;const O=!!(k.data.hasPopup||(W=k.data.titleObj)!=null&&W.str||(K=k.data.contentsObj)!=null&&K.str||(G=k.data.richText)!=null&&G.str);super(k,{isRenderable:O,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ue extends R{constructor(k){var K;super(k,{isRenderable:!0});const{filename:O,content:W}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(O,!0),this.content=W,(K=this.linkService.eventBus)==null||K.dispatch("fileattachmentannotation",{source:this,filename:O,content:W})}render(){var O,W;this.container.classList.add("fileAttachmentAnnotation");let k;return this.data.hasAppearance?k=document.createElement("div"):(k=document.createElement("img"),k.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),k.classList.add("popupTriggerArea"),k.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((O=this.data.titleObj)!=null&&O.str||(W=this.data.contentsObj)!=null&&W.str||this.data.richText)&&this._createPopup(k,this.data),this.container.append(k),this.container}_download(){var k;(k=this.downloadManager)==null||k.openOrDownloadData(this.container,this.content,this.filename)}}const re=class re{static render(k){var me,ke;const{annotations:O,div:W,viewport:K,accessibilityManager:G}=k;(0,s.setLayerDimensions)(W,K);const ce={data:null,layer:W,page:k.page,viewport:K,linkService:k.linkService,downloadManager:k.downloadManager,imageResourcesPath:k.imageResourcesPath||"",renderForms:k.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:k.annotationStorage||new c.AnnotationStorage,enableScripting:k.enableScripting===!0,hasJSActions:k.hasJSActions,fieldObjects:k.fieldObjects};let ye=0;for(const Te of O){if(Te.noHTML)continue;if(Te.annotationType!==i.AnnotationType.POPUP){const{width:Oe,height:Fe}=j(Te.rect);if(Oe<=0||Fe<=0)continue}ce.data=Te;const xe=B.create(ce);if(!xe.isRenderable)continue;const Ce=xe.render();if(Te.hidden&&(Ce.style.visibility="hidden"),Array.isArray(Ce))for(const Oe of Ce)Oe.style.zIndex=ye++,Ae(me=re,z,Hn).call(me,Oe,Te.id,W,G);else Ce.style.zIndex=ye++,xe instanceof C?W.prepend(Ce):Ae(ke=re,z,Hn).call(ke,Ce,Te.id,W,G)}Ae(this,se,Wn).call(this,W,k.annotationCanvasMap)}static update(k){const{annotationCanvasMap:O,div:W,viewport:K}=k;(0,s.setLayerDimensions)(W,{rotation:K.rotation}),Ae(this,se,Wn).call(this,W,O),W.hidden=!1}};z=new WeakSet,Hn=function(k,O,W,K){const G=k.firstChild||k;G.id=`${s.AnnotationPrefix}${O}`,W.append(k),K==null||K.moveElementInDOM(W,k,G,!1)},se=new WeakSet,Wn=function(k,O){if(O){for(const[W,K]of O){const G=k.querySelector(`[data-annotation-id="${W}"]`);if(!G)continue;const{firstChild:ce}=G;ce?ce.nodeName==="CANVAS"?ce.replaceWith(K):ce.before(K):G.append(K)}O.clear()}},be(re,z),be(re,se);let je=re;t.AnnotationLayer=je},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function r(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([c,d,m,y]){return["G",1-Math.min(1,.3*c+.59*m+.11*d+y)]}static G_CMYK([c]){return["CMYK",0,0,0,1-c]}static G_RGB([c]){return["RGB",c,c,c]}static G_HTML([c]){const d=r(c);return`#${d}${d}${d}`}static RGB_G([c,d,m]){return["G",.3*c+.59*d+.11*m]}static RGB_HTML([c,d,m]){const y=r(c),g=r(d),b=r(m);return`#${y}${g}${b}`}static T_HTML(){return"#00000000"}static CMYK_RGB([c,d,m,y]){return["RGB",1-Math.min(1,c+y),1-Math.min(1,m+y),1-Math.min(1,d+y)]}static CMYK_HTML(c){const d=this.CMYK_RGB(c).slice(1);return this.RGB_HTML(d)}static RGB_CMYK([c,d,m]){const y=1-c,g=1-d,b=1-m,j=Math.min(y,g,b);return["CMYK",y,g,b,j]}}t.ColorConverters=i},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=r(19);class s{static setupStorage(d,m,y,g,b){const j=g.getValue(m,{value:null});switch(y.name){case"textarea":if(j.value!==null&&(d.textContent=j.value),b==="print")break;d.addEventListener("input",B=>{g.setValue(m,{value:B.target.value})});break;case"input":if(y.attributes.type==="radio"||y.attributes.type==="checkbox"){if(j.value===y.attributes.xfaOn?d.setAttribute("checked",!0):j.value===y.attributes.xfaOff&&d.removeAttribute("checked"),b==="print")break;d.addEventListener("change",B=>{g.setValue(m,{value:B.target.checked?B.target.getAttribute("xfaOn"):B.target.getAttribute("xfaOff")})})}else{if(j.value!==null&&d.setAttribute("value",j.value),b==="print")break;d.addEventListener("input",B=>{g.setValue(m,{value:B.target.value})})}break;case"select":if(j.value!==null)for(const B of y.children)B.attributes.value===j.value&&(B.attributes.selected=!0);d.addEventListener("input",B=>{const R=B.target.options,D=R.selectedIndex===-1?"":R[R.selectedIndex].value;g.setValue(m,{value:D})});break}}static setAttributes({html:d,element:m,storage:y=null,intent:g,linkService:b}){const{attributes:j}=m,B=d instanceof HTMLAnchorElement;j.type==="radio"&&(j.name=`${j.name}-${g}`);for(const[R,D]of Object.entries(j))if(D!=null)switch(R){case"class":D.length&&d.setAttribute(R,D.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",D);break;case"style":Object.assign(d.style,D);break;case"textContent":d.textContent=D;break;default:(!B||R!=="href"&&R!=="newWindow")&&d.setAttribute(R,D)}B&&b.addLinkAttributes(d,j.href,j.newWindow),y&&j.dataId&&this.setupStorage(d,j.dataId,m,y)}static render(d){var N;const m=d.annotationStorage,y=d.linkService,g=d.xfaHtml,b=d.intent||"display",j=document.createElement(g.name);g.attributes&&this.setAttributes({html:j,element:g,intent:b,linkService:y});const B=[[g,-1,j]],R=d.div;if(R.append(j),d.viewport){const E=`matrix(${d.viewport.transform.join(",")})`;R.style.transform=E}b!=="richText"&&R.setAttribute("class","xfaLayer xfaFont");const D=[];for(;B.length>0;){const[E,$,q]=B.at(-1);if($+1===E.children.length){B.pop();continue}const Y=E.children[++B.at(-1)[1]];if(Y===null)continue;const{name:T}=Y;if(T==="#text"){const C=document.createTextNode(Y.value);D.push(C),q.append(C);continue}let w;if((N=Y==null?void 0:Y.attributes)!=null&&N.xmlns?w=document.createElementNS(Y.attributes.xmlns,T):w=document.createElement(T),q.append(w),Y.attributes&&this.setAttributes({html:w,element:Y,storage:m,intent:b,linkService:y}),Y.children&&Y.children.length>0)B.push([Y,-1,w]);else if(Y.value){const C=document.createTextNode(Y.value);i.XfaText.shouldBuildText(T)&&D.push(C),w.append(C)}}for(const E of R.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:D}}static update(d){const m=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=m,d.div.hidden=!1}}t.XfaLayer=s},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=r(6),s=r(1),c=r(10);let d=class{constructor(){(0,s.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=d;{let N=function(w){let C=[];const A=[];for(const S of w){if(S.fn==="save"){C.push({fnId:92,fn:"group",items:[]}),A.push(C),C=C.at(-1).items;continue}S.fn==="restore"?C=A.pop():C.push(S)}return C},E=function(w){if(Number.isInteger(w))return w.toString();const C=w.toFixed(10);let A=C.length-1;if(C[A]!=="0")return C;do A--;while(C[A]==="0");return C.substring(0,C[A]==="."?A:A+1)},$=function(w){if(w[4]===0&&w[5]===0){if(w[1]===0&&w[2]===0)return w[0]===1&&w[3]===1?"":`scale(${E(w[0])} ${E(w[3])})`;if(w[0]===w[3]&&w[1]===-w[2]){const C=Math.acos(w[0])*180/Math.PI;return`rotate(${E(C)})`}}else if(w[0]===1&&w[1]===0&&w[2]===0&&w[3]===1)return`translate(${E(w[4])} ${E(w[5])})`;return`matrix(${E(w[0])} ${E(w[1])} ${E(w[2])} ${E(w[3])} ${E(w[4])} ${E(w[5])})`};const m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},y="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/1999/xlink",b=["butt","round","square"],j=["miter","round","bevel"],B=function(w,C="",A=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!A)return URL.createObjectURL(new Blob([w],{type:C}));const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F=`data:${C};base64,`;for(let Z=0,P=w.length;Z<P;Z+=3){const ie=w[Z]&255,ue=w[Z+1]&255,pe=w[Z+2]&255,_e=ie>>2,we=(ie&3)<<4|ue>>4,Pe=Z+1<P?(ue&15)<<2|pe>>6:64,Se=Z+2<P?pe&63:64;F+=S[_e]+S[we]+S[Pe]+S[Se]}return F},R=function(){const w=new Uint8Array([137,80,78,71,13,10,26,10]),C=12,A=new Int32Array(256);for(let pe=0;pe<256;pe++){let _e=pe;for(let we=0;we<8;we++)_e&1?_e=3988292384^_e>>1&2147483647:_e=_e>>1&2147483647;A[pe]=_e}function S(pe,_e,we){let Pe=-1;for(let Se=_e;Se<we;Se++){const De=(Pe^pe[Se])&255,Ne=A[De];Pe=Pe>>>8^Ne}return Pe^-1}function F(pe,_e,we,Pe){let Se=Pe;const De=_e.length;we[Se]=De>>24&255,we[Se+1]=De>>16&255,we[Se+2]=De>>8&255,we[Se+3]=De&255,Se+=4,we[Se]=pe.charCodeAt(0)&255,we[Se+1]=pe.charCodeAt(1)&255,we[Se+2]=pe.charCodeAt(2)&255,we[Se+3]=pe.charCodeAt(3)&255,Se+=4,we.set(_e,Se),Se+=_e.length;const Ne=S(we,Pe+4,Se);we[Se]=Ne>>24&255,we[Se+1]=Ne>>16&255,we[Se+2]=Ne>>8&255,we[Se+3]=Ne&255}function Z(pe,_e,we){let Pe=1,Se=0;for(let De=_e;De<we;++De)Pe=(Pe+(pe[De]&255))%65521,Se=(Se+Pe)%65521;return Se<<16|Pe}function P(pe){if(!c.isNodeJS)return ie(pe);try{let _e;parseInt(browser$1.versions.node)>=8?_e=pe:_e=Buffer.from(pe);const we=require$$5.deflateSync(_e,{level:9});return we instanceof Uint8Array?we:new Uint8Array(we)}catch(_e){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+_e)}return ie(pe)}function ie(pe){let _e=pe.length;const we=65535,Pe=Math.ceil(_e/we),Se=new Uint8Array(2+_e+Pe*5+4);let De=0;Se[De++]=120,Se[De++]=156;let Ne=0;for(;_e>we;)Se[De++]=0,Se[De++]=255,Se[De++]=255,Se[De++]=0,Se[De++]=0,Se.set(pe.subarray(Ne,Ne+we),De),De+=we,Ne+=we,_e-=we;Se[De++]=1,Se[De++]=_e&255,Se[De++]=_e>>8&255,Se[De++]=~_e&65535&255,Se[De++]=(~_e&65535)>>8&255,Se.set(pe.subarray(Ne),De),De+=pe.length-Ne;const Ue=Z(pe,0,pe.length);return Se[De++]=Ue>>24&255,Se[De++]=Ue>>16&255,Se[De++]=Ue>>8&255,Se[De++]=Ue&255,Se}function ue(pe,_e,we,Pe){const Se=pe.width,De=pe.height;let Ne,Ue,je;const $e=pe.data;switch(_e){case s.ImageKind.GRAYSCALE_1BPP:Ue=0,Ne=1,je=Se+7>>3;break;case s.ImageKind.RGB_24BPP:Ue=2,Ne=8,je=Se*3;break;case s.ImageKind.RGBA_32BPP:Ue=6,Ne=8,je=Se*4;break;default:throw new Error("invalid format")}const de=new Uint8Array((1+je)*De);let L=0,H=0;for(let re=0;re<De;++re)de[L++]=0,de.set($e.subarray(H,H+je),L),H+=je,L+=je;if(_e===s.ImageKind.GRAYSCALE_1BPP&&Pe){L=0;for(let re=0;re<De;re++){L++;for(let ne=0;ne<je;ne++)de[L++]^=255}}const Q=new Uint8Array([Se>>24&255,Se>>16&255,Se>>8&255,Se&255,De>>24&255,De>>16&255,De>>8&255,De&255,Ne,Ue,0,0,0]),z=P(de),X=w.length+C*3+Q.length+z.length,se=new Uint8Array(X);let ee=0;return se.set(w,ee),ee+=w.length,F("IHDR",Q,se,ee),ee+=C+Q.length,F("IDATA",z,se,ee),ee+=C+z.length,F("IEND",new Uint8Array(0),se,ee),B(se,"image/png",we)}return function(_e,we,Pe){const Se=_e.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:_e.kind;return ue(_e,Se,we,Pe)}}();class D{constructor(){this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(C,A){this.x=C,this.y=A}}let q=0,Y=0,T=0;t.SVGGraphics=d=class{constructor(w,C,A=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new D,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=w,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!A,this._operatorIdMapping=[];for(const S in s.OPS)this._operatorIdMapping[s.OPS[S]]=S}getObject(w,C=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):C}save(){this.transformStack.push(this.transformMatrix);const w=this.current;this.extraStack.push(w),this.current=w.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(w){this.save(),this.executeOpTree(w),this.restore()}loadDependencies(w){const C=w.fnArray,A=w.argsArray;for(let S=0,F=C.length;S<F;S++)if(C[S]===s.OPS.dependency)for(const Z of A[S]){const P=Z.startsWith("g_")?this.commonObjs:this.objs,ie=new Promise(ue=>{P.get(Z,ue)});this.current.dependencies.push(ie)}return Promise.all(this.current.dependencies)}transform(w,C,A,S,F,Z){const P=[w,C,A,S,F,Z];this.transformMatrix=s.Util.transform(this.transformMatrix,P),this.tgrp=null}getSVG(w,C){this.viewport=C;const A=this._initialize(C);return this.loadDependencies(w).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(w)),A))}convertOpList(w){const C=this._operatorIdMapping,A=w.argsArray,S=w.fnArray,F=[];for(let Z=0,P=S.length;Z<P;Z++){const ie=S[Z];F.push({fnId:ie,fn:C[ie],args:A[Z]})}return N(F)}executeOpTree(w){for(const C of w){const A=C.fn,S=C.fnId,F=C.args;switch(S|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(F);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(F[0],F[1]);break;case s.OPS.setFont:this.setFont(F);break;case s.OPS.showText:this.showText(F[0]);break;case s.OPS.showSpacedText:this.showText(F[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(F[0],F[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(F[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(F[0]);break;case s.OPS.setHScale:this.setHScale(F[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(F[0],F[1],F[2],F[3],F[4],F[5]);break;case s.OPS.setTextRise:this.setTextRise(F[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(F[0]);break;case s.OPS.setLineWidth:this.setLineWidth(F[0]);break;case s.OPS.setLineJoin:this.setLineJoin(F[0]);break;case s.OPS.setLineCap:this.setLineCap(F[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(F[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(F[0],F[1],F[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(F[0],F[1],F[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(F);break;case s.OPS.setFillColorN:this.setFillColorN(F);break;case s.OPS.shadingFill:this.shadingFill(F[0]);break;case s.OPS.setDash:this.setDash(F[0],F[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(F[0]);break;case s.OPS.setFlatness:this.setFlatness(F[0]);break;case s.OPS.setGState:this.setGState(F[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(F[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(F[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(F[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(F[0],F[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(F[0],F[1],F[2],F[3],F[4],F[5]);break;case s.OPS.constructPath:this.constructPath(F[0],F[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,s.warn)(`Unimplemented operator ${A}`);break}}}setWordSpacing(w){this.current.wordSpacing=w}setCharSpacing(w){this.current.charSpacing=w}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(w,C,A,S,F,Z){const P=this.current;P.textMatrix=P.lineMatrix=[w,C,A,S,F,Z],P.textMatrixScale=Math.hypot(w,C),P.x=P.lineX=0,P.y=P.lineY=0,P.xcoords=[],P.ycoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${E(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",E(-P.y)),P.txtElement=this.svgFactory.createElement("svg:text"),P.txtElement.append(P.tspan)}beginText(){const w=this.current;w.x=w.lineX=0,w.y=w.lineY=0,w.textMatrix=s.IDENTITY_MATRIX,w.lineMatrix=s.IDENTITY_MATRIX,w.textMatrixScale=1,w.tspan=this.svgFactory.createElement("svg:tspan"),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtgrp=this.svgFactory.createElement("svg:g"),w.xcoords=[],w.ycoords=[]}moveText(w,C){const A=this.current;A.x=A.lineX+=w,A.y=A.lineY+=C,A.xcoords=[],A.ycoords=[],A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${E(A.fontSize)}px`),A.tspan.setAttributeNS(null,"y",E(-A.y))}showText(w){const C=this.current,A=C.font,S=C.fontSize;if(S===0)return;const F=C.fontSizeScale,Z=C.charSpacing,P=C.wordSpacing,ie=C.fontDirection,ue=C.textHScale*ie,pe=A.vertical,_e=pe?1:-1,we=A.defaultVMetrics,Pe=S*C.fontMatrix[0];let Se=0;for(const Ue of w){if(Ue===null){Se+=ie*P;continue}else if(typeof Ue=="number"){Se+=_e*Ue*S/1e3;continue}const je=(Ue.isSpace?P:0)+Z,$e=Ue.fontChar;let de,L,H=Ue.width;if(pe){let z;const X=Ue.vmetric||we;z=Ue.vmetric?X[1]:H*.5,z=-z*Pe;const se=X[2]*Pe;H=X?-X[0]:H,de=z/F,L=(Se+se)/F}else de=Se/F,L=0;(Ue.isInFont||A.missingFile)&&(C.xcoords.push(C.x+de),pe&&C.ycoords.push(-C.y+L),C.tspan.textContent+=$e);let Q;pe?Q=H*Pe-je*ie:Q=H*Pe+je*ie,Se+=Q}C.tspan.setAttributeNS(null,"x",C.xcoords.map(E).join(" ")),pe?C.tspan.setAttributeNS(null,"y",C.ycoords.map(E).join(" ")):C.tspan.setAttributeNS(null,"y",E(-C.y)),pe?C.y-=Se:C.x+=Se*ue,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${E(C.fontSize)}px`),C.fontStyle!==m.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==m.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);const De=C.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(De===s.TextRenderingMode.FILL||De===s.TextRenderingMode.FILL_STROKE?(C.fillColor!==m.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),De===s.TextRenderingMode.STROKE||De===s.TextRenderingMode.FILL_STROKE){const Ue=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,Ue)}let Ne=C.textMatrix;C.textRise!==0&&(Ne=Ne.slice(),Ne[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${$(Ne)} scale(${E(ue)}, -1)`),C.txtElement.setAttributeNS(y,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(w,C){this.setLeading(-C),this.moveText(w,C)}addFontStyle(w){if(!w.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const C=B(w.data,w.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${w.loadedName}"; src: url(${C}); }
`}setFont(w){const C=this.current,A=this.commonObjs.get(w[0]);let S=w[1];C.font=A,this.embedFonts&&!A.missingFile&&!this.embeddedFonts[A.loadedName]&&(this.addFontStyle(A),this.embeddedFonts[A.loadedName]=A),C.fontMatrix=A.fontMatrix||s.FONT_IDENTITY_MATRIX;let F="normal";A.black?F="900":A.bold&&(F="bold");const Z=A.italic?"italic":"normal";S<0?(S=-S,C.fontDirection=-1):C.fontDirection=1,C.fontSize=S,C.fontFamily=A.loadedName,C.fontWeight=F,C.fontStyle=Z,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",E(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){var C;const w=this.current;w.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((C=w.txtElement)!=null&&C.hasChildNodes())&&(w.element=w.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(w){w>0&&(this.current.lineWidth=w)}setLineCap(w){this.current.lineCap=b[w]}setLineJoin(w){this.current.lineJoin=j[w]}setMiterLimit(w){this.current.miterLimit=w}setStrokeAlpha(w){this.current.strokeAlpha=w}setStrokeRGBColor(w,C,A){this.current.strokeColor=s.Util.makeHexColor(w,C,A)}setFillAlpha(w){this.current.fillAlpha=w}setFillRGBColor(w,C,A){this.current.fillColor=s.Util.makeHexColor(w,C,A),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(w){this.current.strokeColor=this._makeColorN_Pattern(w)}setFillColorN(w){this.current.fillColor=this._makeColorN_Pattern(w)}shadingFill(w){const C=this.viewport.width,A=this.viewport.height,S=s.Util.inverseTransform(this.transformMatrix),F=s.Util.applyTransform([0,0],S),Z=s.Util.applyTransform([0,A],S),P=s.Util.applyTransform([C,0],S),ie=s.Util.applyTransform([C,A],S),ue=Math.min(F[0],Z[0],P[0],ie[0]),pe=Math.min(F[1],Z[1],P[1],ie[1]),_e=Math.max(F[0],Z[0],P[0],ie[0]),we=Math.max(F[1],Z[1],P[1],ie[1]),Pe=this.svgFactory.createElement("svg:rect");Pe.setAttributeNS(null,"x",ue),Pe.setAttributeNS(null,"y",pe),Pe.setAttributeNS(null,"width",_e-ue),Pe.setAttributeNS(null,"height",we-pe),Pe.setAttributeNS(null,"fill",this._makeShadingPattern(w)),this.current.fillAlpha<1&&Pe.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Pe)}_makeColorN_Pattern(w){return w[0]==="TilingPattern"?this._makeTilingPattern(w):this._makeShadingPattern(w)}_makeTilingPattern(w){const C=w[1],A=w[2],S=w[3]||s.IDENTITY_MATRIX,[F,Z,P,ie]=w[4],ue=w[5],pe=w[6],_e=w[7],we=`shading${T++}`,[Pe,Se,De,Ne]=s.Util.normalizeRect([...s.Util.applyTransform([F,Z],S),...s.Util.applyTransform([P,ie],S)]),[Ue,je]=s.Util.singularValueDecompose2dScale(S),$e=ue*Ue,de=pe*je,L=this.svgFactory.createElement("svg:pattern");L.setAttributeNS(null,"id",we),L.setAttributeNS(null,"patternUnits","userSpaceOnUse"),L.setAttributeNS(null,"width",$e),L.setAttributeNS(null,"height",de),L.setAttributeNS(null,"x",`${Pe}`),L.setAttributeNS(null,"y",`${Se}`);const H=this.svg,Q=this.transformMatrix,z=this.current.fillColor,X=this.current.strokeColor,se=this.svgFactory.create(De-Pe,Ne-Se);if(this.svg=se,this.transformMatrix=S,_e===2){const ee=s.Util.makeHexColor(...C);this.current.fillColor=ee,this.current.strokeColor=ee}return this.executeOpTree(this.convertOpList(A)),this.svg=H,this.transformMatrix=Q,this.current.fillColor=z,this.current.strokeColor=X,L.append(se.childNodes[0]),this.defs.append(L),`url(#${we})`}_makeShadingPattern(w){switch(typeof w=="string"&&(w=this.objs.get(w)),w[0]){case"RadialAxial":const C=`shading${T++}`,A=w[3];let S;switch(w[1]){case"axial":const F=w[4],Z=w[5];S=this.svgFactory.createElement("svg:linearGradient"),S.setAttributeNS(null,"id",C),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"x1",F[0]),S.setAttributeNS(null,"y1",F[1]),S.setAttributeNS(null,"x2",Z[0]),S.setAttributeNS(null,"y2",Z[1]);break;case"radial":const P=w[4],ie=w[5],ue=w[6],pe=w[7];S=this.svgFactory.createElement("svg:radialGradient"),S.setAttributeNS(null,"id",C),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"cx",ie[0]),S.setAttributeNS(null,"cy",ie[1]),S.setAttributeNS(null,"r",pe),S.setAttributeNS(null,"fx",P[0]),S.setAttributeNS(null,"fy",P[1]),S.setAttributeNS(null,"fr",ue);break;default:throw new Error(`Unknown RadialAxial type: ${w[1]}`)}for(const F of A){const Z=this.svgFactory.createElement("svg:stop");Z.setAttributeNS(null,"offset",F[0]),Z.setAttributeNS(null,"stop-color",F[1]),S.append(Z)}return this.defs.append(S),`url(#${C})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${w[0]}`)}}setDash(w,C){this.current.dashArray=w,this.current.dashPhase=C}constructPath(w,C){const A=this.current;let S=A.x,F=A.y,Z=[],P=0;for(const ie of w)switch(ie|0){case s.OPS.rectangle:S=C[P++],F=C[P++];const ue=C[P++],pe=C[P++],_e=S+ue,we=F+pe;Z.push("M",E(S),E(F),"L",E(_e),E(F),"L",E(_e),E(we),"L",E(S),E(we),"Z");break;case s.OPS.moveTo:S=C[P++],F=C[P++],Z.push("M",E(S),E(F));break;case s.OPS.lineTo:S=C[P++],F=C[P++],Z.push("L",E(S),E(F));break;case s.OPS.curveTo:S=C[P+4],F=C[P+5],Z.push("C",E(C[P]),E(C[P+1]),E(C[P+2]),E(C[P+3]),E(S),E(F)),P+=6;break;case s.OPS.curveTo2:Z.push("C",E(S),E(F),E(C[P]),E(C[P+1]),E(C[P+2]),E(C[P+3])),S=C[P+2],F=C[P+3],P+=4;break;case s.OPS.curveTo3:S=C[P+2],F=C[P+3],Z.push("C",E(C[P]),E(C[P+1]),E(S),E(F),E(S),E(F)),P+=4;break;case s.OPS.closePath:Z.push("Z");break}Z=Z.join(" "),A.path&&w.length>0&&w[0]!==s.OPS.rectangle&&w[0]!==s.OPS.moveTo?Z=A.path.getAttributeNS(null,"d")+Z:(A.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(A.path)),A.path.setAttributeNS(null,"d",Z),A.path.setAttributeNS(null,"fill","none"),A.element=A.path,A.setCurrentPoint(S,F)}endPath(){const w=this.current;if(w.path=null,!this.pendingClip)return;if(!w.element){this.pendingClip=null;return}const C=`clippath${q++}`,A=this.svgFactory.createElement("svg:clipPath");A.setAttributeNS(null,"id",C),A.setAttributeNS(null,"transform",$(this.transformMatrix));const S=w.element.cloneNode(!0);if(this.pendingClip==="evenodd"?S.setAttributeNS(null,"clip-rule","evenodd"):S.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,A.append(S),this.defs.append(A),w.activeClipUrl){w.clipGroup=null;for(const F of this.extraStack)F.clipGroup=null;A.setAttributeNS(null,"clip-path",w.activeClipUrl)}w.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(w){this.pendingClip=w}closePath(){const w=this.current;if(w.path){const C=`${w.path.getAttributeNS(null,"d")}Z`;w.path.setAttributeNS(null,"d",C)}}setLeading(w){this.current.leading=-w}setTextRise(w){this.current.textRise=w}setTextRenderingMode(w){this.current.textRenderingMode=w}setHScale(w){this.current.textHScale=w/100}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(const[C,A]of w)switch(C){case"LW":this.setLineWidth(A);break;case"LC":this.setLineCap(A);break;case"LJ":this.setLineJoin(A);break;case"ML":this.setMiterLimit(A);break;case"D":this.setDash(A[0],A[1]);break;case"RI":this.setRenderingIntent(A);break;case"FL":this.setFlatness(A);break;case"Font":this.setFont(A);break;case"CA":this.setStrokeAlpha(A);break;case"ca":this.setFillAlpha(A);break;default:(0,s.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){const w=this.current;w.element&&(w.element.setAttributeNS(null,"fill",w.fillColor),w.element.setAttributeNS(null,"fill-opacity",w.fillAlpha),this.endPath())}stroke(){const w=this.current;w.element&&(this._setStrokeAttributes(w.element),w.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(w,C=1){const A=this.current;let S=A.dashArray;C!==1&&S.length>0&&(S=S.map(function(F){return C*F})),w.setAttributeNS(null,"stroke",A.strokeColor),w.setAttributeNS(null,"stroke-opacity",A.strokeAlpha),w.setAttributeNS(null,"stroke-miterlimit",E(A.miterLimit)),w.setAttributeNS(null,"stroke-linecap",A.lineCap),w.setAttributeNS(null,"stroke-linejoin",A.lineJoin),w.setAttributeNS(null,"stroke-width",E(C*A.lineWidth)+"px"),w.setAttributeNS(null,"stroke-dasharray",S.map(E).join(" ")),w.setAttributeNS(null,"stroke-dashoffset",E(C*A.dashPhase)+"px")}eoFill(){var w;(w=this.current.element)==null||w.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var w;(w=this.current.element)==null||w.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width","1px"),w.setAttributeNS(null,"height","1px"),w.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(w)}paintImageXObject(w){const C=this.getObject(w);if(!C){(0,s.warn)(`Dependent image with object ID ${w} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(w,C){const A=w.width,S=w.height,F=R(w,this.forceDataSchema,!!C),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y","0"),Z.setAttributeNS(null,"width",E(A)),Z.setAttributeNS(null,"height",E(S)),this.current.element=Z,this.clip("nonzero");const P=this.svgFactory.createElement("svg:image");P.setAttributeNS(g,"xlink:href",F),P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y",E(-S)),P.setAttributeNS(null,"width",E(A)+"px"),P.setAttributeNS(null,"height",E(S)+"px"),P.setAttributeNS(null,"transform",`scale(${E(1/A)} ${E(-1/S)})`),C?C.append(P):this._ensureTransformGroup().append(P)}paintImageMaskXObject(w){const C=this.getObject(w.data,w);if(C.bitmap){(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const A=this.current,S=C.width,F=C.height,Z=A.fillColor;A.maskId=`mask${Y++}`;const P=this.svgFactory.createElement("svg:mask");P.setAttributeNS(null,"id",A.maskId);const ie=this.svgFactory.createElement("svg:rect");ie.setAttributeNS(null,"x","0"),ie.setAttributeNS(null,"y","0"),ie.setAttributeNS(null,"width",E(S)),ie.setAttributeNS(null,"height",E(F)),ie.setAttributeNS(null,"fill",Z),ie.setAttributeNS(null,"mask",`url(#${A.maskId})`),this.defs.append(P),this._ensureTransformGroup().append(ie),this.paintInlineImageXObject(C,P)}paintFormXObjectBegin(w,C){if(Array.isArray(w)&&w.length===6&&this.transform(w[0],w[1],w[2],w[3],w[4],w[5]),C){const A=C[2]-C[0],S=C[3]-C[1],F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",C[0]),F.setAttributeNS(null,"y",C[1]),F.setAttributeNS(null,"width",E(A)),F.setAttributeNS(null,"height",E(S)),this.current.element=F,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(w){const C=this.svgFactory.create(w.width,w.height),A=this.svgFactory.createElement("svg:defs");C.append(A),this.defs=A;const S=this.svgFactory.createElement("svg:g");return S.setAttributeNS(null,"transform",$(w.transform)),C.append(S),this.svg=S,C}_ensureClipGroup(){if(!this.current.clipGroup){const w=this.svgFactory.createElement("svg:g");w.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(w),this.current.clipGroup=w}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",$(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return m.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return y.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return g.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return b.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var t=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),s=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),m=__w_pdfjs_require__(32),y=__w_pdfjs_require__(14),g=__w_pdfjs_require__(35),b=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$2);var pdfExports=pdf$2.exports;const pdf=pdfExports;var pdf_1=pdf,pdf$1=getDefaultExportFromCjs(pdf_1),vueContextMenu={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(commonjsGlobal,function(){return function(r){function i(c){if(s[c])return s[c].exports;var d=s[c]={i:c,l:!1,exports:{}};return r[c].call(d.exports,d,d.exports,i),d.l=!0,d.exports}var s={};return i.m=r,i.c=s,i.i=function(c){return c},i.d=function(c,d,m){i.o(c,d)||Object.defineProperty(c,d,{configurable:!1,enumerable:!0,get:m})},i.n=function(c){var d=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(d,"a",d),d},i.o=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)},i.p=".",i(i.s=10)}([function(r,i,s){s(7);var c=s(5)(s(2),s(6),null,null);r.exports=c.exports},function(r,i,s){r.exports=function(c){function d(g){g.preventDefault(),typeof c=="function"&&c(g)}function m(g){g.keyCode===27&&d(g)}var y=!1;return{get isListening(){return y},start:function(g){window.addEventListener("click",d,!0),window.addEventListener("keyup",m,!0),y=!0,typeof g=="function"&&g()},stop:function(g){window.removeEventListener("click",d,!0),window.removeEventListener("keyup",m,!0),y=!1,typeof g=="function"&&g()}}}},function(r,i,s){function c(y){return y&&y.__esModule?y:{default:y}}Object.defineProperty(i,"__esModule",{value:!0});var d=s(1),m=c(d);i.default={name:"context-menu",props:{id:{type:String,default:"default-ctx"}},data:function(){var y=this;return{locals:{},align:"left",ctxTop:0,ctxLeft:0,ctxVisible:!1,bodyClickListener:(0,m.default)(function(g){var b=!!y.ctxVisible,j=b&&!y.$el.contains(g.target);if(j){if(g.which!==1)return g.preventDefault(),g.stopPropagation(),!1;y.ctxVisible=!1,y.$emit("ctx-cancel",y.locals),g.stopPropagation()}else y.ctxVisible=!1,y.$emit("ctx-close",y.locals)})}},methods:{setPositionFromEvent:function(y){var g=this;y=y||window.event;var b=document.scrollingElement||document.documentElement;return y.pageX||y.pageY?(this.ctxLeft=y.pageX,this.ctxTop=y.pageY-b.scrollTop):(y.clientX||y.clientY)&&(this.ctxLeft=y.clientX+b.scrollLeft,this.ctxTop=y.clientY+b.scrollTop),this.$nextTick(function(){var j=g.$el,B=(j.style.minHeight||j.style.height).replace("px","")||32,R=(j.style.minWidth||j.style.width).replace("px","")||32,D=j.scrollHeight||B,N=j.scrollWidth||R,E=window.innerHeight-D-25,$=window.innerWidth-N-25;g.ctxTop>E&&(g.ctxTop=E),g.ctxLeft>$&&(g.ctxLeft=$)}),y},open:function(y,g){return this.ctxVisible&&(this.ctxVisible=!1),this.ctxVisible=!0,this.$emit("ctx-open",this.locals=g||{}),this.setPositionFromEvent(y),this.$el.setAttribute("tab-index",-1),this.bodyClickListener.start(),this}},watch:{ctxVisible:function(y,g){g===!0&&y===!1&&this.bodyClickListener.stop(function(b){})}},computed:{ctxStyle:function(){return{display:this.ctxVisible?"block":"none",top:(this.ctxTop||0)+"px",left:(this.ctxLeft||0)+"px"}}}}},function(r,i,s){i=r.exports=s(4)(void 0),i.push([r.i,'.ctx{position:relative}.ctx-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;font-size:.9rem;color:#373a3c;text-align:left;list-style:none;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem;-moz-box-shadow:0 0 5px #ccc;-webkit-box-shadow:0 0 5px #ccc;box-shadow:0 0 5px #ccc}.ctx-divider{height:1px;margin:.5rem 0;overflow:hidden;background-color:#e5e5e5}.ctx-item{display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.5;color:#373a3c;text-align:inherit;white-space:nowrap;background:none;border:0;cursor:default}.ctx-item:focus,.ctx-item:hover{color:#2b2d2f;text-decoration:none;background-color:#f5f5f5;cursor:normal}.ctx-item.active,.ctx-item.active:focus,.ctx-item.active:hover{color:#fff;text-decoration:none;background-color:#0275d8;outline:0}.ctx-item.disabled,.ctx-item.disabled:focus,.ctx-item.disabled:hover{color:#818a91}.ctx-item.disabled:focus,.ctx-item.disabled:hover{text-decoration:none;cursor:not-allowed;background-color:transparent;background-image:none;filter:"progid:DXImageTransform.Microsoft.gradient(enabled = false)"}.open>.ctx-menu{display:block}.open>a{outline:0}.ctx-menu-right{right:0;left:auto}.ctx-menu-left{right:auto;left:0}.ctx-header{display:block;padding:3px 20px;font-size:.9rem;line-height:1.5;color:#818a91;white-space:nowrap}.ctx-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:990}.pull-right>.ctx-menu{right:0;left:auto}.ctx-menu-container{position:fixed;padding:0;border:1px solid #bbb;background-color:#f5f5f5;z-index:99999;box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15)}',""])},function(r,i){function s(d,m){var y=d[1]||"",g=d[3];if(!g)return y;if(m&&typeof btoa=="function"){var b=c(g),j=g.sources.map(function(B){return"/*# sourceURL="+g.sourceRoot+B+" */"});return[y].concat(j).concat([b]).join(`
`)}return[y].join(`
`)}function c(d){var m=btoa(unescape(encodeURIComponent(JSON.stringify(d)))),y="sourceMappingURL=data:application/json;charset=utf-8;base64,"+m;return"/*# "+y+" */"}r.exports=function(d){var m=[];return m.toString=function(){return this.map(function(y){var g=s(y,d);return y[2]?"@media "+y[2]+"{"+g+"}":g}).join("")},m.i=function(y,g){typeof y=="string"&&(y=[[null,y,""]]);for(var b={},j=0;j<this.length;j++){var B=this[j][0];typeof B=="number"&&(b[B]=!0)}for(j=0;j<y.length;j++){var R=y[j];typeof R[0]=="number"&&b[R[0]]||(g&&!R[2]?R[2]=g:g&&(R[2]="("+R[2]+") and ("+g+")"),m.push(R))}},m}},function(r,i){r.exports=function(s,c,d,m){var y,g=s=s||{},b=typeof s.default;b!=="object"&&b!=="function"||(y=s,g=s.default);var j=typeof g=="function"?g.options:g;if(c&&(j.render=c.render,j.staticRenderFns=c.staticRenderFns),d&&(j._scopeId=d),m){var B=j.computed||(j.computed={});Object.keys(m).forEach(function(R){var D=m[R];B[R]=function(){return D}})}return{esModule:y,exports:g,options:j}}},function(r,i){r.exports={render:function(){var s=this,c=s.$createElement,d=s._self._c||c;return d("div",{ref:"contextMenu",staticClass:"ctx-menu-container",style:s.ctxStyle,attrs:{id:s.id},on:{click:function(m){m.stopPropagation()},contextmenu:function(m){m.stopPropagation()}}},[d("div",{staticClass:"ctx open",staticStyle:{"background-color":"transparent"}},[d("ul",{staticClass:"ctx-menu",class:{"ctx-menu-right":s.align==="right","ctx-menu-left":s.align==="left"},attrs:{role:"menu"}},[s._t("default")],2)])])},staticRenderFns:[]}},function(r,i,s){var c=s(3);typeof c=="string"&&(c=[[r.i,c,""]]),c.locals&&(r.exports=c.locals),s(8)("0df30a58",c,!0)},function(r,i,s){function c(T){for(var w=0;w<T.length;w++){var C=T[w],A=B[C.id];if(A){A.refs++;for(var S=0;S<A.parts.length;S++)A.parts[S](C.parts[S]);for(;S<C.parts.length;S++)A.parts.push(m(C.parts[S]));A.parts.length>C.parts.length&&(A.parts.length=C.parts.length)}else{for(var F=[],S=0;S<C.parts.length;S++)F.push(m(C.parts[S]));B[C.id]={id:C.id,refs:1,parts:F}}}}function j(T,w){for(var C=[],A={},S=0;S<w.length;S++){var F=w[S],Z=F[0],P=F[1],ie=F[2],ue=F[3],pe={css:P,media:ie,sourceMap:ue};A[Z]?(pe.id=T+":"+A[Z].parts.length,A[Z].parts.push(pe)):(pe.id=T+":0",C.push(A[Z]={id:Z,parts:[pe]}))}return C}function d(){var T=document.createElement("style");return T.type="text/css",R.appendChild(T),T}function m(T){var w,C,A=document.querySelector('style[data-vue-ssr-id~="'+T.id+'"]'),S=A!=null;if(S&&E)return $;if(q){var F=N++;A=D||(D=d()),w=y.bind(null,A,F,!1),C=y.bind(null,A,F,!0)}else A=A||d(),w=g.bind(null,A),C=function(){A.parentNode.removeChild(A)};return S||w(T),function(Z){if(Z){if(Z.css===T.css&&Z.media===T.media&&Z.sourceMap===T.sourceMap)return;w(T=Z)}else C()}}function y(T,w,C,A){var S=C?"":A.css;if(T.styleSheet)T.styleSheet.cssText=Y(w,S);else{var F=document.createTextNode(S),Z=T.childNodes;Z[w]&&T.removeChild(Z[w]),Z.length?T.insertBefore(F,Z[w]):T.appendChild(F)}}function g(T,w){var C=w.css,A=w.media,S=w.sourceMap;if(A&&T.setAttribute("media",A),S&&(C+=`
/*# sourceURL=`+S.sources[0]+" */",C+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(S))))+" */"),T.styleSheet)T.styleSheet.cssText=C;else{for(;T.firstChild;)T.removeChild(T.firstChild);T.appendChild(document.createTextNode(C))}}var b=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!b)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var j=s(9),B={},R=b&&(document.head||document.getElementsByTagName("head")[0]),D=null,N=0,E=!1,$=function(){},q=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());r.exports=function(T,w,C){E=C;var A=j(T,w);return c(A),function(S){for(var F=[],Z=0;Z<A.length;Z++){var P=A[Z],ie=B[P.id];ie.refs--,F.push(ie)}S?(A=j(T,S),c(A)):A=[];for(var Z=0;Z<F.length;Z++){var ie=F[Z];if(ie.refs===0){for(var ue=0;ue<ie.parts.length;ue++)ie.parts[ue]();delete B[ie.id]}}}};var Y=function(){var T=[];return function(w,C){return T[w]=C,T.filter(Boolean).join(`
`)}}()},function(r,i){r.exports=function(s,c){for(var d=[],m={},y=0;y<c.length;y++){var g=c[y],b=g[0],j=g[1],B=g[2],R=g[3],D={id:s+":"+y,css:j,media:B,sourceMap:R};m[b]?m[b].parts.push(D):d.push(m[b]={id:b,parts:[D]})}return d}},function(r,i,s){var c=s(0);c.install=function(d){var m=d.component("context-menu",c);return m},window.VueContextMenu=c,r.exports=r.exports.default=c}])})})(vueContextMenu);var vueContextMenuExports=vueContextMenu.exports;const contextMenu=getDefaultExportFromCjs$1(vueContextMenuExports);var __defProp$t=Object.defineProperty,__getOwnPropDesc$t=Object.getOwnPropertyDescriptor,__defNormalProp=(e,t,r)=>t in e?__defProp$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__decorateClass$t=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$t(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$t(t,r,s),s},__publicField=(e,t,r)=>(__defNormalProp(e,typeof t!="symbol"?t+"":t,r),r),pdfDocument=null;let Viewport$1=class extends Vue{constructor(){super(...arguments);fe(this,"loaded",[]);fe(this,"wholeDocumentLoaded",!1);fe(this,"src",null);fe(this,"pageCount",0);fe(this,"rotation",[]);fe(this,"activePage",0);fe(this,"id",-1);fe(this,"pageDimensions",[]);fe(this,"$refs")}get allPagesLoaded(){return this.loaded.every(r=>r)&&this.loaded.length>0}init(){pdfDocument=getViewedDocument(),this.pageCount=(pdfDocument==null?void 0:pdfDocument.pageCount)||0,this.loaded=Array(this.pageCount).fill(null),this.id=(pdfDocument==null?void 0:pdfDocument.id)||0,this.rotation=Array((pdfDocument==null?void 0:pdfDocument.pageCount)||0).fill(0)}activated(){const r=getViewedDocument();r&&r.pageCanvases.length===0&&this.allPagesLoaded&&this.createCanvases(r)}deactivated(){const r=getViewedDocument();this.pageDimensions=[],r==null||r.pageCanvases.forEach(i=>i.dispose()),r&&(r.pageCanvases=[])}mounted(){this.init(),this.eventHub.$on("viewport:scale",this.setScale),this.eventHub.$on("viewport:refresh",r=>{this.src=r,this.refresh()}),this.eventHub.$on("shortcut:zoomIn",()=>this.setScale(1)),this.eventHub.$on("shortcut:zoomOut",()=>this.setScale(-1)),this.eventHub.$on("shortcut:delete",this.deleteSelected),this.eventHub.$on("canvas:error",this.showError),window.addEventListener("resize",this.resize),PDFdocument.initDocument=async r=>{if(this.allPagesLoaded)return;this.src=r;const i=new ArrayBuffer(r.byteLength);new Uint8Array(i).set(new Uint8Array(r));const s=await pdf$1.getDocument(i).promise;this.pageCount=s.numPages,this.loaded=Array(this.pageCount).fill(!1);const c=[];for(let d=0;d<this.pageCount;d++){const m=await s.getPage(d+1),y=m.getViewport({scale:Viewport$1.scale}),g=y.width,b=y.height,j=this.$refs.pdfCanvas[d];j.width=g,j.height=b,this.pageDimensions.push({width:g,height:b}),await this.$nextTick(),c.push(m.render({canvasContext:this.$refs.pdfCanvas[d].getContext("2d"),viewport:y}).promise.then(()=>{this.documentLoaded(!0,d)}))}await Promise.all(c),await s.destroy(),this.wholeDocumentLoaded=!0},PDFdocument.viewport=this}showError(r){this.$bvToast.toast(`${r.message}`,{variant:"danger",title:"Chyba pri pridaní objektu",autoHideDelay:1e3})}changeActivePage(r,i){i&&(this.activePage=r-1)}createCanvases(r){if(this.pageCount===0||r.pageCanvases.length>0)return;const i=[];this.pageDimensions=[];for(var s=0;s<this.pageCount;s++){const c=this.$refs.canvases[s],d=new Canvas(c,r,s),m=this.$refs.pdfCanvas[s],y={width:m.width,height:m.height};y&&(this.pageDimensions.push(y),d.setHeight(y.height),d.setWidth(y.width),d.setScale(y),d.pageIndex=s,i.push(d))}r.pageCanvases=i,r.initCanvases(),this.eventHub.$emit("tool:initCurrent")}deleteSelected(){const r=getViewedDocument();if(r!=null)for(const i of r.pageCanvases)i.deleteSelected()}moveToFront(){var s;const r=getViewedDocument(),i=r==null?void 0:r.annotations;if(i!=null)for(const c of this.getActiveObjects()){let d=i.findIndex(m=>m.object.name===c.name);(s=c.canvas)==null||s.bringToFront(c),i.push(i.splice(d,1)[0])}}moveToBack(){var s;const r=getViewedDocument(),i=r==null?void 0:r.annotations;if(i!=null)for(const c of this.getActiveObjects()){let d=i.findIndex(m=>m.object.name===c.name);(s=c.canvas)==null||s.sendToBack(c),i.unshift(i.splice(d,1)[0])}}documentLoaded(r,i){if(this.loaded[i]=r,this.loaded.every(s=>s)&&this.loaded.length>0){const s=getViewedDocument();s&&this.createCanvases(s)}}openCtxMenu(r){const i=getViewedDocument();i!=null&&i.pageCanvases.some(s=>s.canOpenCtxMenu(r))&&this.$refs.ctxMenu.open(),r.preventDefault()}getActiveObjects(){const r=getViewedDocument();var i=[];return r==null||r.pageCanvases.forEach(s=>{s.getActiveObjects().forEach(c=>i.push(c))}),i}setScale(r){Viewport$1.scale=r,this.$nextTick().then(()=>{this.resize()})}resize(){try{this.refresh().then(()=>{var s;const r=this.$refs.pages;for(let c=0;c<r.length;c++){const d=this.$refs.pages[c],m={width:d.clientWidth,height:d.clientHeight};if(m.width===0||m.height===0)return;if(d){var i=(s=getViewedDocument())==null?void 0:s.pageCanvases[c];i.setWidth(m.width),i.setHeight(m.height),i.setScale(m)}}})}catch(r){console.error(r);return}}async refresh(){this.$refs.viewport.scrollTo(0,0),this.wholeDocumentLoaded=!1;const r=new ArrayBuffer(this.src.byteLength);new Uint8Array(r).set(new Uint8Array(this.src));const i=await pdf$1.getDocument(r).promise;this.pageCount=i.numPages,this.loaded=Array(this.pageCount).fill(!1);const s=[];this.pageDimensions=[];for(let c=0;c<this.pageCount;c++){const d=await i.getPage(c+1),m=d.getViewport({scale:Viewport$1.scale}),y=m.width,g=m.height,b=this.$refs.pdfCanvas[c];b.width=y,b.height=g,this.pageDimensions.push({width:y,height:g}),await this.$nextTick(),s.push(d.render({canvasContext:this.$refs.pdfCanvas[c].getContext("2d"),viewport:m}).promise.then(()=>{this.documentLoaded(!0,c)}))}await Promise.all(s),await i.destroy(),this.wholeDocumentLoaded=!0}getPageStyle(r){return this.pageDimensions.length===this.pageCount?{width:this.pageDimensions[r].width.toString()+"px",height:this.pageDimensions[r].height.toString()+"px"}:{}}};__publicField(Viewport$1,"scale",1);Viewport$1=__decorateClass$t([Component({components:{contextMenu}})],Viewport$1);const Viewport_vue_vue_type_style_index_0_scoped_00b6fd35_lang="";var _sfc_render$u=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"viewportSpace"},[r("div",{ref:"viewport",staticClass:"viewport",style:{overflow:t.wholeDocumentLoaded?"auto":"hidden"},on:{contextmenu:t.openCtxMenu}},[r("context-menu",{ref:"ctxMenu",staticClass:"list-group ctxmenu",attrs:{id:"context-menu"}},[r("li",{staticClass:"list-group-item-action p-1",on:{click:t.deleteSelected}},[t._v(" Zmazať ")]),r("li",{staticClass:"list-group-item-action p-1",on:{click:t.moveToFront}},[t._v(" Presunúť dopredu ")]),r("li",{staticClass:"list-group-item-action p-1",on:{click:t.moveToBack}},[t._v(" Presunúť dozadu ")]),r("li",{staticClass:"list-group-item-action p-1",on:{click:function(i){return t.eventHub.$emit("shortcut:copy")}}},[t._v(" Kopírovať ")]),t.$store.state.Clipboard.object!==null?r("li",{staticClass:"list-group-item-action p-1",on:{click:function(i){return t.eventHub.$emit("shortcut:paste")}}},[t._v(" Prilepiť ")]):t._e(),r("li",{staticClass:"list-group-item-action p-1",on:{click:function(i){return t.eventHub.$emit("shortcut:cut")}}},[t._v(" Vystrihnúť ")])]),r("div",{ref:"pdf",staticClass:"pdf"},t._l(t.pageCount,function(i){return r("div",{directives:[{name:"b-visible",rawName:"v-b-visible",value:s=>t.changeActivePage(i,s),expression:"(visible) => changeActivePage(i, visible)"}],key:i,ref:"pages",refInFor:!0,staticClass:"page-wrapper",style:t.getPageStyle(i-1)},[r("canvas",{ref:"pdfCanvas",refInFor:!0,staticClass:"pdfCanvas"}),r("div",{staticClass:"pageAnnot"},[r("canvas",{ref:"canvases",refInFor:!0})])])}),0),t.wholeDocumentLoaded?t._e():r("div",{staticClass:"loading"},[r("div",[r("b-spinner",{attrs:{variant:"primary",label:"loading..."}}),r("p",[t._v("Načítavam...")])],1)])],1)])},_sfc_staticRenderFns$u=[],__component__$u=normalizeComponent(Viewport$1,_sfc_render$u,_sfc_staticRenderFns$u,!1,null,"00b6fd35",null,null);const Viewport=__component__$u.exports;var __defProp$s=Object.defineProperty,__getOwnPropDesc$s=Object.getOwnPropertyDescriptor,__decorateClass$s=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$s(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$s(t,r,s),s};let StatsEntry$1=class extends Vue{constructor(){super(...arguments);fe(this,"max");fe(this,"value");fe(this,"min");fe(this,"label");fe(this,"color");fe(this,"expanded",!1)}data(){return{expanded:!1}}};__decorateClass$s([Prop({required:!0})],StatsEntry$1.prototype,"max",2);__decorateClass$s([Prop({required:!0})],StatsEntry$1.prototype,"value",2);__decorateClass$s([Prop({required:!0})],StatsEntry$1.prototype,"min",2);__decorateClass$s([Prop({required:!0})],StatsEntry$1.prototype,"label",2);__decorateClass$s([Prop({required:!1})],StatsEntry$1.prototype,"color",2);StatsEntry$1=__decorateClass$s([Component],StatsEntry$1);const StatsEntry_vue_vue_type_style_index_0_scoped_45e3e928_lang="";var _sfc_render$t=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-card",{staticClass:"stats",style:{"background-color":t.color.hex()},attrs:{"text-variant":t.color.isLight()?"dark":"light"},on:{click:function(i){t.expanded=!t.expanded}}},[r("div",{staticClass:"d-flex flex-row justify-content-between align-items-end"},[r("h4",[t._v(t._s(t.label))]),r("h3",[t._v(t._s((t.value/t.max*100).toFixed(2))+"%")])]),r("b-progress",{staticClass:"mt-2",attrs:{max:t.max}},[r("b-progress-bar",{attrs:{value:t.value,label:`${t.value} / ${t.max}`}})],1),r("transition",{attrs:{name:"content"}},[t.expanded?t._t("default"):t._e()],2)],1)},_sfc_staticRenderFns$t=[],__component__$t=normalizeComponent(StatsEntry$1,_sfc_render$t,_sfc_staticRenderFns$t,!1,null,"45e3e928",null,null);const StatsEntry=__component__$t.exports;var Chart$1={exports:{}};//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(e){hookCallback=e}function isArray(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function isObject(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function hasOwnProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function isObjectEmpty(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(hasOwnProp(e,t))return!1;return!0}function isUndefined(e){return e===void 0}function isNumber(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function isDate(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function map(e,t){var r=[],i,s=e.length;for(i=0;i<s;++i)r.push(t(e[i],i));return r}function extend(e,t){for(var r in t)hasOwnProp(t,r)&&(e[r]=t[r]);return hasOwnProp(t,"toString")&&(e.toString=t.toString),hasOwnProp(t,"valueOf")&&(e.valueOf=t.valueOf),e}function createUTC(e,t,r,i){return createLocalOrUTC(e,t,r,i,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(e){return e._pf==null&&(e._pf=defaultParsingFlags()),e._pf}var some;Array.prototype.some?some=Array.prototype.some:some=function(e){var t=Object(this),r=t.length>>>0,i;for(i=0;i<r;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};function isValid(e){if(e._isValid==null){var t=getParsingFlags(e),r=some.call(t.parsedDateParts,function(s){return s!=null}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i}return e._isValid}function createInvalid(e){var t=createUTC(NaN);return e!=null?extend(getParsingFlags(t),e):getParsingFlags(t).userInvalidated=!0,t}var momentProperties=hooks.momentProperties=[],updateInProgress=!1;function copyConfig(e,t){var r,i,s,c=momentProperties.length;if(isUndefined(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),isUndefined(t._i)||(e._i=t._i),isUndefined(t._f)||(e._f=t._f),isUndefined(t._l)||(e._l=t._l),isUndefined(t._strict)||(e._strict=t._strict),isUndefined(t._tzm)||(e._tzm=t._tzm),isUndefined(t._isUTC)||(e._isUTC=t._isUTC),isUndefined(t._offset)||(e._offset=t._offset),isUndefined(t._pf)||(e._pf=getParsingFlags(t)),isUndefined(t._locale)||(e._locale=t._locale),c>0)for(r=0;r<c;r++)i=momentProperties[r],s=t[i],isUndefined(s)||(e[i]=s);return e}function Moment(e){copyConfig(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),updateInProgress===!1&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(e){return e instanceof Moment||e!=null&&e._isAMomentObject!=null}function warn(e){hooks.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function deprecate(e,t){var r=!0;return extend(function(){if(hooks.deprecationHandler!=null&&hooks.deprecationHandler(null,e),r){var i=[],s,c,d,m=arguments.length;for(c=0;c<m;c++){if(s="",typeof arguments[c]=="object"){s+=`
[`+c+"] ";for(d in arguments[0])hasOwnProp(arguments[0],d)&&(s+=d+": "+arguments[0][d]+", ");s=s.slice(0,-2)}else s=arguments[c];i.push(s)}warn(e+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var deprecations={};function deprecateSimple(e,t){hooks.deprecationHandler!=null&&hooks.deprecationHandler(e,t),deprecations[e]||(warn(t),deprecations[e]=!0)}hooks.suppressDeprecationWarnings=!1;hooks.deprecationHandler=null;function isFunction(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function set(e){var t,r;for(r in e)hasOwnProp(e,r)&&(t=e[r],isFunction(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(e,t){var r=extend({},e),i;for(i in t)hasOwnProp(t,i)&&(isObject(e[i])&&isObject(t[i])?(r[i]={},extend(r[i],e[i]),extend(r[i],t[i])):t[i]!=null?r[i]=t[i]:delete r[i]);for(i in e)hasOwnProp(e,i)&&!hasOwnProp(t,i)&&isObject(e[i])&&(r[i]=extend({},r[i]));return r}function Locale(e){e!=null&&this.set(e)}var keys;Object.keys?keys=Object.keys:keys=function(e){var t,r=[];for(t in e)hasOwnProp(e,t)&&r.push(t);return r};var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(e,t,r){var i=this._calendar[e]||this._calendar.sameElse;return isFunction(i)?i.call(t,r):i}function zeroFill(e,t,r){var i=""+Math.abs(e),s=t-i.length,c=e>=0;return(c?r?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(e,t,r,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),e&&(formatTokenFunctions[e]=s),t&&(formatTokenFunctions[t[0]]=function(){return zeroFill(s.apply(this,arguments),t[1],t[2])}),r&&(formatTokenFunctions[r]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function removeFormattingTokens(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function makeFormatFunction(e){var t=e.match(formattingTokens),r,i;for(r=0,i=t.length;r<i;r++)formatTokenFunctions[t[r]]?t[r]=formatTokenFunctions[t[r]]:t[r]=removeFormattingTokens(t[r]);return function(s){var c="",d;for(d=0;d<i;d++)c+=isFunction(t[d])?t[d].call(s,e):t[d];return c}}function formatMoment(e,t){return e.isValid()?(t=expandFormat(t,e.localeData()),formatFunctions[t]=formatFunctions[t]||makeFormatFunction(t),formatFunctions[t](e)):e.localeData().invalidDate()}function expandFormat(e,t){var r=5;function i(s){return t.longDateFormat(s)||s}for(localFormattingTokens.lastIndex=0;r>=0&&localFormattingTokens.test(e);)e=e.replace(localFormattingTokens,i),localFormattingTokens.lastIndex=0,r-=1;return e}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(formattingTokens).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[e])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(e){return this._ordinal.replace("%d",e)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(e,t,r,i){var s=this._relativeTime[r];return isFunction(s)?s(e,t,r,i):s.replace(/%d/i,e)}function pastFuture(e,t){var r=this._relativeTime[e>0?"future":"past"];return isFunction(r)?r(t):r.replace(/%s/i,t)}var aliases={};function addUnitAlias(e,t){var r=e.toLowerCase();aliases[r]=aliases[r+"s"]=aliases[t]=e}function normalizeUnits(e){return typeof e=="string"?aliases[e]||aliases[e.toLowerCase()]:void 0}function normalizeObjectUnits(e){var t={},r,i;for(i in e)hasOwnProp(e,i)&&(r=normalizeUnits(i),r&&(t[r]=e[i]));return t}var priorities={};function addUnitPriority(e,t){priorities[e]=t}function getPrioritizedUnits(e){var t=[],r;for(r in e)hasOwnProp(e,r)&&t.push({unit:r,priority:priorities[r]});return t.sort(function(i,s){return i.priority-s.priority}),t}function isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}function absFloor(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function toInt(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=absFloor(t)),r}function makeGetSet(e,t){return function(r){return r!=null?(set$1(this,e,r),hooks.updateOffset(this,t),this):get(this,e)}}function get(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function set$1(e,t,r){e.isValid()&&!isNaN(r)&&(t==="FullYear"&&isLeapYear(e.year())&&e.month()===1&&e.date()===29?(r=toInt(r),e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),daysInMonth(r,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function stringGet(e){return e=normalizeUnits(e),isFunction(this[e])?this[e]():this}function stringSet(e,t){if(typeof e=="object"){e=normalizeObjectUnits(e);var r=getPrioritizedUnits(e),i,s=r.length;for(i=0;i<s;i++)this[r[i].unit](e[r[i].unit])}else if(e=normalizeUnits(e),isFunction(this[e]))return this[e](t);return this}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,regexes;regexes={};function addRegexToken(e,t,r){regexes[e]=isFunction(t)?t:function(i,s){return i&&r?r:t}}function getParseRegexForToken(e,t){return hasOwnProp(regexes,e)?regexes[e](t._strict,t._locale):new RegExp(unescapeFormat(e))}function unescapeFormat(e){return regexEscape(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,i,s,c){return r||i||s||c}))}function regexEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(e,t){var r,i=t,s;for(typeof e=="string"&&(e=[e]),isNumber(t)&&(i=function(c,d){d[t]=toInt(c)}),s=e.length,r=0;r<s;r++)tokens[e[r]]=i}function addWeekParseToken(e,t){addParseToken(e,function(r,i,s,c){s._w=s._w||{},t(r,s._w,s,c)})}function addTimeToArrayFromToken(e,t,r){t!=null&&hasOwnProp(tokens,e)&&tokens[e](t,r._a,r,e)}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;function mod(e,t){return(e%t+t)%t}var indexOf;Array.prototype.indexOf?indexOf=Array.prototype.indexOf:indexOf=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function daysInMonth(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=mod(t,12);return e+=(t-r)/12,r===1?isLeapYear(e)?29:28:31-r%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});addFormatToken("MMMM",0,0,function(e){return this.localeData().months(this,e)});addUnitAlias("month","M");addUnitPriority("month",8);addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(e,t){return t.monthsShortRegex(e)});addRegexToken("MMMM",function(e,t){return t.monthsRegex(e)});addParseToken(["M","MM"],function(e,t){t[MONTH]=toInt(e)-1});addParseToken(["MMM","MMMM"],function(e,t,r,i){var s=r._locale.monthsParse(e,i,r._strict);s!=null?t[MONTH]=s:getParsingFlags(r).invalidMonth=e});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(e,t){return e?isArray(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(t)?"format":"standalone"][e.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(e,t){return e?isArray(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(t)?"format":"standalone"][e.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(e,t,r){var i,s,c,d=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)c=createUTC([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(c,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(c,"").toLocaleLowerCase();return r?t==="MMM"?(s=indexOf.call(this._shortMonthsParse,d),s!==-1?s:null):(s=indexOf.call(this._longMonthsParse,d),s!==-1?s:null):t==="MMM"?(s=indexOf.call(this._shortMonthsParse,d),s!==-1?s:(s=indexOf.call(this._longMonthsParse,d),s!==-1?s:null)):(s=indexOf.call(this._longMonthsParse,d),s!==-1?s:(s=indexOf.call(this._shortMonthsParse,d),s!==-1?s:null))}function localeMonthsParse(e,t,r){var i,s,c;if(this._monthsParseExact)return handleStrictParse.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=createUTC([2e3,i]),r&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!r&&!this._monthsParse[i]&&(c="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(c.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(r&&t==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!r&&this._monthsParse[i].test(e))return i}}function setMonth(e,t){var r;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=toInt(t);else if(t=e.localeData().monthsParse(t),!isNumber(t))return e}return r=Math.min(e.date(),daysInMonth(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function getSetMonth(e){return e!=null?(setMonth(this,e),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function e(d,m){return m.length-d.length}var t=[],r=[],i=[],s,c;for(s=0;s<12;s++)c=createUTC([2e3,s]),t.push(this.monthsShort(c,"")),r.push(this.months(c,"")),i.push(this.months(c,"")),i.push(this.monthsShort(c,""));for(t.sort(e),r.sort(e),i.sort(e),s=0;s<12;s++)t[s]=regexEscape(t[s]),r[s]=regexEscape(r[s]);for(s=0;s<24;s++)i[s]=regexEscape(i[s]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}addFormatToken("Y",0,0,function(){var e=this.year();return e<=9999?zeroFill(e,4):"+"+e});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,!0],0,"year");addUnitAlias("year","y");addUnitPriority("year",1);addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(e,t){t[YEAR]=e.length===2?hooks.parseTwoDigitYear(e):toInt(e)});addParseToken("YY",function(e,t){t[YEAR]=hooks.parseTwoDigitYear(e)});addParseToken("Y",function(e,t){t[YEAR]=parseInt(e,10)});function daysInYear(e){return isLeapYear(e)?366:365}hooks.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(e,t,r,i,s,c,d){var m;return e<100&&e>=0?(m=new Date(e+400,t,r,i,s,c,d),isFinite(m.getFullYear())&&m.setFullYear(e)):m=new Date(e,t,r,i,s,c,d),m}function createUTCDate(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function firstWeekOffset(e,t,r){var i=7+t-r,s=(7+createUTCDate(e,0,i).getUTCDay()-t)%7;return-s+i-1}function dayOfYearFromWeeks(e,t,r,i,s){var c=(7+r-i)%7,d=firstWeekOffset(e,i,s),m=1+7*(t-1)+c+d,y,g;return m<=0?(y=e-1,g=daysInYear(y)+m):m>daysInYear(e)?(y=e+1,g=m-daysInYear(e)):(y=e,g=m),{year:y,dayOfYear:g}}function weekOfYear(e,t,r){var i=firstWeekOffset(e.year(),t,r),s=Math.floor((e.dayOfYear()-i-1)/7)+1,c,d;return s<1?(d=e.year()-1,c=s+weeksInYear(d,t,r)):s>weeksInYear(e.year(),t,r)?(c=s-weeksInYear(e.year(),t,r),d=e.year()+1):(d=e.year(),c=s),{week:c,year:d}}function weeksInYear(e,t,r){var i=firstWeekOffset(e,t,r),s=firstWeekOffset(e+1,t,r);return(daysInYear(e)-i+s)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addUnitPriority("week",5);addUnitPriority("isoWeek",5);addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(e,t,r,i){t[i.substr(0,1)]=toInt(e)});function localeWeek(e){return weekOfYear(e,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function getSetISOWeek(e){var t=weekOfYear(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});addFormatToken("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});addFormatToken("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addUnitPriority("day",11);addUnitPriority("weekday",11);addUnitPriority("isoWeekday",11);addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(e,t){return t.weekdaysMinRegex(e)});addRegexToken("ddd",function(e,t){return t.weekdaysShortRegex(e)});addRegexToken("dddd",function(e,t){return t.weekdaysRegex(e)});addWeekParseToken(["dd","ddd","dddd"],function(e,t,r,i){var s=r._locale.weekdaysParse(e,i,r._strict);s!=null?t.d=s:getParsingFlags(r).invalidWeekday=e});addWeekParseToken(["d","e","E"],function(e,t,r,i){t[i]=toInt(e)});function parseWeekday(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function parseIsoWeekday(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function shiftWeekdays(e,t){return e.slice(t,7).concat(e.slice(0,t))}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(e,t){var r=isArray(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?shiftWeekdays(r,this._week.dow):e?r[e.day()]:r}function localeWeekdaysShort(e){return e===!0?shiftWeekdays(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function localeWeekdaysMin(e){return e===!0?shiftWeekdays(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function handleStrictParse$1(e,t,r){var i,s,c,d=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)c=createUTC([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(c,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(c,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(c,"").toLocaleLowerCase();return r?t==="dddd"?(s=indexOf.call(this._weekdaysParse,d),s!==-1?s:null):t==="ddd"?(s=indexOf.call(this._shortWeekdaysParse,d),s!==-1?s:null):(s=indexOf.call(this._minWeekdaysParse,d),s!==-1?s:null):t==="dddd"?(s=indexOf.call(this._weekdaysParse,d),s!==-1||(s=indexOf.call(this._shortWeekdaysParse,d),s!==-1)?s:(s=indexOf.call(this._minWeekdaysParse,d),s!==-1?s:null)):t==="ddd"?(s=indexOf.call(this._shortWeekdaysParse,d),s!==-1||(s=indexOf.call(this._weekdaysParse,d),s!==-1)?s:(s=indexOf.call(this._minWeekdaysParse,d),s!==-1?s:null)):(s=indexOf.call(this._minWeekdaysParse,d),s!==-1||(s=indexOf.call(this._weekdaysParse,d),s!==-1)?s:(s=indexOf.call(this._shortWeekdaysParse,d),s!==-1?s:null))}function localeWeekdaysParse(e,t,r){var i,s,c;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=createUTC([2e3,1]).day(i),r&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(c="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(c.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;if(r&&t==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;if(r&&t==="dd"&&this._minWeekdaysParse[i].test(e))return i;if(!r&&this._weekdaysParse[i].test(e))return i}}function getSetDayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=parseWeekday(e,this.localeData()),this.add(e-t,"d")):t}function getSetLocaleDayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function getSetISODayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=parseIsoWeekday(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function weekdaysRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function e(b,j){return j.length-b.length}var t=[],r=[],i=[],s=[],c,d,m,y,g;for(c=0;c<7;c++)d=createUTC([2e3,1]).day(c),m=regexEscape(this.weekdaysMin(d,"")),y=regexEscape(this.weekdaysShort(d,"")),g=regexEscape(this.weekdays(d,"")),t.push(m),r.push(y),i.push(g),s.push(m),s.push(y),s.push(g);t.sort(e),r.sort(e),i.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(e,t){addFormatToken(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}meridiem("a",!0);meridiem("A",!1);addUnitAlias("hour","h");addUnitPriority("hour",13);function matchMeridiem(e,t){return t._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("k",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(e,t,r){var i=toInt(e);t[HOUR]=i===24?0:i});addParseToken(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});addParseToken(["h","hh"],function(e,t,r){t[HOUR]=toInt(e),getParsingFlags(r).bigHour=!0});addParseToken("hmm",function(e,t,r){var i=e.length-2;t[HOUR]=toInt(e.substr(0,i)),t[MINUTE]=toInt(e.substr(i)),getParsingFlags(r).bigHour=!0});addParseToken("hmmss",function(e,t,r){var i=e.length-4,s=e.length-2;t[HOUR]=toInt(e.substr(0,i)),t[MINUTE]=toInt(e.substr(i,2)),t[SECOND]=toInt(e.substr(s)),getParsingFlags(r).bigHour=!0});addParseToken("Hmm",function(e,t,r){var i=e.length-2;t[HOUR]=toInt(e.substr(0,i)),t[MINUTE]=toInt(e.substr(i))});addParseToken("Hmmss",function(e,t,r){var i=e.length-4,s=e.length-2;t[HOUR]=toInt(e.substr(0,i)),t[MINUTE]=toInt(e.substr(i,2)),t[SECOND]=toInt(e.substr(s))});function localeIsPM(e){return(e+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);function localeMeridiem(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function commonPrefix(e,t){var r,i=Math.min(e.length,t.length);for(r=0;r<i;r+=1)if(e[r]!==t[r])return r;return i}function normalizeLocale(e){return e&&e.toLowerCase().replace("_","-")}function chooseLocale(e){for(var t=0,r,i,s,c;t<e.length;){for(c=normalizeLocale(e[t]).split("-"),r=c.length,i=normalizeLocale(e[t+1]),i=i?i.split("-"):null;r>0;){if(s=loadLocale(c.slice(0,r).join("-")),s)return s;if(i&&i.length>=r&&commonPrefix(c,i)>=r-1)break;r--}t++}return globalLocale}function isLocaleNameSane(e){return e.match("^[^/\\\\]*$")!=null}function loadLocale(e){var t=null,r;if(locales[e]===void 0&&typeof module<"u"&&module&&module.exports&&isLocaleNameSane(e))try{t=globalLocale._abbr,r=require,r("./locale/"+e),getSetGlobalLocale(t)}catch{locales[e]=null}return locales[e]}function getSetGlobalLocale(e,t){var r;return e&&(isUndefined(t)?r=getLocale(e):r=defineLocale(e,t),r?globalLocale=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),globalLocale._abbr}function defineLocale(e,t){if(t!==null){var r,i=baseConfig;if(t.abbr=e,locales[e]!=null)deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=locales[e]._config;else if(t.parentLocale!=null)if(locales[t.parentLocale]!=null)i=locales[t.parentLocale]._config;else if(r=loadLocale(t.parentLocale),r!=null)i=r._config;else return localeFamilies[t.parentLocale]||(localeFamilies[t.parentLocale]=[]),localeFamilies[t.parentLocale].push({name:e,config:t}),null;return locales[e]=new Locale(mergeConfigs(i,t)),localeFamilies[e]&&localeFamilies[e].forEach(function(s){defineLocale(s.name,s.config)}),getSetGlobalLocale(e),locales[e]}else return delete locales[e],null}function updateLocale(e,t){if(t!=null){var r,i,s=baseConfig;locales[e]!=null&&locales[e].parentLocale!=null?locales[e].set(mergeConfigs(locales[e]._config,t)):(i=loadLocale(e),i!=null&&(s=i._config),t=mergeConfigs(s,t),i==null&&(t.abbr=e),r=new Locale(t),r.parentLocale=locales[e],locales[e]=r),getSetGlobalLocale(e)}else locales[e]!=null&&(locales[e].parentLocale!=null?(locales[e]=locales[e].parentLocale,e===getSetGlobalLocale()&&getSetGlobalLocale(e)):locales[e]!=null&&delete locales[e]);return locales[e]}function getLocale(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return globalLocale;if(!isArray(e)){if(t=loadLocale(e),t)return t;e=[e]}return chooseLocale(e)}function listLocales(){return keys(locales)}function checkOverflow(e){var t,r=e._a;return r&&getParsingFlags(e).overflow===-2&&(t=r[MONTH]<0||r[MONTH]>11?MONTH:r[DATE]<1||r[DATE]>daysInMonth(r[YEAR],r[MONTH])?DATE:r[HOUR]<0||r[HOUR]>24||r[HOUR]===24&&(r[MINUTE]!==0||r[SECOND]!==0||r[MILLISECOND]!==0)?HOUR:r[MINUTE]<0||r[MINUTE]>59?MINUTE:r[SECOND]<0||r[SECOND]>59?SECOND:r[MILLISECOND]<0||r[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(e)._overflowDayOfYear&&(t<YEAR||t>DATE)&&(t=DATE),getParsingFlags(e)._overflowWeeks&&t===-1&&(t=WEEK),getParsingFlags(e)._overflowWeekday&&t===-1&&(t=WEEKDAY),getParsingFlags(e).overflow=t),e}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function configFromISO(e){var t,r,i=e._i,s=extendedIsoRegex.exec(i)||basicIsoRegex.exec(i),c,d,m,y,g=isoDates.length,b=isoTimes.length;if(s){for(getParsingFlags(e).iso=!0,t=0,r=g;t<r;t++)if(isoDates[t][1].exec(s[1])){d=isoDates[t][0],c=isoDates[t][2]!==!1;break}if(d==null){e._isValid=!1;return}if(s[3]){for(t=0,r=b;t<r;t++)if(isoTimes[t][1].exec(s[3])){m=(s[2]||" ")+isoTimes[t][0];break}if(m==null){e._isValid=!1;return}}if(!c&&m!=null){e._isValid=!1;return}if(s[4])if(tzRegex.exec(s[4]))y="Z";else{e._isValid=!1;return}e._f=d+(m||"")+(y||""),configFromStringAndFormat(e)}else e._isValid=!1}function extractFromRFC2822Strings(e,t,r,i,s,c){var d=[untruncateYear(e),defaultLocaleMonthsShort.indexOf(t),parseInt(r,10),parseInt(i,10),parseInt(s,10)];return c&&d.push(parseInt(c,10)),d}function untruncateYear(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function preprocessRFC2822(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(e,t,r){if(e){var i=defaultLocaleWeekdaysShort.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(i!==s)return getParsingFlags(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function calculateOffset(e,t,r){if(e)return obsOffsets[e];if(t)return 0;var i=parseInt(r,10),s=i%100,c=(i-s)/100;return c*60+s}function configFromRFC2822(e){var t=rfc2822.exec(preprocessRFC2822(e._i)),r;if(t){if(r=extractFromRFC2822Strings(t[4],t[3],t[2],t[5],t[6],t[7]),!checkWeekday(t[1],r,e))return;e._a=r,e._tzm=calculateOffset(t[8],t[9],t[10]),e._d=createUTCDate.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),getParsingFlags(e).rfc2822=!0}else e._isValid=!1}function configFromString(e){var t=aspNetJsonRegex.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(configFromISO(e),e._isValid===!1)delete e._isValid;else return;if(configFromRFC2822(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:hooks.createFromInputFallback(e)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function defaults(e,t,r){return e??t??r}function currentDateArray(e){var t=new Date(hooks.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function configFromArray(e){var t,r,i=[],s,c,d;if(!e._d){for(s=currentDateArray(e),e._w&&e._a[DATE]==null&&e._a[MONTH]==null&&dayOfYearFromWeekInfo(e),e._dayOfYear!=null&&(d=defaults(e._a[YEAR],s[YEAR]),(e._dayOfYear>daysInYear(d)||e._dayOfYear===0)&&(getParsingFlags(e)._overflowDayOfYear=!0),r=createUTCDate(d,0,e._dayOfYear),e._a[MONTH]=r.getUTCMonth(),e._a[DATE]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=i[t]=s[t];for(;t<7;t++)e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[HOUR]===24&&e._a[MINUTE]===0&&e._a[SECOND]===0&&e._a[MILLISECOND]===0&&(e._nextDay=!0,e._a[HOUR]=0),e._d=(e._useUTC?createUTCDate:createDate).apply(null,i),c=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[HOUR]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==c&&(getParsingFlags(e).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(e){var t,r,i,s,c,d,m,y,g;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(c=1,d=4,r=defaults(t.GG,e._a[YEAR],weekOfYear(createLocal(),1,4).year),i=defaults(t.W,1),s=defaults(t.E,1),(s<1||s>7)&&(y=!0)):(c=e._locale._week.dow,d=e._locale._week.doy,g=weekOfYear(createLocal(),c,d),r=defaults(t.gg,e._a[YEAR],g.year),i=defaults(t.w,g.week),t.d!=null?(s=t.d,(s<0||s>6)&&(y=!0)):t.e!=null?(s=t.e+c,(t.e<0||t.e>6)&&(y=!0)):s=c),i<1||i>weeksInYear(r,c,d)?getParsingFlags(e)._overflowWeeks=!0:y!=null?getParsingFlags(e)._overflowWeekday=!0:(m=dayOfYearFromWeeks(r,i,s,c,d),e._a[YEAR]=m.year,e._dayOfYear=m.dayOfYear)}hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(e){if(e._f===hooks.ISO_8601){configFromISO(e);return}if(e._f===hooks.RFC_2822){configFromRFC2822(e);return}e._a=[],getParsingFlags(e).empty=!0;var t=""+e._i,r,i,s,c,d,m=t.length,y=0,g,b;for(s=expandFormat(e._f,e._locale).match(formattingTokens)||[],b=s.length,r=0;r<b;r++)c=s[r],i=(t.match(getParseRegexForToken(c,e))||[])[0],i&&(d=t.substr(0,t.indexOf(i)),d.length>0&&getParsingFlags(e).unusedInput.push(d),t=t.slice(t.indexOf(i)+i.length),y+=i.length),formatTokenFunctions[c]?(i?getParsingFlags(e).empty=!1:getParsingFlags(e).unusedTokens.push(c),addTimeToArrayFromToken(c,i,e)):e._strict&&!i&&getParsingFlags(e).unusedTokens.push(c);getParsingFlags(e).charsLeftOver=m-y,t.length>0&&getParsingFlags(e).unusedInput.push(t),e._a[HOUR]<=12&&getParsingFlags(e).bigHour===!0&&e._a[HOUR]>0&&(getParsingFlags(e).bigHour=void 0),getParsingFlags(e).parsedDateParts=e._a.slice(0),getParsingFlags(e).meridiem=e._meridiem,e._a[HOUR]=meridiemFixWrap(e._locale,e._a[HOUR],e._meridiem),g=getParsingFlags(e).era,g!==null&&(e._a[YEAR]=e._locale.erasConvertYear(g,e._a[YEAR])),configFromArray(e),checkOverflow(e)}function meridiemFixWrap(e,t,r){var i;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(i=e.isPM(r),i&&t<12&&(t+=12),!i&&t===12&&(t=0)),t)}function configFromStringAndArray(e){var t,r,i,s,c,d,m=!1,y=e._f.length;if(y===0){getParsingFlags(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<y;s++)c=0,d=!1,t=copyConfig({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],configFromStringAndFormat(t),isValid(t)&&(d=!0),c+=getParsingFlags(t).charsLeftOver,c+=getParsingFlags(t).unusedTokens.length*10,getParsingFlags(t).score=c,m?c<i&&(i=c,r=t):(i==null||c<i||d)&&(i=c,r=t,d&&(m=!0));extend(e,r||t)}function configFromObject(e){if(!e._d){var t=normalizeObjectUnits(e._i),r=t.day===void 0?t.date:t.day;e._a=map([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(i){return i&&parseInt(i,10)}),configFromArray(e)}}function createFromConfig(e){var t=new Moment(checkOverflow(prepareConfig(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function prepareConfig(e){var t=e._i,r=e._f;return e._locale=e._locale||getLocale(e._l),t===null||r===void 0&&t===""?createInvalid({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),isMoment(t)?new Moment(checkOverflow(t)):(isDate(t)?e._d=t:isArray(r)?configFromStringAndArray(e):r?configFromStringAndFormat(e):configFromInput(e),isValid(e)||(e._d=null),e))}function configFromInput(e){var t=e._i;isUndefined(t)?e._d=new Date(hooks.now()):isDate(t)?e._d=new Date(t.valueOf()):typeof t=="string"?configFromString(e):isArray(t)?(e._a=map(t.slice(0),function(r){return parseInt(r,10)}),configFromArray(e)):isObject(t)?configFromObject(e):isNumber(t)?e._d=new Date(t):hooks.createFromInputFallback(e)}function createLocalOrUTC(e,t,r,i,s){var c={};return(t===!0||t===!1)&&(i=t,t=void 0),(r===!0||r===!1)&&(i=r,r=void 0),(isObject(e)&&isObjectEmpty(e)||isArray(e)&&e.length===0)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=s,c._l=r,c._i=e,c._f=t,c._strict=i,createFromConfig(c)}function createLocal(e,t,r,i){return createLocalOrUTC(e,t,r,i,!1)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:createInvalid()});function pickBy(e,t){var r,i;if(t.length===1&&isArray(t[0])&&(t=t[0]),!t.length)return createLocal();for(r=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][e](r))&&(r=t[i]);return r}function min(){var e=[].slice.call(arguments,0);return pickBy("isBefore",e)}function max(){var e=[].slice.call(arguments,0);return pickBy("isAfter",e)}var now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(e){var t,r=!1,i,s=ordering.length;for(t in e)if(hasOwnProp(e,t)&&!(indexOf.call(ordering,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(i=0;i<s;++i)if(e[ordering[i]]){if(r)return!1;parseFloat(e[ordering[i]])!==toInt(e[ordering[i]])&&(r=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(e){var t=normalizeObjectUnits(e),r=t.year||0,i=t.quarter||0,s=t.month||0,c=t.week||t.isoWeek||0,d=t.day||0,m=t.hour||0,y=t.minute||0,g=t.second||0,b=t.millisecond||0;this._isValid=isDurationValid(t),this._milliseconds=+b+g*1e3+y*6e4+m*1e3*60*60,this._days=+d+c*7,this._months=+s+i*3+r*12,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(e){return e instanceof Duration}function absRound(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function compareArrays(e,t,r){var i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),c=0,d;for(d=0;d<i;d++)(r&&e[d]!==t[d]||!r&&toInt(e[d])!==toInt(t[d]))&&c++;return c+s}function offset(e,t){addFormatToken(e,0,0,function(){var r=this.utcOffset(),i="+";return r<0&&(r=-r,i="-"),i+zeroFill(~~(r/60),2)+t+zeroFill(~~r%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=offsetFromString(matchShortOffset,e)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(e,t){var r=(t||"").match(e),i,s,c;return r===null?null:(i=r[r.length-1]||[],s=(i+"").match(chunkOffset)||["-",0,0],c=+(s[1]*60)+toInt(s[2]),c===0?0:s[0]==="+"?c:-c)}function cloneWithOffset(e,t){var r,i;return t._isUTC?(r=t.clone(),i=(isMoment(e)||isDate(e)?e.valueOf():createLocal(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),hooks.updateOffset(r,!1),r):createLocal(e).local()}function getDateOffset(e){return-Math.round(e._d.getTimezoneOffset())}hooks.updateOffset=function(){};function getSetOffset(e,t,r){var i=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=offsetFromString(matchShortOffset,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(s=getDateOffset(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?addSubtract(this,createDuration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:getDateOffset(this)}function getSetZone(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function setOffsetToUTC(e){return this.utcOffset(0,e)}function setOffsetToLocal(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=offsetFromString(matchOffset,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(e){return this.isValid()?(e=e?createLocal(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var e={},t;return copyConfig(e,this),e=prepareConfig(e),e._a?(t=e._isUTC?createUTC(e._a):createLocal(e._a),this._isDSTShifted=this.isValid()&&compareArrays(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(e,t){var r=e,i=null,s,c,d;return isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:isNumber(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(i=aspNetRegex.exec(e))?(s=i[1]==="-"?-1:1,r={y:0,d:toInt(i[DATE])*s,h:toInt(i[HOUR])*s,m:toInt(i[MINUTE])*s,s:toInt(i[SECOND])*s,ms:toInt(absRound(i[MILLISECOND]*1e3))*s}):(i=isoRegex.exec(e))?(s=i[1]==="-"?-1:1,r={y:parseIso(i[2],s),M:parseIso(i[3],s),w:parseIso(i[4],s),d:parseIso(i[5],s),h:parseIso(i[6],s),m:parseIso(i[7],s),s:parseIso(i[8],s)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(d=momentsDifference(createLocal(r.from),createLocal(r.to)),r={},r.ms=d.milliseconds,r.M=d.months),c=new Duration(r),isDuration(e)&&hasOwnProp(e,"_locale")&&(c._locale=e._locale),isDuration(e)&&hasOwnProp(e,"_isValid")&&(c._isValid=e._isValid),c}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function positiveMomentsDifference(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function momentsDifference(e,t){var r;return e.isValid()&&t.isValid()?(t=cloneWithOffset(t,e),e.isBefore(t)?r=positiveMomentsDifference(e,t):(r=positiveMomentsDifference(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function createAdder(e,t){return function(r,i){var s,c;return i!==null&&!isNaN(+i)&&(deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),c=r,r=i,i=c),s=createDuration(r,i),addSubtract(this,s,e),this}}function addSubtract(e,t,r,i){var s=t._milliseconds,c=absRound(t._days),d=absRound(t._months);e.isValid()&&(i=i??!0,d&&setMonth(e,get(e,"Month")+d*r),c&&set$1(e,"Date",get(e,"Date")+c*r),s&&e._d.setTime(e._d.valueOf()+s*r),i&&hooks.updateOffset(e,c||d))}var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString(e){return typeof e=="string"||e instanceof String}function isMomentInput(e){return isMoment(e)||isDate(e)||isString(e)||isNumber(e)||isNumberOrStringArray(e)||isMomentInputObject(e)||e===null||e===void 0}function isMomentInputObject(e){var t=isObject(e)&&!isObjectEmpty(e),r=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,c,d=i.length;for(s=0;s<d;s+=1)c=i[s],r=r||hasOwnProp(e,c);return t&&r}function isNumberOrStringArray(e){var t=isArray(e),r=!1;return t&&(r=e.filter(function(i){return!isNumber(i)&&isString(e)}).length===0),t&&r}function isCalendarSpec(e){var t=isObject(e)&&!isObjectEmpty(e),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,c;for(s=0;s<i.length;s+=1)c=i[s],r=r||hasOwnProp(e,c);return t&&r}function getCalendarFormat(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function calendar$1(e,t){arguments.length===1&&(arguments[0]?isMomentInput(arguments[0])?(e=arguments[0],t=void 0):isCalendarSpec(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||createLocal(),i=cloneWithOffset(r,this).startOf("day"),s=hooks.calendarFormat(this,i)||"sameElse",c=t&&(isFunction(t[s])?t[s].call(this,r):t[s]);return this.format(c||this.localeData().calendar(s,this,createLocal(r)))}function clone(){return new Moment(this)}function isAfter(e,t){var r=isMoment(e)?e:createLocal(e);return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function isBefore(e,t){var r=isMoment(e)?e:createLocal(e);return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function isBetween(e,t,r,i){var s=isMoment(e)?e:createLocal(e),c=isMoment(t)?t:createLocal(t);return this.isValid()&&s.isValid()&&c.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,r):!this.isBefore(s,r))&&(i[1]===")"?this.isBefore(c,r):!this.isAfter(c,r))):!1}function isSame(e,t){var r=isMoment(e)?e:createLocal(e),i;return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(i=r.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function isSameOrAfter(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function isSameOrBefore(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function diff(e,t,r){var i,s,c;if(!this.isValid())return NaN;if(i=cloneWithOffset(e,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,t=normalizeUnits(t),t){case"year":c=monthDiff(this,i)/12;break;case"month":c=monthDiff(this,i);break;case"quarter":c=monthDiff(this,i)/3;break;case"second":c=(this-i)/1e3;break;case"minute":c=(this-i)/6e4;break;case"hour":c=(this-i)/36e5;break;case"day":c=(this-i-s)/864e5;break;case"week":c=(this-i-s)/6048e5;break;default:c=this-i}return r?c:absFloor(c)}function monthDiff(e,t){if(e.date()<t.date())return-monthDiff(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(r,"months"),s,c;return t-i<0?(s=e.clone().add(r-1,"months"),c=(t-i)/(i-s)):(s=e.clone().add(r+1,"months"),c=(t-i)/(s-i)),-(r+c)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?formatMoment(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(r,"Z")):formatMoment(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,i,s,c;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",c=t+'[")]',this.format(r+i+s+c)}function format(e){e||(e=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var t=formatMoment(this,e);return this.localeData().postformat(t)}function from(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fromNow(e){return this.from(createLocal(),e)}function to(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function toNow(e){return this.to(createLocal(),e)}function locale(e){var t;return e===void 0?this._locale._abbr:(t=getLocale(e),t!=null&&(this._locale=t),this)}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(e,t){return(e%t+t)%t}function localStartOfDate(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-MS_PER_400_YEARS:new Date(e,t,r).valueOf()}function utcStartOfDate(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-MS_PER_400_YEARS:Date.UTC(e,t,r)}function startOf(e){var t,r;if(e=normalizeUnits(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":t=this._d.valueOf(),t-=mod$1(t,MS_PER_MINUTE);break;case"second":t=this._d.valueOf(),t-=mod$1(t,MS_PER_SECOND);break}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function endOf(e){var t,r;if(e=normalizeUnits(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=MS_PER_HOUR-mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":t=this._d.valueOf(),t+=MS_PER_MINUTE-mod$1(t,MS_PER_MINUTE)-1;break;case"second":t=this._d.valueOf(),t+=MS_PER_SECOND-mod$1(t,MS_PER_SECOND)-1;break}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function toObject(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,i){var s=r._locale.erasParse(e,i,r._strict);s?getParsingFlags(r).era=s:getParsingFlags(r).invalidEra=e});addRegexToken("y",matchUnsigned);addRegexToken("yy",matchUnsigned);addRegexToken("yyy",matchUnsigned);addRegexToken("yyyy",matchUnsigned);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],YEAR);addParseToken(["yo"],function(e,t,r,i){var s;r._locale._eraYearOrdinalRegex&&(s=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[YEAR]=r._locale.eraYearOrdinalParse(e,s):t[YEAR]=parseInt(e,10)});function localeEras(e,t){var r,i,s,c=this._eras||getLocale("en")._eras;for(r=0,i=c.length;r<i;++r){switch(typeof c[r].since){case"string":s=hooks(c[r].since).startOf("day"),c[r].since=s.valueOf();break}switch(typeof c[r].until){case"undefined":c[r].until=1/0;break;case"string":s=hooks(c[r].until).startOf("day").valueOf(),c[r].until=s.valueOf();break}}return c}function localeErasParse(e,t,r){var i,s,c=this.eras(),d,m,y;for(e=e.toUpperCase(),i=0,s=c.length;i<s;++i)if(d=c[i].name.toUpperCase(),m=c[i].abbr.toUpperCase(),y=c[i].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(m===e)return c[i];break;case"NNNN":if(d===e)return c[i];break;case"NNNNN":if(y===e)return c[i];break}else if([d,m,y].indexOf(e)>=0)return c[i]}function localeErasConvertYear(e,t){var r=e.since<=e.until?1:-1;return t===void 0?hooks(e.since).year():hooks(e.since).year()+(t-e.offset)*r}function getEraName(){var e,t,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return i[e].name;return""}function getEraNarrow(){var e,t,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return i[e].narrow;return""}function getEraAbbr(){var e,t,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return i[e].abbr;return""}function getEraYear(){var e,t,r,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=s[e].since<=s[e].until?1:-1,i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return(this.year()-hooks(s[e].since).year())*r+s[e].offset;return this.year()}function erasNameRegex(e){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),e?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(e){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),e?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(e){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),e?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(e,t){return t.erasAbbrRegex(e)}function matchEraName(e,t){return t.erasNameRegex(e)}function matchEraNarrow(e,t){return t.erasNarrowRegex(e)}function matchEraYearOrdinal(e,t){return t._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var e=[],t=[],r=[],i=[],s,c,d=this.eras();for(s=0,c=d.length;s<c;++s)t.push(regexEscape(d[s].name)),e.push(regexEscape(d[s].abbr)),r.push(regexEscape(d[s].narrow)),i.push(regexEscape(d[s].name)),i.push(regexEscape(d[s].abbr)),i.push(regexEscape(d[s].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(e,t){addFormatToken(0,[e,e.length],0,t)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addUnitPriority("weekYear",1);addUnitPriority("isoWeekYear",1);addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,i){t[i.substr(0,2)]=toInt(e)});addWeekParseToken(["gg","GG"],function(e,t,r,i){t[i]=hooks.parseTwoDigitYear(e)});function getSetWeekYear(e){return getSetWeekYearHelper.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(e){return getSetWeekYearHelper.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)}function getWeeksInWeekYear(){var e=this.localeData()._week;return weeksInYear(this.weekYear(),e.dow,e.doy)}function getSetWeekYearHelper(e,t,r,i,s){var c;return e==null?weekOfYear(this,i,s).year:(c=weeksInYear(e,i,s),t>c&&(t=c),setWeekAll.call(this,e,t,r,i,s))}function setWeekAll(e,t,r,i,s){var c=dayOfYearFromWeeks(e,t,r,i,s),d=createUTCDate(c.year,0,c.dayOfYear);return this.year(d.getUTCFullYear()),this.month(d.getUTCMonth()),this.date(d.getUTCDate()),this}addFormatToken("Q",0,"Qo","quarter");addUnitAlias("quarter","Q");addUnitPriority("quarter",7);addRegexToken("Q",match1);addParseToken("Q",function(e,t){t[MONTH]=(toInt(e)-1)*3});function getSetQuarter(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addUnitPriority("date",9);addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(e,t){t[DATE]=toInt(e.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addUnitPriority("dayOfYear",4);addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(e,t,r){r._dayOfYear=toInt(e)});function getSetDayOfYear(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addUnitPriority("minute",14);addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addUnitPriority("second",15);addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addUnitAlias("millisecond","ms");addUnitPriority("millisecond",16);addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(e,t){t[MILLISECOND]=toInt(("0."+e)*1e3)}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;typeof Symbol<"u"&&Symbol.for!=null&&(proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.eraName=getEraName;proto.eraNarrow=getEraNarrow;proto.eraAbbr=getEraAbbr;proto.eraYear=getEraYear;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.weeksInWeekYear=getWeeksInWeekYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(e){return createLocal(e*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(e){return e}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.eras=localeEras;proto$1.erasParse=localeErasParse;proto$1.erasConvertYear=localeErasConvertYear;proto$1.erasAbbrRegex=erasAbbrRegex;proto$1.erasNameRegex=erasNameRegex;proto$1.erasNarrowRegex=erasNarrowRegex;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(e,t,r,i){var s=getLocale(),c=createUTC().set(i,t);return s[r](c,e)}function listMonthsImpl(e,t,r){if(isNumber(e)&&(t=e,e=void 0),e=e||"",t!=null)return get$1(e,t,r,"month");var i,s=[];for(i=0;i<12;i++)s[i]=get$1(e,i,r,"month");return s}function listWeekdaysImpl(e,t,r,i){typeof e=="boolean"?(isNumber(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,isNumber(t)&&(r=t,t=void 0),t=t||"");var s=getLocale(),c=e?s._week.dow:0,d,m=[];if(r!=null)return get$1(t,(r+c)%7,i,"day");for(d=0;d<7;d++)m[d]=get$1(t,(d+c)%7,i,"day");return m}function listMonths(e,t){return listMonthsImpl(e,t,"months")}function listMonthsShort(e,t){return listMonthsImpl(e,t,"monthsShort")}function listWeekdays(e,t,r){return listWeekdaysImpl(e,t,r,"weekdays")}function listWeekdaysShort(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysShort")}function listWeekdaysMin(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=toInt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var e=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),e.milliseconds=mathAbs(e.milliseconds),e.seconds=mathAbs(e.seconds),e.minutes=mathAbs(e.minutes),e.hours=mathAbs(e.hours),e.months=mathAbs(e.months),e.years=mathAbs(e.years),this}function addSubtract$1(e,t,r,i){var s=createDuration(t,r);return e._milliseconds+=i*s._milliseconds,e._days+=i*s._days,e._months+=i*s._months,e._bubble()}function add$1(e,t){return addSubtract$1(this,e,t,1)}function subtract$1(e,t){return addSubtract$1(this,e,t,-1)}function absCeil(e){return e<0?Math.floor(e):Math.ceil(e)}function bubble(){var e=this._milliseconds,t=this._days,r=this._months,i=this._data,s,c,d,m,y;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=absCeil(monthsToDays(r)+t)*864e5,t=0,r=0),i.milliseconds=e%1e3,s=absFloor(e/1e3),i.seconds=s%60,c=absFloor(s/60),i.minutes=c%60,d=absFloor(c/60),i.hours=d%24,t+=absFloor(d/24),y=absFloor(daysToMonths(t)),r+=y,t-=absCeil(monthsToDays(y)),m=absFloor(r/12),r%=12,i.days=t,i.months=r,i.years=m,this}function daysToMonths(e){return e*4800/146097}function monthsToDays(e){return e*146097/4800}function as(e){if(!this.isValid())return NaN;var t,r,i=this._milliseconds;if(e=normalizeUnits(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+i/864e5,r=this._months+daysToMonths(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(monthsToDays(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+e)}}function valueOf$1(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6:NaN}function makeAs(e){return function(){return this.as(e)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y");function clone$1(){return createDuration(this)}function get$2(e){return e=normalizeUnits(e),this.isValid()?this[e+"s"]():NaN}function makeGetter(e){return function(){return this.isValid()?this._data[e]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(e,t,r,i,s){return s.relativeTime(t||1,!!r,e,i)}function relativeTime$1(e,t,r,i){var s=createDuration(e).abs(),c=round(s.as("s")),d=round(s.as("m")),m=round(s.as("h")),y=round(s.as("d")),g=round(s.as("M")),b=round(s.as("w")),j=round(s.as("y")),B=c<=r.ss&&["s",c]||c<r.s&&["ss",c]||d<=1&&["m"]||d<r.m&&["mm",d]||m<=1&&["h"]||m<r.h&&["hh",m]||y<=1&&["d"]||y<r.d&&["dd",y];return r.w!=null&&(B=B||b<=1&&["w"]||b<r.w&&["ww",b]),B=B||g<=1&&["M"]||g<r.M&&["MM",g]||j<=1&&["y"]||["yy",j],B[2]=t,B[3]=+e>0,B[4]=i,substituteTimeAgo.apply(null,B)}function getSetRelativeTimeRounding(e){return e===void 0?round:typeof e=="function"?(round=e,!0):!1}function getSetRelativeTimeThreshold(e,t){return thresholds[e]===void 0?!1:t===void 0?thresholds[e]:(thresholds[e]=t,e==="s"&&(thresholds.ss=t-1),!0)}function humanize(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,i=thresholds,s,c;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(i=Object.assign({},thresholds,t),t.s!=null&&t.ss==null&&(i.ss=t.s-1)),s=this.localeData(),c=relativeTime$1(this,!r,i,s),r&&(c=s.pastFuture(+this,c)),s.postformat(c)}var abs$1=Math.abs;function sign(e){return(e>0)-(e<0)||+e}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var e=abs$1(this._milliseconds)/1e3,t=abs$1(this._days),r=abs$1(this._months),i,s,c,d,m=this.asSeconds(),y,g,b,j;return m?(i=absFloor(e/60),s=absFloor(i/60),e%=60,i%=60,c=absFloor(r/12),r%=12,d=e?e.toFixed(3).replace(/\.?0+$/,""):"",y=m<0?"-":"",g=sign(this._months)!==sign(m)?"-":"",b=sign(this._days)!==sign(m)?"-":"",j=sign(this._milliseconds)!==sign(m)?"-":"",y+"P"+(c?g+c+"Y":"")+(r?g+r+"M":"")+(t?b+t+"D":"")+(s||i||e?"T":"")+(s?j+s+"H":"")+(i?j+i+"M":"")+(e?j+d+"S":"")):"P0D"}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});addParseToken("x",function(e,t,r){r._d=new Date(toInt(e))});//! moment.js
hooks.version="2.29.4";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const moment=Object.freeze(Object.defineProperty({__proto__:null,default:hooks},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace$1(moment);/*!
 * Chart.js v2.9.4
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */(function(e,t){(function(r,i){e.exports=i(function(){try{return require$$0}catch{}}())})(commonjsGlobal,function(r){r=r&&r.hasOwnProperty("default")?r.default:r;function i(n,a){return a={exports:{}},n(a,a.exports),a.exports}function s(n){return n&&n.default||n}var c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},d=i(function(n){var a={};for(var o in c)c.hasOwnProperty(o)&&(a[c[o]]=o);var l=n.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var u in l)if(l.hasOwnProperty(u)){if(!("channels"in l[u]))throw new Error("missing channels property: "+u);if(!("labels"in l[u]))throw new Error("missing channel labels property: "+u);if(l[u].labels.length!==l[u].channels)throw new Error("channel and label counts mismatch: "+u);var h=l[u].channels,f=l[u].labels;delete l[u].channels,delete l[u].labels,Object.defineProperty(l[u],"channels",{value:h}),Object.defineProperty(l[u],"labels",{value:f})}l.rgb.hsl=function(p){var x=p[0]/255,M=p[1]/255,I=p[2]/255,J=Math.min(x,M,I),oe=Math.max(x,M,I),le=oe-J,he,ve,Re;return oe===J?he=0:x===oe?he=(M-I)/le:M===oe?he=2+(I-x)/le:I===oe&&(he=4+(x-M)/le),he=Math.min(he*60,360),he<0&&(he+=360),Re=(J+oe)/2,oe===J?ve=0:Re<=.5?ve=le/(oe+J):ve=le/(2-oe-J),[he,ve*100,Re*100]},l.rgb.hsv=function(p){var x,M,I,J,oe,le=p[0]/255,he=p[1]/255,ve=p[2]/255,Re=Math.max(le,he,ve),We=Re-Math.min(le,he,ve),Ye=function(et){return(Re-et)/6/We+1/2};return We===0?J=oe=0:(oe=We/Re,x=Ye(le),M=Ye(he),I=Ye(ve),le===Re?J=I-M:he===Re?J=1/3+x-I:ve===Re&&(J=2/3+M-x),J<0?J+=1:J>1&&(J-=1)),[J*360,oe*100,Re*100]},l.rgb.hwb=function(p){var x=p[0],M=p[1],I=p[2],J=l.rgb.hsl(p)[0],oe=1/255*Math.min(x,Math.min(M,I));return I=1-1/255*Math.max(x,Math.max(M,I)),[J,oe*100,I*100]},l.rgb.cmyk=function(p){var x=p[0]/255,M=p[1]/255,I=p[2]/255,J,oe,le,he;return he=Math.min(1-x,1-M,1-I),J=(1-x-he)/(1-he)||0,oe=(1-M-he)/(1-he)||0,le=(1-I-he)/(1-he)||0,[J*100,oe*100,le*100,he*100]};function _(p,x){return Math.pow(p[0]-x[0],2)+Math.pow(p[1]-x[1],2)+Math.pow(p[2]-x[2],2)}l.rgb.keyword=function(p){var x=a[p];if(x)return x;var M=1/0,I;for(var J in c)if(c.hasOwnProperty(J)){var oe=c[J],le=_(p,oe);le<M&&(M=le,I=J)}return I},l.keyword.rgb=function(p){return c[p]},l.rgb.xyz=function(p){var x=p[0]/255,M=p[1]/255,I=p[2]/255;x=x>.04045?Math.pow((x+.055)/1.055,2.4):x/12.92,M=M>.04045?Math.pow((M+.055)/1.055,2.4):M/12.92,I=I>.04045?Math.pow((I+.055)/1.055,2.4):I/12.92;var J=x*.4124+M*.3576+I*.1805,oe=x*.2126+M*.7152+I*.0722,le=x*.0193+M*.1192+I*.9505;return[J*100,oe*100,le*100]},l.rgb.lab=function(p){var x=l.rgb.xyz(p),M=x[0],I=x[1],J=x[2],oe,le,he;return M/=95.047,I/=100,J/=108.883,M=M>.008856?Math.pow(M,1/3):7.787*M+16/116,I=I>.008856?Math.pow(I,1/3):7.787*I+16/116,J=J>.008856?Math.pow(J,1/3):7.787*J+16/116,oe=116*I-16,le=500*(M-I),he=200*(I-J),[oe,le,he]},l.hsl.rgb=function(p){var x=p[0]/360,M=p[1]/100,I=p[2]/100,J,oe,le,he,ve;if(M===0)return ve=I*255,[ve,ve,ve];I<.5?oe=I*(1+M):oe=I+M-I*M,J=2*I-oe,he=[0,0,0];for(var Re=0;Re<3;Re++)le=x+1/3*-(Re-1),le<0&&le++,le>1&&le--,6*le<1?ve=J+(oe-J)*6*le:2*le<1?ve=oe:3*le<2?ve=J+(oe-J)*(2/3-le)*6:ve=J,he[Re]=ve*255;return he},l.hsl.hsv=function(p){var x=p[0],M=p[1]/100,I=p[2]/100,J=M,oe=Math.max(I,.01),le,he;return I*=2,M*=I<=1?I:2-I,J*=oe<=1?oe:2-oe,he=(I+M)/2,le=I===0?2*J/(oe+J):2*M/(I+M),[x,le*100,he*100]},l.hsv.rgb=function(p){var x=p[0]/60,M=p[1]/100,I=p[2]/100,J=Math.floor(x)%6,oe=x-Math.floor(x),le=255*I*(1-M),he=255*I*(1-M*oe),ve=255*I*(1-M*(1-oe));switch(I*=255,J){case 0:return[I,ve,le];case 1:return[he,I,le];case 2:return[le,I,ve];case 3:return[le,he,I];case 4:return[ve,le,I];case 5:return[I,le,he]}},l.hsv.hsl=function(p){var x=p[0],M=p[1]/100,I=p[2]/100,J=Math.max(I,.01),oe,le,he;return he=(2-M)*I,oe=(2-M)*J,le=M*J,le/=oe<=1?oe:2-oe,le=le||0,he/=2,[x,le*100,he*100]},l.hwb.rgb=function(p){var x=p[0]/360,M=p[1]/100,I=p[2]/100,J=M+I,oe,le,he,ve;J>1&&(M/=J,I/=J),oe=Math.floor(6*x),le=1-I,he=6*x-oe,oe&1&&(he=1-he),ve=M+he*(le-M);var Re,We,Ye;switch(oe){default:case 6:case 0:Re=le,We=ve,Ye=M;break;case 1:Re=ve,We=le,Ye=M;break;case 2:Re=M,We=le,Ye=ve;break;case 3:Re=M,We=ve,Ye=le;break;case 4:Re=ve,We=M,Ye=le;break;case 5:Re=le,We=M,Ye=ve;break}return[Re*255,We*255,Ye*255]},l.cmyk.rgb=function(p){var x=p[0]/100,M=p[1]/100,I=p[2]/100,J=p[3]/100,oe,le,he;return oe=1-Math.min(1,x*(1-J)+J),le=1-Math.min(1,M*(1-J)+J),he=1-Math.min(1,I*(1-J)+J),[oe*255,le*255,he*255]},l.xyz.rgb=function(p){var x=p[0]/100,M=p[1]/100,I=p[2]/100,J,oe,le;return J=x*3.2406+M*-1.5372+I*-.4986,oe=x*-.9689+M*1.8758+I*.0415,le=x*.0557+M*-.204+I*1.057,J=J>.0031308?1.055*Math.pow(J,1/2.4)-.055:J*12.92,oe=oe>.0031308?1.055*Math.pow(oe,1/2.4)-.055:oe*12.92,le=le>.0031308?1.055*Math.pow(le,1/2.4)-.055:le*12.92,J=Math.min(Math.max(0,J),1),oe=Math.min(Math.max(0,oe),1),le=Math.min(Math.max(0,le),1),[J*255,oe*255,le*255]},l.xyz.lab=function(p){var x=p[0],M=p[1],I=p[2],J,oe,le;return x/=95.047,M/=100,I/=108.883,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,M=M>.008856?Math.pow(M,1/3):7.787*M+16/116,I=I>.008856?Math.pow(I,1/3):7.787*I+16/116,J=116*M-16,oe=500*(x-M),le=200*(M-I),[J,oe,le]},l.lab.xyz=function(p){var x=p[0],M=p[1],I=p[2],J,oe,le;oe=(x+16)/116,J=M/500+oe,le=oe-I/200;var he=Math.pow(oe,3),ve=Math.pow(J,3),Re=Math.pow(le,3);return oe=he>.008856?he:(oe-16/116)/7.787,J=ve>.008856?ve:(J-16/116)/7.787,le=Re>.008856?Re:(le-16/116)/7.787,J*=95.047,oe*=100,le*=108.883,[J,oe,le]},l.lab.lch=function(p){var x=p[0],M=p[1],I=p[2],J,oe,le;return J=Math.atan2(I,M),oe=J*360/2/Math.PI,oe<0&&(oe+=360),le=Math.sqrt(M*M+I*I),[x,le,oe]},l.lch.lab=function(p){var x=p[0],M=p[1],I=p[2],J,oe,le;return le=I/360*2*Math.PI,J=M*Math.cos(le),oe=M*Math.sin(le),[x,J,oe]},l.rgb.ansi16=function(p){var x=p[0],M=p[1],I=p[2],J=1 in arguments?arguments[1]:l.rgb.hsv(p)[2];if(J=Math.round(J/50),J===0)return 30;var oe=30+(Math.round(I/255)<<2|Math.round(M/255)<<1|Math.round(x/255));return J===2&&(oe+=60),oe},l.hsv.ansi16=function(p){return l.rgb.ansi16(l.hsv.rgb(p),p[2])},l.rgb.ansi256=function(p){var x=p[0],M=p[1],I=p[2];if(x===M&&M===I)return x<8?16:x>248?231:Math.round((x-8)/247*24)+232;var J=16+36*Math.round(x/255*5)+6*Math.round(M/255*5)+Math.round(I/255*5);return J},l.ansi16.rgb=function(p){var x=p%10;if(x===0||x===7)return p>50&&(x+=3.5),x=x/10.5*255,[x,x,x];var M=(~~(p>50)+1)*.5,I=(x&1)*M*255,J=(x>>1&1)*M*255,oe=(x>>2&1)*M*255;return[I,J,oe]},l.ansi256.rgb=function(p){if(p>=232){var x=(p-232)*10+8;return[x,x,x]}p-=16;var M,I=Math.floor(p/36)/5*255,J=Math.floor((M=p%36)/6)/5*255,oe=M%6/5*255;return[I,J,oe]},l.rgb.hex=function(p){var x=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),M=x.toString(16).toUpperCase();return"000000".substring(M.length)+M},l.hex.rgb=function(p){var x=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!x)return[0,0,0];var M=x[0];x[0].length===3&&(M=M.split("").map(function(he){return he+he}).join(""));var I=parseInt(M,16),J=I>>16&255,oe=I>>8&255,le=I&255;return[J,oe,le]},l.rgb.hcg=function(p){var x=p[0]/255,M=p[1]/255,I=p[2]/255,J=Math.max(Math.max(x,M),I),oe=Math.min(Math.min(x,M),I),le=J-oe,he,ve;return le<1?he=oe/(1-le):he=0,le<=0?ve=0:J===x?ve=(M-I)/le%6:J===M?ve=2+(I-x)/le:ve=4+(x-M)/le+4,ve/=6,ve%=1,[ve*360,le*100,he*100]},l.hsl.hcg=function(p){var x=p[1]/100,M=p[2]/100,I=1,J=0;return M<.5?I=2*x*M:I=2*x*(1-M),I<1&&(J=(M-.5*I)/(1-I)),[p[0],I*100,J*100]},l.hsv.hcg=function(p){var x=p[1]/100,M=p[2]/100,I=x*M,J=0;return I<1&&(J=(M-I)/(1-I)),[p[0],I*100,J*100]},l.hcg.rgb=function(p){var x=p[0]/360,M=p[1]/100,I=p[2]/100;if(M===0)return[I*255,I*255,I*255];var J=[0,0,0],oe=x%1*6,le=oe%1,he=1-le,ve=0;switch(Math.floor(oe)){case 0:J[0]=1,J[1]=le,J[2]=0;break;case 1:J[0]=he,J[1]=1,J[2]=0;break;case 2:J[0]=0,J[1]=1,J[2]=le;break;case 3:J[0]=0,J[1]=he,J[2]=1;break;case 4:J[0]=le,J[1]=0,J[2]=1;break;default:J[0]=1,J[1]=0,J[2]=he}return ve=(1-M)*I,[(M*J[0]+ve)*255,(M*J[1]+ve)*255,(M*J[2]+ve)*255]},l.hcg.hsv=function(p){var x=p[1]/100,M=p[2]/100,I=x+M*(1-x),J=0;return I>0&&(J=x/I),[p[0],J*100,I*100]},l.hcg.hsl=function(p){var x=p[1]/100,M=p[2]/100,I=M*(1-x)+.5*x,J=0;return I>0&&I<.5?J=x/(2*I):I>=.5&&I<1&&(J=x/(2*(1-I))),[p[0],J*100,I*100]},l.hcg.hwb=function(p){var x=p[1]/100,M=p[2]/100,I=x+M*(1-x);return[p[0],(I-x)*100,(1-I)*100]},l.hwb.hcg=function(p){var x=p[1]/100,M=p[2]/100,I=1-M,J=I-x,oe=0;return J<1&&(oe=(I-J)/(1-J)),[p[0],J*100,oe*100]},l.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},l.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},l.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},l.gray.hsl=l.gray.hsv=function(p){return[0,0,p[0]]},l.gray.hwb=function(p){return[0,100,p[0]]},l.gray.cmyk=function(p){return[0,0,0,p[0]]},l.gray.lab=function(p){return[p[0],0,0]},l.gray.hex=function(p){var x=Math.round(p[0]/100*255)&255,M=(x<<16)+(x<<8)+x,I=M.toString(16).toUpperCase();return"000000".substring(I.length)+I},l.rgb.gray=function(p){var x=(p[0]+p[1]+p[2])/3;return[x/255*100]}});d.rgb,d.hsl,d.hsv,d.hwb,d.cmyk,d.xyz,d.lab,d.lch,d.hex,d.keyword,d.ansi16,d.ansi256,d.hcg,d.apple,d.gray;function m(){for(var n={},a=Object.keys(d),o=a.length,l=0;l<o;l++)n[a[l]]={distance:-1,parent:null};return n}function y(n){var a=m(),o=[n];for(a[n].distance=0;o.length;)for(var l=o.pop(),u=Object.keys(d[l]),h=u.length,f=0;f<h;f++){var _=u[f],p=a[_];p.distance===-1&&(p.distance=a[l].distance+1,p.parent=l,o.unshift(_))}return a}function g(n,a){return function(o){return a(n(o))}}function b(n,a){for(var o=[a[n].parent,n],l=d[a[n].parent][n],u=a[n].parent;a[u].parent;)o.unshift(a[u].parent),l=g(d[a[u].parent][u],l),u=a[u].parent;return l.conversion=o,l}var j=function(n){for(var a=y(n),o={},l=Object.keys(a),u=l.length,h=0;h<u;h++){var f=l[h],_=a[f];_.parent!==null&&(o[f]=b(f,a))}return o},B={},R=Object.keys(d);function D(n){var a=function(o){return o==null?o:(arguments.length>1&&(o=Array.prototype.slice.call(arguments)),n(o))};return"conversion"in n&&(a.conversion=n.conversion),a}function N(n){var a=function(o){if(o==null)return o;arguments.length>1&&(o=Array.prototype.slice.call(arguments));var l=n(o);if(typeof l=="object")for(var u=l.length,h=0;h<u;h++)l[h]=Math.round(l[h]);return l};return"conversion"in n&&(a.conversion=n.conversion),a}R.forEach(function(n){B[n]={},Object.defineProperty(B[n],"channels",{value:d[n].channels}),Object.defineProperty(B[n],"labels",{value:d[n].labels});var a=j(n),o=Object.keys(a);o.forEach(function(l){var u=a[l];B[n][l]=N(u),B[n][l].raw=D(u)})});var E=B,$={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},q={getRgba:Y,getHsla:T,getRgb:C,getHsl:A,getHwb:w,getAlpha:S,hexString:F,rgbString:Z,rgbaString:P,percentString:ie,percentaString:ue,hslString:pe,hslaString:_e,hwbString:we,keyword:Pe};function Y(n){if(n){var a=/^#([a-fA-F0-9]{3,4})$/i,o=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,l=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,u=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,h=/(\w+)/,f=[0,0,0],_=1,p=n.match(a),x="";if(p){p=p[1],x=p[3];for(var M=0;M<f.length;M++)f[M]=parseInt(p[M]+p[M],16);x&&(_=Math.round(parseInt(x+x,16)/255*100)/100)}else if(p=n.match(o)){x=p[2],p=p[1];for(var M=0;M<f.length;M++)f[M]=parseInt(p.slice(M*2,M*2+2),16);x&&(_=Math.round(parseInt(x,16)/255*100)/100)}else if(p=n.match(l)){for(var M=0;M<f.length;M++)f[M]=parseInt(p[M+1]);_=parseFloat(p[4])}else if(p=n.match(u)){for(var M=0;M<f.length;M++)f[M]=Math.round(parseFloat(p[M+1])*2.55);_=parseFloat(p[4])}else if(p=n.match(h)){if(p[1]=="transparent")return[0,0,0,0];if(f=$[p[1]],!f)return}for(var M=0;M<f.length;M++)f[M]=Se(f[M],0,255);return!_&&_!=0?_=1:_=Se(_,0,1),f[3]=_,f}}function T(n){if(n){var a=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,o=n.match(a);if(o){var l=parseFloat(o[4]),u=Se(parseInt(o[1]),0,360),h=Se(parseFloat(o[2]),0,100),f=Se(parseFloat(o[3]),0,100),_=Se(isNaN(l)?1:l,0,1);return[u,h,f,_]}}}function w(n){if(n){var a=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,o=n.match(a);if(o){var l=parseFloat(o[4]),u=Se(parseInt(o[1]),0,360),h=Se(parseFloat(o[2]),0,100),f=Se(parseFloat(o[3]),0,100),_=Se(isNaN(l)?1:l,0,1);return[u,h,f,_]}}}function C(n){var a=Y(n);return a&&a.slice(0,3)}function A(n){var a=T(n);return a&&a.slice(0,3)}function S(n){var a=Y(n);if(a)return a[3];if(a=T(n))return a[3];if(a=w(n))return a[3]}function F(n,o){var o=o!==void 0&&n.length===3?o:n[3];return"#"+De(n[0])+De(n[1])+De(n[2])+(o>=0&&o<1?De(Math.round(o*255)):"")}function Z(n,a){return a<1||n[3]&&n[3]<1?P(n,a):"rgb("+n[0]+", "+n[1]+", "+n[2]+")"}function P(n,a){return a===void 0&&(a=n[3]!==void 0?n[3]:1),"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+a+")"}function ie(n,a){if(a<1||n[3]&&n[3]<1)return ue(n,a);var o=Math.round(n[0]/255*100),l=Math.round(n[1]/255*100),u=Math.round(n[2]/255*100);return"rgb("+o+"%, "+l+"%, "+u+"%)"}function ue(n,a){var o=Math.round(n[0]/255*100),l=Math.round(n[1]/255*100),u=Math.round(n[2]/255*100);return"rgba("+o+"%, "+l+"%, "+u+"%, "+(a||n[3]||1)+")"}function pe(n,a){return a<1||n[3]&&n[3]<1?_e(n,a):"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)"}function _e(n,a){return a===void 0&&(a=n[3]!==void 0?n[3]:1),"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+a+")"}function we(n,a){return a===void 0&&(a=n[3]!==void 0?n[3]:1),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+(a!==void 0&&a!==1?", "+a:"")+")"}function Pe(n){return Ne[n.slice(0,3)]}function Se(n,a,o){return Math.min(Math.max(a,n),o)}function De(n){var a=n.toString(16).toUpperCase();return a.length<2?"0"+a:a}var Ne={};for(var Ue in $)Ne[$[Ue]]=Ue;var je=function(n){if(n instanceof je)return n;if(!(this instanceof je))return new je(n);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var a;typeof n=="string"?(a=q.getRgba(n),a?this.setValues("rgb",a):(a=q.getHsla(n))?this.setValues("hsl",a):(a=q.getHwb(n))&&this.setValues("hwb",a)):typeof n=="object"&&(a=n,a.r!==void 0||a.red!==void 0?this.setValues("rgb",a):a.l!==void 0||a.lightness!==void 0?this.setValues("hsl",a):a.v!==void 0||a.value!==void 0?this.setValues("hsv",a):a.w!==void 0||a.whiteness!==void 0?this.setValues("hwb",a):(a.c!==void 0||a.cyan!==void 0)&&this.setValues("cmyk",a))};je.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var n=this.values;return n.alpha!==1?n.hwb.concat([n.alpha]):n.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var n=this.values;return n.rgb.concat([n.alpha])},hslaArray:function(){var n=this.values;return n.hsl.concat([n.alpha])},alpha:function(n){return n===void 0?this.values.alpha:(this.setValues("alpha",n),this)},red:function(n){return this.setChannel("rgb",0,n)},green:function(n){return this.setChannel("rgb",1,n)},blue:function(n){return this.setChannel("rgb",2,n)},hue:function(n){return n&&(n%=360,n=n<0?360+n:n),this.setChannel("hsl",0,n)},saturation:function(n){return this.setChannel("hsl",1,n)},lightness:function(n){return this.setChannel("hsl",2,n)},saturationv:function(n){return this.setChannel("hsv",1,n)},whiteness:function(n){return this.setChannel("hwb",1,n)},blackness:function(n){return this.setChannel("hwb",2,n)},value:function(n){return this.setChannel("hsv",2,n)},cyan:function(n){return this.setChannel("cmyk",0,n)},magenta:function(n){return this.setChannel("cmyk",1,n)},yellow:function(n){return this.setChannel("cmyk",2,n)},black:function(n){return this.setChannel("cmyk",3,n)},hexString:function(){return q.hexString(this.values.rgb)},rgbString:function(){return q.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return q.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return q.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return q.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return q.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return q.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return q.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var n=this.values.rgb;return n[0]<<16|n[1]<<8|n[2]},luminosity:function(){for(var n=this.values.rgb,a=[],o=0;o<n.length;o++){var l=n[o]/255;a[o]=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)}return .2126*a[0]+.7152*a[1]+.0722*a[2]},contrast:function(n){var a=this.luminosity(),o=n.luminosity();return a>o?(a+.05)/(o+.05):(o+.05)/(a+.05)},level:function(n){var a=this.contrast(n);return a>=7.1?"AAA":a>=4.5?"AA":""},dark:function(){var n=this.values.rgb,a=(n[0]*299+n[1]*587+n[2]*114)/1e3;return a<128},light:function(){return!this.dark()},negate:function(){for(var n=[],a=0;a<3;a++)n[a]=255-this.values.rgb[a];return this.setValues("rgb",n),this},lighten:function(n){var a=this.values.hsl;return a[2]+=a[2]*n,this.setValues("hsl",a),this},darken:function(n){var a=this.values.hsl;return a[2]-=a[2]*n,this.setValues("hsl",a),this},saturate:function(n){var a=this.values.hsl;return a[1]+=a[1]*n,this.setValues("hsl",a),this},desaturate:function(n){var a=this.values.hsl;return a[1]-=a[1]*n,this.setValues("hsl",a),this},whiten:function(n){var a=this.values.hwb;return a[1]+=a[1]*n,this.setValues("hwb",a),this},blacken:function(n){var a=this.values.hwb;return a[2]+=a[2]*n,this.setValues("hwb",a),this},greyscale:function(){var n=this.values.rgb,a=n[0]*.3+n[1]*.59+n[2]*.11;return this.setValues("rgb",[a,a,a]),this},clearer:function(n){var a=this.values.alpha;return this.setValues("alpha",a-a*n),this},opaquer:function(n){var a=this.values.alpha;return this.setValues("alpha",a+a*n),this},rotate:function(n){var a=this.values.hsl,o=(a[0]+n)%360;return a[0]=o<0?360+o:o,this.setValues("hsl",a),this},mix:function(n,a){var o=this,l=n,u=a===void 0?.5:a,h=2*u-1,f=o.alpha()-l.alpha(),_=((h*f===-1?h:(h+f)/(1+h*f))+1)/2,p=1-_;return this.rgb(_*o.red()+p*l.red(),_*o.green()+p*l.green(),_*o.blue()+p*l.blue()).alpha(o.alpha()*u+l.alpha()*(1-u))},toJSON:function(){return this.rgb()},clone:function(){var n=new je,a=this.values,o=n.values,l,u;for(var h in a)a.hasOwnProperty(h)&&(l=a[h],u={}.toString.call(l),u==="[object Array]"?o[h]=l.slice(0):u==="[object Number]"?o[h]=l:console.error("unexpected color value:",l));return n}},je.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},je.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},je.prototype.getValues=function(n){for(var a=this.values,o={},l=0;l<n.length;l++)o[n.charAt(l)]=a[n][l];return a.alpha!==1&&(o.a=a.alpha),o},je.prototype.setValues=function(n,a){var o=this.values,l=this.spaces,u=this.maxes,h=1,f;if(this.valid=!0,n==="alpha")h=a;else if(a.length)o[n]=a.slice(0,n.length),h=a[n.length];else if(a[n.charAt(0)]!==void 0){for(f=0;f<n.length;f++)o[n][f]=a[n.charAt(f)];h=a.a}else if(a[l[n][0]]!==void 0){var _=l[n];for(f=0;f<n.length;f++)o[n][f]=a[_[f]];h=a.alpha}if(o.alpha=Math.max(0,Math.min(1,h===void 0?o.alpha:h)),n==="alpha")return!1;var p;for(f=0;f<n.length;f++)p=Math.max(0,Math.min(u[n][f],o[n][f])),o[n][f]=Math.round(p);for(var x in l)x!==n&&(o[x]=E[n][x](o[n]));return!0},je.prototype.setSpace=function(n,a){var o=a[0];return o===void 0?this.getValues(n):(typeof o=="number"&&(o=Array.prototype.slice.call(a)),this.setValues(n,o),this)},je.prototype.setChannel=function(n,a,o){var l=this.values[n];return o===void 0?l[a]:o===l[a]?this:(l[a]=o,this.setValues(n,l),this)},typeof window<"u"&&(window.Color=je);var $e=je;function de(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}var L={noop:function(){},uid:function(){var n=0;return function(){return n++}}(),isNullOrUndef:function(n){return n===null||typeof n>"u"},isArray:function(n){if(Array.isArray&&Array.isArray(n))return!0;var a=Object.prototype.toString.call(n);return a.substr(0,7)==="[object"&&a.substr(-6)==="Array]"},isObject:function(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"},isFinite:function(n){return(typeof n=="number"||n instanceof Number)&&isFinite(n)},valueOrDefault:function(n,a){return typeof n>"u"?a:n},valueAtIndexOrDefault:function(n,a,o){return L.valueOrDefault(L.isArray(n)?n[a]:n,o)},callback:function(n,a,o){if(n&&typeof n.call=="function")return n.apply(o,a)},each:function(n,a,o,l){var u,h,f;if(L.isArray(n))if(h=n.length,l)for(u=h-1;u>=0;u--)a.call(o,n[u],u);else for(u=0;u<h;u++)a.call(o,n[u],u);else if(L.isObject(n))for(f=Object.keys(n),h=f.length,u=0;u<h;u++)a.call(o,n[f[u]],f[u])},arrayEquals:function(n,a){var o,l,u,h;if(!n||!a||n.length!==a.length)return!1;for(o=0,l=n.length;o<l;++o)if(u=n[o],h=a[o],u instanceof Array&&h instanceof Array){if(!L.arrayEquals(u,h))return!1}else if(u!==h)return!1;return!0},clone:function(n){if(L.isArray(n))return n.map(L.clone);if(L.isObject(n)){for(var a=Object.create(n),o=Object.keys(n),l=o.length,u=0;u<l;++u)a[o[u]]=L.clone(n[o[u]]);return a}return n},_merger:function(n,a,o,l){if(de(n)){var u=a[n],h=o[n];L.isObject(u)&&L.isObject(h)?L.merge(u,h,l):a[n]=L.clone(h)}},_mergerIf:function(n,a,o){if(de(n)){var l=a[n],u=o[n];L.isObject(l)&&L.isObject(u)?L.mergeIf(l,u):a.hasOwnProperty(n)||(a[n]=L.clone(u))}},merge:function(n,a,o){var l=L.isArray(a)?a:[a],u=l.length,h,f,_,p,x;if(!L.isObject(n))return n;for(o=o||{},h=o.merger||L._merger,f=0;f<u;++f)if(a=l[f],!!L.isObject(a))for(_=Object.keys(a),x=0,p=_.length;x<p;++x)h(_[x],n,a,o);return n},mergeIf:function(n,a){return L.merge(n,a,{merger:L._mergerIf})},extend:Object.assign||function(n){return L.merge(n,[].slice.call(arguments,1),{merger:function(a,o,l){o[a]=l[a]}})},inherits:function(n){var a=this,o=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return a.apply(this,arguments)},l=function(){this.constructor=o};return l.prototype=a.prototype,o.prototype=new l,o.extend=L.inherits,n&&L.extend(o.prototype,n),o.__super__=a.prototype,o},_deprecated:function(n,a,o,l){a!==void 0&&console.warn(n+': "'+o+'" is deprecated. Please use "'+l+'" instead')}},H=L;L.callCallback=L.callback,L.indexOf=function(n,a,o){return Array.prototype.indexOf.call(n,a,o)},L.getValueOrDefault=L.valueOrDefault,L.getValueAtIndexOrDefault=L.valueAtIndexOrDefault;var Q={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return-n*(n-2)},easeInOutQuad:function(n){return(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1)},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return(n=n-1)*n*n+1},easeInOutCubic:function(n){return(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return-((n=n-1)*n*n*n-1)},easeInOutQuart:function(n){return(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return(n=n-1)*n*n*n*n+1},easeInOutQuint:function(n){return(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},easeInSine:function(n){return-Math.cos(n*(Math.PI/2))+1},easeOutSine:function(n){return Math.sin(n*(Math.PI/2))},easeInOutSine:function(n){return-.5*(Math.cos(Math.PI*n)-1)},easeInExpo:function(n){return n===0?0:Math.pow(2,10*(n-1))},easeOutExpo:function(n){return n===1?1:-Math.pow(2,-10*n)+1},easeInOutExpo:function(n){return n===0?0:n===1?1:(n/=.5)<1?.5*Math.pow(2,10*(n-1)):.5*(-Math.pow(2,-10*--n)+2)},easeInCirc:function(n){return n>=1?n:-(Math.sqrt(1-n*n)-1)},easeOutCirc:function(n){return Math.sqrt(1-(n=n-1)*n)},easeInOutCirc:function(n){return(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},easeInElastic:function(n){var a=1.70158,o=0,l=1;return n===0?0:n===1?1:(o||(o=.3),a=o/(2*Math.PI)*Math.asin(1/l),-(l*Math.pow(2,10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/o)))},easeOutElastic:function(n){var a=1.70158,o=0,l=1;return n===0?0:n===1?1:(o||(o=.3),a=o/(2*Math.PI)*Math.asin(1/l),l*Math.pow(2,-10*n)*Math.sin((n-a)*(2*Math.PI)/o)+1)},easeInOutElastic:function(n){var a=1.70158,o=0,l=1;return n===0?0:(n/=.5)===2?1:(o||(o=.45),a=o/(2*Math.PI)*Math.asin(1/l),n<1?-.5*(l*Math.pow(2,10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/o)):l*Math.pow(2,-10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/o)*.5+1)},easeInBack:function(n){var a=1.70158;return n*n*((a+1)*n-a)},easeOutBack:function(n){var a=1.70158;return(n=n-1)*n*((a+1)*n+a)+1},easeInOutBack:function(n){var a=1.70158;return(n/=.5)<1?.5*(n*n*(((a*=1.525)+1)*n-a)):.5*((n-=2)*n*(((a*=1.525)+1)*n+a)+2)},easeInBounce:function(n){return 1-Q.easeOutBounce(1-n)},easeOutBounce:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:function(n){return n<.5?Q.easeInBounce(n*2)*.5:Q.easeOutBounce(n*2-1)*.5+.5}},z={effects:Q};H.easingEffects=Q;var X=Math.PI,se=X/180,ee=X*2,re=X/2,ne=X/4,k=X*2/3,O={clear:function(n){n.ctx.clearRect(0,0,n.width,n.height)},roundedRect:function(n,a,o,l,u,h){if(h){var f=Math.min(h,u/2,l/2),_=a+f,p=o+f,x=a+l-f,M=o+u-f;n.moveTo(a,p),_<x&&p<M?(n.arc(_,p,f,-X,-re),n.arc(x,p,f,-re,0),n.arc(x,M,f,0,re),n.arc(_,M,f,re,X)):_<x?(n.moveTo(_,o),n.arc(x,p,f,-re,re),n.arc(_,p,f,re,X+re)):p<M?(n.arc(_,p,f,-X,0),n.arc(_,M,f,0,X)):n.arc(_,p,f,-X,X),n.closePath(),n.moveTo(a,o)}else n.rect(a,o,l,u)},drawPoint:function(n,a,o,l,u,h){var f,_,p,x,M,I=(h||0)*se;if(a&&typeof a=="object"&&(f=a.toString(),f==="[object HTMLImageElement]"||f==="[object HTMLCanvasElement]")){n.save(),n.translate(l,u),n.rotate(I),n.drawImage(a,-a.width/2,-a.height/2,a.width,a.height),n.restore();return}if(!(isNaN(o)||o<=0)){switch(n.beginPath(),a){default:n.arc(l,u,o,0,ee),n.closePath();break;case"triangle":n.moveTo(l+Math.sin(I)*o,u-Math.cos(I)*o),I+=k,n.lineTo(l+Math.sin(I)*o,u-Math.cos(I)*o),I+=k,n.lineTo(l+Math.sin(I)*o,u-Math.cos(I)*o),n.closePath();break;case"rectRounded":M=o*.516,x=o-M,_=Math.cos(I+ne)*x,p=Math.sin(I+ne)*x,n.arc(l-_,u-p,M,I-X,I-re),n.arc(l+p,u-_,M,I-re,I),n.arc(l+_,u+p,M,I,I+re),n.arc(l-p,u+_,M,I+re,I+X),n.closePath();break;case"rect":if(!h){x=Math.SQRT1_2*o,n.rect(l-x,u-x,2*x,2*x);break}I+=ne;case"rectRot":_=Math.cos(I)*o,p=Math.sin(I)*o,n.moveTo(l-_,u-p),n.lineTo(l+p,u-_),n.lineTo(l+_,u+p),n.lineTo(l-p,u+_),n.closePath();break;case"crossRot":I+=ne;case"cross":_=Math.cos(I)*o,p=Math.sin(I)*o,n.moveTo(l-_,u-p),n.lineTo(l+_,u+p),n.moveTo(l+p,u-_),n.lineTo(l-p,u+_);break;case"star":_=Math.cos(I)*o,p=Math.sin(I)*o,n.moveTo(l-_,u-p),n.lineTo(l+_,u+p),n.moveTo(l+p,u-_),n.lineTo(l-p,u+_),I+=ne,_=Math.cos(I)*o,p=Math.sin(I)*o,n.moveTo(l-_,u-p),n.lineTo(l+_,u+p),n.moveTo(l+p,u-_),n.lineTo(l-p,u+_);break;case"line":_=Math.cos(I)*o,p=Math.sin(I)*o,n.moveTo(l-_,u-p),n.lineTo(l+_,u+p);break;case"dash":n.moveTo(l,u),n.lineTo(l+Math.cos(I)*o,u+Math.sin(I)*o);break}n.fill(),n.stroke()}},_isPointInArea:function(n,a){var o=1e-6;return n.x>a.left-o&&n.x<a.right+o&&n.y>a.top-o&&n.y<a.bottom+o},clipArea:function(n,a){n.save(),n.beginPath(),n.rect(a.left,a.top,a.right-a.left,a.bottom-a.top),n.clip()},unclipArea:function(n){n.restore()},lineTo:function(n,a,o,l){var u=o.steppedLine;if(u){if(u==="middle"){var h=(a.x+o.x)/2;n.lineTo(h,l?o.y:a.y),n.lineTo(h,l?a.y:o.y)}else u==="after"&&!l||u!=="after"&&l?n.lineTo(a.x,o.y):n.lineTo(o.x,a.y);n.lineTo(o.x,o.y);return}if(!o.tension){n.lineTo(o.x,o.y);return}n.bezierCurveTo(l?a.controlPointPreviousX:a.controlPointNextX,l?a.controlPointPreviousY:a.controlPointNextY,l?o.controlPointNextX:o.controlPointPreviousX,l?o.controlPointNextY:o.controlPointPreviousY,o.x,o.y)}},W=O;H.clear=O.clear,H.drawRoundedRectangle=function(n){n.beginPath(),O.roundedRect.apply(O,arguments)};var K={_set:function(n,a){return H.merge(this[n]||(this[n]={}),a)}};K._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var G=K,ce=H.valueOrDefault;function ye(n){return!n||H.isNullOrUndef(n.size)||H.isNullOrUndef(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}var me={toLineHeight:function(n,a){var o=(""+n).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!o||o[1]==="normal")return a*1.2;switch(n=+o[2],o[3]){case"px":return n;case"%":n/=100;break}return a*n},toPadding:function(n){var a,o,l,u;return H.isObject(n)?(a=+n.top||0,o=+n.right||0,l=+n.bottom||0,u=+n.left||0):a=o=l=u=+n||0,{top:a,right:o,bottom:l,left:u,height:a+l,width:u+o}},_parseFont:function(n){var a=G.global,o=ce(n.fontSize,a.defaultFontSize),l={family:ce(n.fontFamily,a.defaultFontFamily),lineHeight:H.options.toLineHeight(ce(n.lineHeight,a.defaultLineHeight),o),size:o,style:ce(n.fontStyle,a.defaultFontStyle),weight:null,string:""};return l.string=ye(l),l},resolve:function(n,a,o,l){var u=!0,h,f,_;for(h=0,f=n.length;h<f;++h)if(_=n[h],_!==void 0&&(a!==void 0&&typeof _=="function"&&(_=_(a),u=!1),o!==void 0&&H.isArray(_)&&(_=_[o],u=!1),_!==void 0))return l&&!u&&(l.cacheable=!1),_}},ke={_factorize:function(n){var a=[],o=Math.sqrt(n),l;for(l=1;l<o;l++)n%l===0&&(a.push(l),a.push(n/l));return o===(o|0)&&a.push(o),a.sort(function(u,h){return u-h}).pop(),a},log10:Math.log10||function(n){var a=Math.log(n)*Math.LOG10E,o=Math.round(a),l=n===Math.pow(10,o);return l?o:a}},Te=ke;H.log10=ke.log10;var xe=function(n,a){return{x:function(o){return n+n+a-o},setWidth:function(o){a=o},textAlign:function(o){return o==="center"?o:o==="right"?"left":"right"},xPlus:function(o,l){return o-l},leftForLtr:function(o,l){return o-l}}},Ce=function(){return{x:function(n){return n},setWidth:function(n){},textAlign:function(n){return n},xPlus:function(n,a){return n+a},leftForLtr:function(n,a){return n}}},Oe=function(n,a,o){return n?xe(a,o):Ce()},Fe=function(n,a){var o,l;(a==="ltr"||a==="rtl")&&(o=n.canvas.style,l=[o.getPropertyValue("direction"),o.getPropertyPriority("direction")],o.setProperty("direction",a,"important"),n.prevTextDirection=l)},Ve=function(n){var a=n.prevTextDirection;a!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",a[0],a[1]))},ze={getRtlAdapter:Oe,overrideTextDirection:Fe,restoreTextDirection:Ve},U=H,ge=z,Be=W,He=me,it=Te,Me=ze;U.easing=ge,U.canvas=Be,U.options=He,U.math=it,U.rtl=Me;function te(n,a,o,l){var u=Object.keys(o),h,f,_,p,x,M,I,J,oe;for(h=0,f=u.length;h<f;++h)if(_=u[h],M=o[_],a.hasOwnProperty(_)||(a[_]=M),p=a[_],!(p===M||_[0]==="_")){if(n.hasOwnProperty(_)||(n[_]=p),x=n[_],I=typeof M,I===typeof x){if(I==="string"){if(J=$e(x),J.valid&&(oe=$e(M),oe.valid)){a[_]=oe.mix(J,l).rgbString();continue}}else if(U.isFinite(x)&&U.isFinite(M)){a[_]=x+(M-x)*l;continue}}a[_]=M}}var ae=function(n){U.extend(this,n),this.initialize.apply(this,arguments)};U.extend(ae.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var n=this;return n._view||(n._view=U.extend({},n._model)),n._start={},n},transition:function(n){var a=this,o=a._model,l=a._start,u=a._view;return!o||n===1?(a._view=U.extend({},o),a._start=null,a):(u||(u=a._view={}),l||(l=a._start={}),te(l,u,o,n),a)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return U.isNumber(this._model.x)&&U.isNumber(this._model.y)}}),ae.extend=U.inherits;var Ee=ae,Le=Ee.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),qe=Le;Object.defineProperty(Le.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Le.prototype,"chartInstance",{get:function(){return this.chart},set:function(n){this.chart=n}}),G._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:U.noop,onComplete:U.noop}});var Xe={animations:[],request:null,addAnimation:function(n,a,o,l){var u=this.animations,h,f;for(a.chart=n,a.startTime=Date.now(),a.duration=o,l||(n.animating=!0),h=0,f=u.length;h<f;++h)if(u[h].chart===n){u[h]=a;return}u.push(a),u.length===1&&this.requestAnimationFrame()},cancelAnimation:function(n){var a=U.findIndex(this.animations,function(o){return o.chart===n});a!==-1&&(this.animations.splice(a,1),n.animating=!1)},requestAnimationFrame:function(){var n=this;n.request===null&&(n.request=U.requestAnimFrame.call(window,function(){n.request=null,n.startDigest()}))},startDigest:function(){var n=this;n.advance(),n.animations.length>0&&n.requestAnimationFrame()},advance:function(){for(var n=this.animations,a,o,l,u,h=0;h<n.length;)a=n[h],o=a.chart,l=a.numSteps,u=Math.floor((Date.now()-a.startTime)/a.duration*l)+1,a.currentStep=Math.min(u,l),U.callback(a.render,[o,a],o),U.callback(a.onAnimationProgress,[a],o),a.currentStep>=l?(U.callback(a.onAnimationComplete,[a],o),o.animating=!1,n.splice(h,1)):++h}},Ge=U.options.resolve,Ke=["push","pop","shift","splice","unshift"];function at(n,a){if(n._chartjs){n._chartjs.listeners.push(a);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[a]}}),Ke.forEach(function(o){var l="onData"+o.charAt(0).toUpperCase()+o.slice(1),u=n[o];Object.defineProperty(n,o,{configurable:!0,enumerable:!1,value:function(){var h=Array.prototype.slice.call(arguments),f=u.apply(this,h);return U.each(n._chartjs.listeners,function(_){typeof _[l]=="function"&&_[l].apply(_,h)}),f}})})}function Ze(n,a){var o=n._chartjs;if(o){var l=o.listeners,u=l.indexOf(a);u!==-1&&l.splice(u,1),!(l.length>0)&&(Ke.forEach(function(h){delete n[h]}),delete n._chartjs)}}var dt=function(n,a){this.initialize(n,a)};U.extend(dt.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(n,a){var o=this;o.chart=n,o.index=a,o.linkScales(),o.addElements(),o._type=o.getMeta().type},updateIndex:function(n){this.index=n},linkScales:function(){var n=this,a=n.getMeta(),o=n.chart,l=o.scales,u=n.getDataset(),h=o.options.scales;(a.xAxisID===null||!(a.xAxisID in l)||u.xAxisID)&&(a.xAxisID=u.xAxisID||h.xAxes[0].id),(a.yAxisID===null||!(a.yAxisID in l)||u.yAxisID)&&(a.yAxisID=u.yAxisID||h.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(n){return this.chart.scales[n]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&Ze(this._data,this)},createMetaDataset:function(){var n=this,a=n.datasetElementType;return a&&new a({_chart:n.chart,_datasetIndex:n.index})},createMetaData:function(n){var a=this,o=a.dataElementType;return o&&new o({_chart:a.chart,_datasetIndex:a.index,_index:n})},addElements:function(){var n=this,a=n.getMeta(),o=n.getDataset().data||[],l=a.data,u,h;for(u=0,h=o.length;u<h;++u)l[u]=l[u]||n.createMetaData(u);a.dataset=a.dataset||n.createMetaDataset()},addElementAndReset:function(n){var a=this.createMetaData(n);this.getMeta().data.splice(n,0,a),this.updateElement(a,n,!0)},buildOrUpdateElements:function(){var n=this,a=n.getDataset(),o=a.data||(a.data=[]);n._data!==o&&(n._data&&Ze(n._data,n),o&&Object.isExtensible(o)&&at(o,n),n._data=o),n.resyncElements()},_configure:function(){var n=this;n._config=U.merge(Object.create(null),[n.chart.options.datasets[n._type],n.getDataset()],{merger:function(a,o,l){a!=="_meta"&&a!=="data"&&U._merger(a,o,l)}})},_update:function(n){var a=this;a._configure(),a._cachedDataOpts=null,a.update(n)},update:U.noop,transition:function(n){for(var a=this.getMeta(),o=a.data||[],l=o.length,u=0;u<l;++u)o[u].transition(n);a.dataset&&a.dataset.transition(n)},draw:function(){var n=this.getMeta(),a=n.data||[],o=a.length,l=0;for(n.dataset&&n.dataset.draw();l<o;++l)a[l].draw()},getStyle:function(n){var a=this,o=a.getMeta(),l=o.dataset,u;return a._configure(),l&&n===void 0?u=a._resolveDatasetElementOptions(l||{}):(n=n||0,u=a._resolveDataElementOptions(o.data[n]||{},n)),(u.fill===!1||u.fill===null)&&(u.backgroundColor=u.borderColor),u},_resolveDatasetElementOptions:function(n,a){var o=this,l=o.chart,u=o._config,h=n.custom||{},f=l.options.elements[o.datasetElementType.prototype._type]||{},_=o._datasetElementOptions,p={},x,M,I,J,oe={chart:l,dataset:o.getDataset(),datasetIndex:o.index,hover:a};for(x=0,M=_.length;x<M;++x)I=_[x],J=a?"hover"+I.charAt(0).toUpperCase()+I.slice(1):I,p[I]=Ge([h[J],u[J],f[J]],oe);return p},_resolveDataElementOptions:function(n,a){var o=this,l=n&&n.custom,u=o._cachedDataOpts;if(u&&!l)return u;var h=o.chart,f=o._config,_=h.options.elements[o.dataElementType.prototype._type]||{},p=o._dataElementOptions,x={},M={chart:h,dataIndex:a,dataset:o.getDataset(),datasetIndex:o.index},I={cacheable:!l},J,oe,le,he;if(l=l||{},U.isArray(p))for(oe=0,le=p.length;oe<le;++oe)he=p[oe],x[he]=Ge([l[he],f[he],_[he]],M,a,I);else for(J=Object.keys(p),oe=0,le=J.length;oe<le;++oe)he=J[oe],x[he]=Ge([l[he],f[p[he]],f[he],_[he]],M,a,I);return I.cacheable&&(o._cachedDataOpts=Object.freeze(x)),x},removeHoverStyle:function(n){U.merge(n._model,n.$previousStyle||{}),delete n.$previousStyle},setHoverStyle:function(n){var a=this.chart.data.datasets[n._datasetIndex],o=n._index,l=n.custom||{},u=n._model,h=U.getHoverColor;n.$previousStyle={backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth},u.backgroundColor=Ge([l.hoverBackgroundColor,a.hoverBackgroundColor,h(u.backgroundColor)],void 0,o),u.borderColor=Ge([l.hoverBorderColor,a.hoverBorderColor,h(u.borderColor)],void 0,o),u.borderWidth=Ge([l.hoverBorderWidth,a.hoverBorderWidth,u.borderWidth],void 0,o)},_removeDatasetHoverStyle:function(){var n=this.getMeta().dataset;n&&this.removeHoverStyle(n)},_setDatasetHoverStyle:function(){var n=this.getMeta().dataset,a={},o,l,u,h,f,_;if(n){for(_=n._model,f=this._resolveDatasetElementOptions(n,!0),h=Object.keys(f),o=0,l=h.length;o<l;++o)u=h[o],a[u]=_[u],_[u]=f[u];n.$previousStyle=a}},resyncElements:function(){var n=this,a=n.getMeta(),o=n.getDataset().data,l=a.data.length,u=o.length;u<l?a.data.splice(u,l-u):u>l&&n.insertElements(l,u-l)},insertElements:function(n,a){for(var o=0;o<a;++o)this.addElementAndReset(n+o)},onDataPush:function(){var n=arguments.length;this.insertElements(this.getDataset().data.length-n,n)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(n,a){this.getMeta().data.splice(n,a),this.insertElements(n,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),dt.extend=U.inherits;var Qe=dt,nt=Math.PI*2;G._set("global",{elements:{arc:{backgroundColor:G.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});function tt(n,a){var o=a.startAngle,l=a.endAngle,u=a.pixelMargin,h=u/a.outerRadius,f=a.x,_=a.y;n.beginPath(),n.arc(f,_,a.outerRadius,o-h,l+h),a.innerRadius>u?(h=u/a.innerRadius,n.arc(f,_,a.innerRadius-u,l+h,o-h,!0)):n.arc(f,_,u,l+Math.PI/2,o-Math.PI/2),n.closePath(),n.clip()}function mt(n,a,o,l){var u=o.endAngle,h;for(l&&(o.endAngle=o.startAngle+nt,tt(n,o),o.endAngle=u,o.endAngle===o.startAngle&&o.fullCircles&&(o.endAngle+=nt,o.fullCircles--)),n.beginPath(),n.arc(o.x,o.y,o.innerRadius,o.startAngle+nt,o.startAngle,!0),h=0;h<o.fullCircles;++h)n.stroke();for(n.beginPath(),n.arc(o.x,o.y,a.outerRadius,o.startAngle,o.startAngle+nt),h=0;h<o.fullCircles;++h)n.stroke()}function bt(n,a,o){var l=a.borderAlign==="inner";l?(n.lineWidth=a.borderWidth*2,n.lineJoin="round"):(n.lineWidth=a.borderWidth,n.lineJoin="bevel"),o.fullCircles&&mt(n,a,o,l),l&&tt(n,o),n.beginPath(),n.arc(o.x,o.y,a.outerRadius,o.startAngle,o.endAngle),n.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),n.closePath(),n.stroke()}var yt=Ee.extend({_type:"arc",inLabelRange:function(n){var a=this._view;return a?Math.pow(n-a.x,2)<Math.pow(a.radius+a.hoverRadius,2):!1},inRange:function(n,a){var o=this._view;if(o){for(var l=U.getAngleFromPoint(o,{x:n,y:a}),u=l.angle,h=l.distance,f=o.startAngle,_=o.endAngle;_<f;)_+=nt;for(;u>_;)u-=nt;for(;u<f;)u+=nt;var p=u>=f&&u<=_,x=h>=o.innerRadius&&h<=o.outerRadius;return p&&x}return!1},getCenterPoint:function(){var n=this._view,a=(n.startAngle+n.endAngle)/2,o=(n.innerRadius+n.outerRadius)/2;return{x:n.x+Math.cos(a)*o,y:n.y+Math.sin(a)*o}},getArea:function(){var n=this._view;return Math.PI*((n.endAngle-n.startAngle)/(2*Math.PI))*(Math.pow(n.outerRadius,2)-Math.pow(n.innerRadius,2))},tooltipPosition:function(){var n=this._view,a=n.startAngle+(n.endAngle-n.startAngle)/2,o=(n.outerRadius-n.innerRadius)/2+n.innerRadius;return{x:n.x+Math.cos(a)*o,y:n.y+Math.sin(a)*o}},draw:function(){var n=this._chart.ctx,a=this._view,o=a.borderAlign==="inner"?.33:0,l={x:a.x,y:a.y,innerRadius:a.innerRadius,outerRadius:Math.max(a.outerRadius-o,0),pixelMargin:o,startAngle:a.startAngle,endAngle:a.endAngle,fullCircles:Math.floor(a.circumference/nt)},u;if(n.save(),n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,l.fullCircles){for(l.endAngle=l.startAngle+nt,n.beginPath(),n.arc(l.x,l.y,l.outerRadius,l.startAngle,l.endAngle),n.arc(l.x,l.y,l.innerRadius,l.endAngle,l.startAngle,!0),n.closePath(),u=0;u<l.fullCircles;++u)n.fill();l.endAngle=l.startAngle+a.circumference%nt}n.beginPath(),n.arc(l.x,l.y,l.outerRadius,l.startAngle,l.endAngle),n.arc(l.x,l.y,l.innerRadius,l.endAngle,l.startAngle,!0),n.closePath(),n.fill(),a.borderWidth&&bt(n,a,l),n.restore()}}),St=U.valueOrDefault,ft=G.global.defaultColor;G._set("global",{elements:{line:{tension:.4,backgroundColor:ft,borderWidth:3,borderColor:ft,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var pt=Ee.extend({_type:"line",draw:function(){var n=this,a=n._view,o=n._chart.ctx,l=a.spanGaps,u=n._children.slice(),h=G.global,f=h.elements.line,_=-1,p=n._loop,x,M,I;if(u.length){if(n._loop){for(x=0;x<u.length;++x)if(M=U.previousItem(u,x),!u[x]._view.skip&&M._view.skip){u=u.slice(x).concat(u.slice(0,x)),p=l;break}p&&u.push(u[0])}for(o.save(),o.lineCap=a.borderCapStyle||f.borderCapStyle,o.setLineDash&&o.setLineDash(a.borderDash||f.borderDash),o.lineDashOffset=St(a.borderDashOffset,f.borderDashOffset),o.lineJoin=a.borderJoinStyle||f.borderJoinStyle,o.lineWidth=St(a.borderWidth,f.borderWidth),o.strokeStyle=a.borderColor||h.defaultColor,o.beginPath(),I=u[0]._view,I.skip||(o.moveTo(I.x,I.y),_=0),x=1;x<u.length;++x)I=u[x]._view,M=_===-1?U.previousItem(u,x):u[_],I.skip||(_!==x-1&&!l||_===-1?o.moveTo(I.x,I.y):U.canvas.lineTo(o,M._view,I),_=x);p&&o.closePath(),o.stroke(),o.restore()}}}),Tt=U.valueOrDefault,Mt=G.global.defaultColor;G._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Mt,borderColor:Mt,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function Yt(n){var a=this._view;return a?Math.abs(n-a.x)<a.radius+a.hitRadius:!1}function rr(n){var a=this._view;return a?Math.abs(n-a.y)<a.radius+a.hitRadius:!1}var Cr=Ee.extend({_type:"point",inRange:function(n,a){var o=this._view;return o?Math.pow(n-o.x,2)+Math.pow(a-o.y,2)<Math.pow(o.hitRadius+o.radius,2):!1},inLabelRange:Yt,inXRange:Yt,inYRange:rr,getCenterPoint:function(){var n=this._view;return{x:n.x,y:n.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var n=this._view;return{x:n.x,y:n.y,padding:n.radius+n.borderWidth}},draw:function(n){var a=this._view,o=this._chart.ctx,l=a.pointStyle,u=a.rotation,h=a.radius,f=a.x,_=a.y,p=G.global,x=p.defaultColor;a.skip||(n===void 0||U.canvas._isPointInArea(a,n))&&(o.strokeStyle=a.borderColor||x,o.lineWidth=Tt(a.borderWidth,p.elements.point.borderWidth),o.fillStyle=a.backgroundColor||x,U.canvas.drawPoint(o,l,h,f,_,u))}}),pr=G.global.defaultColor;G._set("global",{elements:{rectangle:{backgroundColor:pr,borderColor:pr,borderSkipped:"bottom",borderWidth:0}}});function Tr(n){return n&&n.width!==void 0}function Yn(n){var a,o,l,u,h;return Tr(n)?(h=n.width/2,a=n.x-h,o=n.x+h,l=Math.min(n.y,n.base),u=Math.max(n.y,n.base)):(h=n.height/2,a=Math.min(n.x,n.base),o=Math.max(n.x,n.base),l=n.y-h,u=n.y+h),{left:a,top:l,right:o,bottom:u}}function Vn(n,a,o){return n===a?o:n===o?a:n}function ia(n){var a=n.borderSkipped,o={};return a&&(n.horizontal?n.base>n.x&&(a=Vn(a,"left","right")):n.base<n.y&&(a=Vn(a,"bottom","top")),o[a]=!0),o}function aa(n,a,o){var l=n.borderWidth,u=ia(n),h,f,_,p;return U.isObject(l)?(h=+l.top||0,f=+l.right||0,_=+l.bottom||0,p=+l.left||0):h=f=_=p=+l||0,{t:u.top||h<0?0:h>o?o:h,r:u.right||f<0?0:f>a?a:f,b:u.bottom||_<0?0:_>o?o:_,l:u.left||p<0?0:p>a?a:p}}function sa(n){var a=Yn(n),o=a.right-a.left,l=a.bottom-a.top,u=aa(n,o/2,l/2);return{outer:{x:a.left,y:a.top,w:o,h:l},inner:{x:a.left+u.l,y:a.top+u.t,w:o-u.l-u.r,h:l-u.t-u.b}}}function gr(n,a,o){var l=a===null,u=o===null,h=!n||l&&u?!1:Yn(n);return h&&(l||a>=h.left&&a<=h.right)&&(u||o>=h.top&&o<=h.bottom)}var oa=Ee.extend({_type:"rectangle",draw:function(){var n=this._chart.ctx,a=this._view,o=sa(a),l=o.outer,u=o.inner;n.fillStyle=a.backgroundColor,n.fillRect(l.x,l.y,l.w,l.h),!(l.w===u.w&&l.h===u.h)&&(n.save(),n.beginPath(),n.rect(l.x,l.y,l.w,l.h),n.clip(),n.fillStyle=a.borderColor,n.rect(u.x,u.y,u.w,u.h),n.fill("evenodd"),n.restore())},height:function(){var n=this._view;return n.base-n.y},inRange:function(n,a){return gr(this._view,n,a)},inLabelRange:function(n,a){var o=this._view;return Tr(o)?gr(o,n,null):gr(o,null,a)},inXRange:function(n){return gr(this._view,n,null)},inYRange:function(n){return gr(this._view,null,n)},getCenterPoint:function(){var n=this._view,a,o;return Tr(n)?(a=n.x,o=(n.y+n.base)/2):(a=(n.x+n.base)/2,o=n.y),{x:a,y:o}},getArea:function(){var n=this._view;return Tr(n)?n.width*Math.abs(n.y-n.base):n.height*Math.abs(n.x-n.base)},tooltipPosition:function(){var n=this._view;return{x:n.x,y:n.y}}}),At={},la=yt,ca=pt,ua=Cr,da=oa;At.Arc=la,At.Line=ca,At.Point=ua,At.Rectangle=da;var mr=U._deprecated,nr=U.valueOrDefault;G._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),G._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});function ha(n,a){var o=n._length,l,u,h,f;for(h=1,f=a.length;h<f;++h)o=Math.min(o,Math.abs(a[h]-a[h-1]));for(h=0,f=n.getTicks().length;h<f;++h)u=n.getPixelForTick(h),o=h>0?Math.min(o,Math.abs(u-l)):o,l=u;return o}function fa(n,a,o){var l=o.barThickness,u=a.stackCount,h=a.pixels[n],f=U.isNullOrUndef(l)?ha(a.scale,a.pixels):-1,_,p;return U.isNullOrUndef(l)?(_=f*o.categoryPercentage,p=o.barPercentage):(_=l*u,p=1),{chunk:_/u,ratio:p,start:h-_/2}}function pa(n,a,o){var l=a.pixels,u=l[n],h=n>0?l[n-1]:null,f=n<l.length-1?l[n+1]:null,_=o.categoryPercentage,p,x;return h===null&&(h=u-(f===null?a.end-a.start:f-u)),f===null&&(f=u+u-h),p=u-(u-Math.min(h,f))/2*_,x=Math.abs(f-h)/2*_,{chunk:x/a.stackCount,ratio:o.barPercentage,start:p}}var qn=Qe.extend({dataElementType:At.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var n=this,a,o;Qe.prototype.initialize.apply(n,arguments),a=n.getMeta(),a.stack=n.getDataset().stack,a.bar=!0,o=n._getIndexScale().options,mr("bar chart",o.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),mr("bar chart",o.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),mr("bar chart",o.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),mr("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),mr("bar chart",o.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(n){var a=this,o=a.getMeta().data,l,u;for(a._ruler=a.getRuler(),l=0,u=o.length;l<u;++l)a.updateElement(o[l],l,n)},updateElement:function(n,a,o){var l=this,u=l.getMeta(),h=l.getDataset(),f=l._resolveDataElementOptions(n,a);n._xScale=l.getScaleForId(u.xAxisID),n._yScale=l.getScaleForId(u.yAxisID),n._datasetIndex=l.index,n._index=a,n._model={backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderSkipped:f.borderSkipped,borderWidth:f.borderWidth,datasetLabel:h.label,label:l.chart.data.labels[a]},U.isArray(h.data[a])&&(n._model.borderSkipped=null),l._updateElementGeometry(n,a,o,f),n.pivot()},_updateElementGeometry:function(n,a,o,l){var u=this,h=n._model,f=u._getValueScale(),_=f.getBasePixel(),p=f.isHorizontal(),x=u._ruler||u.getRuler(),M=u.calculateBarValuePixels(u.index,a,l),I=u.calculateBarIndexPixels(u.index,a,x,l);h.horizontal=p,h.base=o?_:M.base,h.x=p?o?_:M.head:I.center,h.y=p?I.center:o?_:M.head,h.height=p?I.size:void 0,h.width=p?void 0:I.size},_getStacks:function(n){var a=this,o=a._getIndexScale(),l=o._getMatchingVisibleMetas(a._type),u=o.options.stacked,h=l.length,f=[],_,p;for(_=0;_<h&&(p=l[_],(u===!1||f.indexOf(p.stack)===-1||u===void 0&&p.stack===void 0)&&f.push(p.stack),p.index!==n);++_);return f},getStackCount:function(){return this._getStacks().length},getStackIndex:function(n,a){var o=this._getStacks(n),l=a!==void 0?o.indexOf(a):-1;return l===-1?o.length-1:l},getRuler:function(){var n=this,a=n._getIndexScale(),o=[],l,u;for(l=0,u=n.getMeta().data.length;l<u;++l)o.push(a.getPixelForValue(null,l,n.index));return{pixels:o,start:a._startPixel,end:a._endPixel,stackCount:n.getStackCount(),scale:a}},calculateBarValuePixels:function(n,a,o){var l=this,u=l.chart,h=l._getValueScale(),f=h.isHorizontal(),_=u.data.datasets,p=h._getMatchingVisibleMetas(l._type),x=h._parseValue(_[n].data[a]),M=o.minBarLength,I=h.options.stacked,J=l.getMeta().stack,oe=x.start===void 0?0:x.max>=0&&x.min>=0?x.min:x.max,le=x.start===void 0?x.end:x.max>=0&&x.min>=0?x.max-x.min:x.min-x.max,he=p.length,ve,Re,We,Ye,et,Je,lt;if(I||I===void 0&&J!==void 0)for(ve=0;ve<he&&(Re=p[ve],Re.index!==n);++ve)Re.stack===J&&(lt=h._parseValue(_[Re.index].data[a]),We=lt.start===void 0?lt.end:lt.min>=0&&lt.max>=0?lt.max:lt.min,(x.min<0&&We<0||x.max>=0&&We>0)&&(oe+=We));return Ye=h.getPixelForValue(oe),et=h.getPixelForValue(oe+le),Je=et-Ye,M!==void 0&&Math.abs(Je)<M&&(Je=M,le>=0&&!f||le<0&&f?et=Ye-M:et=Ye+M),{size:Je,base:Ye,head:et,center:et+Je/2}},calculateBarIndexPixels:function(n,a,o,l){var u=this,h=l.barThickness==="flex"?pa(a,o,l):fa(a,o,l),f=u.getStackIndex(n,u.getMeta().stack),_=h.start+h.chunk*f+h.chunk/2,p=Math.min(nr(l.maxBarThickness,1/0),h.chunk*h.ratio);return{base:_-p/2,head:_+p/2,center:_,size:p}},draw:function(){var n=this,a=n.chart,o=n._getValueScale(),l=n.getMeta().data,u=n.getDataset(),h=l.length,f=0;for(U.canvas.clipArea(a.ctx,a.chartArea);f<h;++f){var _=o._parseValue(u.data[f]);!isNaN(_.min)&&!isNaN(_.max)&&l[f].draw()}U.canvas.unclipArea(a.ctx)},_resolveDataElementOptions:function(){var n=this,a=U.extend({},Qe.prototype._resolveDataElementOptions.apply(n,arguments)),o=n._getIndexScale().options,l=n._getValueScale().options;return a.barPercentage=nr(o.barPercentage,a.barPercentage),a.barThickness=nr(o.barThickness,a.barThickness),a.categoryPercentage=nr(o.categoryPercentage,a.categoryPercentage),a.maxBarThickness=nr(o.maxBarThickness,a.maxBarThickness),a.minBarLength=nr(l.minBarLength,a.minBarLength),a}}),qr=U.valueOrDefault,ga=U.options.resolve;G._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(n,a){var o=a.datasets[n.datasetIndex].label||"",l=a.datasets[n.datasetIndex].data[n.index];return o+": ("+n.xLabel+", "+n.yLabel+", "+l.r+")"}}}});var ma=Qe.extend({dataElementType:At.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(n){var a=this,o=a.getMeta(),l=o.data;U.each(l,function(u,h){a.updateElement(u,h,n)})},updateElement:function(n,a,o){var l=this,u=l.getMeta(),h=n.custom||{},f=l.getScaleForId(u.xAxisID),_=l.getScaleForId(u.yAxisID),p=l._resolveDataElementOptions(n,a),x=l.getDataset().data[a],M=l.index,I=o?f.getPixelForDecimal(.5):f.getPixelForValue(typeof x=="object"?x:NaN,a,M),J=o?_.getBasePixel():_.getPixelForValue(x,a,M);n._xScale=f,n._yScale=_,n._options=p,n._datasetIndex=M,n._index=a,n._model={backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,hitRadius:p.hitRadius,pointStyle:p.pointStyle,rotation:p.rotation,radius:o?0:p.radius,skip:h.skip||isNaN(I)||isNaN(J),x:I,y:J},n.pivot()},setHoverStyle:function(n){var a=n._model,o=n._options,l=U.getHoverColor;n.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth,radius:a.radius},a.backgroundColor=qr(o.hoverBackgroundColor,l(o.backgroundColor)),a.borderColor=qr(o.hoverBorderColor,l(o.borderColor)),a.borderWidth=qr(o.hoverBorderWidth,o.borderWidth),a.radius=o.radius+o.hoverRadius},_resolveDataElementOptions:function(n,a){var o=this,l=o.chart,u=o.getDataset(),h=n.custom||{},f=u.data[a]||{},_=Qe.prototype._resolveDataElementOptions.apply(o,arguments),p={chart:l,dataIndex:a,dataset:u,datasetIndex:o.index};return o._cachedDataOpts===_&&(_=U.extend({},_)),_.radius=ga([h.radius,f.r,o._config.radius,l.options.elements.point.radius],p,a),_}}),Dr=U.valueOrDefault,Vt=Math.PI,It=Vt*2,qt=Vt/2;G._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(n){var a=document.createElement("ul"),o=n.data,l=o.datasets,u=o.labels,h,f,_,p;if(a.setAttribute("class",n.id+"-legend"),l.length)for(h=0,f=l[0].data.length;h<f;++h)_=a.appendChild(document.createElement("li")),p=_.appendChild(document.createElement("span")),p.style.backgroundColor=l[0].backgroundColor[h],u[h]&&_.appendChild(document.createTextNode(u[h]));return a.outerHTML},legend:{labels:{generateLabels:function(n){var a=n.data;return a.labels.length&&a.datasets.length?a.labels.map(function(o,l){var u=n.getDatasetMeta(0),h=u.controller.getStyle(l);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,lineWidth:h.borderWidth,hidden:isNaN(a.datasets[0].data[l])||u.data[l].hidden,index:l}}):[]}},onClick:function(n,a){var o=a.index,l=this.chart,u,h,f;for(u=0,h=(l.data.datasets||[]).length;u<h;++u)f=l.getDatasetMeta(u),f.data[o]&&(f.data[o].hidden=!f.data[o].hidden);l.update()}},cutoutPercentage:50,rotation:-qt,circumference:It,tooltips:{callbacks:{title:function(){return""},label:function(n,a){var o=a.labels[n.index],l=": "+a.datasets[n.datasetIndex].data[n.index];return U.isArray(o)?(o=o.slice(),o[0]+=l):o+=l,o}}}});var Gn=Qe.extend({dataElementType:At.Arc,linkScales:U.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(n){for(var a=0,o=0;o<n;++o)this.chart.isDatasetVisible(o)&&++a;return a},update:function(n){var a=this,o=a.chart,l=o.chartArea,u=o.options,h=1,f=1,_=0,p=0,x=a.getMeta(),M=x.data,I=u.cutoutPercentage/100||0,J=u.circumference,oe=a._getRingWeight(a.index),le,he,ve,Re;if(J<It){var We=u.rotation%It;We+=We>=Vt?-It:We<-Vt?It:0;var Ye=We+J,et=Math.cos(We),Je=Math.sin(We),lt=Math.cos(Ye),st=Math.sin(Ye),ct=We<=0&&Ye>=0||Ye>=It,ht=We<=qt&&Ye>=qt||Ye>=It+qt,_t=We===-Vt||Ye>=Vt,vt=We<=-qt&&Ye>=-qt||Ye>=Vt+qt,gt=_t?-1:Math.min(et,et*I,lt,lt*I),wt=vt?-1:Math.min(Je,Je*I,st,st*I),lr=ct?1:Math.max(et,et*I,lt,lt*I),cr=ht?1:Math.max(Je,Je*I,st,st*I);h=(lr-gt)/2,f=(cr-wt)/2,_=-(lr+gt)/2,p=-(cr+wt)/2}for(ve=0,Re=M.length;ve<Re;++ve)M[ve]._options=a._resolveDataElementOptions(M[ve],ve);for(o.borderWidth=a.getMaxBorderWidth(),le=(l.right-l.left-o.borderWidth)/h,he=(l.bottom-l.top-o.borderWidth)/f,o.outerRadius=Math.max(Math.min(le,he)/2,0),o.innerRadius=Math.max(o.outerRadius*I,0),o.radiusLength=(o.outerRadius-o.innerRadius)/(a._getVisibleDatasetWeightTotal()||1),o.offsetX=_*o.outerRadius,o.offsetY=p*o.outerRadius,x.total=a.calculateTotal(),a.outerRadius=o.outerRadius-o.radiusLength*a._getRingWeightOffset(a.index),a.innerRadius=Math.max(a.outerRadius-o.radiusLength*oe,0),ve=0,Re=M.length;ve<Re;++ve)a.updateElement(M[ve],ve,n)},updateElement:function(n,a,o){var l=this,u=l.chart,h=u.chartArea,f=u.options,_=f.animation,p=(h.left+h.right)/2,x=(h.top+h.bottom)/2,M=f.rotation,I=f.rotation,J=l.getDataset(),oe=o&&_.animateRotate||n.hidden?0:l.calculateCircumference(J.data[a])*(f.circumference/It),le=o&&_.animateScale?0:l.innerRadius,he=o&&_.animateScale?0:l.outerRadius,ve=n._options||{};U.extend(n,{_datasetIndex:l.index,_index:a,_model:{backgroundColor:ve.backgroundColor,borderColor:ve.borderColor,borderWidth:ve.borderWidth,borderAlign:ve.borderAlign,x:p+u.offsetX,y:x+u.offsetY,startAngle:M,endAngle:I,circumference:oe,outerRadius:he,innerRadius:le,label:U.valueAtIndexOrDefault(J.label,a,u.data.labels[a])}});var Re=n._model;(!o||!_.animateRotate)&&(a===0?Re.startAngle=f.rotation:Re.startAngle=l.getMeta().data[a-1]._model.endAngle,Re.endAngle=Re.startAngle+Re.circumference),n.pivot()},calculateTotal:function(){var n=this.getDataset(),a=this.getMeta(),o=0,l;return U.each(a.data,function(u,h){l=n.data[h],!isNaN(l)&&!u.hidden&&(o+=Math.abs(l))}),o},calculateCircumference:function(n){var a=this.getMeta().total;return a>0&&!isNaN(n)?It*(Math.abs(n)/a):0},getMaxBorderWidth:function(n){var a=this,o=0,l=a.chart,u,h,f,_,p,x,M,I;if(!n){for(u=0,h=l.data.datasets.length;u<h;++u)if(l.isDatasetVisible(u)){f=l.getDatasetMeta(u),n=f.data,u!==a.index&&(p=f.controller);break}}if(!n)return 0;for(u=0,h=n.length;u<h;++u)_=n[u],p?(p._configure(),x=p._resolveDataElementOptions(_,u)):x=_._options,x.borderAlign!=="inner"&&(M=x.borderWidth,I=x.hoverBorderWidth,o=M>o?M:o,o=I>o?I:o);return o},setHoverStyle:function(n){var a=n._model,o=n._options,l=U.getHoverColor;n.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth},a.backgroundColor=Dr(o.hoverBackgroundColor,l(o.backgroundColor)),a.borderColor=Dr(o.hoverBorderColor,l(o.borderColor)),a.borderWidth=Dr(o.hoverBorderWidth,o.borderWidth)},_getRingWeightOffset:function(n){for(var a=0,o=0;o<n;++o)this.chart.isDatasetVisible(o)&&(a+=this._getRingWeight(o));return a},_getRingWeight:function(n){return Math.max(Dr(this.chart.data.datasets[n].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});G._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),G._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var va=qn.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Lt=U.valueOrDefault,_a=U.options.resolve,Gr=U.canvas._isPointInArea;G._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function Zn(n,a){var o=n&&n.options.ticks||{},l=o.reverse,u=o.min===void 0?a:0,h=o.max===void 0?a:0;return{start:l?h:u,end:l?u:h}}function ba(n,a,o){var l=o/2,u=Zn(n,l),h=Zn(a,l);return{top:h.end,right:u.end,bottom:h.start,left:u.start}}function ya(n){var a,o,l,u;return U.isObject(n)?(a=n.top,o=n.right,l=n.bottom,u=n.left):a=o=l=u=n,{top:a,right:o,bottom:l,left:u}}var Xn=Qe.extend({datasetElementType:At.Line,dataElementType:At.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(n){var a=this,o=a.getMeta(),l=o.dataset,u=o.data||[],h=a.chart.options,f=a._config,_=a._showLine=Lt(f.showLine,h.showLines),p,x;for(a._xScale=a.getScaleForId(o.xAxisID),a._yScale=a.getScaleForId(o.yAxisID),_&&(f.tension!==void 0&&f.lineTension===void 0&&(f.lineTension=f.tension),l._scale=a._yScale,l._datasetIndex=a.index,l._children=u,l._model=a._resolveDatasetElementOptions(l),l.pivot()),p=0,x=u.length;p<x;++p)a.updateElement(u[p],p,n);for(_&&l._model.tension!==0&&a.updateBezierControlPoints(),p=0,x=u.length;p<x;++p)u[p].pivot()},updateElement:function(n,a,o){var l=this,u=l.getMeta(),h=n.custom||{},f=l.getDataset(),_=l.index,p=f.data[a],x=l._xScale,M=l._yScale,I=u.dataset._model,J,oe,le=l._resolveDataElementOptions(n,a);J=x.getPixelForValue(typeof p=="object"?p:NaN,a,_),oe=o?M.getBasePixel():l.calculatePointY(p,a,_),n._xScale=x,n._yScale=M,n._options=le,n._datasetIndex=_,n._index=a,n._model={x:J,y:oe,skip:h.skip||isNaN(J)||isNaN(oe),radius:le.radius,pointStyle:le.pointStyle,rotation:le.rotation,backgroundColor:le.backgroundColor,borderColor:le.borderColor,borderWidth:le.borderWidth,tension:Lt(h.tension,I?I.tension:0),steppedLine:I?I.steppedLine:!1,hitRadius:le.hitRadius}},_resolveDatasetElementOptions:function(n){var a=this,o=a._config,l=n.custom||{},u=a.chart.options,h=u.elements.line,f=Qe.prototype._resolveDatasetElementOptions.apply(a,arguments);return f.spanGaps=Lt(o.spanGaps,u.spanGaps),f.tension=Lt(o.lineTension,h.tension),f.steppedLine=_a([l.steppedLine,o.steppedLine,h.stepped]),f.clip=ya(Lt(o.clip,ba(a._xScale,a._yScale,f.borderWidth))),f},calculatePointY:function(n,a,o){var l=this,u=l.chart,h=l._yScale,f=0,_=0,p,x,M,I,J,oe,le;if(h.options.stacked){for(J=+h.getRightValue(n),oe=u._getSortedVisibleDatasetMetas(),le=oe.length,p=0;p<le&&(M=oe[p],M.index!==o);++p)x=u.data.datasets[M.index],M.type==="line"&&M.yAxisID===h.id&&(I=+h.getRightValue(x.data[a]),I<0?_+=I||0:f+=I||0);return J<0?h.getPixelForValue(_+J):h.getPixelForValue(f+J)}return h.getPixelForValue(n)},updateBezierControlPoints:function(){var n=this,a=n.chart,o=n.getMeta(),l=o.dataset._model,u=a.chartArea,h=o.data||[],f,_,p,x;l.spanGaps&&(h=h.filter(function(I){return!I._model.skip}));function M(I,J,oe){return Math.max(Math.min(I,oe),J)}if(l.cubicInterpolationMode==="monotone")U.splineCurveMonotone(h);else for(f=0,_=h.length;f<_;++f)p=h[f]._model,x=U.splineCurve(U.previousItem(h,f)._model,p,U.nextItem(h,f)._model,l.tension),p.controlPointPreviousX=x.previous.x,p.controlPointPreviousY=x.previous.y,p.controlPointNextX=x.next.x,p.controlPointNextY=x.next.y;if(a.options.elements.line.capBezierPoints)for(f=0,_=h.length;f<_;++f)p=h[f]._model,Gr(p,u)&&(f>0&&Gr(h[f-1]._model,u)&&(p.controlPointPreviousX=M(p.controlPointPreviousX,u.left,u.right),p.controlPointPreviousY=M(p.controlPointPreviousY,u.top,u.bottom)),f<h.length-1&&Gr(h[f+1]._model,u)&&(p.controlPointNextX=M(p.controlPointNextX,u.left,u.right),p.controlPointNextY=M(p.controlPointNextY,u.top,u.bottom)))},draw:function(){var n=this,a=n.chart,o=n.getMeta(),l=o.data||[],u=a.chartArea,h=a.canvas,f=0,_=l.length,p;for(n._showLine&&(p=o.dataset._model.clip,U.canvas.clipArea(a.ctx,{left:p.left===!1?0:u.left-p.left,right:p.right===!1?h.width:u.right+p.right,top:p.top===!1?0:u.top-p.top,bottom:p.bottom===!1?h.height:u.bottom+p.bottom}),o.dataset.draw(),U.canvas.unclipArea(a.ctx));f<_;++f)l[f].draw(u)},setHoverStyle:function(n){var a=n._model,o=n._options,l=U.getHoverColor;n.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth,radius:a.radius},a.backgroundColor=Lt(o.hoverBackgroundColor,l(o.backgroundColor)),a.borderColor=Lt(o.hoverBorderColor,l(o.borderColor)),a.borderWidth=Lt(o.hoverBorderWidth,o.borderWidth),a.radius=Lt(o.hoverRadius,o.radius)}}),wa=U.options.resolve;G._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(n){var a=document.createElement("ul"),o=n.data,l=o.datasets,u=o.labels,h,f,_,p;if(a.setAttribute("class",n.id+"-legend"),l.length)for(h=0,f=l[0].data.length;h<f;++h)_=a.appendChild(document.createElement("li")),p=_.appendChild(document.createElement("span")),p.style.backgroundColor=l[0].backgroundColor[h],u[h]&&_.appendChild(document.createTextNode(u[h]));return a.outerHTML},legend:{labels:{generateLabels:function(n){var a=n.data;return a.labels.length&&a.datasets.length?a.labels.map(function(o,l){var u=n.getDatasetMeta(0),h=u.controller.getStyle(l);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,lineWidth:h.borderWidth,hidden:isNaN(a.datasets[0].data[l])||u.data[l].hidden,index:l}}):[]}},onClick:function(n,a){var o=a.index,l=this.chart,u,h,f;for(u=0,h=(l.data.datasets||[]).length;u<h;++u)f=l.getDatasetMeta(u),f.data[o].hidden=!f.data[o].hidden;l.update()}},tooltips:{callbacks:{title:function(){return""},label:function(n,a){return a.labels[n.index]+": "+n.yLabel}}}});var xa=Qe.extend({dataElementType:At.Arc,linkScales:U.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(n){var a=this,o=a.getDataset(),l=a.getMeta(),u=a.chart.options.startAngle||0,h=a._starts=[],f=a._angles=[],_=l.data,p,x,M;for(a._updateRadius(),l.count=a.countVisibleElements(),p=0,x=o.data.length;p<x;p++)h[p]=u,M=a._computeAngle(p),f[p]=M,u+=M;for(p=0,x=_.length;p<x;++p)_[p]._options=a._resolveDataElementOptions(_[p],p),a.updateElement(_[p],p,n)},_updateRadius:function(){var n=this,a=n.chart,o=a.chartArea,l=a.options,u=Math.min(o.right-o.left,o.bottom-o.top);a.outerRadius=Math.max(u/2,0),a.innerRadius=Math.max(l.cutoutPercentage?a.outerRadius/100*l.cutoutPercentage:1,0),a.radiusLength=(a.outerRadius-a.innerRadius)/a.getVisibleDatasetCount(),n.outerRadius=a.outerRadius-a.radiusLength*n.index,n.innerRadius=n.outerRadius-a.radiusLength},updateElement:function(n,a,o){var l=this,u=l.chart,h=l.getDataset(),f=u.options,_=f.animation,p=u.scale,x=u.data.labels,M=p.xCenter,I=p.yCenter,J=f.startAngle,oe=n.hidden?0:p.getDistanceFromCenterForValue(h.data[a]),le=l._starts[a],he=le+(n.hidden?0:l._angles[a]),ve=_.animateScale?0:p.getDistanceFromCenterForValue(h.data[a]),Re=n._options||{};U.extend(n,{_datasetIndex:l.index,_index:a,_scale:p,_model:{backgroundColor:Re.backgroundColor,borderColor:Re.borderColor,borderWidth:Re.borderWidth,borderAlign:Re.borderAlign,x:M,y:I,innerRadius:0,outerRadius:o?ve:oe,startAngle:o&&_.animateRotate?J:le,endAngle:o&&_.animateRotate?J:he,label:U.valueAtIndexOrDefault(x,a,x[a])}}),n.pivot()},countVisibleElements:function(){var n=this.getDataset(),a=this.getMeta(),o=0;return U.each(a.data,function(l,u){!isNaN(n.data[u])&&!l.hidden&&o++}),o},setHoverStyle:function(n){var a=n._model,o=n._options,l=U.getHoverColor,u=U.valueOrDefault;n.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth},a.backgroundColor=u(o.hoverBackgroundColor,l(o.backgroundColor)),a.borderColor=u(o.hoverBorderColor,l(o.borderColor)),a.borderWidth=u(o.hoverBorderWidth,o.borderWidth)},_computeAngle:function(n){var a=this,o=this.getMeta().count,l=a.getDataset(),u=a.getMeta();if(isNaN(l.data[n])||u.data[n].hidden)return 0;var h={chart:a.chart,dataIndex:n,dataset:l,datasetIndex:a.index};return wa([a.chart.options.elements.arc.angle,2*Math.PI/o],h,n)}});G._set("pie",U.clone(G.doughnut)),G._set("pie",{cutoutPercentage:0});var Sa=Gn,Gt=U.valueOrDefault;G._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Aa=Qe.extend({datasetElementType:At.Line,dataElementType:At.Point,linkScales:U.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(n){var a=this,o=a.getMeta(),l=o.dataset,u=o.data||[],h=a.chart.scale,f=a._config,_,p;for(f.tension!==void 0&&f.lineTension===void 0&&(f.lineTension=f.tension),l._scale=h,l._datasetIndex=a.index,l._children=u,l._loop=!0,l._model=a._resolveDatasetElementOptions(l),l.pivot(),_=0,p=u.length;_<p;++_)a.updateElement(u[_],_,n);for(a.updateBezierControlPoints(),_=0,p=u.length;_<p;++_)u[_].pivot()},updateElement:function(n,a,o){var l=this,u=n.custom||{},h=l.getDataset(),f=l.chart.scale,_=f.getPointPositionForValue(a,h.data[a]),p=l._resolveDataElementOptions(n,a),x=l.getMeta().dataset._model,M=o?f.xCenter:_.x,I=o?f.yCenter:_.y;n._scale=f,n._options=p,n._datasetIndex=l.index,n._index=a,n._model={x:M,y:I,skip:u.skip||isNaN(M)||isNaN(I),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:Gt(u.tension,x?x.tension:0),hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(){var n=this,a=n._config,o=n.chart.options,l=Qe.prototype._resolveDatasetElementOptions.apply(n,arguments);return l.spanGaps=Gt(a.spanGaps,o.spanGaps),l.tension=Gt(a.lineTension,o.elements.line.tension),l},updateBezierControlPoints:function(){var n=this,a=n.getMeta(),o=n.chart.chartArea,l=a.data||[],u,h,f,_;a.dataset._model.spanGaps&&(l=l.filter(function(x){return!x._model.skip}));function p(x,M,I){return Math.max(Math.min(x,I),M)}for(u=0,h=l.length;u<h;++u)f=l[u]._model,_=U.splineCurve(U.previousItem(l,u,!0)._model,f,U.nextItem(l,u,!0)._model,f.tension),f.controlPointPreviousX=p(_.previous.x,o.left,o.right),f.controlPointPreviousY=p(_.previous.y,o.top,o.bottom),f.controlPointNextX=p(_.next.x,o.left,o.right),f.controlPointNextY=p(_.next.y,o.top,o.bottom)},setHoverStyle:function(n){var a=n._model,o=n._options,l=U.getHoverColor;n.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth,radius:a.radius},a.backgroundColor=Gt(o.hoverBackgroundColor,l(o.backgroundColor)),a.borderColor=Gt(o.hoverBorderColor,l(o.borderColor)),a.borderWidth=Gt(o.hoverBorderWidth,o.borderWidth),a.radius=Gt(o.hoverRadius,o.radius)}});G._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(n){return"("+n.xLabel+", "+n.yLabel+")"}}}}),G._set("global",{datasets:{scatter:{showLine:!1}}});var ka=Xn,Kn={bar:qn,bubble:ma,doughnut:Gn,horizontalBar:va,line:Xn,polarArea:xa,pie:Sa,radar:Aa,scatter:ka};function Zt(n,a){return n.native?{x:n.x,y:n.y}:U.getRelativePosition(n,a)}function vr(n,a){var o=n._getSortedVisibleDatasetMetas(),l,u,h,f,_,p;for(u=0,f=o.length;u<f;++u)for(l=o[u].data,h=0,_=l.length;h<_;++h)p=l[h],p._view.skip||a(p)}function Zr(n,a){var o=[];return vr(n,function(l){l.inRange(a.x,a.y)&&o.push(l)}),o}function Xr(n,a,o,l){var u=Number.POSITIVE_INFINITY,h=[];return vr(n,function(f){if(!(o&&!f.inRange(a.x,a.y))){var _=f.getCenterPoint(),p=l(a,_);p<u?(h=[f],u=p):p===u&&h.push(f)}}),h}function Kr(n){var a=n.indexOf("x")!==-1,o=n.indexOf("y")!==-1;return function(l,u){var h=a?Math.abs(l.x-u.x):0,f=o?Math.abs(l.y-u.y):0;return Math.sqrt(Math.pow(h,2)+Math.pow(f,2))}}function Jr(n,a,o){var l=Zt(a,n);o.axis=o.axis||"x";var u=Kr(o.axis),h=o.intersect?Zr(n,l):Xr(n,l,!1,u),f=[];return h.length?(n._getSortedVisibleDatasetMetas().forEach(function(_){var p=_.data[h[0]._index];p&&!p._view.skip&&f.push(p)}),f):[]}var ir={modes:{single:function(n,a){var o=Zt(a,n),l=[];return vr(n,function(u){if(u.inRange(o.x,o.y))return l.push(u),l}),l.slice(0,1)},label:Jr,index:Jr,dataset:function(n,a,o){var l=Zt(a,n);o.axis=o.axis||"xy";var u=Kr(o.axis),h=o.intersect?Zr(n,l):Xr(n,l,!1,u);return h.length>0&&(h=n.getDatasetMeta(h[0]._datasetIndex).data),h},"x-axis":function(n,a){return Jr(n,a,{intersect:!1})},point:function(n,a){var o=Zt(a,n);return Zr(n,o)},nearest:function(n,a,o){var l=Zt(a,n);o.axis=o.axis||"xy";var u=Kr(o.axis);return Xr(n,l,o.intersect,u)},x:function(n,a,o){var l=Zt(a,n),u=[],h=!1;return vr(n,function(f){f.inXRange(l.x)&&u.push(f),f.inRange(l.x,l.y)&&(h=!0)}),o.intersect&&!h&&(u=[]),u},y:function(n,a,o){var l=Zt(a,n),u=[],h=!1;return vr(n,function(f){f.inYRange(l.y)&&u.push(f),f.inRange(l.x,l.y)&&(h=!0)}),o.intersect&&!h&&(u=[]),u}}},Qr=U.extend;function _r(n,a){return U.where(n,function(o){return o.pos===a})}function Pr(n,a){return n.sort(function(o,l){var u=a?l:o,h=a?o:l;return u.weight===h.weight?u.index-h.index:u.weight-h.weight})}function Ea(n){var a=[],o,l,u;for(o=0,l=(n||[]).length;o<l;++o)u=n[o],a.push({index:o,box:u,pos:u.position,horizontal:u.isHorizontal(),weight:u.weight});return a}function Ca(n,a){var o,l,u;for(o=0,l=n.length;o<l;++o)u=n[o],u.width=u.horizontal?u.box.fullWidth&&a.availableWidth:a.vBoxMaxWidth,u.height=u.horizontal&&a.hBoxMaxHeight}function Ta(n){var a=Ea(n),o=Pr(_r(a,"left"),!0),l=Pr(_r(a,"right")),u=Pr(_r(a,"top"),!0),h=Pr(_r(a,"bottom"));return{leftAndTop:o.concat(u),rightAndBottom:l.concat(h),chartArea:_r(a,"chartArea"),vertical:o.concat(l),horizontal:u.concat(h)}}function Jn(n,a,o,l){return Math.max(n[o],a[o])+Math.max(n[l],a[l])}function Da(n,a,o){var l=o.box,u=n.maxPadding,h,f;if(o.size&&(n[o.pos]-=o.size),o.size=o.horizontal?l.height:l.width,n[o.pos]+=o.size,l.getPadding){var _=l.getPadding();u.top=Math.max(u.top,_.top),u.left=Math.max(u.left,_.left),u.bottom=Math.max(u.bottom,_.bottom),u.right=Math.max(u.right,_.right)}if(h=a.outerWidth-Jn(u,n,"left","right"),f=a.outerHeight-Jn(u,n,"top","bottom"),h!==n.w||f!==n.h){n.w=h,n.h=f;var p=o.horizontal?[h,n.w]:[f,n.h];return p[0]!==p[1]&&(!isNaN(p[0])||!isNaN(p[1]))}}function Pa(n){var a=n.maxPadding;function o(l){var u=Math.max(a[l]-n[l],0);return n[l]+=u,u}n.y+=o("top"),n.x+=o("left"),o("right"),o("bottom")}function Ma(n,a){var o=a.maxPadding;function l(u){var h={left:0,top:0,right:0,bottom:0};return u.forEach(function(f){h[f]=Math.max(a[f],o[f])}),h}return l(n?["left","right"]:["top","bottom"])}function Mr(n,a,o){var l=[],u,h,f,_,p,x;for(u=0,h=n.length;u<h;++u)f=n[u],_=f.box,_.update(f.width||a.w,f.height||a.h,Ma(f.horizontal,a)),Da(a,o,f)&&(x=!0,l.length&&(p=!0)),_.fullWidth||l.push(f);return p&&Mr(l,a,o)||x}function Qn(n,a,o){var l=o.padding,u=a.x,h=a.y,f,_,p,x;for(f=0,_=n.length;f<_;++f)p=n[f],x=p.box,p.horizontal?(x.left=x.fullWidth?l.left:a.left,x.right=x.fullWidth?o.outerWidth-l.right:a.left+a.w,x.top=h,x.bottom=h+x.height,x.width=x.right-x.left,h=x.bottom):(x.left=u,x.right=u+x.width,x.top=a.top,x.bottom=a.top+a.h,x.height=x.bottom-x.top,u=x.right);a.x=u,a.y=h}G._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var Dt={defaults:{},addBox:function(n,a){n.boxes||(n.boxes=[]),a.fullWidth=a.fullWidth||!1,a.position=a.position||"top",a.weight=a.weight||0,a._layers=a._layers||function(){return[{z:0,draw:function(){a.draw.apply(a,arguments)}}]},n.boxes.push(a)},removeBox:function(n,a){var o=n.boxes?n.boxes.indexOf(a):-1;o!==-1&&n.boxes.splice(o,1)},configure:function(n,a,o){for(var l=["fullWidth","position","weight"],u=l.length,h=0,f;h<u;++h)f=l[h],o.hasOwnProperty(f)&&(a[f]=o[f])},update:function(n,a,o){if(n){var l=n.options.layout||{},u=U.options.toPadding(l.padding),h=a-u.width,f=o-u.height,_=Ta(n.boxes),p=_.vertical,x=_.horizontal,M=Object.freeze({outerWidth:a,outerHeight:o,padding:u,availableWidth:h,vBoxMaxWidth:h/2/p.length,hBoxMaxHeight:f/2}),I=Qr({maxPadding:Qr({},u),w:h,h:f,x:u.left,y:u.top},u);Ca(p.concat(x),M),Mr(p,I,M),Mr(x,I,M)&&Mr(p,I,M),Pa(I),Qn(_.leftAndTop,I,M),I.x+=I.w,I.y+=I.h,Qn(_.rightAndBottom,I,M),n.chartArea={left:I.left,top:I.top,right:I.left+I.w,bottom:I.top+I.h},U.each(_.chartArea,function(J){var oe=J.box;Qr(oe,n.chartArea),oe.update(I.w,I.h)})}}},Oa={acquireContext:function(n){return n&&n.canvas&&(n=n.canvas),n&&n.getContext("2d")||null}},Ra=`/*\r
 * DOM element rendering detection\r
 * https://davidwalsh.name/detect-node-insertion\r
 */\r
@keyframes chartjs-render-animation {\r
	from { opacity: 0.99; }\r
	to { opacity: 1; }\r
}\r
\r
.chartjs-render-monitor {\r
	animation: chartjs-render-animation 0.001s;\r
}\r
\r
/*\r
 * DOM element resizing detection\r
 * https://github.com/marcj/css-element-queries\r
 */\r
.chartjs-size-monitor,\r
.chartjs-size-monitor-expand,\r
.chartjs-size-monitor-shrink {\r
	position: absolute;\r
	direction: ltr;\r
	left: 0;\r
	top: 0;\r
	right: 0;\r
	bottom: 0;\r
	overflow: hidden;\r
	pointer-events: none;\r
	visibility: hidden;\r
	z-index: -1;\r
}\r
\r
.chartjs-size-monitor-expand > div {\r
	position: absolute;\r
	width: 1000000px;\r
	height: 1000000px;\r
	left: 0;\r
	top: 0;\r
}\r
\r
.chartjs-size-monitor-shrink > div {\r
	position: absolute;\r
	width: 200%;\r
	height: 200%;\r
	left: 0;\r
	top: 0;\r
}\r
`,Fa=Object.freeze({__proto__:null,default:Ra}),Ia=s(Fa),xt="$chartjs",en="chartjs-",tn=en+"size-monitor",ei=en+"render-monitor",La=en+"render-animation",ti=["animationstart","webkitAnimationStart"],Na={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function ri(n,a){var o=U.getStyle(n,a),l=o&&o.match(/^(\d+)(\.\d+)?px$/);return l?Number(l[1]):void 0}function $a(n,a){var o=n.style,l=n.getAttribute("height"),u=n.getAttribute("width");if(n[xt]={initial:{height:l,width:u,style:{display:o.display,height:o.height,width:o.width}}},o.display=o.display||"block",u===null||u===""){var h=ri(n,"width");h!==void 0&&(n.width=h)}if(l===null||l==="")if(n.style.height==="")n.height=n.width/(a.options.aspectRatio||2);else{var f=ri(n,"height");h!==void 0&&(n.height=f)}return n}var Ba=function(){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("e",null,a)}catch{}return n}(),ni=Ba?{passive:!0}:!1;function br(n,a,o){n.addEventListener(a,o,ni)}function rn(n,a,o){n.removeEventListener(a,o,ni)}function nn(n,a,o,l,u){return{type:n,chart:a,native:u||null,x:o!==void 0?o:null,y:l!==void 0?l:null}}function Ua(n,a){var o=Na[n.type]||n.type,l=U.getRelativePosition(n,a);return nn(o,a,l.x,l.y,n)}function za(n,a){var o=!1,l=[];return function(){l=Array.prototype.slice.call(arguments),a=a||this,o||(o=!0,U.requestAnimFrame.call(window,function(){o=!1,n.apply(a,l)}))}}function yr(n){var a=document.createElement("div");return a.className=n||"",a}function ja(n){var a=1e6,o=yr(tn),l=yr(tn+"-expand"),u=yr(tn+"-shrink");l.appendChild(yr()),u.appendChild(yr()),o.appendChild(l),o.appendChild(u),o._reset=function(){l.scrollLeft=a,l.scrollTop=a,u.scrollLeft=a,u.scrollTop=a};var h=function(){o._reset(),n()};return br(l,"scroll",h.bind(l,"expand")),br(u,"scroll",h.bind(u,"shrink")),o}function Ha(n,a){var o=n[xt]||(n[xt]={}),l=o.renderProxy=function(u){u.animationName===La&&a()};U.each(ti,function(u){br(n,u,l)}),o.reflow=!!n.offsetParent,n.classList.add(ei)}function Wa(n){var a=n[xt]||{},o=a.renderProxy;o&&(U.each(ti,function(l){rn(n,l,o)}),delete a.renderProxy),n.classList.remove(ei)}function Ya(n,a,o){var l=n[xt]||(n[xt]={}),u=l.resizer=ja(za(function(){if(l.resizer){var h=o.options.maintainAspectRatio&&n.parentNode,f=h?h.clientWidth:0;a(nn("resize",o)),h&&h.clientWidth<f&&o.canvas&&a(nn("resize",o))}}));Ha(n,function(){if(l.resizer){var h=n.parentNode;h&&h!==u.parentNode&&h.insertBefore(u,h.firstChild),u._reset()}})}function Va(n){var a=n[xt]||{},o=a.resizer;delete a.resizer,Wa(n),o&&o.parentNode&&o.parentNode.removeChild(o)}function qa(n,a){var o=n[xt]||(n[xt]={});if(!o.containsStyles){o.containsStyles=!0,a=`/* Chart.js */
`+a;var l=document.createElement("style");l.setAttribute("type","text/css"),l.appendChild(document.createTextNode(a)),n.appendChild(l)}}var ii={disableCSSInjection:!1,_enabled:typeof window<"u"&&typeof document<"u",_ensureLoaded:function(n){if(!this.disableCSSInjection){var a=n.getRootNode?n.getRootNode():document,o=a.host?a:document.head;qa(o,Ia)}},acquireContext:function(n,a){typeof n=="string"?n=document.getElementById(n):n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas);var o=n&&n.getContext&&n.getContext("2d");return o&&o.canvas===n?(this._ensureLoaded(n),$a(n,a),o):null},releaseContext:function(n){var a=n.canvas;if(a[xt]){var o=a[xt].initial;["height","width"].forEach(function(l){var u=o[l];U.isNullOrUndef(u)?a.removeAttribute(l):a.setAttribute(l,u)}),U.each(o.style||{},function(l,u){a.style[u]=l}),a.width=a.width,delete a[xt]}},addEventListener:function(n,a,o){var l=n.canvas;if(a==="resize"){Ya(l,o,n);return}var u=o[xt]||(o[xt]={}),h=u.proxies||(u.proxies={}),f=h[n.id+"_"+a]=function(_){o(Ua(_,n))};br(l,a,f)},removeEventListener:function(n,a,o){var l=n.canvas;if(a==="resize"){Va(l);return}var u=o[xt]||{},h=u.proxies||{},f=h[n.id+"_"+a];f&&rn(l,a,f)}};U.addEvent=br,U.removeEvent=rn;var Ga=ii._enabled?ii:Oa,ar=U.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ga);G._set("global",{plugins:{}});var ut={_plugins:[],_cacheId:0,register:function(n){var a=this._plugins;[].concat(n).forEach(function(o){a.indexOf(o)===-1&&a.push(o)}),this._cacheId++},unregister:function(n){var a=this._plugins;[].concat(n).forEach(function(o){var l=a.indexOf(o);l!==-1&&a.splice(l,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(n,a,o){var l=this.descriptors(n),u=l.length,h,f,_,p,x;for(h=0;h<u;++h)if(f=l[h],_=f.plugin,x=_[a],typeof x=="function"&&(p=[n].concat(o||[]),p.push(f.options),x.apply(_,p)===!1))return!1;return!0},descriptors:function(n){var a=n.$plugins||(n.$plugins={});if(a.id===this._cacheId)return a.descriptors;var o=[],l=[],u=n&&n.config||{},h=u.options&&u.options.plugins||{};return this._plugins.concat(u.plugins||[]).forEach(function(f){var _=o.indexOf(f);if(_===-1){var p=f.id,x=h[p];x!==!1&&(x===!0&&(x=U.clone(G.global.plugins[p])),o.push(f),l.push({plugin:f,options:x||{}}))}}),a.descriptors=l,a.id=this._cacheId,l},_invalidate:function(n){delete n.$plugins}},wr={constructors:{},defaults:{},registerScaleType:function(n,a,o){this.constructors[n]=a,this.defaults[n]=U.clone(o)},getScaleConstructor:function(n){return this.constructors.hasOwnProperty(n)?this.constructors[n]:void 0},getScaleDefaults:function(n){return this.defaults.hasOwnProperty(n)?U.merge(Object.create(null),[G.scale,this.defaults[n]]):{}},updateScaleDefaults:function(n,a){var o=this;o.defaults.hasOwnProperty(n)&&(o.defaults[n]=U.extend(o.defaults[n],a))},addScalesToLayout:function(n){U.each(n.scales,function(a){a.fullWidth=a.options.fullWidth,a.position=a.options.position,a.weight=a.options.weight,Dt.addBox(n,a)})}},Nt=U.valueOrDefault,an=U.rtl.getRtlAdapter;G._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:U.noop,title:function(n,a){var o="",l=a.labels,u=l?l.length:0;if(n.length>0){var h=n[0];h.label?o=h.label:h.xLabel?o=h.xLabel:u>0&&h.index<u&&(o=l[h.index])}return o},afterTitle:U.noop,beforeBody:U.noop,beforeLabel:U.noop,label:function(n,a){var o=a.datasets[n.datasetIndex].label||"";return o&&(o+=": "),U.isNullOrUndef(n.value)?o+=n.yLabel:o+=n.value,o},labelColor:function(n,a){var o=a.getDatasetMeta(n.datasetIndex),l=o.data[n.index],u=l._view;return{borderColor:u.borderColor,backgroundColor:u.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:U.noop,afterBody:U.noop,beforeFooter:U.noop,footer:U.noop,afterFooter:U.noop}}});var ai={average:function(n){if(!n.length)return!1;var a,o,l=0,u=0,h=0;for(a=0,o=n.length;a<o;++a){var f=n[a];if(f&&f.hasValue()){var _=f.tooltipPosition();l+=_.x,u+=_.y,++h}}return{x:l/h,y:u/h}},nearest:function(n,a){var o=a.x,l=a.y,u=Number.POSITIVE_INFINITY,h,f,_;for(h=0,f=n.length;h<f;++h){var p=n[h];if(p&&p.hasValue()){var x=p.getCenterPoint(),M=U.distanceBetweenPoints(a,x);M<u&&(u=M,_=p)}}if(_){var I=_.tooltipPosition();o=I.x,l=I.y}return{x:o,y:l}}};function Ot(n,a){return a&&(U.isArray(a)?Array.prototype.push.apply(n,a):n.push(a)),n}function $t(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Za(n){var a=n._xScale,o=n._yScale||n._scale,l=n._index,u=n._datasetIndex,h=n._chart.getDatasetMeta(u).controller,f=h._getIndexScale(),_=h._getValueScale();return{xLabel:a?a.getLabelForIndex(l,u):"",yLabel:o?o.getLabelForIndex(l,u):"",label:f?""+f.getLabelForIndex(l,u):"",value:_?""+_.getLabelForIndex(l,u):"",index:l,datasetIndex:u,x:n._model.x,y:n._model.y}}function si(n){var a=G.global;return{xPadding:n.xPadding,yPadding:n.yPadding,xAlign:n.xAlign,yAlign:n.yAlign,rtl:n.rtl,textDirection:n.textDirection,bodyFontColor:n.bodyFontColor,_bodyFontFamily:Nt(n.bodyFontFamily,a.defaultFontFamily),_bodyFontStyle:Nt(n.bodyFontStyle,a.defaultFontStyle),_bodyAlign:n.bodyAlign,bodyFontSize:Nt(n.bodyFontSize,a.defaultFontSize),bodySpacing:n.bodySpacing,titleFontColor:n.titleFontColor,_titleFontFamily:Nt(n.titleFontFamily,a.defaultFontFamily),_titleFontStyle:Nt(n.titleFontStyle,a.defaultFontStyle),titleFontSize:Nt(n.titleFontSize,a.defaultFontSize),_titleAlign:n.titleAlign,titleSpacing:n.titleSpacing,titleMarginBottom:n.titleMarginBottom,footerFontColor:n.footerFontColor,_footerFontFamily:Nt(n.footerFontFamily,a.defaultFontFamily),_footerFontStyle:Nt(n.footerFontStyle,a.defaultFontStyle),footerFontSize:Nt(n.footerFontSize,a.defaultFontSize),_footerAlign:n.footerAlign,footerSpacing:n.footerSpacing,footerMarginTop:n.footerMarginTop,caretSize:n.caretSize,cornerRadius:n.cornerRadius,backgroundColor:n.backgroundColor,opacity:0,legendColorBackground:n.multiKeyBackground,displayColors:n.displayColors,borderColor:n.borderColor,borderWidth:n.borderWidth}}function Xa(n,a){var o=n._chart.ctx,l=a.yPadding*2,u=0,h=a.body,f=h.reduce(function(le,he){return le+he.before.length+he.lines.length+he.after.length},0);f+=a.beforeBody.length+a.afterBody.length;var _=a.title.length,p=a.footer.length,x=a.titleFontSize,M=a.bodyFontSize,I=a.footerFontSize;l+=_*x,l+=_?(_-1)*a.titleSpacing:0,l+=_?a.titleMarginBottom:0,l+=f*M,l+=f?(f-1)*a.bodySpacing:0,l+=p?a.footerMarginTop:0,l+=p*I,l+=p?(p-1)*a.footerSpacing:0;var J=0,oe=function(le){u=Math.max(u,o.measureText(le).width+J)};return o.font=U.fontString(x,a._titleFontStyle,a._titleFontFamily),U.each(a.title,oe),o.font=U.fontString(M,a._bodyFontStyle,a._bodyFontFamily),U.each(a.beforeBody.concat(a.afterBody),oe),J=a.displayColors?M+2:0,U.each(h,function(le){U.each(le.before,oe),U.each(le.lines,oe),U.each(le.after,oe)}),J=0,o.font=U.fontString(I,a._footerFontStyle,a._footerFontFamily),U.each(a.footer,oe),u+=2*a.xPadding,{width:u,height:l}}function Ka(n,a){var o=n._model,l=n._chart,u=n._chart.chartArea,h="center",f="center";o.y<a.height?f="top":o.y>l.height-a.height&&(f="bottom");var _,p,x,M,I,J=(u.left+u.right)/2,oe=(u.top+u.bottom)/2;f==="center"?(_=function(he){return he<=J},p=function(he){return he>J}):(_=function(he){return he<=a.width/2},p=function(he){return he>=l.width-a.width/2}),x=function(he){return he+a.width+o.caretSize+o.caretPadding>l.width},M=function(he){return he-a.width-o.caretSize-o.caretPadding<0},I=function(he){return he<=oe?"top":"bottom"},_(o.x)?(h="left",x(o.x)&&(h="center",f=I(o.y))):p(o.x)&&(h="right",M(o.x)&&(h="center",f=I(o.y)));var le=n._options;return{xAlign:le.xAlign?le.xAlign:h,yAlign:le.yAlign?le.yAlign:f}}function Ja(n,a,o,l){var u=n.x,h=n.y,f=n.caretSize,_=n.caretPadding,p=n.cornerRadius,x=o.xAlign,M=o.yAlign,I=f+_,J=p+_;return x==="right"?u-=a.width:x==="center"&&(u-=a.width/2,u+a.width>l.width&&(u=l.width-a.width),u<0&&(u=0)),M==="top"?h+=I:M==="bottom"?h-=a.height+I:h-=a.height/2,M==="center"?x==="left"?u+=I:x==="right"&&(u-=I):x==="left"?u-=J:x==="right"&&(u+=J),{x:u,y:h}}function Or(n,a){return a==="center"?n.x+n.width/2:a==="right"?n.x+n.width-n.xPadding:n.x+n.xPadding}function oi(n){return Ot([],$t(n))}var Qa=Ee.extend({initialize:function(){this._model=si(this._options),this._lastActive=[]},getTitle:function(){var n=this,a=n._options,o=a.callbacks,l=o.beforeTitle.apply(n,arguments),u=o.title.apply(n,arguments),h=o.afterTitle.apply(n,arguments),f=[];return f=Ot(f,$t(l)),f=Ot(f,$t(u)),f=Ot(f,$t(h)),f},getBeforeBody:function(){return oi(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(n,a){var o=this,l=o._options.callbacks,u=[];return U.each(n,function(h){var f={before:[],lines:[],after:[]};Ot(f.before,$t(l.beforeLabel.call(o,h,a))),Ot(f.lines,l.label.call(o,h,a)),Ot(f.after,$t(l.afterLabel.call(o,h,a))),u.push(f)}),u},getAfterBody:function(){return oi(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var n=this,a=n._options.callbacks,o=a.beforeFooter.apply(n,arguments),l=a.footer.apply(n,arguments),u=a.afterFooter.apply(n,arguments),h=[];return h=Ot(h,$t(o)),h=Ot(h,$t(l)),h=Ot(h,$t(u)),h},update:function(n){var a=this,o=a._options,l=a._model,u=a._model=si(o),h=a._active,f=a._data,_={xAlign:l.xAlign,yAlign:l.yAlign},p={x:l.x,y:l.y},x={width:l.width,height:l.height},M={x:l.caretX,y:l.caretY},I,J;if(h.length){u.opacity=1;var oe=[],le=[];M=ai[o.position].call(a,h,a._eventPosition);var he=[];for(I=0,J=h.length;I<J;++I)he.push(Za(h[I]));o.filter&&(he=he.filter(function(ve){return o.filter(ve,f)})),o.itemSort&&(he=he.sort(function(ve,Re){return o.itemSort(ve,Re,f)})),U.each(he,function(ve){oe.push(o.callbacks.labelColor.call(a,ve,a._chart)),le.push(o.callbacks.labelTextColor.call(a,ve,a._chart))}),u.title=a.getTitle(he,f),u.beforeBody=a.getBeforeBody(he,f),u.body=a.getBody(he,f),u.afterBody=a.getAfterBody(he,f),u.footer=a.getFooter(he,f),u.x=M.x,u.y=M.y,u.caretPadding=o.caretPadding,u.labelColors=oe,u.labelTextColors=le,u.dataPoints=he,x=Xa(this,u),_=Ka(this,x),p=Ja(u,x,_,a._chart)}else u.opacity=0;return u.xAlign=_.xAlign,u.yAlign=_.yAlign,u.x=p.x,u.y=p.y,u.width=x.width,u.height=x.height,u.caretX=M.x,u.caretY=M.y,a._model=u,n&&o.custom&&o.custom.call(a,u),a},drawCaret:function(n,a){var o=this._chart.ctx,l=this._view,u=this.getCaretPosition(n,a,l);o.lineTo(u.x1,u.y1),o.lineTo(u.x2,u.y2),o.lineTo(u.x3,u.y3)},getCaretPosition:function(n,a,o){var l,u,h,f,_,p,x=o.caretSize,M=o.cornerRadius,I=o.xAlign,J=o.yAlign,oe=n.x,le=n.y,he=a.width,ve=a.height;if(J==="center")_=le+ve/2,I==="left"?(l=oe,u=l-x,h=l,f=_+x,p=_-x):(l=oe+he,u=l+x,h=l,f=_-x,p=_+x);else if(I==="left"?(u=oe+M+x,l=u-x,h=u+x):I==="right"?(u=oe+he-M-x,l=u-x,h=u+x):(u=o.caretX,l=u-x,h=u+x),J==="top")f=le,_=f-x,p=f;else{f=le+ve,_=f+x,p=f;var Re=h;h=l,l=Re}return{x1:l,x2:u,x3:h,y1:f,y2:_,y3:p}},drawTitle:function(n,a,o){var l=a.title,u=l.length,h,f,_;if(u){var p=an(a.rtl,a.x,a.width);for(n.x=Or(a,a._titleAlign),o.textAlign=p.textAlign(a._titleAlign),o.textBaseline="middle",h=a.titleFontSize,f=a.titleSpacing,o.fillStyle=a.titleFontColor,o.font=U.fontString(h,a._titleFontStyle,a._titleFontFamily),_=0;_<u;++_)o.fillText(l[_],p.x(n.x),n.y+h/2),n.y+=h+f,_+1===u&&(n.y+=a.titleMarginBottom-f)}},drawBody:function(n,a,o){var l=a.bodyFontSize,u=a.bodySpacing,h=a._bodyAlign,f=a.body,_=a.displayColors,p=0,x=_?Or(a,"left"):0,M=an(a.rtl,a.x,a.width),I=function(lt){o.fillText(lt,M.x(n.x+p),n.y+l/2),n.y+=l+u},J,oe,le,he,ve,Re,We,Ye,et=M.textAlign(h);for(o.textAlign=h,o.textBaseline="middle",o.font=U.fontString(l,a._bodyFontStyle,a._bodyFontFamily),n.x=Or(a,et),o.fillStyle=a.bodyFontColor,U.each(a.beforeBody,I),p=_&&et!=="right"?h==="center"?l/2+1:l+2:0,ve=0,We=f.length;ve<We;++ve){for(J=f[ve],oe=a.labelTextColors[ve],le=a.labelColors[ve],o.fillStyle=oe,U.each(J.before,I),he=J.lines,Re=0,Ye=he.length;Re<Ye;++Re){if(_){var Je=M.x(x);o.fillStyle=a.legendColorBackground,o.fillRect(M.leftForLtr(Je,l),n.y,l,l),o.lineWidth=1,o.strokeStyle=le.borderColor,o.strokeRect(M.leftForLtr(Je,l),n.y,l,l),o.fillStyle=le.backgroundColor,o.fillRect(M.leftForLtr(M.xPlus(Je,1),l-2),n.y+1,l-2,l-2),o.fillStyle=oe}I(he[Re])}U.each(J.after,I)}p=0,U.each(a.afterBody,I),n.y-=u},drawFooter:function(n,a,o){var l=a.footer,u=l.length,h,f;if(u){var _=an(a.rtl,a.x,a.width);for(n.x=Or(a,a._footerAlign),n.y+=a.footerMarginTop,o.textAlign=_.textAlign(a._footerAlign),o.textBaseline="middle",h=a.footerFontSize,o.fillStyle=a.footerFontColor,o.font=U.fontString(h,a._footerFontStyle,a._footerFontFamily),f=0;f<u;++f)o.fillText(l[f],_.x(n.x),n.y+h/2),n.y+=h+a.footerSpacing}},drawBackground:function(n,a,o,l){o.fillStyle=a.backgroundColor,o.strokeStyle=a.borderColor,o.lineWidth=a.borderWidth;var u=a.xAlign,h=a.yAlign,f=n.x,_=n.y,p=l.width,x=l.height,M=a.cornerRadius;o.beginPath(),o.moveTo(f+M,_),h==="top"&&this.drawCaret(n,l),o.lineTo(f+p-M,_),o.quadraticCurveTo(f+p,_,f+p,_+M),h==="center"&&u==="right"&&this.drawCaret(n,l),o.lineTo(f+p,_+x-M),o.quadraticCurveTo(f+p,_+x,f+p-M,_+x),h==="bottom"&&this.drawCaret(n,l),o.lineTo(f+M,_+x),o.quadraticCurveTo(f,_+x,f,_+x-M),h==="center"&&u==="left"&&this.drawCaret(n,l),o.lineTo(f,_+M),o.quadraticCurveTo(f,_,f+M,_),o.closePath(),o.fill(),a.borderWidth>0&&o.stroke()},draw:function(){var n=this._chart.ctx,a=this._view;if(a.opacity!==0){var o={width:a.width,height:a.height},l={x:a.x,y:a.y},u=Math.abs(a.opacity<.001)?0:a.opacity,h=a.title.length||a.beforeBody.length||a.body.length||a.afterBody.length||a.footer.length;this._options.enabled&&h&&(n.save(),n.globalAlpha=u,this.drawBackground(l,a,n,o),l.y+=a.yPadding,U.rtl.overrideTextDirection(n,a.textDirection),this.drawTitle(l,a,n),this.drawBody(l,a,n),this.drawFooter(l,a,n),U.rtl.restoreTextDirection(n,a.textDirection),n.restore())}},handleEvent:function(n){var a=this,o=a._options,l=!1;return a._lastActive=a._lastActive||[],n.type==="mouseout"?a._active=[]:(a._active=a._chart.getElementsAtEventForMode(n,o.mode,o),o.reverse&&a._active.reverse()),l=!U.arrayEquals(a._active,a._lastActive),l&&(a._lastActive=a._active,(o.enabled||o.custom)&&(a._eventPosition={x:n.x,y:n.y},a.update(!0),a.pivot())),l}}),es=ai,sn=Qa;sn.positioners=es;var ln=U.valueOrDefault;G._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});function li(){return U.merge(Object.create(null),[].slice.call(arguments),{merger:function(n,a,o,l){if(n==="xAxes"||n==="yAxes"){var u=o[n].length,h,f,_;for(a[n]||(a[n]=[]),h=0;h<u;++h)_=o[n][h],f=ln(_.type,n==="xAxes"?"category":"linear"),h>=a[n].length&&a[n].push({}),!a[n][h].type||_.type&&_.type!==a[n][h].type?U.merge(a[n][h],[wr.getScaleDefaults(f),_]):U.merge(a[n][h],_)}else U._merger(n,a,o,l)}})}function cn(){return U.merge(Object.create(null),[].slice.call(arguments),{merger:function(n,a,o,l){var u=a[n]||Object.create(null),h=o[n];n==="scales"?a[n]=li(u,h):n==="scale"?a[n]=U.merge(u,[wr.getScaleDefaults(h.type),h]):U._merger(n,a,o,l)}})}function ts(n){n=n||Object.create(null);var a=n.data=n.data||{};return a.datasets=a.datasets||[],a.labels=a.labels||[],n.options=cn(G.global,G[n.type],n.options||{}),n}function rs(n){var a=n.options;U.each(n.scales,function(o){Dt.removeBox(n,o)}),a=cn(G.global,G[n.config.type],a),n.options=n.config.options=a,n.ensureScalesHaveIDs(),n.buildOrUpdateScales(),n.tooltip._options=a.tooltips,n.tooltip.initialize()}function ci(n,a,o){var l,u=function(h){return h.id===l};do l=a+o++;while(U.findIndex(n,u)>=0);return l}function ui(n){return n==="top"||n==="bottom"}function di(n,a){return function(o,l){return o[n]===l[n]?o[a]-l[a]:o[n]-l[n]}}var Ut=function(n,a){return this.construct(n,a),this};U.extend(Ut.prototype,{construct:function(n,a){var o=this;a=ts(a);var l=ar.acquireContext(n,a),u=l&&l.canvas,h=u&&u.height,f=u&&u.width;if(o.id=U.uid(),o.ctx=l,o.canvas=u,o.config=a,o.width=f,o.height=h,o.aspectRatio=h?f/h:null,o.options=a.options,o._bufferedRender=!1,o._layers=[],o.chart=o,o.controller=o,Ut.instances[o.id]=o,Object.defineProperty(o,"data",{get:function(){return o.config.data},set:function(_){o.config.data=_}}),!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}o.initialize(),o.update()},initialize:function(){var n=this;return ut.notify(n,"beforeInit"),U.retinaScale(n,n.options.devicePixelRatio),n.bindEvents(),n.options.responsive&&n.resize(!0),n.initToolTip(),ut.notify(n,"afterInit"),n},clear:function(){return U.canvas.clear(this),this},stop:function(){return Xe.cancelAnimation(this),this},resize:function(n){var a=this,o=a.options,l=a.canvas,u=o.maintainAspectRatio&&a.aspectRatio||null,h=Math.max(0,Math.floor(U.getMaximumWidth(l))),f=Math.max(0,Math.floor(u?h/u:U.getMaximumHeight(l)));if(!(a.width===h&&a.height===f)&&(l.width=a.width=h,l.height=a.height=f,l.style.width=h+"px",l.style.height=f+"px",U.retinaScale(a,o.devicePixelRatio),!n)){var _={width:h,height:f};ut.notify(a,"resize",[_]),o.onResize&&o.onResize(a,_),a.stop(),a.update({duration:o.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var n=this.options,a=n.scales||{},o=n.scale;U.each(a.xAxes,function(l,u){l.id||(l.id=ci(a.xAxes,"x-axis-",u))}),U.each(a.yAxes,function(l,u){l.id||(l.id=ci(a.yAxes,"y-axis-",u))}),o&&(o.id=o.id||"scale")},buildOrUpdateScales:function(){var n=this,a=n.options,o=n.scales||{},l=[],u=Object.keys(o).reduce(function(h,f){return h[f]=!1,h},{});a.scales&&(l=l.concat((a.scales.xAxes||[]).map(function(h){return{options:h,dtype:"category",dposition:"bottom"}}),(a.scales.yAxes||[]).map(function(h){return{options:h,dtype:"linear",dposition:"left"}}))),a.scale&&l.push({options:a.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),U.each(l,function(h){var f=h.options,_=f.id,p=ln(f.type,h.dtype);ui(f.position)!==ui(h.dposition)&&(f.position=h.dposition),u[_]=!0;var x=null;if(_ in o&&o[_].type===p)x=o[_],x.options=f,x.ctx=n.ctx,x.chart=n;else{var M=wr.getScaleConstructor(p);if(!M)return;x=new M({id:_,type:p,options:f,ctx:n.ctx,chart:n}),o[x.id]=x}x.mergeTicksOptions(),h.isDefault&&(n.scale=x)}),U.each(u,function(h,f){h||delete o[f]}),n.scales=o,wr.addScalesToLayout(this)},buildOrUpdateControllers:function(){var n=this,a=[],o=n.data.datasets,l,u;for(l=0,u=o.length;l<u;l++){var h=o[l],f=n.getDatasetMeta(l),_=h.type||n.config.type;if(f.type&&f.type!==_&&(n.destroyDatasetMeta(l),f=n.getDatasetMeta(l)),f.type=_,f.order=h.order||0,f.index=l,f.controller)f.controller.updateIndex(l),f.controller.linkScales();else{var p=Kn[f.type];if(p===void 0)throw new Error('"'+f.type+'" is not a chart type.');f.controller=new p(n,l),a.push(f.controller)}}return a},resetElements:function(){var n=this;U.each(n.data.datasets,function(a,o){n.getDatasetMeta(o).controller.reset()},n)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(n){var a=this,o,l;if((!n||typeof n!="object")&&(n={duration:n,lazy:arguments[1]}),rs(a),ut._invalidate(a),ut.notify(a,"beforeUpdate")!==!1){a.tooltip._data=a.data;var u=a.buildOrUpdateControllers();for(o=0,l=a.data.datasets.length;o<l;o++)a.getDatasetMeta(o).controller.buildOrUpdateElements();a.updateLayout(),a.options.animation&&a.options.animation.duration&&U.each(u,function(h){h.reset()}),a.updateDatasets(),a.tooltip.initialize(),a.lastActive=[],ut.notify(a,"afterUpdate"),a._layers.sort(di("z","_idx")),a._bufferedRender?a._bufferedRequest={duration:n.duration,easing:n.easing,lazy:n.lazy}:a.render(n)}},updateLayout:function(){var n=this;ut.notify(n,"beforeLayout")!==!1&&(Dt.update(this,this.width,this.height),n._layers=[],U.each(n.boxes,function(a){a._configure&&a._configure(),n._layers.push.apply(n._layers,a._layers())},n),n._layers.forEach(function(a,o){a._idx=o}),ut.notify(n,"afterScaleUpdate"),ut.notify(n,"afterLayout"))},updateDatasets:function(){var n=this;if(ut.notify(n,"beforeDatasetsUpdate")!==!1){for(var a=0,o=n.data.datasets.length;a<o;++a)n.updateDataset(a);ut.notify(n,"afterDatasetsUpdate")}},updateDataset:function(n){var a=this,o=a.getDatasetMeta(n),l={meta:o,index:n};ut.notify(a,"beforeDatasetUpdate",[l])!==!1&&(o.controller._update(),ut.notify(a,"afterDatasetUpdate",[l]))},render:function(n){var a=this;(!n||typeof n!="object")&&(n={duration:n,lazy:arguments[1]});var o=a.options.animation,l=ln(n.duration,o&&o.duration),u=n.lazy;if(ut.notify(a,"beforeRender")!==!1){var h=function(_){ut.notify(a,"afterRender"),U.callback(o&&o.onComplete,[_],a)};if(o&&l){var f=new qe({numSteps:l/16.66,easing:n.easing||o.easing,render:function(_,p){var x=U.easing.effects[p.easing],M=p.currentStep,I=M/p.numSteps;_.draw(x(I),I,M)},onAnimationProgress:o.onProgress,onAnimationComplete:h});Xe.addAnimation(a,f,l,u)}else a.draw(),h(new qe({numSteps:0,chart:a}));return a}},draw:function(n){var a=this,o,l;if(a.clear(),U.isNullOrUndef(n)&&(n=1),a.transition(n),!(a.width<=0||a.height<=0)&&ut.notify(a,"beforeDraw",[n])!==!1){for(l=a._layers,o=0;o<l.length&&l[o].z<=0;++o)l[o].draw(a.chartArea);for(a.drawDatasets(n);o<l.length;++o)l[o].draw(a.chartArea);a._drawTooltip(n),ut.notify(a,"afterDraw",[n])}},transition:function(n){for(var a=this,o=0,l=(a.data.datasets||[]).length;o<l;++o)a.isDatasetVisible(o)&&a.getDatasetMeta(o).controller.transition(n);a.tooltip.transition(n)},_getSortedDatasetMetas:function(n){var a=this,o=a.data.datasets||[],l=[],u,h;for(u=0,h=o.length;u<h;++u)(!n||a.isDatasetVisible(u))&&l.push(a.getDatasetMeta(u));return l.sort(di("order","index")),l},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(n){var a=this,o,l;if(ut.notify(a,"beforeDatasetsDraw",[n])!==!1){for(o=a._getSortedVisibleDatasetMetas(),l=o.length-1;l>=0;--l)a.drawDataset(o[l],n);ut.notify(a,"afterDatasetsDraw",[n])}},drawDataset:function(n,a){var o=this,l={meta:n,index:n.index,easingValue:a};ut.notify(o,"beforeDatasetDraw",[l])!==!1&&(n.controller.draw(a),ut.notify(o,"afterDatasetDraw",[l]))},_drawTooltip:function(n){var a=this,o=a.tooltip,l={tooltip:o,easingValue:n};ut.notify(a,"beforeTooltipDraw",[l])!==!1&&(o.draw(),ut.notify(a,"afterTooltipDraw",[l]))},getElementAtEvent:function(n){return ir.modes.single(this,n)},getElementsAtEvent:function(n){return ir.modes.label(this,n,{intersect:!0})},getElementsAtXAxis:function(n){return ir.modes["x-axis"](this,n,{intersect:!0})},getElementsAtEventForMode:function(n,a,o){var l=ir.modes[a];return typeof l=="function"?l(this,n,o):[]},getDatasetAtEvent:function(n){return ir.modes.dataset(this,n,{intersect:!0})},getDatasetMeta:function(n){var a=this,o=a.data.datasets[n];o._meta||(o._meta={});var l=o._meta[a.id];return l||(l=o._meta[a.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:o.order||0,index:n}),l},getVisibleDatasetCount:function(){for(var n=0,a=0,o=this.data.datasets.length;a<o;++a)this.isDatasetVisible(a)&&n++;return n},isDatasetVisible:function(n){var a=this.getDatasetMeta(n);return typeof a.hidden=="boolean"?!a.hidden:!this.data.datasets[n].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(n){var a=this.id,o=this.data.datasets[n],l=o._meta&&o._meta[a];l&&(l.controller.destroy(),delete o._meta[a])},destroy:function(){var n=this,a=n.canvas,o,l;for(n.stop(),o=0,l=n.data.datasets.length;o<l;++o)n.destroyDatasetMeta(o);a&&(n.unbindEvents(),U.canvas.clear(n),ar.releaseContext(n.ctx),n.canvas=null,n.ctx=null),ut.notify(n,"destroy"),delete Ut.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var n=this;n.tooltip=new sn({_chart:n,_chartInstance:n,_data:n.data,_options:n.options.tooltips},n)},bindEvents:function(){var n=this,a=n._listeners={},o=function(){n.eventHandler.apply(n,arguments)};U.each(n.options.events,function(l){ar.addEventListener(n,l,o),a[l]=o}),n.options.responsive&&(o=function(){n.resize()},ar.addEventListener(n,"resize",o),a.resize=o)},unbindEvents:function(){var n=this,a=n._listeners;a&&(delete n._listeners,U.each(a,function(o,l){ar.removeEventListener(n,l,o)}))},updateHoverStyle:function(n,a,o){var l=o?"set":"remove",u,h,f;for(h=0,f=n.length;h<f;++h)u=n[h],u&&this.getDatasetMeta(u._datasetIndex).controller[l+"HoverStyle"](u);a==="dataset"&&this.getDatasetMeta(n[0]._datasetIndex).controller["_"+l+"DatasetHoverStyle"]()},eventHandler:function(n){var a=this,o=a.tooltip;if(ut.notify(a,"beforeEvent",[n])!==!1){a._bufferedRender=!0,a._bufferedRequest=null;var l=a.handleEvent(n);o&&(l=o._start?o.handleEvent(n):l|o.handleEvent(n)),ut.notify(a,"afterEvent",[n]);var u=a._bufferedRequest;return u?a.render(u):l&&!a.animating&&(a.stop(),a.render({duration:a.options.hover.animationDuration,lazy:!0})),a._bufferedRender=!1,a._bufferedRequest=null,a}},handleEvent:function(n){var a=this,o=a.options||{},l=o.hover,u=!1;return a.lastActive=a.lastActive||[],n.type==="mouseout"?a.active=[]:a.active=a.getElementsAtEventForMode(n,l.mode,l),U.callback(o.onHover||o.hover.onHover,[n.native,a.active],a),(n.type==="mouseup"||n.type==="click")&&o.onClick&&o.onClick.call(a,n.native,a.active),a.lastActive.length&&a.updateHoverStyle(a.lastActive,l.mode,!1),a.active.length&&l.mode&&a.updateHoverStyle(a.active,l.mode,!0),u=!U.arrayEquals(a.active,a.lastActive),a.lastActive=a.active,u}}),Ut.instances={};var rt=Ut;Ut.Controller=Ut,Ut.types={},U.configMerge=cn,U.scaleMerge=li;var ns=function(){U.where=function(l,u){if(U.isArray(l)&&Array.prototype.filter)return l.filter(u);var h=[];return U.each(l,function(f){u(f)&&h.push(f)}),h},U.findIndex=Array.prototype.findIndex?function(l,u,h){return l.findIndex(u,h)}:function(l,u,h){h=h===void 0?l:h;for(var f=0,_=l.length;f<_;++f)if(u.call(h,l[f],f,l))return f;return-1},U.findNextWhere=function(l,u,h){U.isNullOrUndef(h)&&(h=-1);for(var f=h+1;f<l.length;f++){var _=l[f];if(u(_))return _}},U.findPreviousWhere=function(l,u,h){U.isNullOrUndef(h)&&(h=l.length);for(var f=h-1;f>=0;f--){var _=l[f];if(u(_))return _}},U.isNumber=function(l){return!isNaN(parseFloat(l))&&isFinite(l)},U.almostEquals=function(l,u,h){return Math.abs(l-u)<h},U.almostWhole=function(l,u){var h=Math.round(l);return h-u<=l&&h+u>=l},U.max=function(l){return l.reduce(function(u,h){return isNaN(h)?u:Math.max(u,h)},Number.NEGATIVE_INFINITY)},U.min=function(l){return l.reduce(function(u,h){return isNaN(h)?u:Math.min(u,h)},Number.POSITIVE_INFINITY)},U.sign=Math.sign?function(l){return Math.sign(l)}:function(l){return l=+l,l===0||isNaN(l)?l:l>0?1:-1},U.toRadians=function(l){return l*(Math.PI/180)},U.toDegrees=function(l){return l*(180/Math.PI)},U._decimalPlaces=function(l){if(U.isFinite(l)){for(var u=1,h=0;Math.round(l*u)/u!==l;)u*=10,h++;return h}},U.getAngleFromPoint=function(l,u){var h=u.x-l.x,f=u.y-l.y,_=Math.sqrt(h*h+f*f),p=Math.atan2(f,h);return p<-.5*Math.PI&&(p+=2*Math.PI),{angle:p,distance:_}},U.distanceBetweenPoints=function(l,u){return Math.sqrt(Math.pow(u.x-l.x,2)+Math.pow(u.y-l.y,2))},U.aliasPixel=function(l){return l%2===0?0:.5},U._alignPixel=function(l,u,h){var f=l.currentDevicePixelRatio,_=h/2;return Math.round((u-_)*f)/f+_},U.splineCurve=function(l,u,h,f){var _=l.skip?u:l,p=u,x=h.skip?u:h,M=Math.sqrt(Math.pow(p.x-_.x,2)+Math.pow(p.y-_.y,2)),I=Math.sqrt(Math.pow(x.x-p.x,2)+Math.pow(x.y-p.y,2)),J=M/(M+I),oe=I/(M+I);J=isNaN(J)?0:J,oe=isNaN(oe)?0:oe;var le=f*J,he=f*oe;return{previous:{x:p.x-le*(x.x-_.x),y:p.y-le*(x.y-_.y)},next:{x:p.x+he*(x.x-_.x),y:p.y+he*(x.y-_.y)}}},U.EPSILON=Number.EPSILON||1e-14,U.splineCurveMonotone=function(l){var u=(l||[]).map(function(ve){return{model:ve._model,deltaK:0,mK:0}}),h=u.length,f,_,p,x;for(f=0;f<h;++f)if(p=u[f],!p.model.skip){if(_=f>0?u[f-1]:null,x=f<h-1?u[f+1]:null,x&&!x.model.skip){var M=x.model.x-p.model.x;p.deltaK=M!==0?(x.model.y-p.model.y)/M:0}!_||_.model.skip?p.mK=p.deltaK:!x||x.model.skip?p.mK=_.deltaK:this.sign(_.deltaK)!==this.sign(p.deltaK)?p.mK=0:p.mK=(_.deltaK+p.deltaK)/2}var I,J,oe,le;for(f=0;f<h-1;++f)if(p=u[f],x=u[f+1],!(p.model.skip||x.model.skip)){if(U.almostEquals(p.deltaK,0,this.EPSILON)){p.mK=x.mK=0;continue}I=p.mK/p.deltaK,J=x.mK/p.deltaK,le=Math.pow(I,2)+Math.pow(J,2),!(le<=9)&&(oe=3/Math.sqrt(le),p.mK=I*oe*p.deltaK,x.mK=J*oe*p.deltaK)}var he;for(f=0;f<h;++f)p=u[f],!p.model.skip&&(_=f>0?u[f-1]:null,x=f<h-1?u[f+1]:null,_&&!_.model.skip&&(he=(p.model.x-_.model.x)/3,p.model.controlPointPreviousX=p.model.x-he,p.model.controlPointPreviousY=p.model.y-he*p.mK),x&&!x.model.skip&&(he=(x.model.x-p.model.x)/3,p.model.controlPointNextX=p.model.x+he,p.model.controlPointNextY=p.model.y+he*p.mK))},U.nextItem=function(l,u,h){return h?u>=l.length-1?l[0]:l[u+1]:u>=l.length-1?l[l.length-1]:l[u+1]},U.previousItem=function(l,u,h){return h?u<=0?l[l.length-1]:l[u-1]:u<=0?l[0]:l[u-1]},U.niceNum=function(l,u){var h=Math.floor(U.log10(l)),f=l/Math.pow(10,h),_;return u?f<1.5?_=1:f<3?_=2:f<7?_=5:_=10:f<=1?_=1:f<=2?_=2:f<=5?_=5:_=10,_*Math.pow(10,h)},U.requestAnimFrame=function(){return typeof window>"u"?function(l){l()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l){return window.setTimeout(l,1e3/60)}}(),U.getRelativePosition=function(l,u){var h,f,_=l.originalEvent||l,p=l.target||l.srcElement,x=p.getBoundingClientRect(),M=_.touches;M&&M.length>0?(h=M[0].clientX,f=M[0].clientY):(h=_.clientX,f=_.clientY);var I=parseFloat(U.getStyle(p,"padding-left")),J=parseFloat(U.getStyle(p,"padding-top")),oe=parseFloat(U.getStyle(p,"padding-right")),le=parseFloat(U.getStyle(p,"padding-bottom")),he=x.right-x.left-I-oe,ve=x.bottom-x.top-J-le;return h=Math.round((h-x.left-I)/he*p.width/u.currentDevicePixelRatio),f=Math.round((f-x.top-J)/ve*p.height/u.currentDevicePixelRatio),{x:h,y:f}};function n(l,u,h){var f;return typeof l=="string"?(f=parseInt(l,10),l.indexOf("%")!==-1&&(f=f/100*u.parentNode[h])):f=l,f}function a(l){return l!=null&&l!=="none"}function o(l,u,h){var f=document.defaultView,_=U._getParentNode(l),p=f.getComputedStyle(l)[u],x=f.getComputedStyle(_)[u],M=a(p),I=a(x),J=Number.POSITIVE_INFINITY;return M||I?Math.min(M?n(p,l,h):J,I?n(x,_,h):J):"none"}U.getConstraintWidth=function(l){return o(l,"max-width","clientWidth")},U.getConstraintHeight=function(l){return o(l,"max-height","clientHeight")},U._calculatePadding=function(l,u,h){return u=U.getStyle(l,u),u.indexOf("%")>-1?h*parseInt(u,10)/100:parseInt(u,10)},U._getParentNode=function(l){var u=l.parentNode;return u&&u.toString()==="[object ShadowRoot]"&&(u=u.host),u},U.getMaximumWidth=function(l){var u=U._getParentNode(l);if(!u)return l.clientWidth;var h=u.clientWidth,f=U._calculatePadding(u,"padding-left",h),_=U._calculatePadding(u,"padding-right",h),p=h-f-_,x=U.getConstraintWidth(l);return isNaN(x)?p:Math.min(p,x)},U.getMaximumHeight=function(l){var u=U._getParentNode(l);if(!u)return l.clientHeight;var h=u.clientHeight,f=U._calculatePadding(u,"padding-top",h),_=U._calculatePadding(u,"padding-bottom",h),p=h-f-_,x=U.getConstraintHeight(l);return isNaN(x)?p:Math.min(p,x)},U.getStyle=function(l,u){return l.currentStyle?l.currentStyle[u]:document.defaultView.getComputedStyle(l,null).getPropertyValue(u)},U.retinaScale=function(l,u){var h=l.currentDevicePixelRatio=u||typeof window<"u"&&window.devicePixelRatio||1;if(h!==1){var f=l.canvas,_=l.height,p=l.width;f.height=_*h,f.width=p*h,l.ctx.scale(h,h),!f.style.height&&!f.style.width&&(f.style.height=_+"px",f.style.width=p+"px")}},U.fontString=function(l,u,h){return u+" "+l+"px "+h},U.longestText=function(l,u,h,f){f=f||{};var _=f.data=f.data||{},p=f.garbageCollect=f.garbageCollect||[];f.font!==u&&(_=f.data={},p=f.garbageCollect=[],f.font=u),l.font=u;var x=0,M=h.length,I,J,oe,le,he;for(I=0;I<M;I++)if(le=h[I],le!=null&&U.isArray(le)!==!0)x=U.measureText(l,_,p,x,le);else if(U.isArray(le))for(J=0,oe=le.length;J<oe;J++)he=le[J],he!=null&&!U.isArray(he)&&(x=U.measureText(l,_,p,x,he));var ve=p.length/2;if(ve>h.length){for(I=0;I<ve;I++)delete _[p[I]];p.splice(0,ve)}return x},U.measureText=function(l,u,h,f,_){var p=u[_];return p||(p=u[_]=l.measureText(_).width,h.push(_)),p>f&&(f=p),f},U.numberOfLabelLines=function(l){var u=1;return U.each(l,function(h){U.isArray(h)&&h.length>u&&(u=h.length)}),u},U.color=$e?function(l){return l instanceof CanvasGradient&&(l=G.global.defaultColor),$e(l)}:function(l){return console.error("Color.js not found!"),l},U.getHoverColor=function(l){return l instanceof CanvasPattern||l instanceof CanvasGradient?l:U.color(l).saturate(.5).darken(.1).rgbString()}};function Xt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Rr(n){this.options=n||{}}U.extend(Rr.prototype,{formats:Xt,parse:Xt,format:Xt,add:Xt,diff:Xt,startOf:Xt,endOf:Xt,_create:function(n){return n}}),Rr.override=function(n){U.extend(Rr.prototype,n)};var is=Rr,un={_date:is},xr={formatters:{values:function(n){return U.isArray(n)?n:""+n},linear:function(n,a,o){var l=o.length>3?o[2]-o[1]:o[1]-o[0];Math.abs(l)>1&&n!==Math.floor(n)&&(l=n-Math.floor(n));var u=U.log10(Math.abs(l)),h="";if(n!==0){var f=Math.max(Math.abs(o[0]),Math.abs(o[o.length-1]));if(f<1e-4){var _=U.log10(Math.abs(n)),p=Math.floor(_)-Math.floor(u);p=Math.max(Math.min(p,20),0),h=n.toExponential(p)}else{var x=-1*Math.floor(u);x=Math.max(Math.min(x,20),0),h=n.toFixed(x)}}else h="0";return h},logarithmic:function(n,a,o){var l=n/Math.pow(10,Math.floor(U.log10(n)));return n===0?"0":l===1||l===2||l===5||a===0||a===o.length-1?n.toExponential():""}}},Kt=U.isArray,Sr=U.isNullOrUndef,Jt=U.valueOrDefault,sr=U.valueAtIndexOrDefault;G._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:xr.formatters.values,minor:{},major:{}}});function ss(n,a){for(var o=[],l=n.length/a,u=0,h=n.length;u<h;u+=l)o.push(n[Math.floor(u)]);return o}function os(n,a,o){var l=n.getTicks().length,u=Math.min(a,l-1),h=n.getPixelForTick(u),f=n._startPixel,_=n._endPixel,p=1e-6,x;if(!(o&&(l===1?x=Math.max(h-f,_-h):a===0?x=(n.getPixelForTick(1)-h)/2:x=(h-n.getPixelForTick(u-1))/2,h+=u<a?x:-x,h<f-p||h>_+p)))return h}function ls(n,a){U.each(n,function(o){var l=o.gc,u=l.length/2,h;if(u>a){for(h=0;h<u;++h)delete o.data[l[h]];l.splice(0,u)}})}function cs(n,a,o,l){var u=o.length,h=[],f=[],_=[],p=0,x=0,M,I,J,oe,le,he,ve,Re,We,Ye,et,Je,lt;for(M=0;M<u;++M){if(oe=o[M].label,le=o[M].major?a.major:a.minor,n.font=he=le.string,ve=l[he]=l[he]||{data:{},gc:[]},Re=le.lineHeight,We=Ye=0,!Sr(oe)&&!Kt(oe))We=U.measureText(n,ve.data,ve.gc,We,oe),Ye=Re;else if(Kt(oe))for(I=0,J=oe.length;I<J;++I)et=oe[I],!Sr(et)&&!Kt(et)&&(We=U.measureText(n,ve.data,ve.gc,We,et),Ye+=Re);h.push(We),f.push(Ye),_.push(Re/2),p=Math.max(We,p),x=Math.max(Ye,x)}ls(l,u),Je=h.indexOf(p),lt=f.indexOf(x);function st(ct){return{width:h[ct]||0,height:f[ct]||0,offset:_[ct]||0}}return{first:st(0),last:st(u-1),widest:st(Je),highest:st(lt)}}function Ar(n){return n.drawTicks?n.tickMarkLength:0}function dn(n){var a,o;return n.display?(a=U.options._parseFont(n),o=U.options.toPadding(n.padding),a.lineHeight+o.height):0}function hi(n,a){return U.extend(U.options._parseFont({fontFamily:Jt(a.fontFamily,n.fontFamily),fontSize:Jt(a.fontSize,n.fontSize),fontStyle:Jt(a.fontStyle,n.fontStyle),lineHeight:Jt(a.lineHeight,n.lineHeight)}),{color:U.options.resolve([a.fontColor,n.fontColor,G.global.defaultFontColor])})}function hn(n){var a=hi(n,n.minor),o=n.major.enabled?hi(n,n.major):a;return{minor:a,major:o}}function fn(n){var a=[],o,l,u;for(l=0,u=n.length;l<u;++l)o=n[l],typeof o._index<"u"&&a.push(o);return a}function us(n){var a=n.length,o,l;if(a<2)return!1;for(l=n[0],o=1;o<a;++o)if(n[o]-n[o-1]!==l)return!1;return l}function ds(n,a,o,l){var u=us(n),h=(a.length-1)/l,f,_,p,x;if(!u)return Math.max(h,1);for(f=U.math._factorize(u),p=0,x=f.length-1;p<x;p++)if(_=f[p],_>h)return _;return Math.max(h,1)}function hs(n){var a=[],o,l;for(o=0,l=n.length;o<l;o++)n[o].major&&a.push(o);return a}function fs(n,a,o){var l=0,u=a[0],h,f;for(o=Math.ceil(o),h=0;h<n.length;h++)f=n[h],h===u?(f._index=h,l++,u=a[l*o]):delete f.label}function Fr(n,a,o,l){var u=Jt(o,0),h=Math.min(Jt(l,n.length),n.length),f=0,_,p,x,M;for(a=Math.ceil(a),l&&(_=l-o,a=_/Math.floor(_/a)),M=u;M<0;)f++,M=Math.round(u+f*a);for(p=Math.max(u,0);p<h;p++)x=n[p],p===M?(x._index=p,f++,M=Math.round(u+f*a)):delete x.label}var pn=Ee.extend({zeroLineIndex:0,getPadding:function(){var n=this;return{left:n.paddingLeft||0,top:n.paddingTop||0,right:n.paddingRight||0,bottom:n.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){U.callback(this.options.beforeUpdate,[this])},update:function(n,a,o){var l=this,u=l.options.ticks,h=u.sampleSize,f,_,p,x,M;if(l.beforeUpdate(),l.maxWidth=n,l.maxHeight=a,l.margins=U.extend({left:0,right:0,top:0,bottom:0},o),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),x=l.buildTicks()||[],x=l.afterBuildTicks(x)||x,(!x||!x.length)&&l.ticks)for(x=[],f=0,_=l.ticks.length;f<_;++f)x.push({value:l.ticks[f],major:!1});return l._ticks=x,M=h<x.length,p=l._convertTicksToLabels(M?ss(x,h):x),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=u.display&&(u.autoSkip||u.source==="auto")?l._autoSkip(x):x,M&&(p=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=p,l.afterUpdate(),l.minSize},_configure:function(){var n=this,a=n.options.ticks.reverse,o,l;n.isHorizontal()?(o=n.left,l=n.right):(o=n.top,l=n.bottom,a=!a),n._startPixel=o,n._endPixel=l,n._reversePixels=a,n._length=l-o},afterUpdate:function(){U.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){U.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var n=this;n.isHorizontal()?(n.width=n.maxWidth,n.left=0,n.right=n.width):(n.height=n.maxHeight,n.top=0,n.bottom=n.height),n.paddingLeft=0,n.paddingTop=0,n.paddingRight=0,n.paddingBottom=0},afterSetDimensions:function(){U.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){U.callback(this.options.beforeDataLimits,[this])},determineDataLimits:U.noop,afterDataLimits:function(){U.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){U.callback(this.options.beforeBuildTicks,[this])},buildTicks:U.noop,afterBuildTicks:function(n){var a=this;return Kt(n)&&n.length?U.callback(a.options.afterBuildTicks,[a,n]):(a.ticks=U.callback(a.options.afterBuildTicks,[a,a.ticks])||a.ticks,n)},beforeTickToLabelConversion:function(){U.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var n=this,a=n.options.ticks;n.ticks=n.ticks.map(a.userCallback||a.callback,this)},afterTickToLabelConversion:function(){U.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){U.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var n=this,a=n.options,o=a.ticks,l=n.getTicks().length,u=o.minRotation||0,h=o.maxRotation,f=u,_,p,x,M,I,J,oe;if(!n._isVisible()||!o.display||u>=h||l<=1||!n.isHorizontal()){n.labelRotation=u;return}_=n._getLabelSizes(),p=_.widest.width,x=_.highest.height-_.highest.offset,M=Math.min(n.maxWidth,n.chart.width-p),I=a.offset?n.maxWidth/l:M/(l-1),p+6>I&&(I=M/(l-(a.offset?.5:1)),J=n.maxHeight-Ar(a.gridLines)-o.padding-dn(a.scaleLabel),oe=Math.sqrt(p*p+x*x),f=U.toDegrees(Math.min(Math.asin(Math.min((_.highest.height+6)/I,1)),Math.asin(Math.min(J/oe,1))-Math.asin(x/oe))),f=Math.max(u,Math.min(h,f))),n.labelRotation=f},afterCalculateTickRotation:function(){U.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){U.callback(this.options.beforeFit,[this])},fit:function(){var n=this,a=n.minSize={width:0,height:0},o=n.chart,l=n.options,u=l.ticks,h=l.scaleLabel,f=l.gridLines,_=n._isVisible(),p=l.position==="bottom",x=n.isHorizontal();if(x?a.width=n.maxWidth:_&&(a.width=Ar(f)+dn(h)),x?_&&(a.height=Ar(f)+dn(h)):a.height=n.maxHeight,u.display&&_){var M=hn(u),I=n._getLabelSizes(),J=I.first,oe=I.last,le=I.widest,he=I.highest,ve=M.minor.lineHeight*.4,Re=u.padding;if(x){var We=n.labelRotation!==0,Ye=U.toRadians(n.labelRotation),et=Math.cos(Ye),Je=Math.sin(Ye),lt=Je*le.width+et*(he.height-(We?he.offset:0))+(We?0:ve);a.height=Math.min(n.maxHeight,a.height+lt+Re);var st=n.getPixelForTick(0)-n.left,ct=n.right-n.getPixelForTick(n.getTicks().length-1),ht,_t;We?(ht=p?et*J.width+Je*J.offset:Je*(J.height-J.offset),_t=p?Je*(oe.height-oe.offset):et*oe.width+Je*oe.offset):(ht=J.width/2,_t=oe.width/2),n.paddingLeft=Math.max((ht-st)*n.width/(n.width-st),0)+3,n.paddingRight=Math.max((_t-ct)*n.width/(n.width-ct),0)+3}else{var vt=u.mirror?0:le.width+Re+ve;a.width=Math.min(n.maxWidth,a.width+vt),n.paddingTop=J.height/2,n.paddingBottom=oe.height/2}}n.handleMargins(),x?(n.width=n._length=o.width-n.margins.left-n.margins.right,n.height=a.height):(n.width=a.width,n.height=n._length=o.height-n.margins.top-n.margins.bottom)},handleMargins:function(){var n=this;n.margins&&(n.margins.left=Math.max(n.paddingLeft,n.margins.left),n.margins.top=Math.max(n.paddingTop,n.margins.top),n.margins.right=Math.max(n.paddingRight,n.margins.right),n.margins.bottom=Math.max(n.paddingBottom,n.margins.bottom))},afterFit:function(){U.callback(this.options.afterFit,[this])},isHorizontal:function(){var n=this.options.position;return n==="top"||n==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(n){if(Sr(n))return NaN;if((typeof n=="number"||n instanceof Number)&&!isFinite(n))return NaN;if(n){if(this.isHorizontal()){if(n.x!==void 0)return this.getRightValue(n.x)}else if(n.y!==void 0)return this.getRightValue(n.y)}return n},_convertTicksToLabels:function(n){var a=this,o,l,u;for(a.ticks=n.map(function(h){return h.value}),a.beforeTickToLabelConversion(),o=a.convertTicksToLabels(n)||a.ticks,a.afterTickToLabelConversion(),l=0,u=n.length;l<u;++l)n[l].label=o[l];return o},_getLabelSizes:function(){var n=this,a=n._labelSizes;return a||(n._labelSizes=a=cs(n.ctx,hn(n.options.ticks),n.getTicks(),n.longestTextCache),n.longestLabelWidth=a.widest.width),a},_parseValue:function(n){var a,o,l,u;return Kt(n)?(a=+this.getRightValue(n[0]),o=+this.getRightValue(n[1]),l=Math.min(a,o),u=Math.max(a,o)):(n=+this.getRightValue(n),a=void 0,o=n,l=n,u=n),{min:l,max:u,start:a,end:o}},_getScaleLabel:function(n){var a=this._parseValue(n);return a.start!==void 0?"["+a.start+", "+a.end+"]":+this.getRightValue(n)},getLabelForIndex:U.noop,getPixelForValue:U.noop,getValueForPixel:U.noop,getPixelForTick:function(n){var a=this,o=a.options.offset,l=a._ticks.length,u=1/Math.max(l-(o?0:1),1);return n<0||n>l-1?null:a.getPixelForDecimal(n*u+(o?u/2:0))},getPixelForDecimal:function(n){var a=this;return a._reversePixels&&(n=1-n),a._startPixel+n*a._length},getDecimalForPixel:function(n){var a=(n-this._startPixel)/this._length;return this._reversePixels?1-a:a},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var n=this,a=n.min,o=n.max;return n.beginAtZero?0:a<0&&o<0?o:a>0&&o>0?a:0},_autoSkip:function(n){var a=this,o=a.options.ticks,l=a._length,u=o.maxTicksLimit||l/a._tickSize()+1,h=o.major.enabled?hs(n):[],f=h.length,_=h[0],p=h[f-1],x,M,I,J;if(f>u)return fs(n,h,f/u),fn(n);if(I=ds(h,n,l,u),f>0){for(x=0,M=f-1;x<M;x++)Fr(n,I,h[x],h[x+1]);return J=f>1?(p-_)/(f-1):null,Fr(n,I,U.isNullOrUndef(J)?0:_-J,_),Fr(n,I,p,U.isNullOrUndef(J)?n.length:p+J),fn(n)}return Fr(n,I),fn(n)},_tickSize:function(){var n=this,a=n.options.ticks,o=U.toRadians(n.labelRotation),l=Math.abs(Math.cos(o)),u=Math.abs(Math.sin(o)),h=n._getLabelSizes(),f=a.autoSkipPadding||0,_=h?h.widest.width+f:0,p=h?h.highest.height+f:0;return n.isHorizontal()?p*l>_*u?_/l:p/u:p*u<_*l?p/l:_/u},_isVisible:function(){var n=this,a=n.chart,o=n.options.display,l,u,h;if(o!=="auto")return!!o;for(l=0,u=a.data.datasets.length;l<u;++l)if(a.isDatasetVisible(l)&&(h=a.getDatasetMeta(l),h.xAxisID===n.id||h.yAxisID===n.id))return!0;return!1},_computeGridLineItems:function(n){var a=this,o=a.chart,l=a.options,u=l.gridLines,h=l.position,f=u.offsetGridLines,_=a.isHorizontal(),p=a._ticksToDraw,x=p.length+(f?1:0),M=Ar(u),I=[],J=u.drawBorder?sr(u.lineWidth,0,0):0,oe=J/2,le=U._alignPixel,he=function(po){return le(o,po,J)},ve,Re,We,Ye,et,Je,lt,st,ct,ht,_t,vt,gt,wt,lr,cr,Sn;for(h==="top"?(ve=he(a.bottom),lt=a.bottom-M,ct=ve-oe,_t=he(n.top)+oe,gt=n.bottom):h==="bottom"?(ve=he(a.top),_t=n.top,gt=he(n.bottom)-oe,lt=ve+oe,ct=a.top+M):h==="left"?(ve=he(a.right),Je=a.right-M,st=ve-oe,ht=he(n.left)+oe,vt=n.right):(ve=he(a.left),ht=n.left,vt=he(n.right)-oe,Je=ve+oe,st=a.left+M),Re=0;Re<x;++Re)We=p[Re]||{},!(Sr(We.label)&&Re<p.length)&&(Re===a.zeroLineIndex&&l.offset===f?(wt=u.zeroLineWidth,lr=u.zeroLineColor,cr=u.zeroLineBorderDash||[],Sn=u.zeroLineBorderDashOffset||0):(wt=sr(u.lineWidth,Re,1),lr=sr(u.color,Re,"rgba(0,0,0,0.1)"),cr=u.borderDash||[],Sn=u.borderDashOffset||0),Ye=os(a,We._index||Re,f),Ye!==void 0&&(et=le(o,Ye,wt),_?Je=st=ht=vt=et:lt=ct=_t=gt=et,I.push({tx1:Je,ty1:lt,tx2:st,ty2:ct,x1:ht,y1:_t,x2:vt,y2:gt,width:wt,color:lr,borderDash:cr,borderDashOffset:Sn})));return I.ticksLength=x,I.borderValue=ve,I},_computeLabelItems:function(){var n=this,a=n.options,o=a.ticks,l=a.position,u=o.mirror,h=n.isHorizontal(),f=n._ticksToDraw,_=hn(o),p=o.padding,x=Ar(a.gridLines),M=-U.toRadians(n.labelRotation),I=[],J,oe,le,he,ve,Re,We,Ye,et,Je,lt,st;for(l==="top"?(Re=n.bottom-x-p,We=M?"left":"center"):l==="bottom"?(Re=n.top+x+p,We=M?"right":"center"):l==="left"?(ve=n.right-(u?0:x)-p,We=u?"left":"right"):(ve=n.left+(u?0:x)+p,We=u?"right":"left"),J=0,oe=f.length;J<oe;++J)le=f[J],he=le.label,!Sr(he)&&(Ye=n.getPixelForTick(le._index||J)+o.labelOffset,et=le.major?_.major:_.minor,Je=et.lineHeight,lt=Kt(he)?he.length:1,h?(ve=Ye,st=l==="top"?((M?1:.5)-lt)*Je:(M?0:.5)*Je):(Re=Ye,st=(1-lt)*Je/2),I.push({x:ve,y:Re,rotation:M,label:he,font:et,textOffset:st,textAlign:We}));return I},_drawGrid:function(n){var a=this,o=a.options.gridLines;if(o.display){var l=a.ctx,u=a.chart,h=U._alignPixel,f=o.drawBorder?sr(o.lineWidth,0,0):0,_=a._gridLineItems||(a._gridLineItems=a._computeGridLineItems(n)),p,x,M,I,J;for(M=0,I=_.length;M<I;++M)J=_[M],p=J.width,x=J.color,p&&x&&(l.save(),l.lineWidth=p,l.strokeStyle=x,l.setLineDash&&(l.setLineDash(J.borderDash),l.lineDashOffset=J.borderDashOffset),l.beginPath(),o.drawTicks&&(l.moveTo(J.tx1,J.ty1),l.lineTo(J.tx2,J.ty2)),o.drawOnChartArea&&(l.moveTo(J.x1,J.y1),l.lineTo(J.x2,J.y2)),l.stroke(),l.restore());if(f){var oe=f,le=sr(o.lineWidth,_.ticksLength-1,1),he=_.borderValue,ve,Re,We,Ye;a.isHorizontal()?(ve=h(u,a.left,oe)-oe/2,Re=h(u,a.right,le)+le/2,We=Ye=he):(We=h(u,a.top,oe)-oe/2,Ye=h(u,a.bottom,le)+le/2,ve=Re=he),l.lineWidth=f,l.strokeStyle=sr(o.color,0),l.beginPath(),l.moveTo(ve,We),l.lineTo(Re,Ye),l.stroke()}}},_drawLabels:function(){var n=this,a=n.options.ticks;if(a.display){var o=n.ctx,l=n._labelItems||(n._labelItems=n._computeLabelItems()),u,h,f,_,p,x,M,I;for(u=0,f=l.length;u<f;++u){if(p=l[u],x=p.font,o.save(),o.translate(p.x,p.y),o.rotate(p.rotation),o.font=x.string,o.fillStyle=x.color,o.textBaseline="middle",o.textAlign=p.textAlign,M=p.label,I=p.textOffset,Kt(M))for(h=0,_=M.length;h<_;++h)o.fillText(""+M[h],0,I),I+=x.lineHeight;else o.fillText(M,0,I);o.restore()}}},_drawTitle:function(){var n=this,a=n.ctx,o=n.options,l=o.scaleLabel;if(l.display){var u=Jt(l.fontColor,G.global.defaultFontColor),h=U.options._parseFont(l),f=U.options.toPadding(l.padding),_=h.lineHeight/2,p=o.position,x=0,M,I;if(n.isHorizontal())M=n.left+n.width/2,I=p==="bottom"?n.bottom-_-f.bottom:n.top+_+f.top;else{var J=p==="left";M=J?n.left+_+f.top:n.right-_-f.top,I=n.top+n.height/2,x=J?-.5*Math.PI:.5*Math.PI}a.save(),a.translate(M,I),a.rotate(x),a.textAlign="center",a.textBaseline="middle",a.fillStyle=u,a.font=h.string,a.fillText(l.labelString,0,0),a.restore()}},draw:function(n){var a=this;a._isVisible()&&(a._drawGrid(n),a._drawTitle(),a._drawLabels())},_layers:function(){var n=this,a=n.options,o=a.ticks&&a.ticks.z||0,l=a.gridLines&&a.gridLines.z||0;return!n._isVisible()||o===l||n.draw!==n._draw?[{z:o,draw:function(){n.draw.apply(n,arguments)}}]:[{z:l,draw:function(){n._drawGrid.apply(n,arguments),n._drawTitle.apply(n,arguments)}},{z:o,draw:function(){n._drawLabels.apply(n,arguments)}}]},_getMatchingVisibleMetas:function(n){var a=this,o=a.isHorizontal();return a.chart._getSortedVisibleDatasetMetas().filter(function(l){return(!n||l.type===n)&&(o?l.xAxisID===a.id:l.yAxisID===a.id)})}});pn.prototype._draw=pn.prototype.draw;var kt=pn,gn=U.isNullOrUndef,ps={position:"bottom"},fi=kt.extend({determineDataLimits:function(){var n=this,a=n._getLabels(),o=n.options.ticks,l=o.min,u=o.max,h=0,f=a.length-1,_;l!==void 0&&(_=a.indexOf(l),_>=0&&(h=_)),u!==void 0&&(_=a.indexOf(u),_>=0&&(f=_)),n.minIndex=h,n.maxIndex=f,n.min=a[h],n.max=a[f]},buildTicks:function(){var n=this,a=n._getLabels(),o=n.minIndex,l=n.maxIndex;n.ticks=o===0&&l===a.length-1?a:a.slice(o,l+1)},getLabelForIndex:function(n,a){var o=this,l=o.chart;return l.getDatasetMeta(a).controller._getValueScaleId()===o.id?o.getRightValue(l.data.datasets[a].data[n]):o._getLabels()[n]},_configure:function(){var n=this,a=n.options.offset,o=n.ticks;kt.prototype._configure.call(n),n.isHorizontal()||(n._reversePixels=!n._reversePixels),o&&(n._startValue=n.minIndex-(a?.5:0),n._valueRange=Math.max(o.length-(a?0:1),1))},getPixelForValue:function(n,a,o){var l=this,u,h,f;return!gn(a)&&!gn(o)&&(n=l.chart.data.datasets[o].data[a]),gn(n)||(u=l.isHorizontal()?n.x:n.y),(u!==void 0||n!==void 0&&isNaN(a))&&(h=l._getLabels(),n=U.valueOrDefault(u,n),f=h.indexOf(n),a=f!==-1?f:a,isNaN(a)&&(a=n)),l.getPixelForDecimal((a-l._startValue)/l._valueRange)},getPixelForTick:function(n){var a=this.ticks;return n<0||n>a.length-1?null:this.getPixelForValue(a[n],n+this.minIndex)},getValueForPixel:function(n){var a=this,o=Math.round(a._startValue+a.getDecimalForPixel(n)*a._valueRange);return Math.min(Math.max(o,0),a.ticks.length-1)},getBasePixel:function(){return this.bottom}}),gs=ps;fi._defaults=gs;var ms=U.noop,Qt=U.isNullOrUndef;function vs(n,a){var o=[],l=1e-14,u=n.stepSize,h=u||1,f=n.maxTicks-1,_=n.min,p=n.max,x=n.precision,M=a.min,I=a.max,J=U.niceNum((I-M)/f/h)*h,oe,le,he,ve;if(J<l&&Qt(_)&&Qt(p))return[M,I];ve=Math.ceil(I/J)-Math.floor(M/J),ve>f&&(J=U.niceNum(ve*J/f/h)*h),u||Qt(x)?oe=Math.pow(10,U._decimalPlaces(J)):(oe=Math.pow(10,x),J=Math.ceil(J*oe)/oe),le=Math.floor(M/J)*J,he=Math.ceil(I/J)*J,u&&(!Qt(_)&&U.almostWhole(_/J,J/1e3)&&(le=_),!Qt(p)&&U.almostWhole(p/J,J/1e3)&&(he=p)),ve=(he-le)/J,U.almostEquals(ve,Math.round(ve),J/1e3)?ve=Math.round(ve):ve=Math.ceil(ve),le=Math.round(le*oe)/oe,he=Math.round(he*oe)/oe,o.push(Qt(_)?le:_);for(var Re=1;Re<ve;++Re)o.push(Math.round((le+Re*J)*oe)/oe);return o.push(Qt(p)?he:p),o}var Ir=kt.extend({getRightValue:function(n){return typeof n=="string"?+n:kt.prototype.getRightValue.call(this,n)},handleTickRangeOptions:function(){var n=this,a=n.options,o=a.ticks;if(o.beginAtZero){var l=U.sign(n.min),u=U.sign(n.max);l<0&&u<0?n.max=0:l>0&&u>0&&(n.min=0)}var h=o.min!==void 0||o.suggestedMin!==void 0,f=o.max!==void 0||o.suggestedMax!==void 0;o.min!==void 0?n.min=o.min:o.suggestedMin!==void 0&&(n.min===null?n.min=o.suggestedMin:n.min=Math.min(n.min,o.suggestedMin)),o.max!==void 0?n.max=o.max:o.suggestedMax!==void 0&&(n.max===null?n.max=o.suggestedMax:n.max=Math.max(n.max,o.suggestedMax)),h!==f&&n.min>=n.max&&(h?n.max=n.min+1:n.min=n.max-1),n.min===n.max&&(n.max++,o.beginAtZero||n.min--)},getTickLimit:function(){var n=this,a=n.options.ticks,o=a.stepSize,l=a.maxTicksLimit,u;return o?u=Math.ceil(n.max/o)-Math.floor(n.min/o)+1:(u=n._computeTickLimit(),l=l||11),l&&(u=Math.min(l,u)),u},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ms,buildTicks:function(){var n=this,a=n.options,o=a.ticks,l=n.getTickLimit();l=Math.max(2,l);var u={maxTicks:l,min:o.min,max:o.max,precision:o.precision,stepSize:U.valueOrDefault(o.fixedStepSize,o.stepSize)},h=n.ticks=vs(u,n);n.handleDirectionalChanges(),n.max=U.max(h),n.min=U.min(h),o.reverse?(h.reverse(),n.start=n.max,n.end=n.min):(n.start=n.min,n.end=n.max)},convertTicksToLabels:function(){var n=this;n.ticksAsNumbers=n.ticks.slice(),n.zeroLineIndex=n.ticks.indexOf(0),kt.prototype.convertTicksToLabels.call(n)},_configure:function(){var n=this,a=n.getTicks(),o=n.min,l=n.max,u;kt.prototype._configure.call(n),n.options.offset&&a.length&&(u=(l-o)/Math.max(a.length-1,1)/2,o-=u,l+=u),n._startValue=o,n._endValue=l,n._valueRange=l-o}}),_s={position:"left",ticks:{callback:xr.formatters.linear}},bs=0,ys=1;function ws(n,a,o){var l=[o.type,a===void 0&&o.stack===void 0?o.index:"",o.stack].join(".");return n[l]===void 0&&(n[l]={pos:[],neg:[]}),n[l]}function xs(n,a,o,l){var u=n.options,h=u.stacked,f=ws(a,h,o),_=f.pos,p=f.neg,x=l.length,M,I;for(M=0;M<x;++M)I=n._parseValue(l[M]),!(isNaN(I.min)||isNaN(I.max)||o.data[M].hidden)&&(_[M]=_[M]||0,p[M]=p[M]||0,u.relativePoints?_[M]=100:I.min<0||I.max<0?p[M]+=I.min:_[M]+=I.max)}function Ss(n,a,o){var l=o.length,u,h;for(u=0;u<l;++u)h=n._parseValue(o[u]),!(isNaN(h.min)||isNaN(h.max)||a.data[u].hidden)&&(n.min=Math.min(n.min,h.min),n.max=Math.max(n.max,h.max))}var pi=Ir.extend({determineDataLimits:function(){var n=this,a=n.options,o=n.chart,l=o.data.datasets,u=n._getMatchingVisibleMetas(),h=a.stacked,f={},_=u.length,p,x,M,I;if(n.min=Number.POSITIVE_INFINITY,n.max=Number.NEGATIVE_INFINITY,h===void 0)for(p=0;!h&&p<_;++p)x=u[p],h=x.stack!==void 0;for(p=0;p<_;++p)x=u[p],M=l[x.index].data,h?xs(n,f,x,M):Ss(n,x,M);U.each(f,function(J){I=J.pos.concat(J.neg),n.min=Math.min(n.min,U.min(I)),n.max=Math.max(n.max,U.max(I))}),n.min=U.isFinite(n.min)&&!isNaN(n.min)?n.min:bs,n.max=U.isFinite(n.max)&&!isNaN(n.max)?n.max:ys,n.handleTickRangeOptions()},_computeTickLimit:function(){var n=this,a;return n.isHorizontal()?Math.ceil(n.width/40):(a=U.options._parseFont(n.options.ticks),Math.ceil(n.height/a.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(n,a){return this._getScaleLabel(this.chart.data.datasets[a].data[n])},getPixelForValue:function(n){var a=this;return a.getPixelForDecimal((+a.getRightValue(n)-a._startValue)/a._valueRange)},getValueForPixel:function(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange},getPixelForTick:function(n){var a=this.ticksAsNumbers;return n<0||n>a.length-1?null:this.getPixelForValue(a[n])}}),As=_s;pi._defaults=As;var mn=U.valueOrDefault,Et=U.math.log10;function ks(n,a){var o=[],l=mn(n.min,Math.pow(10,Math.floor(Et(a.min)))),u=Math.floor(Et(a.max)),h=Math.ceil(a.max/Math.pow(10,u)),f,_;l===0?(f=Math.floor(Et(a.minNotZero)),_=Math.floor(a.minNotZero/Math.pow(10,f)),o.push(l),l=_*Math.pow(10,f)):(f=Math.floor(Et(l)),_=Math.floor(l/Math.pow(10,f)));var p=f<0?Math.pow(10,Math.abs(f)):1;do o.push(l),++_,_===10&&(_=1,++f,p=f>=0?1:p),l=Math.round(_*Math.pow(10,f)*p)/p;while(f<u||f===u&&_<h);var x=mn(n.max,l);return o.push(x),o}var Es={position:"left",ticks:{callback:xr.formatters.logarithmic}};function Lr(n,a){return U.isFinite(n)&&n>=0?n:a}var gi=kt.extend({determineDataLimits:function(){var n=this,a=n.options,o=n.chart,l=o.data.datasets,u=n.isHorizontal();function h(ve){return u?ve.xAxisID===n.id:ve.yAxisID===n.id}var f,_,p,x,M,I;n.min=Number.POSITIVE_INFINITY,n.max=Number.NEGATIVE_INFINITY,n.minNotZero=Number.POSITIVE_INFINITY;var J=a.stacked;if(J===void 0){for(f=0;f<l.length;f++)if(_=o.getDatasetMeta(f),o.isDatasetVisible(f)&&h(_)&&_.stack!==void 0){J=!0;break}}if(a.stacked||J){var oe={};for(f=0;f<l.length;f++){_=o.getDatasetMeta(f);var le=[_.type,a.stacked===void 0&&_.stack===void 0?f:"",_.stack].join(".");if(o.isDatasetVisible(f)&&h(_))for(oe[le]===void 0&&(oe[le]=[]),x=l[f].data,M=0,I=x.length;M<I;M++){var he=oe[le];p=n._parseValue(x[M]),!(isNaN(p.min)||isNaN(p.max)||_.data[M].hidden||p.min<0||p.max<0)&&(he[M]=he[M]||0,he[M]+=p.max)}}U.each(oe,function(ve){if(ve.length>0){var Re=U.min(ve),We=U.max(ve);n.min=Math.min(n.min,Re),n.max=Math.max(n.max,We)}})}else for(f=0;f<l.length;f++)if(_=o.getDatasetMeta(f),o.isDatasetVisible(f)&&h(_))for(x=l[f].data,M=0,I=x.length;M<I;M++)p=n._parseValue(x[M]),!(isNaN(p.min)||isNaN(p.max)||_.data[M].hidden||p.min<0||p.max<0)&&(n.min=Math.min(p.min,n.min),n.max=Math.max(p.max,n.max),p.min!==0&&(n.minNotZero=Math.min(p.min,n.minNotZero)));n.min=U.isFinite(n.min)?n.min:null,n.max=U.isFinite(n.max)?n.max:null,n.minNotZero=U.isFinite(n.minNotZero)?n.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var n=this,a=n.options.ticks,o=1,l=10;n.min=Lr(a.min,n.min),n.max=Lr(a.max,n.max),n.min===n.max&&(n.min!==0&&n.min!==null?(n.min=Math.pow(10,Math.floor(Et(n.min))-1),n.max=Math.pow(10,Math.floor(Et(n.max))+1)):(n.min=o,n.max=l)),n.min===null&&(n.min=Math.pow(10,Math.floor(Et(n.max))-1)),n.max===null&&(n.max=n.min!==0?Math.pow(10,Math.floor(Et(n.min))+1):l),n.minNotZero===null&&(n.min>0?n.minNotZero=n.min:n.max<1?n.minNotZero=Math.pow(10,Math.floor(Et(n.max))):n.minNotZero=o)},buildTicks:function(){var n=this,a=n.options.ticks,o=!n.isHorizontal(),l={min:Lr(a.min),max:Lr(a.max)},u=n.ticks=ks(l,n);n.max=U.max(u),n.min=U.min(u),a.reverse?(o=!o,n.start=n.max,n.end=n.min):(n.start=n.min,n.end=n.max),o&&u.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),kt.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(n,a){return this._getScaleLabel(this.chart.data.datasets[a].data[n])},getPixelForTick:function(n){var a=this.tickValues;return n<0||n>a.length-1?null:this.getPixelForValue(a[n])},_getFirstTickValue:function(n){var a=Math.floor(Et(n)),o=Math.floor(n/Math.pow(10,a));return o*Math.pow(10,a)},_configure:function(){var n=this,a=n.min,o=0;kt.prototype._configure.call(n),a===0&&(a=n._getFirstTickValue(n.minNotZero),o=mn(n.options.ticks.fontSize,G.global.defaultFontSize)/n._length),n._startValue=Et(a),n._valueOffset=o,n._valueRange=(Et(n.max)-Et(a))/(1-o)},getPixelForValue:function(n){var a=this,o=0;return n=+a.getRightValue(n),n>a.min&&n>0&&(o=(Et(n)-a._startValue)/a._valueRange+a._valueOffset),a.getPixelForDecimal(o)},getValueForPixel:function(n){var a=this,o=a.getDecimalForPixel(n);return o===0&&a.min===0?0:Math.pow(10,a._startValue+(o-a._valueOffset)*a._valueRange)}}),Cs=Es;gi._defaults=Cs;var Nr=U.valueOrDefault,vn=U.valueAtIndexOrDefault,mi=U.options.resolve,Ts={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:xr.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(n){return n}}};function _n(n){var a=n.ticks;return a.display&&n.display?Nr(a.fontSize,G.global.defaultFontSize)+a.backdropPaddingY*2:0}function Ds(n,a,o){return U.isArray(o)?{w:U.longestText(n,n.font,o),h:o.length*a}:{w:n.measureText(o).width,h:a}}function vi(n,a,o,l,u){return n===l||n===u?{start:a-o/2,end:a+o/2}:n<l||n>u?{start:a-o,end:a}:{start:a,end:a+o}}function Ps(n){var a=U.options._parseFont(n.options.pointLabels),o={l:0,r:n.width,t:0,b:n.height-n.paddingTop},l={},u,h,f;n.ctx.font=a.string,n._pointLabelSizes=[];var _=n.chart.data.labels.length;for(u=0;u<_;u++){f=n.getPointPosition(u,n.drawingArea+5),h=Ds(n.ctx,a.lineHeight,n.pointLabels[u]),n._pointLabelSizes[u]=h;var p=n.getIndexAngle(u),x=U.toDegrees(p)%360,M=vi(x,f.x,h.w,0,180),I=vi(x,f.y,h.h,90,270);M.start<o.l&&(o.l=M.start,l.l=p),M.end>o.r&&(o.r=M.end,l.r=p),I.start<o.t&&(o.t=I.start,l.t=p),I.end>o.b&&(o.b=I.end,l.b=p)}n.setReductions(n.drawingArea,o,l)}function Ms(n){return n===0||n===180?"center":n<180?"left":"right"}function Os(n,a,o,l){var u=o.y+l/2,h,f;if(U.isArray(a))for(h=0,f=a.length;h<f;++h)n.fillText(a[h],o.x,u),u+=l;else n.fillText(a,o.x,u)}function Rs(n,a,o){n===90||n===270?o.y-=a.h/2:(n>270||n<90)&&(o.y-=a.h)}function Fs(n){var a=n.ctx,o=n.options,l=o.pointLabels,u=_n(o),h=n.getDistanceFromCenterForValue(o.ticks.reverse?n.min:n.max),f=U.options._parseFont(l);a.save(),a.font=f.string,a.textBaseline="middle";for(var _=n.chart.data.labels.length-1;_>=0;_--){var p=_===0?u/2:0,x=n.getPointPosition(_,h+p+5),M=vn(l.fontColor,_,G.global.defaultFontColor);a.fillStyle=M;var I=n.getIndexAngle(_),J=U.toDegrees(I);a.textAlign=Ms(J),Rs(J,n._pointLabelSizes[_],x),Os(a,n.pointLabels[_],x,f.lineHeight)}a.restore()}function Is(n,a,o,l){var u=n.ctx,h=a.circular,f=n.chart.data.labels.length,_=vn(a.color,l-1),p=vn(a.lineWidth,l-1),x;if(!(!h&&!f||!_||!p)){if(u.save(),u.strokeStyle=_,u.lineWidth=p,u.setLineDash&&(u.setLineDash(a.borderDash||[]),u.lineDashOffset=a.borderDashOffset||0),u.beginPath(),h)u.arc(n.xCenter,n.yCenter,o,0,Math.PI*2);else{x=n.getPointPosition(0,o),u.moveTo(x.x,x.y);for(var M=1;M<f;M++)x=n.getPointPosition(M,o),u.lineTo(x.x,x.y)}u.closePath(),u.stroke(),u.restore()}}function $r(n){return U.isNumber(n)?n:0}var _i=Ir.extend({setDimensions:function(){var n=this;n.width=n.maxWidth,n.height=n.maxHeight,n.paddingTop=_n(n.options)/2,n.xCenter=Math.floor(n.width/2),n.yCenter=Math.floor((n.height-n.paddingTop)/2),n.drawingArea=Math.min(n.height-n.paddingTop,n.width)/2},determineDataLimits:function(){var n=this,a=n.chart,o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;U.each(a.data.datasets,function(u,h){if(a.isDatasetVisible(h)){var f=a.getDatasetMeta(h);U.each(u.data,function(_,p){var x=+n.getRightValue(_);isNaN(x)||f.data[p].hidden||(o=Math.min(x,o),l=Math.max(x,l))})}}),n.min=o===Number.POSITIVE_INFINITY?0:o,n.max=l===Number.NEGATIVE_INFINITY?0:l,n.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/_n(this.options))},convertTicksToLabels:function(){var n=this;Ir.prototype.convertTicksToLabels.call(n),n.pointLabels=n.chart.data.labels.map(function(){var a=U.callback(n.options.pointLabels.callback,arguments,n);return a||a===0?a:""})},getLabelForIndex:function(n,a){return+this.getRightValue(this.chart.data.datasets[a].data[n])},fit:function(){var n=this,a=n.options;a.display&&a.pointLabels.display?Ps(n):n.setCenterPoint(0,0,0,0)},setReductions:function(n,a,o){var l=this,u=a.l/Math.sin(o.l),h=Math.max(a.r-l.width,0)/Math.sin(o.r),f=-a.t/Math.cos(o.t),_=-Math.max(a.b-(l.height-l.paddingTop),0)/Math.cos(o.b);u=$r(u),h=$r(h),f=$r(f),_=$r(_),l.drawingArea=Math.min(Math.floor(n-(u+h)/2),Math.floor(n-(f+_)/2)),l.setCenterPoint(u,h,f,_)},setCenterPoint:function(n,a,o,l){var u=this,h=u.width-a-u.drawingArea,f=n+u.drawingArea,_=o+u.drawingArea,p=u.height-u.paddingTop-l-u.drawingArea;u.xCenter=Math.floor((f+h)/2+u.left),u.yCenter=Math.floor((_+p)/2+u.top+u.paddingTop)},getIndexAngle:function(n){var a=this.chart,o=360/a.data.labels.length,l=a.options||{},u=l.startAngle||0,h=(n*o+u)%360;return(h<0?h+360:h)*Math.PI*2/360},getDistanceFromCenterForValue:function(n){var a=this;if(U.isNullOrUndef(n))return NaN;var o=a.drawingArea/(a.max-a.min);return a.options.ticks.reverse?(a.max-n)*o:(n-a.min)*o},getPointPosition:function(n,a){var o=this,l=o.getIndexAngle(n)-Math.PI/2;return{x:Math.cos(l)*a+o.xCenter,y:Math.sin(l)*a+o.yCenter}},getPointPositionForValue:function(n,a){return this.getPointPosition(n,this.getDistanceFromCenterForValue(a))},getBasePosition:function(n){var a=this,o=a.min,l=a.max;return a.getPointPositionForValue(n||0,a.beginAtZero?0:o<0&&l<0?l:o>0&&l>0?o:0)},_drawGrid:function(){var n=this,a=n.ctx,o=n.options,l=o.gridLines,u=o.angleLines,h=Nr(u.lineWidth,l.lineWidth),f=Nr(u.color,l.color),_,p,x;if(o.pointLabels.display&&Fs(n),l.display&&U.each(n.ticks,function(M,I){I!==0&&(p=n.getDistanceFromCenterForValue(n.ticksAsNumbers[I]),Is(n,l,p,I))}),u.display&&h&&f){for(a.save(),a.lineWidth=h,a.strokeStyle=f,a.setLineDash&&(a.setLineDash(mi([u.borderDash,l.borderDash,[]])),a.lineDashOffset=mi([u.borderDashOffset,l.borderDashOffset,0])),_=n.chart.data.labels.length-1;_>=0;_--)p=n.getDistanceFromCenterForValue(o.ticks.reverse?n.min:n.max),x=n.getPointPosition(_,p),a.beginPath(),a.moveTo(n.xCenter,n.yCenter),a.lineTo(x.x,x.y),a.stroke();a.restore()}},_drawLabels:function(){var n=this,a=n.ctx,o=n.options,l=o.ticks;if(l.display){var u=n.getIndexAngle(0),h=U.options._parseFont(l),f=Nr(l.fontColor,G.global.defaultFontColor),_,p;a.save(),a.font=h.string,a.translate(n.xCenter,n.yCenter),a.rotate(u),a.textAlign="center",a.textBaseline="middle",U.each(n.ticks,function(x,M){M===0&&!l.reverse||(_=n.getDistanceFromCenterForValue(n.ticksAsNumbers[M]),l.showLabelBackdrop&&(p=a.measureText(x).width,a.fillStyle=l.backdropColor,a.fillRect(-p/2-l.backdropPaddingX,-_-h.size/2-l.backdropPaddingY,p+l.backdropPaddingX*2,h.size+l.backdropPaddingY*2)),a.fillStyle=f,a.fillText(x,0,-_))}),a.restore()}},_drawTitle:U.noop}),Ls=Ts;_i._defaults=Ls;var bn=U._deprecated,bi=U.options.resolve,Ns=U.valueOrDefault,yi=Number.MIN_SAFE_INTEGER||-9007199254740991,yn=Number.MAX_SAFE_INTEGER||9007199254740991,Br={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ct=Object.keys(Br);function wi(n,a){return n-a}function $s(n){var a={},o=[],l,u,h;for(l=0,u=n.length;l<u;++l)h=n[l],a[h]||(a[h]=!0,o.push(h));return o}function xi(n){return U.valueOrDefault(n.time.min,n.ticks.min)}function Si(n){return U.valueOrDefault(n.time.max,n.ticks.max)}function Bs(n,a,o,l){if(l==="linear"||!n.length)return[{time:a,pos:0},{time:o,pos:1}];var u=[],h=[a],f,_,p,x,M;for(f=0,_=n.length;f<_;++f)x=n[f],x>a&&x<o&&h.push(x);for(h.push(o),f=0,_=h.length;f<_;++f)M=h[f+1],p=h[f-1],x=h[f],(p===void 0||M===void 0||Math.round((M+p)/2)!==x)&&u.push({time:x,pos:f/(_-1)});return u}function Us(n,a,o){for(var l=0,u=n.length-1,h,f,_;l>=0&&l<=u;)if(h=l+u>>1,f=n[h-1]||null,_=n[h],f)if(_[a]<o)l=h+1;else if(f[a]>o)u=h-1;else return{lo:f,hi:_};else return{lo:null,hi:_};return{lo:_,hi:null}}function or(n,a,o,l){var u=Us(n,a,o),h=u.lo?u.hi?u.lo:n[n.length-2]:n[0],f=u.lo?u.hi?u.hi:n[n.length-1]:n[1],_=f[a]-h[a],p=_?(o-h[a])/_:0,x=(f[l]-h[l])*p;return h[l]+x}function wn(n,a){var o=n._adapter,l=n.options.time,u=l.parser,h=u||l.format,f=a;return typeof u=="function"&&(f=u(f)),U.isFinite(f)||(f=typeof h=="string"?o.parse(f,h):o.parse(f)),f!==null?+f:(!u&&typeof h=="function"&&(f=h(a),U.isFinite(f)||(f=o.parse(f))),f)}function er(n,a){if(U.isNullOrUndef(a))return null;var o=n.options.time,l=wn(n,n.getRightValue(a));return l===null||o.round&&(l=+n._adapter.startOf(l,o.round)),l}function Ai(n,a,o,l){var u=Ct.length,h,f,_;for(h=Ct.indexOf(n);h<u-1;++h)if(f=Br[Ct[h]],_=f.steps?f.steps:yn,f.common&&Math.ceil((o-a)/(_*f.size))<=l)return Ct[h];return Ct[u-1]}function zs(n,a,o,l,u){var h,f;for(h=Ct.length-1;h>=Ct.indexOf(o);h--)if(f=Ct[h],Br[f].common&&n._adapter.diff(u,l,f)>=a-1)return f;return Ct[o?Ct.indexOf(o):0]}function js(n){for(var a=Ct.indexOf(n)+1,o=Ct.length;a<o;++a)if(Br[Ct[a]].common)return Ct[a]}function Hs(n,a,o,l){var u=n._adapter,h=n.options,f=h.time,_=f.unit||Ai(f.minUnit,a,o,l),p=bi([f.stepSize,f.unitStepSize,1]),x=_==="week"?f.isoWeekday:!1,M=a,I=[],J;if(x&&(M=+u.startOf(M,"isoWeek",x)),M=+u.startOf(M,x?"day":_),u.diff(o,a,_)>1e5*p)throw a+" and "+o+" are too far apart with stepSize of "+p+" "+_;for(J=M;J<o;J=+u.add(J,p,_))I.push(J);return(J===o||h.bounds==="ticks")&&I.push(J),I}function Ws(n,a,o,l,u){var h=0,f=0,_,p;return u.offset&&a.length&&(_=or(n,"time",a[0],"pos"),a.length===1?h=1-_:h=(or(n,"time",a[1],"pos")-_)/2,p=or(n,"time",a[a.length-1],"pos"),a.length===1?f=p:f=(p-or(n,"time",a[a.length-2],"pos"))/2),{start:h,end:f,factor:1/(h+1+f)}}function Ys(n,a,o,l){var u=n._adapter,h=+u.startOf(a[0].value,l),f=a[a.length-1].value,_,p;for(_=h;_<=f;_=+u.add(_,1,l))p=o[_],p>=0&&(a[p].major=!0);return a}function ki(n,a,o){var l=[],u={},h=a.length,f,_;for(f=0;f<h;++f)_=a[f],u[_]=f,l.push({value:_,major:!1});return h===0||!o?l:Ys(n,l,u,o)}var Vs={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},Ei=kt.extend({initialize:function(){this.mergeTicksOptions(),kt.prototype.initialize.call(this)},update:function(){var n=this,a=n.options,o=a.time||(a.time={}),l=n._adapter=new un._date(a.adapters.date);return bn("time scale",o.format,"time.format","time.parser"),bn("time scale",o.min,"time.min","ticks.min"),bn("time scale",o.max,"time.max","ticks.max"),U.mergeIf(o.displayFormats,l.formats()),kt.prototype.update.apply(n,arguments)},getRightValue:function(n){return n&&n.t!==void 0&&(n=n.t),kt.prototype.getRightValue.call(this,n)},determineDataLimits:function(){var n=this,a=n.chart,o=n._adapter,l=n.options,u=l.time.unit||"day",h=yn,f=yi,_=[],p=[],x=[],M,I,J,oe,le,he,ve,Re=n._getLabels();for(M=0,J=Re.length;M<J;++M)x.push(er(n,Re[M]));for(M=0,J=(a.data.datasets||[]).length;M<J;++M)if(a.isDatasetVisible(M))if(le=a.data.datasets[M].data,U.isObject(le[0]))for(p[M]=[],I=0,oe=le.length;I<oe;++I)he=er(n,le[I]),_.push(he),p[M][I]=he;else p[M]=x.slice(0),ve||(_=_.concat(x),ve=!0);else p[M]=[];x.length&&(h=Math.min(h,x[0]),f=Math.max(f,x[x.length-1])),_.length&&(_=J>1?$s(_).sort(wi):_.sort(wi),h=Math.min(h,_[0]),f=Math.max(f,_[_.length-1])),h=er(n,xi(l))||h,f=er(n,Si(l))||f,h=h===yn?+o.startOf(Date.now(),u):h,f=f===yi?+o.endOf(Date.now(),u)+1:f,n.min=Math.min(h,f),n.max=Math.max(h+1,f),n._table=[],n._timestamps={data:_,datasets:p,labels:x}},buildTicks:function(){var n=this,a=n.min,o=n.max,l=n.options,u=l.ticks,h=l.time,f=n._timestamps,_=[],p=n.getLabelCapacity(a),x=u.source,M=l.distribution,I,J,oe;for(x==="data"||x==="auto"&&M==="series"?f=f.data:x==="labels"?f=f.labels:f=Hs(n,a,o,p),l.bounds==="ticks"&&f.length&&(a=f[0],o=f[f.length-1]),a=er(n,xi(l))||a,o=er(n,Si(l))||o,I=0,J=f.length;I<J;++I)oe=f[I],oe>=a&&oe<=o&&_.push(oe);return n.min=a,n.max=o,n._unit=h.unit||(u.autoSkip?Ai(h.minUnit,n.min,n.max,p):zs(n,_.length,h.minUnit,n.min,n.max)),n._majorUnit=!u.major.enabled||n._unit==="year"?void 0:js(n._unit),n._table=Bs(n._timestamps.data,a,o,M),n._offsets=Ws(n._table,_,a,o,l),u.reverse&&_.reverse(),ki(n,_,n._majorUnit)},getLabelForIndex:function(n,a){var o=this,l=o._adapter,u=o.chart.data,h=o.options.time,f=u.labels&&n<u.labels.length?u.labels[n]:"",_=u.datasets[a].data[n];return U.isObject(_)&&(f=o.getRightValue(_)),h.tooltipFormat?l.format(wn(o,f),h.tooltipFormat):typeof f=="string"?f:l.format(wn(o,f),h.displayFormats.datetime)},tickFormatFunction:function(n,a,o,l){var u=this,h=u._adapter,f=u.options,_=f.time.displayFormats,p=_[u._unit],x=u._majorUnit,M=_[x],I=o[a],J=f.ticks,oe=x&&M&&I&&I.major,le=h.format(n,l||(oe?M:p)),he=oe?J.major:J.minor,ve=bi([he.callback,he.userCallback,J.callback,J.userCallback]);return ve?ve(le,a,o):le},convertTicksToLabels:function(n){var a=[],o,l;for(o=0,l=n.length;o<l;++o)a.push(this.tickFormatFunction(n[o].value,o,n));return a},getPixelForOffset:function(n){var a=this,o=a._offsets,l=or(a._table,"time",n,"pos");return a.getPixelForDecimal((o.start+l)*o.factor)},getPixelForValue:function(n,a,o){var l=this,u=null;if(a!==void 0&&o!==void 0&&(u=l._timestamps.datasets[o][a]),u===null&&(u=er(l,n)),u!==null)return l.getPixelForOffset(u)},getPixelForTick:function(n){var a=this.getTicks();return n>=0&&n<a.length?this.getPixelForOffset(a[n].value):null},getValueForPixel:function(n){var a=this,o=a._offsets,l=a.getDecimalForPixel(n)/o.factor-o.end,u=or(a._table,"pos",l,"time");return a._adapter._create(u)},_getLabelSize:function(n){var a=this,o=a.options.ticks,l=a.ctx.measureText(n).width,u=U.toRadians(a.isHorizontal()?o.maxRotation:o.minRotation),h=Math.cos(u),f=Math.sin(u),_=Ns(o.fontSize,G.global.defaultFontSize);return{w:l*h+_*f,h:l*f+_*h}},getLabelWidth:function(n){return this._getLabelSize(n).w},getLabelCapacity:function(n){var a=this,o=a.options.time,l=o.displayFormats,u=l[o.unit]||l.millisecond,h=a.tickFormatFunction(n,0,ki(a,[n],a._majorUnit),u),f=a._getLabelSize(h),_=Math.floor(a.isHorizontal()?a.width/f.w:a.height/f.h);return a.options.offset&&_--,_>0?_:1}}),qs=Vs;Ei._defaults=qs;var Gs={category:fi,linear:pi,logarithmic:gi,radialLinear:_i,time:Ei},Zs={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};un._date.override(typeof r=="function"?{_id:"moment",formats:function(){return Zs},parse:function(n,a){return typeof n=="string"&&typeof a=="string"?n=r(n,a):n instanceof r||(n=r(n)),n.isValid()?n.valueOf():null},format:function(n,a){return r(n).format(a)},add:function(n,a,o){return r(n).add(a,o).valueOf()},diff:function(n,a,o){return r(n).diff(r(a),o)},startOf:function(n,a,o){return n=r(n),a==="isoWeek"?n.isoWeekday(o).valueOf():n.startOf(a).valueOf()},endOf:function(n,a){return r(n).endOf(a).valueOf()},_create:function(n){return r(n)}}:{}),G._set("global",{plugins:{filler:{propagate:!0}}});var Xs={dataset:function(n){var a=n.fill,o=n.chart,l=o.getDatasetMeta(a),u=l&&o.isDatasetVisible(a),h=u&&l.dataset._children||[],f=h.length||0;return f?function(_,p){return p<f&&h[p]._view||null}:null},boundary:function(n){var a=n.boundary,o=a?a.x:null,l=a?a.y:null;return U.isArray(a)?function(u,h){return a[h]}:function(u){return{x:o===null?u.x:o,y:l===null?u.y:l}}}};function Ks(n,a,o){var l=n._model||{},u=l.fill,h;if(u===void 0&&(u=!!l.backgroundColor),u===!1||u===null)return!1;if(u===!0)return"origin";if(h=parseFloat(u,10),isFinite(h)&&Math.floor(h)===h)return(u[0]==="-"||u[0]==="+")&&(h=a+h),h===a||h<0||h>=o?!1:h;switch(u){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return u;default:return!1}}function Js(n){var a=n.el._model||{},o=n.el._scale||{},l=n.fill,u=null,h;if(isFinite(l))return null;if(l==="start"?u=a.scaleBottom===void 0?o.bottom:a.scaleBottom:l==="end"?u=a.scaleTop===void 0?o.top:a.scaleTop:a.scaleZero!==void 0?u=a.scaleZero:o.getBasePixel&&(u=o.getBasePixel()),u!=null){if(u.x!==void 0&&u.y!==void 0)return u;if(U.isFinite(u))return h=o.isHorizontal(),{x:h?u:null,y:h?null:u}}return null}function Qs(n){var a=n.el._scale,o=a.options,l=a.chart.data.labels.length,u=n.fill,h=[],f,_,p,x,M;if(!l)return null;for(f=o.ticks.reverse?a.max:a.min,_=o.ticks.reverse?a.min:a.max,p=a.getPointPositionForValue(0,f),x=0;x<l;++x)M=u==="start"||u==="end"?a.getPointPositionForValue(x,u==="start"?f:_):a.getBasePosition(x),o.gridLines.circular&&(M.cx=p.x,M.cy=p.y,M.angle=a.getIndexAngle(x)-Math.PI/2),h.push(M);return h}function eo(n){var a=n.el._scale||{};return a.getPointPositionForValue?Qs(n):Js(n)}function ro(n,a,o){var l=n[a],u=l.fill,h=[a],f;if(!o)return u;for(;u!==!1&&h.indexOf(u)===-1;){if(!isFinite(u))return u;if(f=n[u],!f)return!1;if(f.visible)return u;h.push(u),u=f.fill}return!1}function no(n){var a=n.fill,o="dataset";return a===!1?null:(isFinite(a)||(o="boundary"),Xs[o](n))}function Ci(n){return n&&!n.skip}function Ti(n,a,o,l,u){var h,f,_,p;if(!(!l||!u)){for(n.moveTo(a[0].x,a[0].y),h=1;h<l;++h)U.canvas.lineTo(n,a[h-1],a[h]);if(o[0].angle!==void 0){for(f=o[0].cx,_=o[0].cy,p=Math.sqrt(Math.pow(o[0].x-f,2)+Math.pow(o[0].y-_,2)),h=u-1;h>0;--h)n.arc(f,_,p,o[h].angle,o[h-1].angle,!0);return}for(n.lineTo(o[u-1].x,o[u-1].y),h=u-1;h>0;--h)U.canvas.lineTo(n,o[h],o[h-1],!0)}}function io(n,a,o,l,u,h){var f=a.length,_=l.spanGaps,p=[],x=[],M=0,I=0,J,oe,le,he,ve,Re,We,Ye;for(n.beginPath(),J=0,oe=f;J<oe;++J)le=J%f,he=a[le]._view,ve=o(he,le,l),Re=Ci(he),We=Ci(ve),h&&Ye===void 0&&Re&&(Ye=J+1,oe=f+Ye),Re&&We?(M=p.push(he),I=x.push(ve)):M&&I&&(_?(Re&&p.push(he),We&&x.push(ve)):(Ti(n,p,x,M,I),M=I=0,p=[],x=[]));Ti(n,p,x,M,I),n.closePath(),n.fillStyle=u,n.fill()}var ao={id:"filler",afterDatasetsUpdate:function(n,a){var o=(n.data.datasets||[]).length,l=a.propagate,u=[],h,f,_,p;for(f=0;f<o;++f)h=n.getDatasetMeta(f),_=h.dataset,p=null,_&&_._model&&_ instanceof At.Line&&(p={visible:n.isDatasetVisible(f),fill:Ks(_,f,o),chart:n,el:_}),h.$filler=p,u.push(p);for(f=0;f<o;++f)p=u[f],p&&(p.fill=ro(u,f,l),p.boundary=eo(p),p.mapper=no(p))},beforeDatasetsDraw:function(n){var a=n._getSortedVisibleDatasetMetas(),o=n.ctx,l,u,h,f,_,p,x;for(u=a.length-1;u>=0;--u)l=a[u].$filler,!(!l||!l.visible)&&(h=l.el,f=h._view,_=h._children||[],p=l.mapper,x=f.backgroundColor||G.global.defaultColor,p&&x&&_.length&&(U.canvas.clipArea(o,n.chartArea),io(o,_,p,f,x,h._loop),U.canvas.unclipArea(o)))}},so=U.rtl.getRtlAdapter,zt=U.noop,jt=U.valueOrDefault;G._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(n,a){var o=a.datasetIndex,l=this.chart,u=l.getDatasetMeta(o);u.hidden=u.hidden===null?!l.data.datasets[o].hidden:null,l.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(n){var a=n.data.datasets,o=n.options.legend||{},l=o.labels&&o.labels.usePointStyle;return n._getSortedDatasetMetas().map(function(u){var h=u.controller.getStyle(l?0:void 0);return{text:a[u.index].label,fillStyle:h.backgroundColor,hidden:!n.isDatasetVisible(u.index),lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,pointStyle:h.pointStyle,rotation:h.rotation,datasetIndex:u.index}},this)}}},legendCallback:function(n){var a=document.createElement("ul"),o=n.data.datasets,l,u,h,f;for(a.setAttribute("class",n.id+"-legend"),l=0,u=o.length;l<u;l++)h=a.appendChild(document.createElement("li")),f=h.appendChild(document.createElement("span")),f.style.backgroundColor=o[l].backgroundColor,o[l].label&&h.appendChild(document.createTextNode(o[l].label));return a.outerHTML}});function xn(n,a){return n.usePointStyle&&n.boxWidth>a?a:n.boxWidth}var Di=Ee.extend({initialize:function(n){var a=this;U.extend(a,n),a.legendHitBoxes=[],a._hoveredItem=null,a.doughnutMode=!1},beforeUpdate:zt,update:function(n,a,o){var l=this;return l.beforeUpdate(),l.maxWidth=n,l.maxHeight=a,l.margins=o,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeBuildLabels(),l.buildLabels(),l.afterBuildLabels(),l.beforeFit(),l.fit(),l.afterFit(),l.afterUpdate(),l.minSize},afterUpdate:zt,beforeSetDimensions:zt,setDimensions:function(){var n=this;n.isHorizontal()?(n.width=n.maxWidth,n.left=0,n.right=n.width):(n.height=n.maxHeight,n.top=0,n.bottom=n.height),n.paddingLeft=0,n.paddingTop=0,n.paddingRight=0,n.paddingBottom=0,n.minSize={width:0,height:0}},afterSetDimensions:zt,beforeBuildLabels:zt,buildLabels:function(){var n=this,a=n.options.labels||{},o=U.callback(a.generateLabels,[n.chart],n)||[];a.filter&&(o=o.filter(function(l){return a.filter(l,n.chart.data)})),n.options.reverse&&o.reverse(),n.legendItems=o},afterBuildLabels:zt,beforeFit:zt,fit:function(){var n=this,a=n.options,o=a.labels,l=a.display,u=n.ctx,h=U.options._parseFont(o),f=h.size,_=n.legendHitBoxes=[],p=n.minSize,x=n.isHorizontal();if(x?(p.width=n.maxWidth,p.height=l?10:0):(p.width=l?10:0,p.height=n.maxHeight),!l){n.width=p.width=n.height=p.height=0;return}if(u.font=h.string,x){var M=n.lineWidths=[0],I=0;u.textAlign="left",u.textBaseline="middle",U.each(n.legendItems,function(We,Ye){var et=xn(o,f),Je=et+f/2+u.measureText(We.text).width;(Ye===0||M[M.length-1]+Je+2*o.padding>p.width)&&(I+=f+o.padding,M[M.length-(Ye>0?0:1)]=0),_[Ye]={left:0,top:0,width:Je,height:f},M[M.length-1]+=Je+o.padding}),p.height+=I}else{var J=o.padding,oe=n.columnWidths=[],le=n.columnHeights=[],he=o.padding,ve=0,Re=0;U.each(n.legendItems,function(We,Ye){var et=xn(o,f),Je=et+f/2+u.measureText(We.text).width;Ye>0&&Re+f+2*J>p.height&&(he+=ve+o.padding,oe.push(ve),le.push(Re),ve=0,Re=0),ve=Math.max(ve,Je),Re+=f+J,_[Ye]={left:0,top:0,width:Je,height:f}}),he+=ve,oe.push(ve),le.push(Re),p.width+=he}n.width=p.width,n.height=p.height},afterFit:zt,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var n=this,a=n.options,o=a.labels,l=G.global,u=l.defaultColor,h=l.elements.line,f=n.height,_=n.columnHeights,p=n.width,x=n.lineWidths;if(a.display){var M=so(a.rtl,n.left,n.minSize.width),I=n.ctx,J=jt(o.fontColor,l.defaultFontColor),oe=U.options._parseFont(o),le=oe.size,he;I.textAlign=M.textAlign("left"),I.textBaseline="middle",I.lineWidth=.5,I.strokeStyle=J,I.fillStyle=J,I.font=oe.string;var ve=xn(o,le),Re=n.legendHitBoxes,We=function(st,ct,ht){if(!(isNaN(ve)||ve<=0)){I.save();var _t=jt(ht.lineWidth,h.borderWidth);if(I.fillStyle=jt(ht.fillStyle,u),I.lineCap=jt(ht.lineCap,h.borderCapStyle),I.lineDashOffset=jt(ht.lineDashOffset,h.borderDashOffset),I.lineJoin=jt(ht.lineJoin,h.borderJoinStyle),I.lineWidth=_t,I.strokeStyle=jt(ht.strokeStyle,u),I.setLineDash&&I.setLineDash(jt(ht.lineDash,h.borderDash)),o&&o.usePointStyle){var vt=ve*Math.SQRT2/2,gt=M.xPlus(st,ve/2),wt=ct+le/2;U.canvas.drawPoint(I,ht.pointStyle,vt,gt,wt,ht.rotation)}else I.fillRect(M.leftForLtr(st,ve),ct,ve,le),_t!==0&&I.strokeRect(M.leftForLtr(st,ve),ct,ve,le);I.restore()}},Ye=function(st,ct,ht,_t){var vt=le/2,gt=M.xPlus(st,ve+vt),wt=ct+vt;I.fillText(ht.text,gt,wt),ht.hidden&&(I.beginPath(),I.lineWidth=2,I.moveTo(gt,wt),I.lineTo(M.xPlus(gt,_t),wt),I.stroke())},et=function(st,ct){switch(a.align){case"start":return o.padding;case"end":return st-ct;default:return(st-ct+o.padding)/2}},Je=n.isHorizontal();Je?he={x:n.left+et(p,x[0]),y:n.top+o.padding,line:0}:he={x:n.left+o.padding,y:n.top+et(f,_[0]),line:0},U.rtl.overrideTextDirection(n.ctx,a.textDirection);var lt=le+o.padding;U.each(n.legendItems,function(st,ct){var ht=I.measureText(st.text).width,_t=ve+le/2+ht,vt=he.x,gt=he.y;M.setWidth(n.minSize.width),Je?ct>0&&vt+_t+o.padding>n.left+n.minSize.width&&(gt=he.y+=lt,he.line++,vt=he.x=n.left+et(p,x[he.line])):ct>0&&gt+lt>n.top+n.minSize.height&&(vt=he.x=vt+n.columnWidths[he.line]+o.padding,he.line++,gt=he.y=n.top+et(f,_[he.line]));var wt=M.x(vt);We(wt,gt,st),Re[ct].left=M.leftForLtr(wt,Re[ct].width),Re[ct].top=gt,Ye(wt,gt,st,ht),Je?he.x+=_t+o.padding:he.y+=lt}),U.rtl.restoreTextDirection(n.ctx,a.textDirection)}},_getLegendItemAt:function(n,a){var o=this,l,u,h;if(n>=o.left&&n<=o.right&&a>=o.top&&a<=o.bottom){for(h=o.legendHitBoxes,l=0;l<h.length;++l)if(u=h[l],n>=u.left&&n<=u.left+u.width&&a>=u.top&&a<=u.top+u.height)return o.legendItems[l]}return null},handleEvent:function(n){var a=this,o=a.options,l=n.type==="mouseup"?"click":n.type,u;if(l==="mousemove"){if(!o.onHover&&!o.onLeave)return}else if(l==="click"){if(!o.onClick)return}else return;u=a._getLegendItemAt(n.x,n.y),l==="click"?u&&o.onClick&&o.onClick.call(a,n.native,u):(o.onLeave&&u!==a._hoveredItem&&(a._hoveredItem&&o.onLeave.call(a,n.native,a._hoveredItem),a._hoveredItem=u),o.onHover&&u&&o.onHover.call(a,n.native,u))}});function Pi(n,a){var o=new Di({ctx:n.ctx,options:a,chart:n});Dt.configure(n,o,a),Dt.addBox(n,o),n.legend=o}var oo={id:"legend",_element:Di,beforeInit:function(n){var a=n.options.legend;a&&Pi(n,a)},beforeUpdate:function(n){var a=n.options.legend,o=n.legend;a?(U.mergeIf(a,G.global.legend),o?(Dt.configure(n,o,a),o.options=a):Pi(n,a)):o&&(Dt.removeBox(n,o),delete n.legend)},afterEvent:function(n,a){var o=n.legend;o&&o.handleEvent(a)}},Bt=U.noop;G._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Mi=Ee.extend({initialize:function(n){var a=this;U.extend(a,n),a.legendHitBoxes=[]},beforeUpdate:Bt,update:function(n,a,o){var l=this;return l.beforeUpdate(),l.maxWidth=n,l.maxHeight=a,l.margins=o,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeBuildLabels(),l.buildLabels(),l.afterBuildLabels(),l.beforeFit(),l.fit(),l.afterFit(),l.afterUpdate(),l.minSize},afterUpdate:Bt,beforeSetDimensions:Bt,setDimensions:function(){var n=this;n.isHorizontal()?(n.width=n.maxWidth,n.left=0,n.right=n.width):(n.height=n.maxHeight,n.top=0,n.bottom=n.height),n.paddingLeft=0,n.paddingTop=0,n.paddingRight=0,n.paddingBottom=0,n.minSize={width:0,height:0}},afterSetDimensions:Bt,beforeBuildLabels:Bt,buildLabels:Bt,afterBuildLabels:Bt,beforeFit:Bt,fit:function(){var n=this,a=n.options,o=n.minSize={},l=n.isHorizontal(),u,h;if(!a.display){n.width=o.width=n.height=o.height=0;return}u=U.isArray(a.text)?a.text.length:1,h=u*U.options._parseFont(a).lineHeight+a.padding*2,n.width=o.width=l?n.maxWidth:h,n.height=o.height=l?h:n.maxHeight},afterFit:Bt,isHorizontal:function(){var n=this.options.position;return n==="top"||n==="bottom"},draw:function(){var n=this,a=n.ctx,o=n.options;if(o.display){var l=U.options._parseFont(o),u=l.lineHeight,h=u/2+o.padding,f=0,_=n.top,p=n.left,x=n.bottom,M=n.right,I,J,oe;a.fillStyle=U.valueOrDefault(o.fontColor,G.global.defaultFontColor),a.font=l.string,n.isHorizontal()?(J=p+(M-p)/2,oe=_+h,I=M-p):(J=o.position==="left"?p+h:M-h,oe=_+(x-_)/2,I=x-_,f=Math.PI*(o.position==="left"?-.5:.5)),a.save(),a.translate(J,oe),a.rotate(f),a.textAlign="center",a.textBaseline="middle";var le=o.text;if(U.isArray(le))for(var he=0,ve=0;ve<le.length;++ve)a.fillText(le[ve],0,he,I),he+=u;else a.fillText(le,0,0,I);a.restore()}}});function Oi(n,a){var o=new Mi({ctx:n.ctx,options:a,chart:n});Dt.configure(n,o,a),Dt.addBox(n,o),n.titleBlock=o}var lo={id:"title",_element:Mi,beforeInit:function(n){var a=n.options.title;a&&Oi(n,a)},beforeUpdate:function(n){var a=n.options.title,o=n.titleBlock;a?(U.mergeIf(a,G.global.title),o?(Dt.configure(n,o,a),o.options=a):Oi(n,a)):o&&(Dt.removeBox(n,o),delete n.titleBlock)}},Ht={},co=ao,uo=oo,ho=lo;Ht.filler=co,Ht.legend=uo,Ht.title=ho,rt.helpers=U,ns(),rt._adapters=un,rt.Animation=qe,rt.animationService=Xe,rt.controllers=Kn,rt.DatasetController=Qe,rt.defaults=G,rt.Element=Ee,rt.elements=At,rt.Interaction=ir,rt.layouts=Dt,rt.platform=ar,rt.plugins=ut,rt.Scale=kt,rt.scaleService=wr,rt.Ticks=xr,rt.Tooltip=sn,rt.helpers.each(Gs,function(n,a){rt.scaleService.registerScaleType(a,n,n._defaults)});for(var Ri in Ht)Ht.hasOwnProperty(Ri)&&rt.plugins.register(Ht[Ri]);rt.platform.initialize();var fo=rt;return typeof window<"u"&&(window.Chart=rt),rt.Chart=rt,rt.Legend=Ht.legend._element,rt.Title=Ht.title._element,rt.pluginService=rt.plugins,rt.PluginBase=rt.Element.extend({}),rt.canvasHelpers=rt.helpers.canvas,rt.layoutService=rt.layouts,rt.LinearScaleBase=Ir,rt.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(n){rt[n]=function(a,o){return new rt(a,rt.helpers.merge(o||{},{type:n.charAt(0).toLowerCase()+n.slice(1)}))}}),fo})})(Chart$1);var ChartExports=Chart$1.exports;const Chart=getDefaultExportFromCjs$1(ChartExports);function generateChart(e,t){return{render:function(i){return i("div",{style:this.styles,class:this.cssClasses},[i("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:e,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null,_plugins:this.plugins}},methods:{addPlugin:function(i){this.$data._plugins.push(i)},generateLegend:function(){if(this.$data._chart)return this.$data._chart.generateLegend()},renderChart:function(i,s){if(this.$data._chart&&this.$data._chart.destroy(),!this.$refs.canvas)throw new Error("Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components");this.$data._chart=new Chart(this.$refs.canvas.getContext("2d"),{type:t,data:i,options:s,plugins:this.$data._plugins})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}var Doughnut=generateChart("doughnut-chart","doughnut");const PieChart={extends:Doughnut,props:["data","options"],mounted(){this.renderChart(this.data,this.options)}};var __defProp$r=Object.defineProperty,__getOwnPropDesc$r=Object.getOwnPropertyDescriptor,__decorateClass$r=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$r(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$r(t,r,s),s};let ScoringChart$1=class extends Vue{constructor(){super(...arguments);fe(this,"scoringChartData",null);fe(this,"averagePoints","");fe(this,"averageTime",0)}mounted(){this.generateScoringChartData([]),this.$on("statsUpdate",r=>{this.scoringChartData=null,this.$nextTick().then(()=>{this.generateScoringChartData(r)})})}generateScoringChartData(r){var y;console.log("generateScoringChartData");const i={};for(const g of r)g.scoring&&g.scoring.points!==void 0?i[`${g.scoring.points}B`]?i[`${g.scoring.points}B`]++:i[`${g.scoring.points}B`]=1:i.Neobodované?i.Neobodované++:i.Neobodované=1;const s=Object.keys(i).sort((g,b)=>{if(g==="Neobodované")return-1;if(b==="Neobodované")return 1;const j=parseFloat(g.split("B")[0]),B=parseFloat(b.split("B")[0]);return j<B?-1:j>B?1:0}).reverse(),c={};for(const g of s)c[g]=i[g];this.scoringChartData={color:"#000",chartOptions:{hoverBorderWidth:20,legend:{display:!1}},chartData:{hoverBackgroundColor:"red",hoverBorderWidth:10,labels:Object.keys(c),datasets:[{label:"Scores",backgroundColor:Object.keys(c).map(g=>this.randomColor(g)),data:Object.values(c)}]}};let d=0,m=0;for(const g of r.filter(b=>b.opened))d+=((y=g.scoring)==null?void 0:y.points)||0,m+=g.timeOpened||0;this.averagePoints=(d/r.filter(g=>{var b;return((b=g.scoring)==null?void 0:b.points)!=null}).length).toFixed(2),this.averagePoints=="NaN"&&(this.averagePoints="0.00"),this.averageTime=m/r.filter(g=>g.opened).length}randomColor(r){return Color.hsl(Math.random()*360,90,50).hex()}formatTime(r){const i=new Date(r),s=i.getMinutes(),c=i.getSeconds(),d=function(m){return m<10?"0"+m:m};return`${d(s)}:${d(c)}`}};ScoringChart$1=__decorateClass$r([Component({components:{PieChart}})],ScoringChart$1);const ScoringChart_vue_vue_type_style_index_0_scoped_d66446d6_lang="";var _sfc_render$s=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-row",[t.scoringChartData?r("b-col",{staticClass:"d-flex w-100",attrs:{cols:"8"}},[r("pie-chart",{staticClass:"pie-chart col-8",attrs:{data:t.scoringChartData.chartData,options:t.scoringChartData.chartOptions}}),r("div",{staticClass:"d-flex flex-column justify-content-center ml-2 col-4"},t._l(t.scoringChartData.chartData.datasets[0].data,function(i,s){return r("div",{key:s,staticClass:"d-flex align-items-center"},[r("span",{staticClass:"legend-badge",style:{"background-color":t.scoringChartData.chartData.datasets[0].backgroundColor[s]}}),t._v(" "+t._s(t.scoringChartData.chartData.labels[s])+" ")])}),0)],1):t._e(),r("b-col",{attrs:{cols:"4"}},[r("div",{staticClass:"numberStats"},[r("h2",[t._v(t._s(t.averagePoints))]),r("p",[t._v("Priemerný počet bodov")])]),r("div",{staticClass:"numberStats"},[r("h2",[t._v(t._s(t.formatTime(t.averageTime)))]),r("p",[t._v("Priemerný čas na jedno riešenie")])])])],1)},_sfc_staticRenderFns$s=[],__component__$s=normalizeComponent(ScoringChart$1,_sfc_render$s,_sfc_staticRenderFns$s,!1,null,"d66446d6",null,null);const ScoringChart=__component__$s.exports;var __defProp$q=Object.defineProperty,__getOwnPropDesc$q=Object.getOwnPropertyDescriptor,__decorateClass$q=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$q(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$q(t,r,s),s};let Stats$1=class extends Vue{constructor(){super(...arguments);fe(this,"stats");fe(this,"$refs")}mounted(){this.$store.subscribe(r=>{r.type==="updateDocument"&&this.update()}),this.update()}data(){return{stats:{celkovo:0,otvorene:0,komentar:0,obodovane:0,hotovo:0}}}updateScoringData(){const r=this.$store.state.documents;this.$refs.scoringChart&&this.$refs.scoringChart.$emit("statsUpdate",r)}update(){const r=this.$store.state.documents;this.stats={celkovo:r.length,otvorene:this.count(r,i=>i.opened),komentar:this.count(r,i=>i.changes.some(s=>s.type==="Text"&&s.data.hasControls)),obodovane:this.count(r,i=>i.scoring!=null),hotovo:this.count(r,i=>{var s;return(((s=i.scoring)==null?void 0:s.final)||!1)&&i.changes.some(c=>c.type==="Text"&&c.data.hasControls)})}}count(r,i){let s=0;for(let c=0;c<r.length;c++){const d=r[c];i(d)&&s++}return s}color(r){return Color(r,"hex")}};Stats$1=__decorateClass$q([Component({components:{StatsEntry,ScoringChart}})],Stats$1);const Stats_vue_vue_type_style_index_0_scoped_6d47cde2_lang="";var _sfc_render$r=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"d-flex flex-column justify-content-around stats-panel"},[r("stats-entry",{attrs:{min:0,max:t.stats.celkovo,value:t.stats.otvorene,color:t.color("#0dcaf0"),label:"Otvorených"}}),r("stats-entry",{attrs:{min:0,max:t.stats.celkovo,value:t.stats.komentar,color:t.color("#ffc107"),label:"Komentár"}}),r("stats-entry",{attrs:{min:0,max:t.stats.celkovo,value:t.stats.obodovane,color:t.color("#6610f2"),label:"Obodované"},nativeOn:{click:function(i){return t.updateScoringData.apply(null,arguments)}}},[r("scoring-chart",{ref:"scoringChart",attrs:{stats:t.stats}})],1),r("stats-entry",{attrs:{min:0,max:t.stats.celkovo,value:t.stats.hotovo,color:t.color("#20c997"),label:"Hotovo"}})],1)},_sfc_staticRenderFns$r=[],__component__$r=normalizeComponent(Stats$1,_sfc_render$r,_sfc_staticRenderFns$r,!1,null,"6d47cde2",null,null);const Stats=__component__$r.exports;var vueSwatches_umd_min={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:commonjsGlobal,function(){return function(r){var i={};function s(c){if(i[c])return i[c].exports;var d=i[c]={i:c,l:!1,exports:{}};return r[c].call(d.exports,d,d.exports,s),d.l=!0,d.exports}return s.m=r,s.c=i,s.d=function(c,d,m){s.o(c,d)||Object.defineProperty(c,d,{enumerable:!0,get:m})},s.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},s.t=function(c,d){if(1&d&&(c=s(c)),8&d||4&d&&typeof c=="object"&&c&&c.__esModule)return c;var m=Object.create(null);if(s.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:c}),2&d&&typeof c!="string")for(var y in c)s.d(m,y,(function(g){return c[g]}).bind(null,y));return m},s.n=function(c){var d=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(d,"a",d),d},s.o=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)},s.p="",s(s.s="fb15")}({"0ca3":function(r,i,s){var c=s("c6aa"),d=s.n(c);d.a},7937:function(r,i,s){},"7fca":function(r,i,s){var c=s("c10a"),d=s.n(c);d.a},8875:function(r,i,s){var c,d,m;(function(y,g){d=[],c=g,m=typeof c=="function"?c.apply(i,d):c,m===void 0||(r.exports=m)})(typeof self<"u"&&self,function(){function y(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(T){var g,b,j,B=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,R=/@([^@]*):(\d+):(\d+)\s*$/gi,D=B.exec(T.stack)||R.exec(T.stack),N=D&&D[1]||!1,E=D&&D[2]||!1,$=document.location.href.replace(document.location.hash,""),q=document.getElementsByTagName("script");N===$&&(g=document.documentElement.outerHTML,b=new RegExp("(?:[^\\n]+?\\n){0,"+(E-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),j=g.replace(b,"$1").trim());for(var Y=0;Y<q.length;Y++)if(q[Y].readyState==="interactive"||q[Y].src===N||N===$&&q[Y].innerHTML&&q[Y].innerHTML.trim()===j)return q[Y];return null}}return y})},9334:function(r,i,s){var c=s("7937"),d=s.n(c);d.a},c10a:function(r,i,s){},c6aa:function(r,i,s){},fb15:function(r,i,s){if(s.r(i),s.d(i,"DEFAULT_BACKGROUND_COLOR",function(){return Pe}),s.d(i,"DEFAULT_BORDER_RADIUS",function(){return Se}),s.d(i,"DEFAULT_ROW_LENGTH",function(){return De}),s.d(i,"DEFAULT_TRIGGER_CONTAINER_SPACE",function(){return Ne}),s.d(i,"DEFAULT_SWATCH_SIZE",function(){return Ue}),s.d(i,"DEFAULT_SHOW_BORDER",function(){return je}),s.d(i,"extractPropertyFromPreset",function(){return $e}),typeof window<"u"){var c=window.document.currentScript,d=s("8875");c=d(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:d});var m=c&&c.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);m&&(s.p=m[1])}var y=function(){var z=this,X=z.$createElement,se=z._self._c||X;return se("div",{staticClass:"vue-swatches",attrs:{tabindex:"-1"},on:{blur:function(ee){return z.onBlur(ee.relatedTarget)}}},[z.inline?z._e():se("div",{ref:"triggerWrapper",staticClass:"vue-swatches__trigger__wrapper",on:{click:z.togglePopover}},[z._t("trigger",[se("div",{staticClass:"vue-swatches__trigger",class:{"vue-swatches--is-empty":!z.value,"vue-swatches--is-disabled":z.disabled},style:z.triggerStyles},[se("div",{directives:[{name:"show",rawName:"v-show",value:z.isNoColor,expression:"isNoColor"}],staticClass:"vue-swatches__diagonal__wrapper vue-swatches--has-children-centered"},[se("div",{staticClass:"vue-swatches__diagonal"})])])])],2),se("transition",{attrs:{name:"vue-swatches-show-hide"}},[se("div",{directives:[{name:"show",rawName:"v-show",value:z.inline||z.isOpen,expression:"inline || isOpen"}],ref:"containerWrapper",staticClass:"vue-swatches__container",class:{"vue-swatches--inline":z.inline},style:z.containerStyles},[se("div",{staticClass:"vue-swatches__wrapper",style:z.wrapperStyles},[z.isNested?z._l(z.computedSwatches,function(ee,re){return se("div",{key:re,staticClass:"vue-swatches__row"},z._l(ee,function(ne,k){return se("v-swatch",{key:k,attrs:{"is-last":re===z.computedSwatches.length-1&&k===ee.length,"row-length-setted":z.rowLength!==null||z.presetRowLength!==null,"border-radius":z.computedBorderRadius,disabled:z.getSwatchDisabled(ne),inline:z.inline,selected:z.checkEquality(z.getSwatchColor(ne),z.value),"swatch-size":z.computedSwatchSize,"spacing-size":z.computedSpacingSize,"show-border":z.getSwatchShowBorder(ne),"show-checkbox":z.showCheckbox,"show-labels":z.showLabels,"swatch-color":z.getSwatchColor(ne),"swatch-label":z.getSwatchLabel(ne),"swatch-alt":z.getSwatchAlt(ne),"swatch-style":z.swatchStyle},on:{blur:function(O){return z.onBlur(O)},click:function(O){return z.updateSwatch(ne)}},nativeOn:{click:function(O){return z.updateSwatch(ne)}}})}),1)}):z._l(z.computedSwatches,function(ee,re){return se("v-swatch",{key:re,attrs:{"is-last":re===z.computedSwatches.length-1,"row-length-setted":z.rowLength!==null||z.presetRowLength!==null,"border-radius":z.computedBorderRadius,disabled:z.getSwatchDisabled(ee),inline:z.inline,selected:z.checkEquality(z.getSwatchColor(ee),z.value),"swatch-size":z.computedSwatchSize,"spacing-size":z.computedSpacingSize,"show-border":z.getSwatchShowBorder(ee),"show-checkbox":z.showCheckbox,"show-labels":z.showLabels,"swatch-color":z.getSwatchColor(ee),"swatch-label":z.getSwatchLabel(ee),"swatch-alt":z.getSwatchAlt(ee),"swatch-style":z.swatchStyle},on:{blur:function(ne){return z.onBlur(ne)},click:function(ne){return z.updateSwatch(ee)}},nativeOn:{click:function(ne){return z.updateSwatch(ee)}}})})],2),z.showFallback?se("div",{staticClass:"vue-swatches__fallback__wrapper",style:z.computedFallbackWrapperStyles},[se("span",{staticClass:"vue-swatches__fallback__input--wrapper"},[se("input",{ref:"fallbackInput",staticClass:"vue-swatches__fallback__input",class:z.fallbackInputClass,attrs:{type:z.fallbackInputType},domProps:{value:z.internalValue},on:{input:function(ee){return z.updateSwatch(ee.target.value,{fromFallbackInput:!0})}}})]),z.showFallbackOk?se("button",{staticClass:"vue-swatches__fallback__button",class:z.fallbackOkClass,on:{click:function(ee){return ee.preventDefault(),z.onFallbackButtonClick(ee)}}},[z._v(" "+z._s(z.fallbackOkText)+" ")]):z._e()]):z._e()])])],1)},g=[],b={colors:["#1FBC9C","#1CA085","#2ECC70","#27AF60","#3398DB","#2980B9","#A463BF","#8E43AD","#3D556E","#222F3D","#F2C511","#F39C19","#E84B3C","#C0382B","#DDE6E8","#BDC3C8"],rowLength:4},j={colors:["#CC0001","#E36101","#FFCC00","#009900","#0066CB","#000000","#FFFFFF"],showBorder:!0},B={colors:[["#000000","#434343","#666666","#999999","#b7b7b7","#cccccc","#d9d9d9","#efefef","#f3f3f3","#ffffff"],["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"],["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"],["#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd"],["#cc4125","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0"],["#a61c00","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79"],["#85200c","#990000","#b45f06","#bf9000","#38761d","#134f5c","#1155cc","#0b5394","#351c75","#741b47"],["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]],borderRadius:"0",rowLength:10,swatchSize:24,spacingSize:0},R=function(){var z=this,X=this,se=X.$createElement,ee=X._self._c||se;return ee("div",{staticClass:"vue-swatches__swatch",class:{"vue-swatches__swatch--border":X.showBorder,"vue-swatches__swatch--selected":X.selected,"vue-swatches__swatch--is-disabled":X.disabled},style:X.swatchStyles,attrs:{"aria-label":X.swatchAlt,role:"button",tabindex:"0"},on:{keyup:function(re){return!re.type.indexOf("key")&&X._k(re.keyCode,"enter",13,re.key,"Enter")?null:X.$emit("click",X.swatchColor)},blur:function(re){return z.$emit("blur",re.relatedTarget)}}},[X.swatchColor===""?ee("div",{staticClass:"vue-swatches__diagonal__wrapper vue-swatches--has-children-centered"},[ee("div",{staticClass:"vue-swatches__diagonal"})]):X._e(),ee("v-check",{directives:[{name:"show",rawName:"v-show",value:X.showCheckbox&&X.selected,expression:"showCheckbox && selected"}]}),X.showLabels?ee("div",{staticClass:"vue-swatches__swatch__label",style:X.labelStyles},[X._v(" "+X._s(X.swatchLabel)+" ")]):X._e()],1)},D=[],N=function(){var z=this,X=z.$createElement,se=z._self._c||X;return se("div",{staticClass:"vue-swatches__check__wrapper vue-swatches--has-children-centered"},[se("div",{staticClass:"vue-swatches__check__circle vue-swatches--has-children-centered"},[se("svg",{staticClass:"check",attrs:{version:"1.1",role:"presentation",width:"12",height:"12",viewBox:"0 0 1792 1792"}},[se("path",{staticClass:"vue-swatches__check__path",attrs:{d:"M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z"}})])])])},E=[],$={name:"v-check",data:function(){return{}}},q=$;s("7fca");function Y(z,X,se,ee,re,ne,k,O){var W,K=typeof z=="function"?z.options:z;if(X&&(K.render=X,K.staticRenderFns=se,K._compiled=!0),ee&&(K.functional=!0),ne&&(K._scopeId="data-v-"+ne),k?(W=function(ye){ye=ye||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,ye||typeof __VUE_SSR_CONTEXT__>"u"||(ye=__VUE_SSR_CONTEXT__),re&&re.call(this,ye),ye&&ye._registeredComponents&&ye._registeredComponents.add(k)},K._ssrRegister=W):re&&(W=O?function(){re.call(this,this.$root.$options.shadowRoot)}:re),W)if(K.functional){K._injectStyles=W;var G=K.render;K.render=function(ye,me){return W.call(me),G(ye,me)}}else{var ce=K.beforeCreate;K.beforeCreate=ce?[].concat(ce,W):[W]}return{exports:z,options:K}}var T=Y(q,N,E,!1,null,null,null),w=T.exports;function C(z,X){var se=Object.keys(z);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(z);X&&(ee=ee.filter(function(re){return Object.getOwnPropertyDescriptor(z,re).enumerable})),se.push.apply(se,ee)}return se}function A(z){for(var X=1;X<arguments.length;X++){var se=arguments[X]!=null?arguments[X]:{};X%2?C(Object(se),!0).forEach(function(ee){S(z,ee,se[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(se)):C(Object(se)).forEach(function(ee){Object.defineProperty(z,ee,Object.getOwnPropertyDescriptor(se,ee))})}return z}function S(z,X,se){return X in z?Object.defineProperty(z,X,{value:se,enumerable:!0,configurable:!0,writable:!0}):z[X]=se,z}var F={name:"v-swatch",components:{VCheck:w},props:{borderRadius:{type:String},isLast:{type:Boolean,default:!1},rowLengthSetted:{type:Boolean,default:!1},disabled:{type:Boolean},inline:{type:Boolean},selected:{type:Boolean,default:!1},showCheckbox:{type:Boolean},showBorder:{type:Boolean},showLabels:{type:Boolean},spacingSize:{type:Number},swatchColor:{type:String,default:""},swatchLabel:{type:String},swatchAlt:{type:String},swatchSize:{type:Number},swatchStyle:{type:Object}},data:function(){return{}},computed:{computedLabelStyle:function(){var z=8+3*Math.floor(this.spacingSize/5);return{bottom:"-".concat(z,"px")}},computedSwatchStyle:function(){var z={width:"".concat(this.swatchSize,"px"),height:"".concat(this.swatchSize,"px"),borderRadius:this.borderRadius,backgroundColor:this.swatchColor!==""?this.swatchColor:"#FFFFFF",cursor:this.cursorStyle};return this.inline&&this.isLast||(z.marginRight="".concat(this.spacingSize,"px")),this.inline&&!this.rowLengthSetted?z:A({},z,{marginBottom:"".concat(this.spacingSize,"px")})},cursorStyle:function(){return this.disabled?"not-allowed":"pointer"},labelStyles:function(){return[this.computedLabelStyle]},swatchStyles:function(){return[this.computedSwatchStyle,this.swatchStyle]}}},Z=F,P=(s("0ca3"),Y(Z,R,D,!1,null,null,null)),ie=P.exports;function ue(z){return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},ue(z)}function pe(z,X){var se=Object.keys(z);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(z);X&&(ee=ee.filter(function(re){return Object.getOwnPropertyDescriptor(z,re).enumerable})),se.push.apply(se,ee)}return se}function _e(z){for(var X=1;X<arguments.length;X++){var se=arguments[X]!=null?arguments[X]:{};X%2?pe(Object(se),!0).forEach(function(ee){we(z,ee,se[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(se)):pe(Object(se)).forEach(function(ee){Object.defineProperty(z,ee,Object.getOwnPropertyDescriptor(se,ee))})}return z}function we(z,X,se){return X in z?Object.defineProperty(z,X,{value:se,enumerable:!0,configurable:!0,writable:!0}):z[X]=se,z}var Pe="#ffffff",Se="10px",De=4,Ne=5,Ue=42,je=!1,$e=function(z,X,se){return typeof z!="string"?null:z==="text-basic"?j[X]===void 0?null:j[X]:z==="text-advanced"?B[X]===void 0?null:B[X]:z==="basic"||se?b[X]===void 0?null:b[X]:null},de={name:"v-swatches",components:{VSwatch:ie},props:{backgroundColor:{type:String,default:Pe},closeOnSelect:{type:Boolean,default:!0},swatches:{type:[Array,String],default:function(){return"basic"}},disabled:{type:Boolean,default:!1},fallbackInputClass:{type:[Array,Object,String],default:null},fallbackInputType:{type:String,default:function(){return"text"},validator:function(z){return["text","color"].indexOf(z)!==-1}},fallbackOkClass:{type:[Array,Object,String],default:null},fallbackOkText:{type:String,default:"Ok"},inline:{type:Boolean,default:!1},shapes:{type:String,default:"squares"},popoverX:{type:String,default:"right"},popoverY:{type:String,default:"bottom"},rowLength:{type:[Number,String],default:null},showBorder:{type:Boolean,default:null},showFallback:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!0},showLabels:{type:Boolean,default:!1},spacingSize:{type:Number,default:null},swatchSize:{type:[Number,String],default:null},swatchStyle:{type:[Object,Array],default:function(){}},triggerStyle:{type:[Object,Array],default:function(){}},wrapperStyle:{type:[Object,Array],default:function(){}},value:{type:String,default:null}},data:function(){return{alwaysOnScreenStyle:{},componentMounted:!1,internalValue:this.value,internalIsOpen:!1}},computed:{isNested:function(){return!!(this.computedSwatches&&this.computedSwatches.length&&this.computedSwatches[0]instanceof Array)},isOpen:function(){return!this.inline&&this.internalIsOpen},isNoColor:function(){return this.checkEquality("",this.value)},presetBorderRadius:function(){return $e(this.swatches,"borderRadius")},presetRowLength:function(){return $e(this.swatches,"rowLength")},presetShowBorder:function(){return $e(this.swatches,"showBorder")},presetSwatchSize:function(){return $e(this.swatches,"swatchSize")},presetSpacingSize:function(){return $e(this.swatches,"spacingSize")},computedSwatches:function(){return this.swatches instanceof Array?this.swatches:typeof this.swatches=="string"?$e(this.swatches,"colors",!0):[]},computedBorderRadius:function(){return this.presetBorderRadius!==null?this.presetBorderRadius:this.borderRadius},computedRowLength:function(){return this.rowLength!==null?Number(this.rowLength):this.presetRowLength!==null?this.presetRowLength:this.computedSwatches.length<De&&!this.isNested?this.computedSwatches.length:De},computedSwatchSize:function(){return this.swatchSize!==null?Number(this.swatchSize):this.presetSwatchSize!==null?this.presetSwatchSize:Ue},computedSpacingSize:function(){return this.spacingSize!==null?this.spacingSize:this.presetSpacingSize!==null?this.presetSpacingSize:Math.round(.25*this.computedSwatchSize)},computedShowBorder:function(){return this.showBorder!==null?this.showBorder:this.presetShowBorder!==null?this.presetShowBorder:je},showFallbackOk:function(){return!this.inline},borderRadius:function(){return this.shapes==="squares"?"".concat(Math.round(.25*this.computedSwatchSize),"px"):this.shapes==="circles"?"50%":""},wrapperWidth:function(){return this.computedRowLength*(this.computedSwatchSize+this.computedSpacingSize)},computedtriggerStyle:function(){return{width:"42px",height:"42px",backgroundColor:this.value?this.value:"#ffffff",borderRadius:this.shapes==="circles"?"50%":Se}},triggerStyles:function(){return[this.computedtriggerStyle,this.triggerStyle]},containerStyles:function(){var z=[{backgroundColor:this.backgroundColor},this.alwaysOnScreenStyle];return this.inline?z:[].concat(z,[{padding:"5px",marginBottom:"5px"}])},computedWrapperStyle:function(){return this.inline?{}:{paddingTop:"".concat(this.computedSpacingSize,"px"),paddingLeft:"".concat(this.computedSpacingSize,"px"),width:"".concat(this.wrapperWidth,"px")}},wrapperStyles:function(){return[this.computedWrapperStyle,this.wrapperStyle]},computedFallbackWrapperStyle:function(){var z={marginLeft:"".concat(this.computedSpacingSize,"px"),paddingBottom:"".concat(this.computedSpacingSize,"px")};return this.inline?z:_e({},z,{width:"".concat(this.wrapperWidth-this.computedSpacingSize,"px")})},computedFallbackWrapperStyles:function(){return[this.computedFallbackWrapperStyle]}},watch:{value:function(z){this.internalValue=z}},mounted:function(){this.componentMounted=!0},methods:{checkEquality:function(z,X){return!(!z&&z!==""||!X&&X!=="")&&z.toUpperCase()===X.toUpperCase()},hidePopover:function(){this.internalIsOpen=!1,this.$el.blur(),this.$emit("close",this.internalValue)},getAlwaysOnScreenStyle:function(){var z={},X=this.$refs.triggerWrapper,se=this.$refs.containerWrapper;if(!this.componentMounted||this.inline||!X||!window||!document)return z;var ee=X.getBoundingClientRect(),re=5,ne=(document.documentElement.clientWidth||window.innerWidth)-5,k=5,O=(document.documentElement.clientHeight||window.innerHeight)-5;se.style.visibility="hidden",se.style.display="block";var W=se.getBoundingClientRect();return se.style.display="none",se.style.visibility="visible",this.popoverY==="top"?ee.top-W.height<k?(z.top="".concat(ee.height+Ne,"px"),z.bottom="auto"):(z.bottom="".concat(ee.height+Ne,"px"),z.top="auto"):this.popoverY==="bottom"&&(ee.bottom+W.height>O?(z.bottom="".concat(ee.height+Ne,"px"),z.top="auto"):(z.top="".concat(ee.height+Ne,"px"),z.bottom="auto")),this.popoverX==="left"?ee.right-W.width<re?(z.left=0,z.right="auto"):(z.right=0,z.left="auto"):this.popoverX==="right"&&(ee.left+W.width>ne?(z.right=0,z.left="auto"):(z.left=0,z.right="auto")),z},getSwatchShowBorder:function(z){return typeof z=="string"?this.computedShowBorder:ue(z)==="object"?z.showBorder!==void 0?z.showBorder:this.computedShowBorder:void 0},getSwatchColor:function(z){return typeof z=="string"?z:ue(z)==="object"?z.color:void 0},getSwatchDisabled:function(z){return typeof z=="string"?this.disabled:ue(z)==="object"?z.disabled!==void 0?z.disabled:this.disabled:void 0},getSwatchLabel:function(z){return typeof z=="string"?z:ue(z)==="object"?z.label||z.color:void 0},getSwatchAlt:function(z){return typeof z=="string"?z:ue(z)==="object"?z.alt||this.getSwatchLabel(z):void 0},onBlur:function(z){this.isOpen&&(z!==null&&this.$el.contains(z)||(this.internalIsOpen=!1,this.$emit("close",this.internalValue)))},onFallbackButtonClick:function(){this.hidePopover()},showPopover:function(){this.isOpen||this.inline||this.disabled||(this.alwaysOnScreenStyle=this.getAlwaysOnScreenStyle(),this.internalIsOpen=!0,this.$el.focus(),this.$emit("open"))},togglePopover:function(){this.isOpen?this.hidePopover():this.showPopover()},updateSwatch:function(z){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=X.fromFallbackInput;if(!this.getSwatchDisabled(z)){var ee=this.getSwatchColor(z);this.internalValue=ee,this.$emit("input",ee),!this.closeOnSelect||this.inline||se||this.hidePopover()}}}},L=de,H=(s("9334"),Y(L,y,g,!1,null,null,null)),Q=H.exports;i.default=Q}}).default})})(vueSwatches_umd_min);var vueSwatches_umd_minExports=vueSwatches_umd_min.exports;const VSwatches=getDefaultExportFromCjs$1(vueSwatches_umd_minExports),vueSwatches="";var __defProp$p=Object.defineProperty,__getOwnPropDesc$p=Object.getOwnPropertyDescriptor,__decorateClass$p=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$p(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$p(t,r,s),s};let ColorPicker$1=class extends Vue{constructor(){super(...arguments);fe(this,"name");fe(this,"value");fe(this,"label");fe(this,"hasOpacity");fe(this,"color","#000000");fe(this,"opacity",100);fe(this,"show",!1);fe(this,"clickListener");fe(this,"$refs")}mounted(){this.valueUpdated(),this.clickListener=r=>{if(this.show){let i=this.$refs.popover;if(!i)return;let s=i.$children[0].$children[0].$el;r.target instanceof Element&&!s.contains(r.target)&&(this.show=!1)}},document.addEventListener("click",this.clickListener)}valueUpdated(){if(this.value===void 0||this.value===null||this.value.startsWith("rgb")){this.color="#000000",this.opacity=100,this.submit();return}this.color=this.value.substring(0,7),this.opacity=Math.round(parseInt(this.value.substring(7,9),16)/255*100)||100}submit(){this.color.startsWith("rgb")&&(this.color="#000000"),this.$emit("input",this.color+Math.floor(this.opacity*255/100).toString(16))}unmounted(){document.removeEventListener("click",this.clickListener)}get colors(){var r,i,s;return((s=(i=(r=this.$store.state.settings)==null?void 0:r.tools)==null?void 0:i.settings)==null?void 0:s.colors)??"default"}};__decorateClass$p([Prop({required:!0,default:"name"})],ColorPicker$1.prototype,"name",2);__decorateClass$p([Prop({default:"#ff0000ff"})],ColorPicker$1.prototype,"value",2);__decorateClass$p([Prop({default:"Vyber farbu"})],ColorPicker$1.prototype,"label",2);__decorateClass$p([Prop({required:!1,default:!0})],ColorPicker$1.prototype,"hasOpacity",2);__decorateClass$p([Watch("value")],ColorPicker$1.prototype,"valueUpdated",1);ColorPicker$1=__decorateClass$p([Component({components:{VSwatches}})],ColorPicker$1);const ColorPicker_vue_vue_type_style_index_0_scoped_35e0acfb_lang="",ColorPicker_vue_vue_type_style_index_1_lang="";var _sfc_render$q=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",[r("b-button",{staticClass:"colorInputButton",style:{"background-color":t.color},attrs:{id:t.name}},[t._t("default")],2),r("b-popover",{ref:"popover",attrs:{show:t.show,target:t.name,triggers:"click",placement:"bottom"},on:{"update:show":function(i){t.show=i}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.label)+" ")]},proxy:!0}])},[r("v-swatches",{staticClass:"color-picker",attrs:{inline:"",swatches:t.colors||"default","background-color":"transparent"},on:{input:t.submit},model:{value:t.color,callback:function(i){t.color=i},expression:"color"}}),r("div",{staticClass:"d-flex align-items-center justify-content-around"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],staticClass:"fallbackInput",style:{opacity:t.opacity/100},attrs:{type:"color"},domProps:{value:t.color},on:{input:[function(i){i.target.composing||(t.color=i.target.value)},t.submit]}}),t.hasOpacity?r("div",{staticClass:"d-flex align-items-center justify-content-between"},[r("div",{staticClass:"form-control transparency-num"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.opacity,expression:"opacity",modifiers:{number:!0}}],staticClass:"transparency-num",attrs:{type:"number",min:"7",max:"100"},domProps:{value:t.opacity},on:{input:[function(i){i.target.composing||(t.opacity=t._n(i.target.value))},t.submit],blur:function(i){return t.$forceUpdate()}}})]),r("b-form-input",{staticStyle:{width:"80px"},attrs:{min:"7",type:"range",max:"100",step:"1"},on:{input:t.submit},model:{value:t.opacity,callback:function(i){t.opacity=t._n(i)},expression:"opacity"}})],1):t._e()])],1)],1)},_sfc_staticRenderFns$q=[],__component__$q=normalizeComponent(ColorPicker$1,_sfc_render$q,_sfc_staticRenderFns$q,!1,null,"35e0acfb",null,null);const ColorPicker=__component__$q.exports;var __defProp$o=Object.defineProperty,__getOwnPropDesc$o=Object.getOwnPropertyDescriptor,__decorateClass$o=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$o(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$o(t,r,s),s};let ShortcutHelpModal$1=class extends Vue{constructor(){super(...arguments);fe(this,"$refs")}show(){this.$refs.modal.show()}};ShortcutHelpModal$1=__decorateClass$o([Component],ShortcutHelpModal$1);var _sfc_render$p=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-modal",{ref:"modal",attrs:{"ok-only":""}},[r("p",[t._v(' Skratku vieš nastaviť tak, že do textového poľa napíšeš patričné klávesy, ktoré chceš stláčať. Viacero kláves naraz vieš oddeľovať pomocou "+" (ctrl+b). Tabuľka mapovania je tu: ')]),r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[t._v("Kláves")]),r("th",[t._v("Meno")])])]),r("tbody",[r("tr",[r("td",[t._v("Delete")]),r("td",[t._v("del")])]),r("tr",[r("td",[t._v("Backspace")]),r("td",[t._v("backspace")])]),r("tr",[r("td",[t._v("Shift")]),r("td",[t._v("shift")])]),r("tr",[r("td",[t._v("Control")]),r("td",[t._v("ctrl")])]),r("tr",[r("td",[t._v("Alt")]),r("td",[t._v("alt")])]),r("tr",[r("td",[t._v("Alt Graph (AltGr)")]),r("td",[t._v("altgraph")])]),r("tr",[r("td",[t._v("Windows kláves alebo Mac Cmd")]),r("td",[t._v("meta")])]),r("tr",[r("td",[t._v("Šípka hore")]),r("td",[t._v("arrowup")])]),r("tr",[r("td",[t._v("Šípka dole")]),r("td",[t._v("arrowdown")])]),r("tr",[r("td",[t._v("Šípka doľava")]),r("td",[t._v("arrowleft")])]),r("tr",[r("td",[t._v("Šípka doprava")]),r("td",[t._v("arrowright")])]),r("tr",[r("td",[t._v("Enter")]),r("td",[t._v("enter")])]),r("tr",[r("td",[t._v("Escape")]),r("td",[t._v("esc")])]),r("tr",[r("td",[t._v("Tabulátor")]),r("td",[t._v("tab")])]),r("tr",[r("td",[t._v("Medzerník")]),r("td",[t._v("space")])]),r("tr",[r("td",[t._v("Page Up")]),r("td",[t._v("pageup")])]),r("tr",[r("td",[t._v("Page Down")]),r("td",[t._v("pagedown")])]),r("tr",[r("td",[t._v("Home")]),r("td",[t._v("home")])]),r("tr",[r("td",[t._v("End")]),r("td",[t._v("end")])]),r("tr",[r("td",[t._v("A - Z")]),r("td",[t._v("a-z")])]),r("tr",[r("td",[t._v("0-9")]),r("td",[t._v("0-9")])]),r("tr",[r("td",[t._v("F1-F12")]),r("td",[t._v("f1-f12")])]),r("tr",[r("td",[t._v("+")]),r("td",[t._v("plus")])])])])])},_sfc_staticRenderFns$p=[],__component__$p=normalizeComponent(ShortcutHelpModal$1,_sfc_render$p,_sfc_staticRenderFns$p,!1,null,null,null,null);const ShortcutHelpModal=__component__$p.exports;var __defProp$n=Object.defineProperty,__getOwnPropDesc$n=Object.getOwnPropertyDescriptor,__decorateClass$n=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$n(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$n(t,r,s),s};const nameMap={Text:"Text",Draw:"Kreslenie",Photo:"Obrázok",Arrow:"Šípka",Circle:"Elipsa",Rect:"Obdĺžnik",Sign:"Podpis",Select:"Vybrať objekty",scoring:"Zobraziť/schovať panel s bodovaním",selectNext:"Prepnúť na nasledujúce riešenie",selectPrev:"Prepnúť na predošlé riešenie",save:"Uložiť",delete:"Zmazať vybrané objekty",zoomIn:"Priblížiť",zoomOut:"Oddialiť",copy:"Kopírovať",paste:"Vložiť",cut:"Vystrihnúť",bold:"Prepnúť bold",italic:"Prepnúť italic",subscript:"Dolný Index",superscript:"Horný Index"};let Shortcuts$1=class extends Vue{constructor(){super(...arguments);fe(this,"actionMap",[])}mounted(){this.$store.state.settings.shortcut.settings.forEach(r=>{this.actionMap.push(r)}),this.$store.subscribe(r=>{if(r.type=="applySettings"){const i=r.payload;this.actionMap=i.shortcut.settings}})}invokeAction(r){this.actionMap.find(s=>s.name==r)&&this.eventHub.$emit(`shortcut:${r}`)}getActionKeys(r){return r.split("+").map(i=>i==="plus"?"+":i)}};Shortcuts$1=__decorateClass$n([Component],Shortcuts$1);const Keybindings_vue_vue_type_style_index_0_lang="";var _sfc_render$o=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",t._l(t.actionMap,function(i){return r("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:t.getActionKeys(i.shortcut),expression:"getActionKeys(action.shortcut)",modifiers:{once:!0}}],key:i.name,on:{shortkey:function(s){return t.invokeAction(i.name)}}})}),0)},_sfc_staticRenderFns$o=[],__component__$o=normalizeComponent(Shortcuts$1,_sfc_render$o,_sfc_staticRenderFns$o,!1,null,null,null,null);const Shortcuts=__component__$o.exports;var __defProp$m=Object.defineProperty,__getOwnPropDesc$m=Object.getOwnPropertyDescriptor,__decorateClass$m=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$m(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$m(t,r,s),s};let ScoreTemplates$1=class extends Vue{constructor(){super(...arguments);fe(this,"templates",[]);fe(this,"scoreEntries",[])}mounted(){Database.getAllTemplates().then(r=>{this.templates=r,this.load(this.$store.state.scoringEntries)})}save(){this.$store.commit("setScoringEntries",this.scoreEntries.map(r=>({points:r.points,id:r.template.id})))}load(r){for(const i of r){const s=this.templates.find(c=>c.id==i.id);s&&this.scoreEntries.push({points:i.points,template:s})}}addEntry(){this.scoreEntries.push({points:0,template:this.templates[0]})}isValid(r){return this.scoreEntries.every((s,c)=>c==r?!0:s.points!=this.scoreEntries[r].points)?null:!1}};__decorateClass$m([Watch("scoreEntries",{deep:!0})],ScoreTemplates$1.prototype,"save",1);ScoreTemplates$1=__decorateClass$m([Component],ScoreTemplates$1);const ScoreTemplates_vue_vue_type_style_index_0_lang="";var _sfc_render$n=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",[r("h4",{staticClass:"text-center mb-3"},[t._v(" Bodovacie podpisy a obrázky ")]),t.templates.length>0?r("div",{staticClass:"card"},[r("b-row",{staticClass:"border-bottom mr-1 ml-1"},[r("b-col",{staticClass:"text-center p-2"},[r("h6",[t._v("Body")])]),r("b-col",{staticClass:"text-center p-2"},[r("h6",[t._v("Obrázok / Podpis")])])],1),t._l(t.scoreEntries,function(i,s){return r("b-row",{key:s,staticClass:"mr-1 ml-1 p-0"},[r("b-col",{staticClass:"border-right p-1"},[r("b-form-input",{staticStyle:{width:"60px"},attrs:{type:"number",min:"0",step:"0.5",state:t.isValid(s)},model:{value:i.points,callback:function(c){t.$set(i,"points",t._n(c))},expression:"entry.points"}})],1),r("b-col",{staticClass:"p-1 d-flex justify-content-between"},[r("b-dropdown",{attrs:{right:"",text:i.template.name}},t._l(t.templates,function(c){return r("b-dropdown-item",{key:c.id,on:{click:function(d){i.template=c}}},[t._v(" "+t._s(c.name)+" ")])}),1),r("b-button",{attrs:{variant:"danger"},on:{click:function(c){return t.scoreEntries.splice(s,1)}}},[r("span",{staticClass:"material-icons d-block"},[t._v("delete")])])],1)],1)}),r("b-button",{attrs:{block:""},on:{click:t.addEntry}},[r("span",{staticClass:"material-icons d-block"},[t._v("add")])])],2):r("b-alert",{staticClass:"text-center",attrs:{variant:"danger",show:""}},[r("p",[t._v("Importuj obrázky ak ich chceš pridávať pri bodovaní")])])],1)},_sfc_staticRenderFns$n=[],__component__$n=normalizeComponent(ScoreTemplates$1,_sfc_render$n,_sfc_staticRenderFns$n,!1,null,null,null,null);const ScoreTemplates=__component__$n.exports;var __defProp$l=Object.defineProperty,__getOwnPropDesc$l=Object.getOwnPropertyDescriptor,__decorateClass$l=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$l(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$l(t,r,s),s};let Preferences$1=class extends Vue{constructor(){super(...arguments);fe(this,"categories",[]);fe(this,"selectedCategoryIndex");fe(this,"selectedCategory");fe(this,"shortcutNameMap",nameMap);fe(this,"fonts",FontsAvailable);fe(this,"scoringExpanded",!1);fe(this,"$refs")}beforeMount(){const r=[...tools.map(i=>({options:i.options,defaultOptions:i.defaultOptions,name:i.name,expanded:!1,shortcut:i.shortcut})),{options:{hasFill:!0,hasStroke:!1,hasText:!0,hasStrokeWidth:!1},defaultOptions:{fontFamily:"Helvetica",fill:"#000000",fontSize:12,scoreMap:{}},name:"scoring",expanded:!1,shortcut:"b"}];this.categories=[{text:"Nástroje",settings:{defaultTool:{options:[{value:0,text:"Text"},{value:1,text:"Kreslenie"},{value:3,text:"Šípka"},{value:5,text:"Obdĺžnik"},{value:6,text:"Podpis"},{value:7,text:"Vybrať objekty"}],value:0},tools:r,colors:defaultColors()},name:"tools"},{text:"Klávesové skratky",settings:[...r.map(i=>({name:i.name,shortcut:i.shortcut})),{name:"selectNext",shortcut:"ctrl+arrowdown"},{name:"selectPrev",shortcut:"ctrl+arrowup"},{name:"save",shortcut:"ctrl+s"},{name:"delete",shortcut:"del"},{name:"zoomIn",shortcut:"ctrl+plus"},{name:"zoomOut",shortcut:"ctrl+-"},{name:"cut",shortcut:"ctrl+x"},{name:"copy",shortcut:"ctrl+c"},{name:"paste",shortcut:"ctrl+v"},{name:"bold",shortcut:"ctrl+b"},{name:"italic",shortcut:"ctrl+i"},{name:"subscript",shortcut:"ctrl+."},{name:"superscript",shortcut:"ctrl+,"}],name:"shortcut"},{text:"Ostatné",settings:{showPreviews:!0,autoSave:!0,showTimer:!1,theme:"system"},name:"other"}],this.selectedCategoryIndex=0,this.selectedCategory=this.categories[this.selectedCategoryIndex]}mounted(){if(localStorage.getItem("preferences")){const i=this.$store.state.settings;this.categories[0].settings.defaultTool.value=i.tools.settings.defaultTool.value,Object.assign(this.categories[2].settings,i.other.settings),Object.assign(this.categories[1].settings,i.shortcut.settings),this.categories[0].settings.tools[this.categories[0].settings.tools.length-1]=i.tools.settings.tools.find(s=>s.name=="scoring"),this.categories[0].settings.colors=i.tools.settings.colors}}select(r){console.log(r),this.selectedCategoryIndex=r,this.selectedCategory=this.categories[this.selectedCategoryIndex],this.$forceUpdate()}hasSettings(r){return Object.keys(r.options).some(i=>r.options[i])}save(){localStorage.removeItem("preferences");const r={};for(const i of this.categories)r[i.name]=i;localStorage.setItem("preferences",JSON.stringify(r)),this.$store.commit("applySettings",r),this.eventHub.$emit("tools:init")}update(){updateApp()}get updateAvailable(){return localStorage.getItem("update")=="waiting"}resetColors(){this.$bvModal.msgBoxConfirm("Naozaj chcete obnoviť predovlené farby?",{okVariant:"danger",okTitle:"Áno",cancelTitle:"Nie",cancelVariant:"primary"}).then(r=>{r&&(this.selectedCategory.settings.colors=defaultColors())})}get availableThemes(){return{light:"Svetlé",dark:"Tmavé",system:"Podľa systému"}}};Preferences$1=__decorateClass$l([Component({components:{ColorPicker,ShortcutHelpModal,ScoreTemplates}})],Preferences$1);const Preferences_vue_vue_type_style_index_0_scoped_209e6a10_lang="";var _sfc_render$m=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-row",{staticClass:"window"},[r("b-col",{attrs:{cols:"4"}},[t.updateAvailable?r("b-alert",{attrs:{show:"",variant:"warning"}},[r("h4",{staticClass:"alert-heading"},[t._v(" Aktualizácia ")]),r("p",[t._v(" Je dostupná nová verzia aplikácie. Pre jej aktualizáciu kliknite na tlačidlo nižšie. ")]),r("hr"),r("p",{staticClass:"mb-0"},[r("b-button",{attrs:{variant:"primary"},on:{click:t.update}},[t._v(" Aktualizovať ")])],1)]):t._e(),r("b-list-group",t._l(t.categories,function(i,s){return r("b-list-group-item",{key:i.name,class:{active:t.selectedCategoryIndex==s},on:{click:function(c){return t.select(s)}}},[t._v(" "+t._s(i.text)+" ")])}),1)],1),r("b-col",{staticClass:"categoryMenu",attrs:{cols:"8"}},[r("h1",{staticClass:"text-center"},[t._v(" "+t._s(t.selectedCategory.text)+" ")]),r("hr"),t.selectedCategory.name=="tools"?r("div",[r("b-row",{staticClass:"setting"},[r("b-col",[t._v(" Prvý vybraný nástroj"),r("br"),r("i",{staticStyle:{"font-size":"75%"}},[t._v("Nástroj ktorý sa vyberie pri otvorení Arnolda")])]),r("b-col",[r("b-select",{attrs:{options:t.selectedCategory.settings.defaultTool.options},model:{value:t.selectedCategory.settings.defaultTool.value,callback:function(i){t.$set(t.selectedCategory.settings.defaultTool,"value",i)},expression:"selectedCategory.settings.defaultTool.value"}})],1)],1),r("hr"),r("h2",{staticClass:"text-center m-2"},[t._v(" Predvolené nastavenia pre jednotlivé nástroje ")]),t._l(t.selectedCategory.settings.tools.filter(i=>t.hasSettings(i)),function(i){return r("div",{key:i.name,staticClass:"card"},[r("div",{staticClass:"card-header",on:{click:function(s){i.expanded=!i.expanded}}},[t._v(" "+t._s(t.shortcutNameMap[i.name])+" ")]),r("transition",{attrs:{name:"slide"}},[i.expanded?r("div",{staticClass:"card-body p-4"},[i.options.hasText?r("b-row",{staticClass:"setting"},[r("b-col",{attrs:{"align-self":"center"}},[t._v(" Font ")]),r("b-col",{attrs:{"align-self":"center"}},[r("b-dropdown",{staticClass:"float-right",attrs:{text:i.defaultOptions.fontFamily,right:""}},t._l(t.fonts,function(s){return r("b-dropdown-item",{key:s.viewport,style:{"font-family":s.viewport},nativeOn:{click:function(c){i.defaultOptions.fontFamily=s.viewport}}},[t._v(" "+t._s(s.viewport)+" ")])}),1)],1)],1):t._e(),i.options.hasText?r("b-row",{staticClass:"setting"},[r("b-col",{attrs:{"align-self":"center"}},[t._v(" Veľkosť písma ")]),r("b-col",{attrs:{"align-self":"center"}},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:i.defaultOptions.fontSize,expression:"tool.defaultOptions.fontSize",modifiers:{number:!0}}],staticClass:"form-control float-right",staticStyle:{width:"100px"},attrs:{min:"0",type:"number"},domProps:{value:i.defaultOptions.fontSize},on:{input:function(s){s.target.composing||t.$set(i.defaultOptions,"fontSize",t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}})])],1):t._e(),i.options.hasStrokeWidth?r("b-row",{staticClass:"setting"},[r("b-col",{attrs:{"align-self":"center"}},[t._v(" Hrúbka čiary ")]),r("b-col",{attrs:{"align-self":"center"}},[r("div",{staticClass:"float-right"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:i.defaultOptions.strokeWidth,expression:"tool.defaultOptions.strokeWidth",modifiers:{number:!0}}],staticStyle:{width:"100px"},attrs:{min:"1",type:"range",max:"20"},domProps:{value:i.defaultOptions.strokeWidth},on:{__r:function(s){t.$set(i.defaultOptions,"strokeWidth",t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}}),t._v(" "+t._s(i.defaultOptions.strokeWidth)+" ")])])],1):t._e(),i.options.hasStroke?r("b-row",{staticClass:"setting"},[r("b-col",{attrs:{"align-self":"center"}},[t._v(" Farba čiary ")]),r("b-col",{attrs:{"align-self":"center"}},[r("color-picker",{staticClass:"float-right",attrs:{value:i.defaultOptions.stroke,name:i.name+"stroke"},model:{value:i.defaultOptions.stroke,callback:function(s){t.$set(i.defaultOptions,"stroke",s)},expression:"tool.defaultOptions.stroke"}})],1)],1):t._e(),i.options.hasFill?r("b-row",{staticClass:"setting"},[r("b-col",{attrs:{"align-self":"center"}},[t._v(" Výplň ")]),r("b-col",{attrs:{"align-self":"center"}},[r("color-picker",{staticClass:"float-right",attrs:{value:i.defaultOptions.fill,name:i.name+"fill"},model:{value:i.defaultOptions.fill,callback:function(s){t.$set(i.defaultOptions,"fill",s)},expression:"tool.defaultOptions.fill"}})],1)],1):t._e(),i.name=="scoring"?r("score-templates"):t._e()],1):t._e()])],1)}),r("hr"),r("h2",{staticClass:"text-center m-2"},[t._v(" Farby ")]),r("i",{staticStyle:{"font-size":"85%"}},[t._v(" Farby ktoré sa zobrazia v nástroji na výber farby. Vždy môžete použiť aj iné farby ako tie, ktoré si tu nastavíte. ")]),r("div",{staticClass:"swatches-list"},[t._l(t.selectedCategory.settings.colors,function(i,s){return r("div",{key:s,staticClass:"swatch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategory.settings.colors[s],expression:"selectedCategory.settings.colors[i]"}],staticClass:"color-input",style:"--color:"+t.selectedCategory.settings.colors[s],attrs:{type:"color",name:"color"+s},domProps:{value:t.selectedCategory.settings.colors[s]},on:{input:function(c){c.target.composing||t.$set(t.selectedCategory.settings.colors,s,c.target.value)}}}),r("span",{staticClass:"material-icons",on:{click:function(c){return t.selectedCategory.settings.colors.splice(s,1)}}},[t._v("delete")])])}),r("div",{staticClass:"swatch",on:{click:function(i){return t.selectedCategory.settings.colors.push("#000000")}}},[r("span",{staticClass:"material-icons"},[t._v("add")]),r("span",[t._v("Pridať")])]),r("div",{staticClass:"swatch",on:{click:t.resetColors}},[r("span",{staticClass:"material-icons"},[t._v("refresh")]),r("span",[t._v("Resetovať")])])],2)],2):t.selectedCategory.name=="other"?r("div",[r("b-row",[r("b-col",[t._v("Ukázať náhľad riešení v ľavej lište")]),r("b-col",[r("b-form-checkbox",{staticClass:"float-right",attrs:{size:"md",switch:""},model:{value:t.selectedCategory.settings.showPreviews,callback:function(i){t.$set(t.selectedCategory.settings,"showPreviews",i)},expression:"selectedCategory.settings.showPreviews"}})],1)],1),r("hr"),r("b-row",[r("b-col",[t._v("Automatické uloženie riešenia pri prepnutí na iné")]),r("b-col",[r("b-form-checkbox",{staticClass:"float-right",attrs:{size:"md",switch:""},model:{value:t.selectedCategory.settings.autoSave,callback:function(i){t.$set(t.selectedCategory.settings,"autoSave",i)},expression:"selectedCategory.settings.autoSave"}})],1)],1),r("hr"),r("b-row",[r("b-col",[t._v("Ukázať časovač")]),r("b-col",[r("b-form-checkbox",{staticClass:"float-right",attrs:{size:"md",switch:""},model:{value:t.selectedCategory.settings.showTimer,callback:function(i){t.$set(t.selectedCategory.settings,"showTimer",i)},expression:"selectedCategory.settings.showTimer"}})],1)],1),r("hr"),r("b-row",[r("b-col",[t._v("Téma")]),r("b-col",[r("b-dropdown",{staticClass:"float-right",attrs:{size:"md",text:t.availableThemes[t.selectedCategory.settings.theme],right:""}},t._l(Object.keys(t.availableThemes),function(i){return r("b-dropdown-item",{key:i,on:{click:function(s){t.selectedCategory.settings.theme=i}}},[t._v(" "+t._s(t.availableThemes[i])+" ")])}),1)],1)],1)],1):t.selectedCategory.name=="shortcut"?r("div",[r("b-alert",{attrs:{show:"",variant:"info",dismissible:""}},[t._v(" Chceš vedieť ako nastaviť svoje skratky? Klikni "),r("a",{staticClass:"link-primary",on:{click:function(i){return t.$refs.shortcutHelp.show()}}},[t._v("sem")]),r("shortcut-help-modal",{ref:"shortcutHelp"})],1),t._l(t.selectedCategory.settings,function(i){return r("div",{key:i.name},[r("b-row",[r("b-col",{attrs:{"align-self":"center"}},[t._v(" "+t._s(t.shortcutNameMap[i.name])+" ")]),r("b-col",{attrs:{"align-self":"center"}},[r("b-form-input",{staticClass:"float-right w-50",model:{value:i.shortcut,callback:function(s){t.$set(i,"shortcut",s)},expression:"tool.shortcut"}})],1)],1),r("hr")],1)})],2):t._e()])],1)},_sfc_staticRenderFns$m=[],__component__$m=normalizeComponent(Preferences$1,_sfc_render$m,_sfc_staticRenderFns$m,!1,null,"209e6a10",null,null);const Preferences=__component__$m.exports;var __defProp$k=Object.defineProperty,__getOwnPropDesc$k=Object.getOwnPropertyDescriptor,__decorateClass$k=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$k(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$k(t,r,s),s};let DownloadAllButton$1=class extends Vue{constructor(){super(...arguments);fe(this,"downloading",!1);fe(this,"$refs")}mounted(){this.eventHub.$on("download:done",()=>this.downloading=!1),this.eventHub.$on("editor:downloadZip",()=>this.downloading=!0)}downloadAll(r){console.log(r),this.eventHub.$emit("editor:downloadZip",r)}};DownloadAllButton$1=__decorateClass$k([Component],DownloadAllButton$1);var _sfc_render$l=function e(){var t=this,r=t._self._c;return t._self._setupProxy,t.downloading?r("b-nav-item",[t.downloading?r("b-spinner",{attrs:{variant:"secondary",label:"Loading...",small:""}}):t._e(),t._v(" Komprimujem ")],1):r("b-nav-item-dropdown",{attrs:{text:"Stiahnuť všetky",disabled:t.downloading}},[r("b-dropdown-item",{attrs:{id:"downloadAll",disabled:t.downloading},on:{click:function(i){return t.downloadAll(!1)}}},[t._v(" Pre stránky ")]),r("b-dropdown-item",{attrs:{id:"downloadAllArnold",disabled:t.downloading},on:{click:function(i){return t.downloadAll(!0)}}},[t._v(" Pre použitie v Arnoldovi ")]),r("b-tooltip",{attrs:{triggers:"hover",target:"downloadAll",placement:"right"}},[t._v(" Stiahne len obodované riešenia - pripravené pre nahratie na stránky ")]),r("b-tooltip",{attrs:{triggers:"hover",target:"downloadAllArnold",placement:"right"}},[t._v(" Stiahne úplne všetko - pôvodné riešenia, všetky opravené riešenia, komentáre, aby sa to dalo ďalej editovať v Arnoldovi. ")])],1)},_sfc_staticRenderFns$l=[],__component__$l=normalizeComponent(DownloadAllButton$1,_sfc_render$l,_sfc_staticRenderFns$l,!1,null,null,null,null);const DownloadAllButton=__component__$l.exports;var __defProp$j=Object.defineProperty,__getOwnPropDesc$j=Object.getOwnPropertyDescriptor,__decorateClass$j=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$j(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$j(t,r,s),s};let SessionDestroyButton$1=class extends Vue{async destroySession(){const t=await Database.getAllDocuments();for(const r of t)r.problem===this.$store.state.currentProblem&&await Database.removeDocument(r.id);this.$store.commit("unloadCurrentProblem"),this.$router.push({path:"/"})}};SessionDestroyButton$1=__decorateClass$j([Component({components:{DownloadAllButton}})],SessionDestroyButton$1);var _sfc_render$k=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.sessionDestroy",modifiers:{sessionDestroy:!0}}]},[r("span",[t._v("Uzavrieť opravovanie")]),r("b-modal",{attrs:{id:"sessionDestroy",title:"Naozaj chcete uzavrieť opravovanie?","ok-variant":"danger","cancel-variant":"primary",centered:""},on:{ok:t.destroySession},scopedSlots:t._u([{key:"modal-footer",fn:function({ok:i,cancel:s}){return[r("div",{staticClass:"float-left"},[r("b-button",{staticClass:"m-1",attrs:{variant:"primary"},on:{click:function(c){return s()}}},[t._v(" Zrušiť ")]),r("b-button",{staticClass:"m-1",attrs:{variant:"danger"},on:{click:function(c){return i()}}},[t._v(" Uzavrieť opravovanie ")])],1)]}}])},[r("p",[t._v("Pri uzavretí opravovania sa zmažú nasledovné veci")]),r("ul",[r("li",[t._v(" Riešenia a všetko čo s nimi súvisí - ak si ich chceš nechať musíš ich stiahnuť na svoj počítač ")]),r("li",[t._v("Bodovacie kritéria")])]),t._v(" Ak to potvrdíš, svoje stiahnuté opravené riešenia už nebudeš vedieť meniť"),r("br"),r("b",[t._v("Pred uzavretím sa uisti, že máš stiahnuté opravené riešenia!")])])],1)},_sfc_staticRenderFns$k=[],__component__$k=normalizeComponent(SessionDestroyButton$1,_sfc_render$k,_sfc_staticRenderFns$k,!1,null,null,null,null);const SessionDestroyButton=__component__$k.exports;var __defProp$i=Object.defineProperty,__getOwnPropDesc$i=Object.getOwnPropertyDescriptor,__decorateClass$i=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$i(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$i(t,r,s),s};let AddDocumentButton$1=class extends Vue{constructor(){super(...arguments);fe(this,"noveRiesenia",[])}formatNames(r){return r.map(i=>activeParser.parse(i.name).riesitel).join(", ")}pridajRiesenia(){console.log("pridavam");const r=[],i=Documents.length;for(let s=0;s<this.noveRiesenia.length;s++){const c=this.noveRiesenia[s];r.push(new Promise((d,m)=>{const y=s;c.arrayBuffer().then(g=>{AddDocument(c.name,g,i+y+1).then(()=>d()).catch(b=>this.$bvModal.msgBoxConfirm(`Riešenie ${c.name} už existuje, chceš ho nahradiť novým?`,{okTitle:"Áno",cancelTitle:"Nie"}).then(j=>{if(j){const B=activeParser.parse(c.name).id;Database.removeDocument(B).then(()=>{AddDocument(c.name,g,i+y+1).then(()=>d())})}else d()}))})}))}Promise.all(r).then(()=>{location.reload()})}};AddDocumentButton$1=__decorateClass$i([Component],AddDocumentButton$1);var _sfc_render$j=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.noveRiesenie",modifiers:{noveRiesenie:!0}}]},[r("span",{attrs:{id:"addSolution"}},[t._v("Pridať ďalšie riešenie")]),r("b-tooltip",{attrs:{target:"addSolution",triggers:"hover",placement:"bottom"}},[t._v(" Pridať ďalšie riešenie alebo nahradiť existujúce ")]),r("b-modal",{attrs:{id:"noveRiesenie",size:"lg",title:"Pridať nové riešenie","ok-disabled":t.noveRiesenia.length==0},on:{ok:t.pridajRiesenia}},[r("b-form-file",{attrs:{id:"rieseniaInput",accept:".pdf",multiple:"","file-name-formatter":t.formatNames},model:{value:t.noveRiesenia,callback:function(i){t.noveRiesenia=i},expression:"noveRiesenia"}})],1)],1)},_sfc_staticRenderFns$j=[],__component__$j=normalizeComponent(AddDocumentButton$1,_sfc_render$j,_sfc_staticRenderFns$j,!1,null,null,null,null);const AddDocumentButton=__component__$j.exports;var __defProp$h=Object.defineProperty,__getOwnPropDesc$h=Object.getOwnPropertyDescriptor,__decorateClass$h=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$h(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$h(t,r,s),s};let Topbar$1=class extends Vue{constructor(){super(...arguments);fe(this,"downloading",!1);fe(this,"progress",0);fe(this,"noveRiesenia",[])}mounted(){this.eventHub.$on("download:done",()=>{this.downloading=!1}),this.eventHub.$on("editor:downloadZip",()=>{this.downloading=!0,this.progress=0}),this.eventHub.$on("download:progress",r=>{this.progress=r})}download(){var r;this.eventHub.$emit("editor:download",(r=getViewedDocument())==null?void 0:r.id)}};Topbar$1=__decorateClass$h([Component({components:{Stats,Preferences,SessionDestroyButton,AddDocumentButton,DownloadAllButton}})],Topbar$1);const __$_require_3eeb44c6__="/assets/Icon-12680465.png",Topbar_vue_vue_type_style_index_0_lang="";var _sfc_render$i=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-navbar",{staticStyle:{width:"100%"},attrs:{type:"dark",variant:"dark"}},[r("b-navbar-brand",{attrs:{active:t.$route.path==="/"},on:{click:function(i){return t.$router.push({path:"/"})}}},[r("img",{staticClass:"logo",attrs:{src:__$_require_3eeb44c6__,alt:"Arnold",height:"30"}})]),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[r("session-destroy-button",{attrs:{disabled:t.downloading}}),r("b-nav-item",{staticClass:"nav-separator"}),r("b-nav-item",{on:{click:function(i){return t.eventHub.$emit("document:save")}}},[r("span",[t._v("Uložiť")])]),r("b-nav-item",{staticClass:"nav-separator"}),r("b-nav-item",{on:{click:t.download}},[r("span",[t._v("Stiahnuť")])]),r("download-all-button",{attrs:{mode:1}}),r("b-nav-item",{staticClass:"nav-separator"}),r("add-document-button"),r("b-nav-item",{staticClass:"nav-separator"}),r("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.stats",modifiers:{stats:!0}}]},[r("span",[t._v("Štatistiky")]),r("b-modal",{attrs:{id:"stats",title:"Štatistiky",centered:"",size:"xl","ok-only":"",scrollable:""}},[r("stats",{ref:"stat"})],1)],1),r("b-nav-item",{staticClass:"nav-separator"}),r("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.preferences",modifiers:{preferences:!0}}]},[r("span",[t._v("Nastavenia")]),r("b-modal",{attrs:{id:"preferences",title:"Nastavenia",size:"xl","ok-only":""},on:{ok:function(i){return t.$refs.preferences.save()}}},[r("preferences",{ref:"preferences"})],1)],1),r("b-nav-item",{staticClass:"nav-separator"}),r("b-nav-item",{on:{click:function(i){return t.$router.push({path:"/help"})}}},[t._v(" Pomoc ")])],1)],1),t.downloading?r("div",{staticClass:"bottom-progress-bar"},[r("b-progress",{staticClass:"h-100 w-100",attrs:{max:"100","show-progress":"",animated:""}},[r("b-progress-bar",{attrs:{value:t.progress,animated:""}},[r("span",[t._v(t._s(t.progress.toFixed(2))+"%")])])],1)],1):t._e()],1)},_sfc_staticRenderFns$i=[],__component__$i=normalizeComponent(Topbar$1,_sfc_render$i,_sfc_staticRenderFns$i,!1,null,null,null,null);const Topbar=__component__$i.exports;async function ExtractImages(e){const t=[],i=(await PDFDocument.load(e)).context.enumerateIndirectObjects();let s=0;for(const[c,d]of i)if(d instanceof PDFRawStream){const m=d.dict;m.get(PDFName.of("SMask")),m.get(PDFName.of("ColorSpace"));const y=m.get(PDFName.of("Subtype")),g=m.get(PDFName.of("Width")),b=m.get(PDFName.of("Height")),j=m.get(PDFName.of("Name"));m.get(PDFName.of("BitsPerComponent"));const R=m.get(PDFName.of("Filter"))===PDFName.of("DCTDecode")?"data:image/jpeg;base64,":"data:image/png;base64,";y==PDFName.of("Image")&&(t.push({ref:c,width:g.numberValue,height:b.numberValue,url:R+await bufferToBase64(d.contents),name:j?j.key:`Object${s}`,rotation:0}),s++)}return t}async function bufferToBase64(e){const t=await new Promise(r=>{const i=new FileReader;i.onload=()=>r(i.result),i.readAsDataURL(new Blob([e]))});return t.slice(t.indexOf(",")+1)}async function GeneratePDF(e,t,r){const i=await PDFDocument.create();for(let c=0;c<e.length;c++){const d=e[c],m=await fetch(d.url),y=m.headers.get("content-type"),g=await m.arrayBuffer(),b=PageSizes.A4;b[1]=Math.max(b[1],d.rotation%2===0?d.height:d.width);const j=[{x:0,y:0},{x:0,y:b[1]},{x:b[0],y:b[1]},{x:b[0],y:0}],B=i.addPage(b),R=y==="image/png"?await i.embedPng(g):await i.embedJpg(g);let D=b[1]-(d.rotation%2===0?d.height:d.width);(d.rotation===1||d.rotation===2)&&(D=-D),B.drawImage(R,{x:j[d.rotation%4].x,y:j[d.rotation%4].y+D/2,width:d.width,height:d.height,rotate:degrees(360-d.rotation*90)})}t&&i.addPage(PageSizes.A4);const s=await i.save();await updateDocument(r,s),setTimeout(()=>{eventHub.$emit("viewport:refresh",s)},500)}async function AddTrailingPage(e){const t=await Database.getDocument(e),r=await PDFDocument.load(t.initialPdf);r.addPage(PageSizes.A4),t.initialPdf=await r.save(),Database.updateDocument(e,t),setTimeout(()=>{eventHub.$emit("viewport:refresh",t.initialPdf)},500)}function GetA4Dimensions(){return{width:PageSizes.A4[0],height:PageSizes.A4[1]}}async function updateDocument(e,t){const r=await Database.getDocument(e);r.initialPdf=t,r.changes=[],r.pdfData=r.initialPdf,Database.updateDocument(e,r,!0)}var __defProp$g=Object.defineProperty,__getOwnPropDesc$g=Object.getOwnPropertyDescriptor,__decorateClass$g=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$g(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$g(t,r,s),s};let PDFRepairer=class extends Vue{constructor(){super(...arguments);fe(this,"ImageSources",[]);fe(this,"canvases",[]);fe(this,"newPage",!1);fe(this,"err","");fe(this,"rotating",!1);fe(this,"busy",!1);fe(this,"imagesLoading",!0);fe(this,"rotated",!1);fe(this,"$refs")}Open(){this.$refs.modal.show(),this.loadImages()}async loadImages(){var r;const t=(r=getViewedDocument())==null?void 0:r.id;if(t){const i=await Database.getDocument(t);this.ImageSources=await ExtractImages(i.initialPdf).catch(s=>{this.err=s})||[],this.imagesLoading=!1,await this.$nextTick(),this.renderRotateUI()}}generate(){var r;const t=(r=getViewedDocument())==null?void 0:r.id;t&&(this.rotated?this.$bvModal.msgBoxConfirm("Ak upravíš toto PDFko, tak stratíš všetky zmeny ktoré v ňom boli urobené",{title:"Upraviť PDFko?"}).then(i=>{i&&(this.busy=!0,this.eventHub.$emit("document:save"),GeneratePDF(this.ImageSources,this.newPage,t).then(this.generationFinished))}):this.newPage?(this.busy=!0,this.eventHub.$emit("document:save"),AddTrailingPage(t).then(this.generationFinished)):this.$bvToast.toast("Nevybral si ktoré strany ako otočiť ani či chceš pridať stranu. Pre vygenerovanie zmeneného PDFka musíš vybrať aspoň jednu akciu.",{title:"Neboli vykonané žiadne zmeny",variant:"warning",solid:!0,autoHideDelay:3e3}))}generationFinished(){this.busy=!1,this.$bvToast.toast("PDFko bolo úspešne upravené.",{title:"PDFko upravené",variant:"success",solid:!0,autoHideDelay:5e3}),this.$refs.modal.hide()}renderRotateUI(){const t=this.ImageSources;this.rotating=!1,this.$refs.pageCanvases&&this.$refs.pageCanvases.forEach((r,i)=>{const s=new Image;s.src=t[i].url;const c=GetA4Dimensions(),d=c.width/c.height;s.onload=()=>{const y=new fabric.fabric.Canvas(r,{width:300,height:300/d,backgroundColor:"transparent",selection:!1});y.setZoom(300/c.width);const g=new fabric.fabric.Image(s,{top:c.height/2,left:c.width/2,originX:"center",originY:"center",width:s.width,height:s.height,hasControls:!1,lockMovementX:!0,lockMovementY:!0,scaleX:c.width/s.width,scaleY:c.width/s.width,hoverCursor:"pointer"});y.add(g),this.canvases.push(y),y.on("mouse:down",b=>{if(b.target&&b.target.type==="image"){if(!b.target.width||!b.target.height||!b.target.scaleX||!b.target.scaleY)return;this.rotated=!0;let j=b.target.angle||0;b.target.set({angle:(j+90)%360}),j=(j+90)%360,t[i].rotation=j/90,j/90%2==1?b.target.set({scaleX:c.width/b.target.height,scaleY:c.width/b.target.height}):b.target.set({scaleX:c.width/b.target.width,scaleY:c.width/b.target.width}),t[i].width=b.target.width*b.target.scaleX,t[i].height=b.target.height*b.target.scaleY,y.renderAll()}}),g&&g.width!==void 0&&g.height!==void 0&&g.scaleX!==void 0&&g.scaleY!==void 0?(g.set({scaleX:c.width/g.width,scaleY:c.width/g.width}),t[i].width=g.width*g.scaleX,t[i].height=g.height*g.scaleY):console.error("Image dimensions not defined, rotation error may occur")}})}};PDFRepairer=__decorateClass$g([Component],PDFRepairer);const PdfRepairer_vue_vue_type_style_index_0_scoped_a66a4a50_lang="";var _sfc_render$h=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-modal",{ref:"modal",attrs:{size:"xl",title:"Opraviť pokazené PDFko",scrollable:"","no-close-on-backdrop":""},scopedSlots:t._u([{key:"modal-footer",fn:function({cancel:i}){return[r("b-button",{attrs:{size:"md",disabled:t.ImageSources.length===0&&!t.newPage||t.busy},on:{click:function(s){return t.generate()}}},[t.busy?r("b-spinner"):r("span",[t._v("Vygeneruj")])],1),r("b-button",{attrs:{size:"md",variant:"danger",disabled:t.busy},on:{click:function(s){return i()}}},[t._v(" Zrušiť ")])]}}])},[r("p",[t._v(" Nie je miesto na komentár, alebo pdfko je divne otočené? Tu to vieš vyriešiť. "),r("br"),t._v(" Otáčanie strán je dostupné len pri riešeniach, kde sú len obrázky. ")]),t.ImageSources?r("div",[r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.rotate-collapse",modifiers:{"rotate-collapse":!0}}],attrs:{variant:"primary",block:""}},[t._v(" Otáčanie strán ")]),r("b-collapse",{attrs:{id:"rotate-collapse"},on:{show:t.renderRotateUI}},[t.ImageSources.length>0?r("div",[r("b-alert",{attrs:{show:"",variant:"warning"}},[r("p",[t._v(" Otáčaj, len ak riešenie obsahuje iba fotky, inak prídeš o všetok text a zmeny, ktorý v ňom boli!"),r("br"),t._v(" Riešenie otočíš kliknutím na obrázok nižšie a otočenie uložíš stlačením "),r("b",[t._v("Vygeneruj")]),t._v(". ")])]),r("div",{staticClass:"pages"},[t.imagesLoading?r("b-spinner"):t._l(t.ImageSources,function(i){return r("b-card",{key:i.id,staticClass:"m-2"},[r("div",{ref:"images",refInFor:!0},[r("canvas",{ref:"pageCanvases",refInFor:!0,staticClass:"image"})])])})],2)],1):r("b-alert",{attrs:{show:"",variant:"success"}},[r("p",[t._v("V tomto riešení nie sú obrázky, nie je možné otáčanie")])])],1)],1):t._e(),t.err?r("div",[r("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(" "+t._s(t.err)+" ")])],1):t._e(),r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.new-page",modifiers:{"new-page":!0}}],attrs:{variant:"primary",block:""}},[t._v(" Nová strana ")]),r("b-collapse",{attrs:{id:"new-page"}},[r("b-card",[r("b-row",{staticClass:"p-2 w-100"},[r("b-col",[t._v("Pridať novú stranu na koniec")]),r("b-col",[r("b-form-checkbox",{staticClass:"float-right",attrs:{switch:""},model:{value:t.newPage,callback:function(i){t.newPage=i},expression:"newPage"}})],1)],1)],1)],1)],1)},_sfc_staticRenderFns$h=[],__component__$h=normalizeComponent(PDFRepairer,_sfc_render$h,_sfc_staticRenderFns$h,!1,null,"a66a4a50",null,null);const PdfRepairer=__component__$h.exports;var __defProp$f=Object.defineProperty,__getOwnPropDesc$f=Object.getOwnPropertyDescriptor,__decorateClass$f=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$f(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$f(t,r,s),s};let ImageEditModal$1=class extends Vue{constructor(){super(...arguments);fe(this,"image",null);fe(this,"$refs")}show(r){this.image=r,this.$refs.modal.show()}};ImageEditModal$1=__decorateClass$f([Component],ImageEditModal$1);var _sfc_render$g=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",[t.image?r("b-modal",{ref:"modal",attrs:{size:"xl",centered:"",title:"Upravuješ "+t.image.name,"ok-only":""}},[r("b-row",[r("b-col",{attrs:{cols:"6"}},[r("b-img",{staticClass:"mw-100 mh-100",attrs:{src:t.image.data.img}})],1),r("b-col",{attrs:{cols:"6"}},[t._v(" Názov "),r("b-form-input",{model:{value:t.image.name,callback:function(i){t.$set(t.image,"name",i)},expression:"image.name"}}),t._v(" Scale X "),r("b-form-input",{attrs:{type:"number"},model:{value:t.image.templateOptions.scaleX,callback:function(i){t.$set(t.image.templateOptions,"scaleX",t._n(i))},expression:"image.templateOptions.scaleX"}}),t._v(" Scale Y "),r("b-form-input",{attrs:{type:"number"},model:{value:t.image.templateOptions.scaleY,callback:function(i){t.$set(t.image.templateOptions,"scaleY",t._n(i))},expression:"image.templateOptions.scaleY"}})],1)],1)],1):t._e()],1)},_sfc_staticRenderFns$g=[],__component__$g=normalizeComponent(ImageEditModal$1,_sfc_render$g,_sfc_staticRenderFns$g,!1,null,null,null,null);const ImageEditModal=__component__$g.exports;var __defProp$e=Object.defineProperty,__getOwnPropDesc$e=Object.getOwnPropertyDescriptor,__decorateClass$e=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$e(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$e(t,r,s),s};let ImageModal$1=class extends Vue{constructor(){super(...arguments);fe(this,"images",[]);fe(this,"file",null);fe(this,"$refs");fe(this,"deleted",[])}mounted(){Database.getAllTemplates().then(r=>{this.images=r.filter(i=>i.type==="Image").map(i=>({...i,hover:!1}))})}openImageSelect(){this.$refs.imageInput.$el.click()}async addImage(){if(!this.file)return;const r=await this.getBase64(this.file);this.images.push({id:Math.random().toString(36).substr(2,9),name:this.file.name.substring(0,this.file.name.length-4),type:"Image",templateOptions:{},data:{img:r},hover:!1}),this.$nextTick()}getBase64(r){return new Promise((i,s)=>{const c=new FileReader;c.readAsDataURL(r),c.onload=()=>i(c.result),c.onerror=d=>s(d)})}imageModalAccepted(){this.images.forEach(r=>{Database.updateTemplate(r)}),this.deleted.forEach(r=>{Database.removetemplate(r)})}remove(r){const i=this.images.findIndex(s=>s.id==r);this.images.splice(i,1),this.deleted.push(r)}edit(r){const i=this.images.findIndex(s=>s.id==r);i!=-1&&this.$refs.editModal.show(this.images[i])}};ImageModal$1=__decorateClass$e([Component({components:{ImageEditModal}})],ImageModal$1);const ImageModal_vue_vue_type_style_index_0_scoped_37dea8f0_lang="";var _sfc_render$f=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"d-flex flex-row flex-wrap justify-content-around"},[r("b-file",{ref:"imageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".png",plain:""},on:{input:t.addImage},model:{value:t.file,callback:function(i){t.file=i},expression:"file"}}),t._l(t.images,function(i){return r("div",{key:i.id,staticClass:"card d-flex justify-content-center align-items-center btn",staticStyle:{width:"300px",height:"150px"},on:{mouseover:function(s){i.hover=!0},mouseleave:function(s){i.hover=!1}}},[i.hover?r("div",{staticClass:"d-flex justify-content-center align-items-center position-absolute w-100 h-100",staticStyle:{background:"rgb(0, 0, 0, 0.5)"}},[r("div",{staticClass:"d-flex flex-column"},[r("b-btn-group",[r("b-button",{attrs:{variant:"primary"},on:{click:function(s){return t.edit(i.id)}}},[r("span",{staticClass:"material-icons"},[t._v("edit")])]),r("b-button",{attrs:{variant:"danger"},on:{click:function(s){return t.remove(i.id)}}},[r("span",{staticClass:"material-icons"},[t._v(" delete ")])])],1)],1),r("div",{staticClass:"bottom-text rounded"},[t._v(" "+t._s(i.name)+" ")])]):t._e(),r("b-img",{staticClass:"mw-100 mh-100",attrs:{src:i.data.img}})],1)}),r("div",{staticClass:"card d-flex justify-content-center align-items-center btn",staticStyle:{width:"300px",height:"150px"},on:{click:t.openImageSelect}},[r("span",{staticClass:"material-icons"},[t._v("add")])]),r("image-edit-modal",{ref:"editModal"})],2)},_sfc_staticRenderFns$f=[],__component__$f=normalizeComponent(ImageModal$1,_sfc_render$f,_sfc_staticRenderFns$f,!1,null,"37dea8f0",null,null);const ImageModal=__component__$f.exports;var __defProp$d=Object.defineProperty,__getOwnPropDesc$d=Object.getOwnPropertyDescriptor,__decorateClass$d=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$d(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$d(t,r,s),s};let SignModal$1=class extends Vue{constructor(){super(...arguments);fe(this,"signs");fe(this,"signatures");fe(this,"deleted")}data(){return{signatures:[],canvases:[],deleted:[]}}mounted(){this.signs().then(r=>{console.log(r),this.signatures=r.map((i,s)=>({hover:!1,canvas:void 0,element:void 0,id:i.id,name:i.name||`Podpis ${s+1}`})),this.$nextTick().then(()=>{if(r.length>0)for(const i of r){const s=document.getElementById("canvas_"+i.id),c=new fabric.fabric.Canvas(s,{selection:!1});c.loadFromJSON(i.data,()=>{c.isDrawingMode=!1});const d=this.signatures.find(m=>m.id==i.id);d&&(d.canvas=c,d.element=s)}console.log(this.signatures)})})}addSignature(){const r=Math.random().toString(36).substr(2,9);this.signatures.push({id:r,hover:!1,name:`Podpis ${this.signatures.length+1}`}),this.$nextTick().then(()=>{const i=document.getElementById("canvas_"+r);console.log(i);const s=new fabric.fabric.Canvas(i,{selection:!1});s.isDrawingMode=!1,s.on("object:added",c=>{c.target&&(c.target.selectable=!1,c.target.evented=!1)}),this.signatures[this.signatures.length-1].canvas=s,this.signatures[this.signatures.length-1].element=i})}edit(r){const i=this.signatures.find(s=>s.id==r);i&&(this.signatures.forEach(s=>{s.canvas.isDrawingMode=!1}),i.hover=!1,i.canvas&&(i.canvas.isDrawingMode=!0))}deselectAll(){this.signatures.some(r=>r.hover)||this.signatures.forEach(r=>{r.canvas.isDrawingMode=!1})}remove(r){const i=this.signatures.findIndex(s=>s.id==r);this.signatures.splice(i,1),this.deleted.push(r)}signModalAccepted(){this.signatures.forEach(r=>{const i={id:r.id||Math.random().toString(36).substr(2,9),type:"Sign",data:r.canvas.toJSON(),name:r.name};Database.updateTemplate(i)}),this.deleted.forEach(r=>{Database.removetemplate(r)})}};__decorateClass$d([Prop({required:!0})],SignModal$1.prototype,"signs",2);SignModal$1=__decorateClass$d([Component({})],SignModal$1);var _sfc_render$e=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"d-flex flex-row flex-wrap justify-content-around",on:{mousedown:t.deselectAll}},[t._l(t.signatures,function(i){return r("div",{key:i.id},[r("div",{staticClass:"card position-relative",staticStyle:{width:"300px",height:"150px"},on:{mouseover:function(s){i.hover=!0},mouseleave:function(s){i.hover=!1}}},[r("canvas",{staticClass:"w-100 h-100",attrs:{id:"canvas_"+i.id}}),i.hover&&i.canvas&&!i.canvas.isDrawingMode?r("div",{staticClass:"d-flex justify-content-center align-items-center position-absolute w-100 h-100",staticStyle:{background:"rgb(0, 0, 0, 0.5)"}},[r("div",{staticClass:"d-flex flex-column"},[r("div",{staticClass:"btn-group"},[r("button",{staticClass:"btn btn-primary",on:{click:function(s){return t.edit(i.id)}}},[r("span",{staticClass:"material-icons"},[t._v("edit")])]),r("button",{staticClass:"btn btn-danger",on:{click:function(s){return t.remove(i.id)}}},[r("span",{staticClass:"material-icons"},[t._v(" delete ")])])])]),r("div",{staticClass:"position-absolute w-100",staticStyle:{bottom:"0"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:i.name,expression:"signature.name"}],staticClass:"w-100 form-control",attrs:{type:"text",placeholder:"Meno podpisu"},domProps:{value:i.name},on:{input:function(s){s.target.composing||t.$set(i,"name",s.target.value)}}})])]):t._e()])])}),r("div",{staticClass:"card d-flex justify-content-center align-items-center btn",staticStyle:{width:"300px",height:"150px","background-color":"var(--bg-700)"},on:{click:t.addSignature}},[r("span",{staticClass:"material-icons"},[t._v("add")])])],2)},_sfc_staticRenderFns$e=[],__component__$e=normalizeComponent(SignModal$1,_sfc_render$e,_sfc_staticRenderFns$e,!1,null,null,null,null);const SignModal=__component__$e.exports;var __defProp$c=Object.defineProperty,__getOwnPropDesc$c=Object.getOwnPropertyDescriptor,__decorateClass$c=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$c(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$c(t,r,s),s};let ToolButton$1=class extends Vue{constructor(){super(...arguments);fe(this,"icon");fe(this,"tooltip");fe(this,"id");fe(this,"variant");fe(this,"outline")}mounted(){this.getVariant()}getVariant(){return this.outline?`outline-${this.variant}`:this.variant}};__decorateClass$c([Prop({required:!0})],ToolButton$1.prototype,"icon",2);__decorateClass$c([Prop({required:!1})],ToolButton$1.prototype,"tooltip",2);__decorateClass$c([Prop({required:!0})],ToolButton$1.prototype,"id",2);__decorateClass$c([Prop({required:!1,default:"primary"})],ToolButton$1.prototype,"variant",2);__decorateClass$c([Prop({required:!1,default:!1})],ToolButton$1.prototype,"outline",2);ToolButton$1=__decorateClass$c([Component],ToolButton$1);const Toolbutton_vue_vue_type_style_index_0_scoped_0d8529ee_lang="";var _sfc_render$d=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-button",{staticClass:"btn",attrs:{id:t.id,variant:t.getVariant()},on:{click:function(i){return t.$emit("click")}}},[r("span",{staticClass:"material-icons d-block"},[t._v(t._s(t.icon))]),t.tooltip?r("b-tooltip",{attrs:{triggers:"hover",target:t.id}},[t._v(" "+t._s(t.tooltip)+" ")]):t._e()],1)},_sfc_staticRenderFns$d=[],__component__$d=normalizeComponent(ToolButton$1,_sfc_render$d,_sfc_staticRenderFns$d,!1,null,"0d8529ee",null,null);const ToolButton=__component__$d.exports,People={smile:"😄",smiley:"😃",grinning:"😀",blush:"😊",wink:"😉",heart_eyes:"😍",kissing_heart:"😘",kissing_closed_eyes:"😚",kissing:"😗",kissing_smiling_eyes:"😙",stuck_out_tongue_winking_eye:"😜",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue:"😛",flushed:"😳",grin:"😁",pensive:"😔",relieved:"😌",unamused:"😒",disappointed:"😞",persevere:"😣",cry:"😢",joy:"😂",sob:"😭",sleepy:"😪",disappointed_relieved:"😥",cold_sweat:"😰",sweat_smile:"😅",sweat:"😓",weary:"😩",tired_face:"😫",fearful:"😨",scream:"😱",angry:"😠",rage:"😡",triumph:"😤",confounded:"😖",laughing:"😆",yum:"😋",mask:"😷",sunglasses:"😎",sleeping:"😴",dizzy_face:"😵",astonished:"😲",worried:"😟",frowning:"😦",anguished:"😧",imp:"👿",open_mouth:"😮",grimacing:"😬",neutral_face:"😐",confused:"😕",hushed:"😯",smirk:"😏",expressionless:"😑",man_with_gua_pi_mao:"👲",man_with_turban:"👳",cop:"👮",construction_worker:"👷",guardsman:"💂",baby:"👶",boy:"👦",girl:"👧",man:"👨",woman:"👩",older_man:"👴",older_woman:"👵",person_with_blond_hair:"👱",angel:"👼",princess:"👸",smiley_cat:"😺",smile_cat:"😸",heart_eyes_cat:"😻",kissing_cat:"😽",smirk_cat:"😼",scream_cat:"🙀",crying_cat_face:"😿",joy_cat:"😹",pouting_cat:"😾",japanese_ogre:"👹",japanese_goblin:"👺",see_no_evil:"🙈",hear_no_evil:"🙉",speak_no_evil:"🙊",skull:"💀",alien:"👽",hankey:"💩",fire:"🔥",sparkles:"✨",star2:"🌟",dizzy:"💫",boom:"💥",anger:"💢",sweat_drops:"💦",droplet:"💧",zzz:"💤",dash:"💨",ear:"👂",eyes:"👀",nose:"👃",tongue:"👅",lips:"👄",thumbs_up:"👍","-1":"👎",ok_hand:"👌",facepunch:"👊",fist:"✊",wave:"👋",hand:"✋",open_hands:"👐",point_up_2:"👆",point_down:"👇",point_right:"👉",point_left:"👈",raised_hands:"🙌",pray:"🙏",clap:"👏",muscle:"💪",walking:"🚶",runner:"🏃",dancer:"💃",couple:"👫",family:"👪",couplekiss:"💏",couple_with_heart:"💑",dancers:"👯",ok_woman:"🙆",no_good:"🙅",information_desk_person:"💁",raising_hand:"🙋",massage:"💆",haircut:"💇",nail_care:"💅",bride_with_veil:"👰",person_with_pouting_face:"🙎",person_frowning:"🙍",bow:"🙇",tophat:"🎩",crown:"👑",womans_hat:"👒",athletic_shoe:"👟",mans_shoe:"👞",sandal:"👡",high_heel:"👠",boot:"👢",shirt:"👕",necktie:"👔",womans_clothes:"👚",dress:"👗",running_shirt_with_sash:"🎽",jeans:"👖",kimono:"👘",bikini:"👙",briefcase:"💼",handbag:"👜",pouch:"👝",purse:"👛",eyeglasses:"👓",ribbon:"🎀",closed_umbrella:"🌂",lipstick:"💄",yellow_heart:"💛",blue_heart:"💙",purple_heart:"💜",green_heart:"💚",broken_heart:"💔",heartpulse:"💗",heartbeat:"💓",two_hearts:"💕",sparkling_heart:"💖",revolving_hearts:"💞",cupid:"💘",love_letter:"💌",kiss:"💋",ring:"💍",gem:"💎",bust_in_silhouette:"👤",speech_balloon:"💬",footprints:"👣"},Nature={dog:"🐶",wolf:"🐺",cat:"🐱",mouse:"🐭",hamster:"🐹",rabbit:"🐰",frog:"🐸",tiger:"🐯",koala:"🐨",bear:"🐻",pig:"🐷",pig_nose:"🐽",cow:"🐮",boar:"🐗",monkey_face:"🐵",monkey:"🐒",horse:"🐴",sheep:"🐑",elephant:"🐘",panda_face:"🐼",penguin:"🐧",bird:"🐦",baby_chick:"🐤",hatched_chick:"🐥",hatching_chick:"🐣",chicken:"🐔",snake:"🐍",turtle:"🐢",bug:"🐛",bee:"🐝",ant:"🐜",beetle:"🐞",snail:"🐌",octopus:"🐙",shell:"🐚",tropical_fish:"🐠",fish:"🐟",dolphin:"🐬",whale:"🐳",racehorse:"🐎",dragon_face:"🐲",blowfish:"🐡",camel:"🐫",poodle:"🐩",feet:"🐾",bouquet:"💐",cherry_blossom:"🌸",tulip:"🌷",four_leaf_clover:"🍀",rose:"🌹",sunflower:"🌻",hibiscus:"🌺",maple_leaf:"🍁",leaves:"🍃",fallen_leaf:"🍂",herb:"🌿",ear_of_rice:"🌾",mushroom:"🍄",cactus:"🌵",palm_tree:"🌴",chestnut:"🌰",seedling:"🌱",blossom:"🌼",new_moon:"🌑",first_quarter_moon:"🌓",moon:"🌔",full_moon:"🌕",first_quarter_moon_with_face:"🌛",crescent_moon:"🌙",earth_asia:"🌏",volcano:"🌋",milky_way:"🌌",stars:"🌠",partly_sunny:"⛅",snowman:"⛄",cyclone:"🌀",foggy:"🌁",rainbow:"🌈",ocean:"🌊"},Objects={bamboo:"🎍",gift_heart:"💝",dolls:"🎎",school_satchel:"🎒",mortar_board:"🎓",flags:"🎏",fireworks:"🎆",sparkler:"🎇",wind_chime:"🎐",rice_scene:"🎑",jack_o_lantern:"🎃",ghost:"👻",santa:"🎅",christmas_tree:"🎄",gift:"🎁",tanabata_tree:"🎋",tada:"🎉",confetti_ball:"🎊",balloon:"🎈",crossed_flags:"🎌",crystal_ball:"🔮",movie_camera:"🎥",camera:"📷",video_camera:"📹",vhs:"📼",cd:"💿",dvd:"📀",minidisc:"💽",floppy_disk:"💾",computer:"💻",iphone:"📱",telephone_receiver:"📞",pager:"📟",fax:"📠",satellite:"📡",tv:"📺",radio:"📻",loud_sound:"🔊",bell:"🔔",loudspeaker:"📢",mega:"📣",hourglass_flowing_sand:"⏳",hourglass:"⌛",alarm_clock:"⏰",watch:"⌚",unlock:"🔓",lock:"🔒",lock_with_ink_pen:"🔏",closed_lock_with_key:"🔐",key:"🔑",mag_right:"🔎",bulb:"💡",flashlight:"🔦",electric_plug:"🔌",battery:"🔋",mag:"🔍",bath:"🛀",toilet:"🚽",wrench:"🔧",nut_and_bolt:"🔩",hammer:"🔨",door:"🚪",smoking:"🚬",bomb:"💣",gun:"🔫",hocho:"🔪",pill:"💊",syringe:"💉",moneybag:"💰",yen:"💴",dollar:"💵",credit_card:"💳",money_with_wings:"💸",calling:"📲","e-mail":"📧",inbox_tray:"📥",outbox_tray:"📤",envelope_with_arrow:"📩",incoming_envelope:"📨",mailbox:"📫",mailbox_closed:"📪",postbox:"📮",package:"📦",memo:"📝",page_facing_up:"📄",page_with_curl:"📃",bookmark_tabs:"📑",bar_chart:"📊",chart_with_upwards_trend:"📈",chart_with_downwards_trend:"📉",scroll:"📜",clipboard:"📋",date:"📅",calendar:"📆",card_index:"📇",file_folder:"📁",open_file_folder:"📂",pushpin:"📌",paperclip:"📎",straight_ruler:"📏",triangular_ruler:"📐",closed_book:"📕",green_book:"📗",blue_book:"📘",orange_book:"📙",notebook:"📓",notebook_with_decorative_cover:"📔",ledger:"📒",books:"📚",book:"📖",bookmark:"🔖",name_badge:"📛",newspaper:"📰",art:"🎨",clapper:"🎬",microphone:"🎤",headphones:"🎧",musical_score:"🎼",musical_note:"🎵",notes:"🎶",musical_keyboard:"🎹",violin:"🎻",trumpet:"🎺",saxophone:"🎷",guitar:"🎸",space_invader:"👾",video_game:"🎮",black_joker:"🃏",flower_playing_cards:"🎴",mahjong:"🀄",game_die:"🎲",dart:"🎯",football:"🏈",basketball:"🏀",soccer:"⚽",baseball:"⚾",tennis:"🎾","8ball":"🎱",bowling:"🎳",golf:"⛳",checkered_flag:"🏁",trophy:"🏆",ski:"🎿",snowboarder:"🏂",swimmer:"🏊",surfer:"🏄",fishing_pole_and_fish:"🎣",tea:"🍵",sake:"🍶",beer:"🍺",beers:"🍻",cocktail:"🍸",tropical_drink:"🍹",wine_glass:"🍷",fork_and_knife:"🍴",pizza:"🍕",hamburger:"🍔",fries:"🍟",poultry_leg:"🍗",meat_on_bone:"🍖",spaghetti:"🍝",curry:"🍛",fried_shrimp:"🍤",bento:"🍱",sushi:"🍣",fish_cake:"🍥",rice_ball:"🍙",rice_cracker:"🍘",rice:"🍚",ramen:"🍜",stew:"🍲",oden:"🍢",dango:"🍡",egg:"🍳",bread:"🍞",doughnut:"🍩",custard:"🍮",icecream:"🍦",ice_cream:"🍨",shaved_ice:"🍧",birthday:"🎂",cake:"🍰",cookie:"🍪",chocolate_bar:"🍫",candy:"🍬",lollipop:"🍭",honey_pot:"🍯",apple:"🍎",green_apple:"🍏",tangerine:"🍊",cherries:"🍒",grapes:"🍇",watermelon:"🍉",strawberry:"🍓",peach:"🍑",melon:"🍈",banana:"🍌",pineapple:"🍍",sweet_potato:"🍠",eggplant:"🍆",tomato:"🍅",corn:"🌽"},Places={house:"🏠",house_with_garden:"🏡",school:"🏫",office:"🏢",post_office:"🏣",hospital:"🏥",bank:"🏦",convenience_store:"🏪",love_hotel:"🏩",hotel:"🏨",wedding:"💒",church:"⛪",department_store:"🏬",city_sunrise:"🌇",city_sunset:"🌆",japanese_castle:"🏯",european_castle:"🏰",tent:"⛺",factory:"🏭",tokyo_tower:"🗼",japan:"🗾",mount_fuji:"🗻",sunrise_over_mountains:"🌄",sunrise:"🌅",night_with_stars:"🌃",statue_of_liberty:"🗽",bridge_at_night:"🌉",carousel_horse:"🎠",ferris_wheel:"🎡",fountain:"⛲",roller_coaster:"🎢",ship:"🚢",boat:"⛵",speedboat:"🚤",rocket:"🚀",seat:"💺",station:"🚉",bullettrain_side:"🚄",bullettrain_front:"🚅",metro:"🚇",railway_car:"🚃",bus:"🚌",blue_car:"🚙",car:"🚗",taxi:"🚕",truck:"🚚",rotating_light:"🚨",police_car:"🚓",fire_engine:"🚒",ambulance:"🚑",bike:"🚲",barber:"💈",busstop:"🚏",ticket:"🎫",traffic_light:"🚥",construction:"🚧",beginner:"🔰",fuelpump:"⛽",izakaya_lantern:"🏮",slot_machine:"🎰",moyai:"🗿",circus_tent:"🎪",performing_arts:"🎭",round_pushpin:"📍",triangular_flag_on_post:"🚩"},Symbols={100:"💯",1234:"🔢",keycap_ten:"🔟",symbols:"🔣",capital_abcd:"🔠",abcd:"🔡",abc:"🔤",arrow_up_small:"🔼",arrow_down_small:"🔽",rewind:"⏪",fast_forward:"⏩",arrow_double_up:"⏫",arrow_double_down:"⏬",ok:"🆗",new:"🆕",up:"🆙",cool:"🆒",free:"🆓",ng:"🆖",signal_strength:"📶",cinema:"🎦",koko:"🈁",u6307:"🈯",u7a7a:"🈳",u6e80:"🈵",u5408:"🈴",u7981:"🈲",ideograph_advantage:"🉐",u5272:"🈹",u55b6:"🈺",u6709:"🈶",u7121:"🈚",restroom:"🚻",mens:"🚹",womens:"🚺",baby_symbol:"🚼",wc:"🚾",no_smoking:"🚭",u7533:"🈸",accept:"🉑",cl:"🆑",sos:"🆘",id:"🆔",no_entry_sign:"🚫",underage:"🔞",no_entry:"⛔",negative_squared_cross_mark:"❎",white_check_mark:"✅",heart_decoration:"💟",vs:"🆚",vibration_mode:"📳",mobile_phone_off:"📴",ab:"🆎",diamond_shape_with_a_dot_inside:"💠",ophiuchus:"⛎",six_pointed_star:"🔯",atm:"🏧",chart:"💹",heavy_dollar_sign:"💲",currency_exchange:"💱",x:"❌",exclamation:"❗",question:"❓",grey_exclamation:"❕",grey_question:"❔",o:"⭕",top:"🔝",end:"🔚",back:"🔙",on:"🔛",soon:"🔜",arrows_clockwise:"🔃",clock12:"🕛",clock1:"🕐",clock2:"🕑",clock3:"🕒",clock4:"🕓",clock5:"🕔",clock6:"🕕",clock7:"🕖",clock8:"🕗",clock9:"🕘",clock10:"🕙",clock11:"🕚",heavy_plus_sign:"➕",heavy_minus_sign:"➖",heavy_division_sign:"➗",white_flower:"💮",radio_button:"🔘",link:"🔗",curly_loop:"➰",trident:"🔱",small_red_triangle:"🔺",black_square_button:"🔲",white_square_button:"🔳",red_circle:"🔴",large_blue_circle:"🔵",small_red_triangle_down:"🔻",white_large_square:"⬜",black_large_square:"⬛",large_orange_diamond:"🔶",large_blue_diamond:"🔷",small_orange_diamond:"🔸",small_blue_diamond:"🔹"},data={"Frequently used":{thumbs_up:"👍","-1":"👎",sob:"😭",confused:"😕",neutral_face:"😐",blush:"😊",heart_eyes:"😍"},People,Nature,Objects,Places,Symbols},EmojiPicker_vue_vue_type_style_index_0_scoped_f81dd1ba_lang="",_sfc_main={props:{show_arrow:{type:Boolean,required:!1,default:!0}},data(){return{show:!1}},computed:{categories(){return Object.keys(data)},category_emojis:()=>e=>Object.values(data[e])},mounted(){this.clickListener=e=>{if(this.show){let t=this.$refs.popover;if(!t)return;let r=t.$children[0].$children[0].$el;e.target instanceof Element&&!r.contains(e.target)&&(this.show=!1)}},document.addEventListener("click",this.clickListener)},unmounted(){document.removeEventListener("click",this.clickListener)},methods:{handleEmojiClick(e,t){e.preventDefault(),this.$emit("emoji_click",t)}}};var _sfc_render$c=function e(){var t=this,r=t._self._c;return r("div",[r("b-button",{staticClass:"emojiInputButton",attrs:{id:"emojiPicker",variant:"outline-secondary"}},[r("span",{staticClass:"d-block",staticStyle:{transform:"scale(2)"}},[t._v("😀")])]),r("b-tooltip",{attrs:{triggers:"hover",target:"emojiPicker"}},[t._v(" Emoji ")]),r("b-popover",{ref:"popover",attrs:{show:t.show,target:"emojiPicker",triggers:"click",placement:"bottom"},on:{"update:show":function(i){t.show=i}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Vyber si emoji ")]},proxy:!0}])},[r("div",{staticClass:"emoji_picker"},[r("div",{staticClass:"picker_container"},t._l(t.categories,function(i){return r("div",{key:`category_${i}`,staticClass:"category"},[r("span",[t._v(t._s(i))]),r("div",{staticClass:"emojis_container"},t._l(t.category_emojis(i),function(s,c){return r("button",{key:`emoji_${c}`,on:{click:function(d){return t.handleEmojiClick(d,s)}}},[t._v(" "+t._s(s)+" ")])}),0)])}),0),t.show_arrow?r("div",{staticClass:"bottom_arrow"}):t._e()])])],1)},_sfc_staticRenderFns$c=[],__component__$c=normalizeComponent(_sfc_main,_sfc_render$c,_sfc_staticRenderFns$c,!1,null,"f81dd1ba",null,null);const EmojiPicker=__component__$c.exports;var __defProp$b=Object.defineProperty,__getOwnPropDesc$b=Object.getOwnPropertyDescriptor,__decorateClass$b=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$b(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$b(t,r,s),s};let TextSettings$1=class extends Vue{constructor(){super(...arguments);fe(this,"selectedTool");fe(this,"activeFont",FontsAvailable["Open Sans"]);fe(this,"fontWeight",400);fe(this,"italic",!1);fe(this,"subscript",!1);fe(this,"superscript",!1);fe(this,"editingActiveTextbox",!1);fe(this,"updateInterval")}get isEditingTextbox(){return this.selectedTool.name=="Select"&&this.editingActiveTextbox}get fonts(){const r=Object.keys(FontsAvailable),i={};for(const s of r)FontsAvailable[s].hidden||(i[s]=FontsAvailable[s]);return i}mounted(){this.eventHub.$on("shortcut:bold",this.toggleBold),this.eventHub.$on("shortcut:italic",this.toggleItalic),this.eventHub.$on("shortcut:superscript",()=>this.toggleScript(!1)),this.eventHub.$on("shortcut:subscript",()=>this.toggleScript(!0)),this.updateInterval=setInterval(this.updateStatus,300)}unmounted(){clearInterval(this.updateInterval)}toggleBold(){this.fontWeight==600?this.fontWeight=400:this.fontWeight=600,this.$forceUpdate(),this.setStyle({fontWeight:this.fontWeight})}toggleItalic(){this.italic=!this.italic,this.$forceUpdate(),this.setStyle({fontStyle:this.italic?"italic":"normal"})}toggleScript(r){var s,c;r?this.subscript=!this.subscript:this.superscript=!this.superscript;const i=PDFdocument.activeObject;if(i.getSelectionStyles().some(d=>Object.hasOwn(d,"fontSize")))i.setSelectionStyles({fontSize:i.fontSize,deltaY:0});else{if(i.selectionStart==0&&i.selectionEnd==((s=i.text)==null?void 0:s.length))return;r?i.setSubscript(i.selectionStart||0,i.selectionEnd||0):i.setSuperscript(i.selectionStart||0,i.selectionEnd||0)}i.cleanStyle("fontSize"),i.cleanStyle("deltaY"),(c=i.canvas)==null||c.requestRenderAll()}updateFont(r){if(this.activeFont=this.fonts[r],this.selectedTool.name=="Select"){const i=PDFdocument.activeObject;if(i.selectionStart==i.selectionEnd){this.selectedTool.defaultOptions.fontFamily=r;return}this.setStyle({fontFamily:r}),this.activeFont.bold==null&&(this.fontWeight=400,this.setStyle({fontWeight:this.fontWeight})),this.activeFont.italic==null&&(this.italic=!1,this.setStyle({fontStyle:"normal"}))}else this.selectedTool.defaultOptions.fontFamily=r}setStyle(r){var s;const i=PDFdocument.activeObject;if(this.selectedTool.name=="Select"&&i&&i instanceof fabric.fabric.Textbox){if(i.selectionEnd==i.selectionStart){this.$bvToast.toast("Na štýlovanie textu najprv selectni časť, ktorú chceš meniť",{title:"Chyba pri nastavovaní štýlu textu",variant:"danger"});return}console.log(i.selectionStart),i.setSelectionStyles(r,i.selectionStart,i.selectionEnd),(s=i.canvas)==null||s.requestRenderAll(),i.cleanStyle("fontFamily"),this.updateStatus()}}updateStatus(){if(PDFdocument.activeObject==null||!(PDFdocument.activeObject instanceof fabric.fabric.Textbox))return;const r=PDFdocument.activeObject;this.editingActiveTextbox=r.isEditing||!1;const i=r.getSelectionStyles(r.selectionStart,r.selectionEnd),s=i.some(d=>Object.hasOwn(d,"fontWeight")&&d.fontWeight===600),c=i.some(d=>Object.hasOwn(d,"fontStyle")&&d.fontStyle==="italic");this.subscript=i.some(d=>this.isSubscript(d,r)),this.superscript=i.some(d=>this.isSuperscript(d,r)),this.fontWeight=s?600:400,this.italic=c}isSubscript(r,i){const s=Object.keys(r);return!s.includes("fontSize")||!s.includes("deltaY")?!1:r.fontSize<(i.fontSize||0)&&r.deltaY>0}isSuperscript(r,i){const s=Object.keys(r);return!s.includes("fontSize")||!s.includes("deltaY")?!1:r.fontSize<(i.fontSize||0)&&r.deltaY<0}addEmoji(r){var d;const i=PDFdocument.activeObject;if(!i.selectionStart)return;i.exitEditing();const s=Array.from(i.text||""),c=s.slice(0,i.selectionStart).join("")+r+s.slice(i.selectionStart).join("");console.log(c),i.set({text:c}),i.setSelectionStart(i.selectionStart+1),i.setSelectionEnd(i.selectionStart),i.canvas.setFontForEmojis(i),i.enterEditing(),(d=i.canvas)==null||d.requestRenderAll()}};__decorateClass$b([Prop({required:!0})],TextSettings$1.prototype,"selectedTool",2);TextSettings$1=__decorateClass$b([Component({components:{ToolButton,EmojiPicker}})],TextSettings$1);var _sfc_render$b=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"d-flex"},[r("div",[r("b-dropdown",{attrs:{text:t.selectedTool.defaultOptions.fontFamily}},t._l(t.fonts,function(i){return r("b-dropdown-item",{key:i.viewport,style:{"font-family":i.viewport},nativeOn:{click:function(s){return t.updateFont(i.viewport)}}},[t._v(" "+t._s(i.viewport)+" ")])}),1)],1),r("b-input-group",{staticClass:"ml-2",staticStyle:{"max-width":"100px"},attrs:{id:"fontSize"},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("b-input-group-text",{staticClass:"material-icons bg-secondary"},[t._v(" format_size ")])]},proxy:!0}])},[r("b-form-input",{staticClass:"form-control",attrs:{type:"number",min:"0"},model:{value:t.selectedTool.defaultOptions.fontSize,callback:function(i){t.$set(t.selectedTool.defaultOptions,"fontSize",t._n(i))},expression:"selectedTool.defaultOptions.fontSize"}})],1),r("b-tooltip",{attrs:{target:"fontSize"}},[t._v(" Veľkosť písma ")]),t.activeFont.bold!==void 0&&t.isEditingTextbox?r("tool-button",{attrs:{id:"bold",icon:"format_bold",variant:"secondary",outline:t.fontWeight==400,tooltip:"Bold"},on:{click:function(i){return t.toggleBold()}}}):t._e(),t.activeFont.italic!==void 0&&t.isEditingTextbox?r("tool-button",{attrs:{id:"italic",variant:"secondary",icon:"format_italic",outline:!t.italic,tooltip:"italic"},on:{click:function(i){return t.toggleItalic()}}}):t._e(),t.isEditingTextbox?r("tool-button",{attrs:{id:"subscript",variant:"secondary",icon:"subscript",outline:!t.subscript,tooltip:"dolny index"},on:{click:function(i){return t.toggleScript(!0)}}}):t._e(),t.isEditingTextbox?r("tool-button",{attrs:{id:"superscript",variant:"secondary",icon:"superscript",outline:!t.superscript,tooltip:"horny index"},on:{click:function(i){return t.toggleScript(!1)}}}):t._e(),t.isEditingTextbox?r("emoji-picker",{on:{emoji_click:t.addEmoji}}):t._e()],1)},_sfc_staticRenderFns$b=[],__component__$b=normalizeComponent(TextSettings$1,_sfc_render$b,_sfc_staticRenderFns$b,!1,null,null,null,null);const TextSettings=__component__$b.exports;var __defProp$a=Object.defineProperty,__getOwnPropDesc$a=Object.getOwnPropertyDescriptor,__decorateClass$a=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$a(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$a(t,r,s),s};let ToolSettings$1=class extends Vue{constructor(){super(...arguments);fe(this,"selectedTool");fe(this,"selectedOptions");fe(this,"fonts",FontsAvailable);fe(this,"$refs");fe(this,"signatures",[]);fe(this,"images",[])}mounted(){this.getSigns().then(r=>{this.signatures=r}),this.getImages().then(r=>{this.images=r})}onOptionsChanged(){var r,i;if(this.selectedTool.name=="Select"&&this.selectedTool.defaultOptions){if(PDFdocument.activeObject!=null){PDFdocument.activeObject.type=="group"&&PDFdocument.activeObject.getObjects().forEach(s=>{s.set(this.selectedTool.defaultOptions)}),PDFdocument.activeObject.set(this.selectedTool.defaultOptions);try{(r=PDFdocument.activeObject.canvas)==null||r.renderAll()}catch{return}}}else this.selectedTool.name=="Draw"&&((i=getViewedDocument())==null||i.pageCanvases.forEach(s=>{s.freeDrawingBrush.color=this.selectedTool.defaultOptions.stroke||"#000000",s.freeDrawingBrush.width=this.selectedTool.defaultOptions.strokeWidth||10}))}signModalAccepted(){this.$refs.signModal.signModalAccepted(),this.getSigns().then(r=>{this.signatures=r})}imageModalAccepted(){this.$refs.imageModal.imageModalAccepted(),this.getImages().then(r=>{this.images=r})}getSignDropdownText(){var r;return((r=this.signatures.find(i=>i.id==this.selectedTool.defaultOptions.sign))==null?void 0:r.name)||"Vyber podpis"}getImageDropdownText(){var r;return((r=this.images.find(i=>{var s;return i.id==((s=this.selectedTool.defaultOptions)==null?void 0:s.image)}))==null?void 0:r.name)||"Vyber obrázok"}getSigns(){return new Promise((r,i)=>{Database.getAllTemplates().then(s=>{r(s.filter(c=>c.type==="Sign"))}).catch(s=>i(s))})}getImages(){return new Promise((r,i)=>{Database.getAllTemplates().then(s=>{r(s.filter(c=>c.type==="Image"))}).catch(s=>i(s))})}openSignModal(){this.$refs.signMenu.show()}openImageModal(){this.$refs.imageMenu.show()}};__decorateClass$a([Prop({required:!0})],ToolSettings$1.prototype,"selectedTool",2);__decorateClass$a([Prop({required:!0})],ToolSettings$1.prototype,"selectedOptions",2);__decorateClass$a([Watch("selectedTool.defaultOptions",{deep:!0})],ToolSettings$1.prototype,"onOptionsChanged",1);ToolSettings$1=__decorateClass$a([Component({components:{ColorPicker,SignModal,ImageModal,TextSettings,ToolButton}})],ToolSettings$1);const ToolSettings_vue_vue_type_style_index_0_scoped_619bd3bf_lang="";var _sfc_render$a=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"tool-controls",attrs:{cols:"7"}},[t.selectedOptions.hasText?r("text-settings",{key:t.selectedTool.name,attrs:{"selected-tool":t.selectedTool}}):t._e(),t.selectedOptions.hasStrokeWidth?r("div",[r("p",[t._v("Hrúbka čiary")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.selectedTool.defaultOptions.strokeWidth,expression:"selectedTool.defaultOptions.strokeWidth",modifiers:{number:!0}}],staticStyle:{width:"100px"},attrs:{min:"1",type:"range",max:"20"},domProps:{value:t.selectedTool.defaultOptions.strokeWidth},on:{__r:function(i){t.$set(t.selectedTool.defaultOptions,"strokeWidth",t._n(i.target.value))},blur:function(i){return t.$forceUpdate()}}}),t._v(" "+t._s(t.selectedTool.defaultOptions.strokeWidth||0)+" ")]):t._e(),t.selectedOptions.hasFill?r("div",[r("color-picker",{attrs:{id:"fill",name:"fill",value:t.selectedTool.defaultOptions.fill},model:{value:t.selectedTool.defaultOptions.fill,callback:function(i){t.$set(t.selectedTool.defaultOptions,"fill",i)},expression:"selectedTool.defaultOptions.fill"}},[r("span",{staticClass:"material-icons d-block"},[t._v("format_color_fill")])]),r("b-tooltip",{attrs:{target:"fill"}},[t._v(" Farba výplne ")])],1):t._e(),t.selectedOptions.hasStroke?r("div",[r("color-picker",{attrs:{id:"stroke",name:"stroke",value:t.selectedTool.defaultOptions.stroke},model:{value:t.selectedTool.defaultOptions.stroke,callback:function(i){t.$set(t.selectedTool.defaultOptions,"stroke",i)},expression:"selectedTool.defaultOptions.stroke"}},[r("span",{staticClass:"material-icons d-block"},[t._v("gesture")])]),r("b-tooltip",{attrs:{target:"stroke"}},[t._v(" Farba Čiary ")])],1):t._e(),t.selectedTool.name=="Photo"?r("div",[r("tool-button",{attrs:{id:"photoButton",variant:"secondary",icon:"add_photo_alternate",outline:!0,tooltip:"Pridať obrázky"},on:{click:t.openImageModal}}),r("b-dropdown",{staticClass:"dropdown",attrs:{text:t.getImageDropdownText()}},t._l(t.images,function(i){return r("b-dropdown-item",{key:i.id,nativeOn:{click:function(s){t.selectedTool.defaultOptions.image=i.id}}},[t._v(" "+t._s(i.name)+" ")])}),1)],1):t._e(),t.selectedTool.name=="Sign"?r("div",[r("b-button",{staticClass:"w-auto p-2",attrs:{variant:"primary"},on:{click:t.openSignModal}},[t._v(" Otvoriť menu s podpismi ")]),r("b-dropdown",{staticClass:"dropdown",attrs:{text:t.getSignDropdownText()}},[t._l(t.signatures,function(i){return r("b-dropdown-item",{key:i.id,nativeOn:{click:function(s){t.selectedTool.defaultOptions.sign=i.id}}},[t._v(" "+t._s(i.name)+" ")])}),t.signatures.length==0?r("b-dropdown-item",{attrs:{disabled:""}},[t._v(" Nie je nastavený žiaden podpis, pridaj aspoň jeden ")]):t._e()],2)],1):t._e(),r("b-modal",{ref:"imageMenu",attrs:{centered:"",title:"Obrázky",size:"lg"},on:{ok:t.imageModalAccepted}},[r("image-modal",{ref:"imageModal"})],1),r("b-modal",{ref:"signMenu",attrs:{centered:"",title:"Podpisy",size:"lg"},on:{ok:t.signModalAccepted}},[r("sign-modal",{ref:"signModal",attrs:{signs:t.getSigns}})],1)],1)},_sfc_staticRenderFns$a=[],__component__$a=normalizeComponent(ToolSettings$1,_sfc_render$a,_sfc_staticRenderFns$a,!1,null,"619bd3bf",null,null);const ToolSettings=__component__$a.exports;var __defProp$9=Object.defineProperty,__getOwnPropDesc$9=Object.getOwnPropertyDescriptor,__decorateClass$9=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$9(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$9(t,r,s),s};let Toolbar$1=class extends Vue{constructor(){super(...arguments);fe(this,"tools",tools);fe(this,"utils",utils);fe(this,"selectedTool",tools[0]);fe(this,"selectedOptions",tools[0].options);fe(this,"optionsMenuExpanded",!1);fe(this,"$refs");fe(this,"scales",{.25:"25%",.5:"50%",.75:"75%",1:"100%",1.25:"125%",1.5:"150%",1.75:"175%",2:"200%",2.5:"250%",3:"300%",4:"400%",5:"500%"});fe(this,"activeScale",1)}setScale(r){this.activeScale=r,this.eventHub.$emit("viewport:scale",r)}mounted(){this.eventHub.$emit("tool:init",this),Canvas.toolbarRef=this;for(const r of tools)this.eventHub.$on(`shortcut:${r.name}`,()=>this.select(r));for(const r of utils)this.eventHub.$on(`shortcut:${r.name}`,()=>this.useUtil(r,!0))}useUtil(r,i=!1){const s=getViewedDocument();if(s===null)throw new Error("No document is opened");let c=-1;for(let m=0;m<s.pageCanvases.length;m++)if(s.pageCanvases[m].getActiveObject()!==null){c=m;break}const d=r.use(s,c,i);r.name=="copy"&&d&&this.$bvToast.toast(`Skopírovaných ${d.length} objektov`,{variant:"success",autoHideDelay:3e3,title:"Skopírované",appendToast:!0,toaster:"b-toaster-top-left"})}select(r){this.selectedTool=r,this.eventHub.$emit("tool:select",r)}};Toolbar$1=__decorateClass$9([Component({components:{PdfRepairer,ToolSettings,ToolButton}})],Toolbar$1);const Toolbar_vue_vue_type_style_index_0_scoped_3c85909f_lang="";var _sfc_render$9=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"toolbar"},[r("div",{staticClass:"d-flex p-0",attrs:{cols:"3"}},t._l(t.tools,function(i){return r("div",{key:i.name},[r("tool-button",{attrs:{id:i.name,icon:i.icon,outline:t.selectedTool.name!=i.name,tooltip:i.tooltip+"("+i.shortcut+")",variant:"primary"},on:{click:function(s){return t.select(i)}}})],1)}),0),r("tool-settings",{staticClass:"d-xl-flex d-none",attrs:{"selected-options":t.selectedOptions,"selected-tool":t.selectedTool}}),r("div",{staticClass:"right-controls",attrs:{cols:"2"}},[t._l(t.utils,function(i){return r("div",{key:i.name},[r("tool-button",{staticClass:"btn",attrs:{id:i.name,variant:i.style,icon:i.icon,outline:!0,tooltip:i.tooltip+"("+i.shortcut+")"},on:{click:function(s){return t.useUtil(i)}}})],1)}),r("b-dropdown",{attrs:{text:t.scales[t.activeScale]}},t._l(t.scales,function(i,s){return r("b-dropdown-item",{key:s,nativeOn:{click:function(c){return t.setScale(s)}}},[t._v(t._s(i))])}),1),r("tool-button",{attrs:{id:"repairButton",icon:"build",variant:"secondary",outline:!1,tooltip:"Otočiť obrázky alebo pridať prázdnu stranu"},on:{click:function(i){return t.$refs.repairTool.Open()}}}),r("pdf-repairer",{ref:"repairTool"}),r("tool-button",{staticClass:"d-xl-none",attrs:{id:"collapseButton",icon:t.optionsMenuExpanded?"expand_less":"expand_more",variant:"secondary"},on:{click:function(i){t.optionsMenuExpanded=!t.optionsMenuExpanded}}},[r("span",{staticClass:"material-icons d-block"},[t._v(t._s(t.optionsMenuExpanded?"expand_less":"expand_more"))])])],2),t.optionsMenuExpanded?r("div",{staticClass:"toolSettingsSm"},[r("tool-settings",{attrs:{"selected-options":t.selectedOptions,"selected-tool":t.selectedTool}})],1):t._e()],1)},_sfc_staticRenderFns$9=[],__component__$9=normalizeComponent(Toolbar$1,_sfc_render$9,_sfc_staticRenderFns$9,!1,null,"3c85909f",null,null);const Toolbar=__component__$9.exports;var __defProp$8=Object.defineProperty,__getOwnPropDesc$8=Object.getOwnPropertyDescriptor,__decorateClass$8=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$8(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$8(t,r,s),s};let ScoreModal$1=class extends Vue{constructor(){super(...arguments);fe(this,"pointCriterias",[])}mounted(){this.pointCriterias=this.$store.getters.scoringCriteria}deleteCriteria(r){const i=this.pointCriterias.findIndex(s=>s.id==r);this.pointCriterias.splice(i,1)}pridajBodovanie(){let r;do r=Math.random().toString(36).substr(2,9);while(this.pointCriterias.find(i=>i.id==r));this.pointCriterias.push({id:r,points:0,from:""})}updatepointCriterias(){this.$store.commit("setCriteria",this.pointCriterias)}};ScoreModal$1=__decorateClass$8([Component],ScoreModal$1);const ScoreModal_vue_vue_type_style_index_0_scoped_e37b0efa_lang="";var _sfc_render$8=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-modal",{attrs:{id:"bodovanie",title:"Bodovanie",size:"lg"},on:{ok:t.updatepointCriterias}},[r("ul",{staticClass:"list-group m-2"},t._l(t.pointCriterias,function(i){return r("li",{key:i.id,staticClass:"list-group-item"},[r("div",{staticClass:"d-flex flex-row justify-content-between align-items-center"},[r("div",{staticClass:"w-100"},[r("b-form-input",{staticClass:"kriteria-body d-inline",attrs:{type:"number"},model:{value:i.points,callback:function(s){t.$set(i,"points",t._n(s))},expression:"criteria.points"}}),t._v("B - za "),r("b-form-input",{staticClass:"form-control d-inline",staticStyle:{width:"80%"},attrs:{type:"text"},model:{value:i.from,callback:function(s){t.$set(i,"from",s)},expression:"criteria.from"}})],1),r("button",{staticClass:"btn btn-danger",on:{click:function(s){return t.deleteCriteria(i.id)}}},[r("span",{staticClass:"material-icons"},[t._v(" delete ")])])])])}),0),r("button",{staticClass:"btn btn-primary btn-block",on:{click:t.pridajBodovanie}},[t._v(" Pridať ďalšie kritérium ")])])},_sfc_staticRenderFns$8=[],__component__$8=normalizeComponent(ScoreModal$1,_sfc_render$8,_sfc_staticRenderFns$8,!1,null,"e37b0efa",null,null);const ScoreModal=__component__$8.exports;class Scorer{constructor(){fe(this,"activeDoc");fe(this,"pdf",null);fe(this,"adding",!1);fe(this,"cancelled",!1)}getScoring(t){return this.activeDoc=t,t.scoring==null?{acceptedCriteria:[],final:!1,points:void 0,annotName:""}:t.scoring}saveScoring(t){this.activeDoc&&(this.activeDoc.scoring=t,t.points===""&&(t.points=void 0),Database.updateDocument(this.activeDoc.id,this.activeDoc))}async finalizeScoring(){return this.pdf=getViewedDocument(),new Promise((t,r)=>{var i,s;(!this.pdf||this.adding||(s=(i=this.activeDoc)==null?void 0:i.scoring)!=null&&s.annotName)&&r(""),this.adding=!0,eventHub.$once("canvas:tap",(c,d)=>{if(!this.activeDoc||!this.activeDoc.scoring||this.activeDoc.scoring.points==null){r("No points to add");return}this.onCanvasClicked(c,d,this.activeDoc.scoring.points).then(m=>{m=="cancelled"?r(m):t(m)})}),Canvas.active=!1})}cancel(){this.adding&&(this.cancelled=!0)}async onCanvasClicked(t,r,i){var d;console.log(this.activeDoc);const s=t.getPointer(r);if(this.adding=!1,this.cancelled)return Canvas.active=!0,"cancelled";const c=await this.getAnnotation(i,t.pageIndex,{originX:"canter",originY:"center",top:s.y,left:s.x}).catch(()=>{throw new Error("Error finalizing scoring")});return(d=this.pdf)==null||d.addAnnotation(c),Canvas.active=!0,c.object.name||""}async getAnnotation(t,r,i){if(!this.pdf)throw new Error("No document loaded, cant finalize scoring");const s=store.state.scoringEntries.find(c=>c.points==t);if(s==null)return new TextAnnotation(r,{...i,...store.state.settings.tools.settings.tools[8].defaultOptions,editable:!1,text:`${t}B`,hasControls:!1},this.pdf.pageCanvases[r]);{const c=await Database.getTemplate(s.id);if(c.type==="Image")return new ImageAnnotation(r,{...i,...c.templateOptions,image:c.data.img},this.pdf.pageCanvases[r])}throw new Error("Invalid Annotation type")}removeFinalScoring(){var t;if(this.pdf=getViewedDocument(),!this.activeDoc||((t=this.activeDoc.scoring)==null?void 0:t.annotName)==null||!this.pdf)throw console.log(this.activeDoc),new Error("trying to remove unexistent scoring");this.pdf.deleteAnnotation(this.activeDoc.scoring.annotName),this.activeDoc.scoring.final=!1,delete this.activeDoc.scoring.annotName,Database.updateDocument(this.activeDoc.id,this.activeDoc)}}const scorer=new Scorer;var __defProp$7=Object.defineProperty,__getOwnPropDesc$7=Object.getOwnPropertyDescriptor,__decorateClass$7=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$7(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$7(t,r,s),s};let Scoring$1=class extends Vue{constructor(){super(...arguments);fe(this,"pointCriterias",[]);fe(this,"acceptedCriteria",[]);fe(this,"currentScore",null);fe(this,"pdf",null);fe(this,"doc",null);fe(this,"showScoringPanel",!1);fe(this,"finalizingScoring",!1);fe(this,"comment","");fe(this,"$refs")}get isFinal(){var r;return((r=this.currentScore)==null?void 0:r.final)||!1}mounted(){this.updateCriteria(this.$store.getters.scoringCriteria),this.eventHub.$on("shortcut:scoring",this.toggle),this.pdf=getViewedDocument(),this.pdf&&Database.getDocument(this.pdf.id).then(r=>{this.doc=r,this.getScoring(r)}),this.eventHub.$on("editor:documentChanged",(r,i)=>{this.finalizingScoring&&this.cancelFinalizing(),setTimeout(()=>{this.pdf=r,this.getScoring(i)},50)}),this.$store.subscribe((r,i)=>{(r.type=="setCriteria"||r.type=="loadData")&&this.updateCriteria(this.$store.getters.scoringCriteria)})}updateCriteria(r){this.pointCriterias=r,this.acceptedCriteria=this.pointCriterias.map(i=>!1),this.doc&&this.getScoring(this.doc)}toggle(){this.showScoringPanel=!this.showScoringPanel,this.showScoringPanel&&this.$nextTick().then(()=>{this.$refs.pointInput.focus()})}calculatePoints(){if(!this.currentScore)return;let r=0;for(let i=0;i<this.pointCriterias.length;i++){const s=this.pointCriterias[i];this.acceptedCriteria[i]&&(r+=s.points)}this.currentScore.points=r,this.saveScoring()}saveScoring(){!this.doc||!this.currentScore||(this.currentScore.acceptedCriteria=this.pointCriterias.filter((r,i)=>this.acceptedCriteria[i]).map(r=>r.id),this.currentScore.comment=this.comment,scorer.saveScoring(this.currentScore))}getScoring(r){var i;if(this.doc=r,this.currentScore=scorer.getScoring(r),this.comment=((i=this.currentScore)==null?void 0:i.comment)||"",this.currentScore==null)throw new Error("Current score null");this.acceptedCriteria=this.pointCriterias.map(s=>{var c;return((c=this.currentScore)==null?void 0:c.acceptedCriteria.includes(s.id))||!1});for(const s of r.changes)if(s.data.name==this.currentScore.annotName){this.currentScore.final=!0;break}}finalScoringChange(){this.pdf&&(this.isFinal?scorer.removeFinalScoring():(this.finalizingScoring=!0,scorer.finalizeScoring().then(r=>{var i;this.finalizingScoring=!1,this.currentScore&&(this.currentScore.final=!((i=this.currentScore)!=null&&i.final),this.currentScore.annotName=r,scorer.saveScoring(this.currentScore))}).catch(r=>console.error(r))))}cancelFinalizing(){this.finalizingScoring=!1,scorer.cancel()}};Scoring$1=__decorateClass$7([Component({components:{ScoreModal}})],Scoring$1);const Scoring_vue_vue_type_style_index_0_scoped_0a31fe6d_lang="";var _sfc_render$7=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"bodovanie"},[r("div",{staticClass:"position-relative"},[r("h4",{staticClass:"btn btn-primary",on:{click:function(i){return t.toggle()}}},[t._v(" Bodovanie "),r("span",{staticClass:"material-icons d-inline position-absolute"},[t._v(t._s(t.showScoringPanel?"expand_more":"expand_less"))])]),r("transition",{attrs:{name:"slide"}},[t.showScoringPanel?r("div",{staticClass:"bodovanie_okno bg-primary"},[r("div",{staticClass:"d-flex flex-row"},[r("h3",{staticClass:"w-50"},[t._v(" Body: ")]),r("b-form-input",{ref:"pointInput",staticClass:"w-50",attrs:{type:"number",step:"0.5",placeholder:"Zadaj body ...",disabled:t.isFinal},on:{change:t.saveScoring},model:{value:t.currentScore.points,callback:function(i){t.$set(t.currentScore,"points",t._n(i))},expression:"currentScore.points"}}),r("div",{staticClass:"d-flex flex-row mr-2"})],1),r("div",t._l(t.pointCriterias,function(i,s){return r("div",{key:i.id,staticClass:"form-check w-100 d-flex justify-content-between"},[r("b-form-checkbox",{staticClass:"form-check-input",attrs:{id:i.id,type:"checkbox",disabled:t.isFinal},on:{change:t.calculatePoints},model:{value:t.acceptedCriteria[s],callback:function(c){t.$set(t.acceptedCriteria,s,c)},expression:"acceptedCriteria[i]"}}),r("label",{staticClass:"form-check-label",attrs:{for:i.id}},[t._v(" "+t._s(i.from)+" "),r("b-badge",{attrs:{pill:"",variant:"warning"}},[t._v(t._s(i.points))])],1)],1)}),0),r("div",{staticClass:"m-2"},[t.currentScore&&!t.currentScore.final?r("b-button",{attrs:{variant:"success",size:"lg",disabled:t.$data.currentScore.points==null},on:{click:function(i){return t.finalScoringChange()}}},[t._v(" Zfinalizuj hodnotenie ")]):r("b-button",{attrs:{variant:"danger"},on:{click:function(i){return t.finalScoringChange()}}},[t._v(" Zruš hodnotenie ")])],1),r("br"),r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.bodovanie",modifiers:{bodovanie:!0}}],attrs:{size:"sm"}},[t._v(" Upraviť bodovanie ")]),r("score-modal"),r("hr"),r("b-form-textarea",{attrs:{placeholder:"Poznámka"},on:{input:t.saveScoring},model:{value:t.comment,callback:function(i){t.comment=i},expression:"comment"}})],1):t._e()])],1),r("b-alert",{staticClass:"position-fixed fixed-top m-0 rounded-0 d-flex justify-content-center flex-column",staticStyle:{"z-index":"2000"},attrs:{variant:"success"},model:{value:t.finalizingScoring,callback:function(i){t.finalizingScoring=i},expression:"finalizingScoring"}},[r("p",[t._v("Klikni tam, kam chceš pridať body do riešenia.")]),r("b-button",{attrs:{variant:"success"},on:{click:function(i){return t.cancelFinalizing()}}},[t._v(" Zrušiť ")])],1)],1)},_sfc_staticRenderFns$7=[],__component__$7=normalizeComponent(Scoring$1,_sfc_render$7,_sfc_staticRenderFns$7,!1,null,"0a31fe6d",null,null);const Scoring=__component__$7.exports;var __defProp$6=Object.defineProperty,__getOwnPropDesc$6=Object.getOwnPropertyDescriptor,__decorateClass$6=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$6(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$6(t,r,s),s};let TagEditModal$1=class extends Vue{constructor(){super(...arguments);fe(this,"availableTags",[])}mounted(){this.eventHub.$emit("tags:update",JSON.parse(localStorage.getItem("tags")||"[]"))}data(){return{availableTags:JSON.parse(localStorage.getItem("tags")||"[]")}}removeTag(r){this.availableTags.splice(r,1)}addTag(){let r;do r=Math.random().toString(36).substr(2,9);while(this.availableTags.find(i=>i.id==r));this.availableTags.push({id:r,meno:"",color:"blue"})}lighten(r){return new Color(r).lighten(.5).hex()}getContrastColor(r){return new Color(r).isDark()?"#ffffff":"#000000"}tagUpdate(){localStorage.setItem("tags",JSON.stringify(this.availableTags)),this.eventHub.$emit("tags:update",this.availableTags)}move(r,i){const s=i?r+1:r-1,c=this.availableTags[r];this.availableTags[r]=this.availableTags[s],this.availableTags[s]=c,this.$forceUpdate()}};TagEditModal$1=__decorateClass$6([Component({components:{ColorPicker}})],TagEditModal$1);const TagEditModal_vue_vue_type_style_index_0_scoped_0234ef5c_lang="";var _sfc_render$6=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-modal",{attrs:{id:"tag-modal",size:"lg",title:"Upraviť tagy"},on:{ok:t.tagUpdate}},[r("b-list-group",t._l(t.availableTags,function(i,s){return r("b-list-group-item",{key:i.id,staticClass:"tag",style:{background:t.lighten(i.color)},attrs:{pill:""}},[r("b-input-group",{staticClass:"mr-3 d-flex align-items-center"},[r("b-form-input",{staticClass:"w-75 tag-edit",style:{color:t.getContrastColor(i.color)},attrs:{type:"text",placeholder:"Zadaj meno"},model:{value:i.meno,callback:function(c){t.$set(i,"meno",c)},expression:"tag.meno"}})],1),r("div",{staticClass:"tag-options"},[r("color-picker",{staticClass:"color-picker",attrs:{name:"tagcolor"+s,"has-opacity":!1},model:{value:i.color,callback:function(c){t.$set(i,"color",c)},expression:"tag.color"}}),r("button",{attrs:{disabled:s==0,id:"tagup"+s},on:{click:function(c){return t.move(s,!1)}}},[t._v(" expand_less ")]),r("button",{attrs:{disabled:s==t.availableTags.length-1,id:"tagdown"+s},on:{click:function(c){return t.move(s,!0)}}},[t._v(" expand_more ")]),r("button",{attrs:{id:"remove"+s},on:{click:function(c){return t.removeTag(s)}}},[t._v(" close ")]),r("b-tooltip",{attrs:{target:"tagup"+s,placement:"top",triggers:"hover"}},[t._v(" Presunúť vyššie ")]),r("b-tooltip",{attrs:{target:"tagdown"+s,placement:"top",triggers:"hover"}},[t._v(" Presunúť nižšie ")]),r("b-tooltip",{attrs:{target:"remove"+s,placement:"top",triggers:"hover"}},[t._v(" Odstrániť tag ")])],1)],1)}),1),r("b-button",{attrs:{block:""},on:{click:function(i){return t.addTag()}}},[t._v(" Pridať nový tag ")])],1)},_sfc_staticRenderFns$6=[],__component__$6=normalizeComponent(TagEditModal$1,_sfc_render$6,_sfc_staticRenderFns$6,!1,null,"0234ef5c",null,null);const TagEditModal=__component__$6.exports;var __defProp$5=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__decorateClass$5=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$5(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$5(t,r,s),s};let Tags$1=class extends Vue{constructor(){super(...arguments);fe(this,"availableTags",[]);fe(this,"doc");fe(this,"ukazMenu",!1)}mounted(){this.availableTags=JSON.parse(localStorage.getItem("tags")||"[]"),this.eventHub.$on("tags:update",r=>{this.$data.availableTags=r,this.$forceUpdate()}),this.eventHub.$on("editor:documentChanged",(r,i)=>{this.doc=i;const s=this.availableTags.map(d=>d.id);let c=0;for(;c<i.tags.length;){const d=i.tags[c];s.find(m=>m==d)==null?i.tags.splice(c,1):c++}Database.updateDocument(i.id,i,!1),this.$forceUpdate()})}zistiTagy(r){this.$data.doc=r}getContrastColor(r){return new Color(r).isDark()?"#ffffff":"#000000"}toggleDocumentTag(r){if(!this.doc)return;const i=this.doc.tags.findIndex(s=>s==r);i!=-1?this.doc.tags.splice(i,1):this.doc.tags.push(r),this.doc.tags.sort(),Database.updateDocument(this.doc.id,this.doc),this.eventHub.$emit("visibilityUpdate",this.doc),this.eventHub.$emit("tags:documentTag",this.doc.id,this.doc.tags.map(s=>this.availableTags.find(c=>c.id==s)))}};Tags$1=__decorateClass$5([Component({components:{TagEditModal}})],Tags$1);const Tagy_vue_vue_type_style_index_0_scoped_455089c3_lang="";var _sfc_render$5=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"tags"},[r("div",{staticClass:"position-relative"},[r("h4",{staticClass:"btn btn-warning",on:{click:function(i){t.ukazMenu=!t.ukazMenu}}},[t._v(" Tagy "),r("span",{staticClass:"material-icons d-inline position-absolute"},[t._v(t._s(t.ukazMenu?"expand_more":"expand_less"))])]),r("transition",{attrs:{name:"slide"}},[t.ukazMenu?r("div",{staticClass:"tagy_okno bg-warning"},[t.doc?r("div",{staticClass:"d-flex flex-wrap"},t._l(t.availableTags,function(i){return r("h6",{key:i.id,staticClass:"m-1",on:{click:function(s){return t.toggleDocumentTag(i.id)}}},[r("b-badge",{style:{transition:"all 250ms linear",background:i.color,color:t.getContrastColor(i.color),opacity:t.doc.tags.findIndex(s=>s==i.id)==-1?.5:1},attrs:{size:"lg"}},[t._v(" "+t._s(i.meno)+" ")])],1)}),0):t._e(),r("b-button",{staticClass:"m-2 d-block",attrs:{variant:"secondary",size:"sm"},on:{click:function(i){return t.$bvModal.show("tag-modal")}}},[t._v(" Upraviť tagy ")])],1):t._e()]),r("tag-edit-modal",{ref:"tagModal"})],1)])},_sfc_staticRenderFns$5=[],__component__$5=normalizeComponent(Tags$1,_sfc_render$5,_sfc_staticRenderFns$5,!1,null,"455089c3",null,null);const Tags=__component__$5.exports;var __defProp$4=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__decorateClass$4=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$4(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$4(t,r,s),s};pdf$1.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdf$1.version}/pdf.worker.min.js`;let DocumentPreview$1=class extends Vue{constructor(){super(...arguments);fe(this,"showTimer");fe(this,"documentID");fe(this,"showPDFPreview");fe(this,"index");fe(this,"document");fe(this,"hasComment",!1);fe(this,"documentBusy",!1);fe(this,"pdfKey",!1);fe(this,"tags",[]);fe(this,"pdf");fe(this,"pdfUrl",null);fe(this,"selected",!1);fe(this,"stopwatchText","0:00:00")}data(){return{document:void 0,pdf:null,selected:!1,documentBusy:!1,hasComment:!1,pdfKey:!1,tags:JSON.parse(localStorage.getItem("tags")||"[]")}}mounted(){this.$store.subscribe(r=>{r.type==="updateDocument"&&r.payload.id==this.documentID&&this.updatePreview()}),this.eventHub.$on("tags:update",r=>{this.tags=r,this.document&&(this.document.tags=this.document.tags.map(i=>r.find(s=>s.id==i)))}),Database.getDocument(this.documentID).then(r=>{this.document=r,this.document.tags=this.document.tags.map(i=>this.tags.find(s=>s.id==i)),this.hasComment=r.changes.some(i=>i.type==="Text"&&i.data.hasControls),this.updateStopwatch(r.timeOpened),setTimeout(()=>{this.generatePreview(r.pdfData)},1e3*this.index)}),this.eventHub.$on("tags:documentTag",(r,i)=>{!this.document||this.documentID!=r||(this.document.tags=i)})}updatePreview(){Database.getDocument(this.documentID).then(r=>{this.documentBusy=!1,this.document&&(this.document.tags=r.tags.map(i=>this.tags.find(s=>s.id==i)),this.hasComment=r.changes.some(i=>i.type==="Text"&&i.data.hasControls),this.document.opened=r.opened,this.document.scoring=r.scoring,setTimeout(()=>{this.generatePreview(r.pdfData),this.pdfKey=!this.pdfKey},30))})}getTagStyle(r){const i=this.tags.find(s=>s.id==r);return{background:i==null?void 0:i.color,color:Color(i==null?void 0:i.color).isLight()?"black":"white"}}updateStopwatch(r){const i=new Date(r),s=function(c){const d=c();return d<10?"0"+d.toString():d.toString()};this.stopwatchText=`${i.getHours()-1}:${s(()=>i.getMinutes())}:${s(()=>i.getSeconds())}`}async generatePreview(r){const i=await pdf$1.getDocument({data:new Uint8Array(r),verbosity:0}).promise,s=await i.getPage(1),c=s.getViewport({scale:1}),d=document.createElement("canvas");d.width=100,d.height=c.height/c.width*100;const m=Math.min(d.width/c.width,d.height/c.height),y=d.getContext("2d");y&&(await s.render({canvasContext:y,viewport:s.getViewport({scale:m})}).promise,this.pdfUrl=d.toDataURL()),await i.destroy()}};__decorateClass$4([Prop()],DocumentPreview$1.prototype,"showTimer",2);__decorateClass$4([Prop()],DocumentPreview$1.prototype,"documentID",2);__decorateClass$4([Prop()],DocumentPreview$1.prototype,"showPDFPreview",2);__decorateClass$4([Prop()],DocumentPreview$1.prototype,"index",2);DocumentPreview$1=__decorateClass$4([Component],DocumentPreview$1);const DocumentPreview_vue_vue_type_style_index_0_scoped_fe5ccea5_lang="";var _sfc_render$4=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("li",{staticClass:"list-group-item",class:{"list-group-item-action":!t.selected,selected:t.selected,opened:t.document&&t.document.opened}},[t.document!=null?r("div",{class:{row:t.showPDFPreview,"w-100":!t.showPDFPreview}},[r("b-overlay",{attrs:{show:t.documentBusy,"no-wrap":""}}),t.showPDFPreview?r("div",{staticClass:"col-5 card-wrapper"},[r("b-card",{attrs:{"body-class":"p-0"}},[r("b-skeleton-wrapper",{attrs:{loading:t.pdfUrl==null},scopedSlots:t._u([{key:"loading",fn:function(){return[r("b-skeleton-img",{staticClass:"loading-skeleton",attrs:{"card-img":"top"}})]},proxy:!0}],null,!1,1859631929)},[r("img",{attrs:{src:t.pdfUrl,alt:"preview"}})])],1)],1):t._e(),r("div",{class:{"col-7":t.showPDFPreview,"w-100":!t.showPDFPreview}},[r("div",{staticClass:"text-left overflow-hidden mw-100",attrs:{id:t.documentID+"name"}},[r("h5",{staticClass:"d-inline pr-1 mr-2 border-right"},[t._v(" "+t._s(t.index)+" ")]),r("h5",{staticClass:"d-inline"},[t._v(" "+t._s(t.document.riesitel)+" ")]),r("b-popover",{attrs:{triggers:"hover",target:t.documentID+"name",placement:"top"}},[t._v(" "+t._s(t.document.riesitel)+" ")])],1),r("div",{staticClass:"p-3 grid"},[r("b-row",{staticClass:"border-bottom"},[r("b-col",{staticClass:"border-right"},[r("b-badge",{staticClass:"badge badge-secondary mr-1",staticStyle:{background:"var(--cyan)"}},[t._v(" "+t._s(t.document.kategoria)+" ")])],1),r("b-col",[t.hasComment?r("div",[r("span",{staticClass:"material-icons",attrs:{id:"commentDone"+t.document.id}},[t._v("chat")]),r("b-tooltip",{attrs:{target:"commentDone"+t.document.id,triggers:"hover"}},[t._v(" Toto riešenie už má napísaný komentár ")])],1):r("div",[r("span",{staticClass:"material-icons",class:{"text-danger":t.document.scoring&&t.document.scoring.final},attrs:{id:"commentNotDone"+t.document.id}},[t._v("chat_bubble_outline")]),r("b-tooltip",{attrs:{target:"commentNotDone"+t.document.id,triggers:"hover"}},[t._v(" Toto riešenie ešte nemá komentár ")])],1)])],1),r("b-row",[r("b-col",{staticClass:"border-right"},[t.document.scoring&&t.document.scoring.points!=null?r("div",[t._v(" "+t._s(t.document.scoring.points)+"B ")]):r("div",[t._v(" ?B ")])]),r("b-col",[t.document.scoring?r("div",{staticClass:"points-text d-inline"},[t.document.scoring.final?r("span",{staticClass:"material-icons text-success"},[t._v("check")]):r("span",{staticClass:"material-icons text-danger"},[t._v("close")])]):r("div",{staticClass:"points-text text-danger d-inline"},[r("span",{staticClass:"material-icons text-danger"},[t._v("close")])])])],1)],1),r("div",{staticClass:"text-left",attrs:{cols:"8"}},[r("transition-group",{attrs:{name:"tags"}},t._l(t.document.tags,function(i){return r("b-badge",{key:i.id,staticClass:"m-1",staticStyle:{transition:"500ms"},style:t.getTagStyle(i.id)},[t._v(" "+t._s(i.meno)+" ")])}),1)],1),t.showTimer&&t.document.opened?r("div",{staticClass:"stopwatch"},[r("span",[t._v(t._s(t.stopwatchText))]),r("span",{staticClass:"material-icons"},[t._v("hourglass_empty")])]):t._e()])],1):r("div",[r("b-spinner",{attrs:{variant:"primary",label:"Načítavam..."}}),r("p",[t._v("Načítavam...")])],1)])},_sfc_staticRenderFns$4=[],__component__$4=normalizeComponent(DocumentPreview$1,_sfc_render$4,_sfc_staticRenderFns$4,!1,null,"fe5ccea5",null,null);const DocumentPreview=__component__$4.exports;class TagFilter{constructor(){fe(this,"name","tags");fe(this,"args",[]);fe(this,"inversed",!1)}matches(t){return this.args.some(r=>{var s;const i=((s=store.state.tags.find(c=>c.meno==r))==null?void 0:s.id)||"invalid";return t.tags.some(c=>c==i)})}valid(){return this.args.every(t=>store.state.tags.find(r=>r.meno===t)!=null)}}class ScoreFilter{constructor(){fe(this,"name","score");fe(this,"args",[]);fe(this,"inversed",!1)}matches(t){var r;return this.args.length==0?((r=t.scoring)==null?void 0:r.points)!=null:!t.scoring||!t.scoring.points?!1:t.scoring.points>=parseFloat(this.args[0])&&t.scoring.points<=parseFloat(this.args[1])}valid(){return this.args.length==0||this.args.length==2&&!isNaN(this.args[0])&&!isNaN(this.args[1])}}class OpenFilter{constructor(){fe(this,"name","open");fe(this,"args",[]);fe(this,"inversed",!1)}matches(t){return console.log(t.opened),t.opened}valid(){return this.args.length==0}}class CommentFilter{constructor(){fe(this,"name","comment");fe(this,"args",[]);fe(this,"inversed",!1)}matches(t){return t.changes.length>0&&t.changes.some(r=>r.type=="Text"&&r.data.text.match(/^[0-9]*(\.[0-9]*)?B$/)==null)}valid(){return this.args.length==0}}const filters=[new TagFilter,new ScoreFilter,new OpenFilter,new CommentFilter];class FilterCommandParser{constructor(){fe(this,"commands",[]);fe(this,"query","")}parse(){let t={name:"",args:[],inversed:!1},r="name";const i=[];for(const c of this.query)if(!(c==" "&&r!="args")){if(c=="("){if(r=="name")r="args";else throw new Error("Unexpected character (");t.args.push("");continue}else if(c==")"){if(r=="args")r="name";else throw new Error("Unexpected character )");t.args.length==1&&t.args[0]==""&&t.args.pop(),i.push(t),t={name:"",args:[],inversed:!1};continue}if(r=="name"){if(c=="-"){if(t.name=="")t.inversed=!0;else throw new Error("Unexpected character -");continue}t.name+=c}else{if(c==","){t.args.push("");continue}t.args[t.args.length-1]+=c}}for(const c of i)c.args=c.args.map(d=>d.trim());const s=[];for(const c of i){const d=filters.find(m=>m.name==c.name);if(d==null)throw new Error("Invalid query");s.push({...c,matches:d.matches,valid:d.valid})}return console.log(s),s}updateQuery(t){this.query=t,this.commands=this.parse(),console.log(this.commands),eventHub.$emit("filter:queryUpdated")}queryValid(){try{return this.parse(),!0}catch{return!1}}getVisibility(t){for(const r of this.commands)if(r.inversed){if(r.matches(t))return!1}else if(!r.matches(t))return!1;return!0}}const filter=new FilterCommandParser;var __defProp$3=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__decorateClass$3=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$3(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$3(t,r,s),s};let FilterHelp$1=class extends Vue{};FilterHelp$1=__decorateClass$3([Component],FilterHelp$1);const FilterHelp_vue_vue_type_style_index_0_lang="";var _sfc_render$3=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("b-modal",{attrs:{id:"filterhelp",size:"lg","ok-only":""}},[r("h1",[t._v("Filtrovanie")]),r("p",[t._v(" Filtrovať môžeš pomocou mena riešiteľa v hlavnom vyhľadávaní. Potom sa dá filtrovať aj pomocou filtrovacích podmienok. Podmienky vyzerajú takto: ")]),r("code",[t._v("podmienka1(parameter1,parameter2) podmienka2()")]),r("p",[t._v(" Podmienka sa dá vo všeobecnosti napísať ako jej meno a potom do normálnych zátvoriek jej parametre, ktoré sú oddelené čiarkami. Medzery sa môžu dávať, ale nemusia. Na poradí podmienok nezáleží. ")]),r("p",[t._v(" Dané riešenie bude potom zobrazené práve vtedy keď spĺňa všetky zadané podmienky. Ak by si chcel podmienku znegovať, tak pred ňu daj zreteľný "),r("strong",[t._v("MÍNUS")])]),r("h3",[t._v("1. Podmienka - tagy")]),r("p",[t._v("Vie zobrazovať riešenia na základe tagov")]),r("p",[r("code",[t._v("tags(Tag1, Tag2)")]),t._v(' -> Zobrazí riešenia, ktoré obsahujú "Tag1", alebo "Tag2". ')]),r("p",[r("code",[t._v("-tags(Tag1)")]),t._v(" -> Zobrazí len tie riešenia, ktoré "),r("strong",[t._v("neobsahujú")]),t._v(' "Tag1". ')]),r("h3",[t._v("2. Podmienka - bodovanie")]),r("p",[t._v("Filtruje riešenia na základe toho či a koľko majú bodov")]),r("p",[r("code",[t._v("score()")]),t._v(" -> Všetky riešenia, ktoré už majú zadané nejaké body ")]),r("p",[r("code",[t._v("score(2,5)")]),t._v(" -> Všetky riešenia, ktoré majú aspoň 2 a najviac 5 bodov ")]),r("h3",[t._v("3. Podmienka - otvorené")]),r("p",[r("code",[t._v("open()")]),t._v("-> zobrazí len už otvorené riešenia.")]),r("h3",[t._v("4. Podmienka - komentár")]),r("p",[r("code",[t._v("comment()")]),t._v("-> ukáže len riešenia s napísaným komentárom.")]),r("h3",[t._v("Príklady")]),r("p",[t._v('Všetky neobodované riešenia s tagom "hlupáci" -> '),r("code",[t._v("tags(hlupáci) -score()")])]),r("p",[t._v("Všetky nepozreté riešenia "),r("code",[t._v("-open()")])]),r("p",[t._v("Neobodované už pozreté riešenia "),r("code",[t._v("-score() open()")])]),r("p")])},_sfc_staticRenderFns$3=[],__component__$3=normalizeComponent(FilterHelp$1,_sfc_render$3,_sfc_staticRenderFns$3,!1,null,null,null,null);const FilterHelp=__component__$3.exports;var __defProp$2=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__decorateClass$2=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$2(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$2(t,r,s),s};let SearchBar$1=class extends Vue{constructor(){super(...arguments);fe(this,"categories",[]);fe(this,"categoriesVisible",[]);fe(this,"tagValid",null);fe(this,"currQuery","");fe(this,"availableTags",[]);fe(this,"searchStr","");fe(this,"expanded",!1)}mounted(){this.categories=JSON.parse(localStorage.getItem("categories")||"[]"),this.categoriesVisible=this.categories.map(()=>!0);const r=this.$route.query.filter??"";setTimeout(()=>{r!=""&&(this.currQuery=r,this.updateQuery(r))},200)}search(){var s;const r=/[a-z]+/gi,i=((s=this.searchStr.match(r))==null?void 0:s.join("").toLowerCase())||"";this.eventHub.$emit("editor:search",i,this.categories.filter((c,d)=>this.categoriesVisible[d]))}updateQuery(r){try{filter.updateQuery(r),this.$router.replace({query:{filter:r}}),this.search(),this.tagValid=!0}catch(i){this.tagValid=!1,console.log(i)}}getContrastColor(r){return new Color(r).isDark()?"#ffffff":"#000000"}toggleSearchCategory(r){const i=this.categories.findIndex(s=>s==r);this.categoriesVisible[i]=!this.categoriesVisible[i],console.log(this.categoriesVisible),this.$forceUpdate(),this.search()}};SearchBar$1=__decorateClass$2([Component({components:{FilterHelp}})],SearchBar$1);const SearchBar_vue_vue_type_style_index_0_scoped_611d9ccd_lang="";var _sfc_render$2=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",[r("b-input-group",{staticStyle:{"z-index":"3"}},[r("b-form-input",{staticStyle:{"z-index":"0",position:"relative"},attrs:{type:"text",placeholder:"Hľadať v riešeniach",size:"lg"},model:{value:t.searchStr,callback:function(i){t.searchStr=i},expression:"searchStr"}}),r("b-input-group-append",{staticStyle:{"z-index":"0",position:"relative"}},[r("b-button",{attrs:{variant:"success",size:"md"},on:{click:t.search}},[r("span",{staticClass:"material-icons"},[t._v("search")])]),r("b-button",{attrs:{id:"expand",variant:"primary",size:"md"},on:{click:function(i){t.expanded=!t.expanded}}},[r("span",{staticClass:"material-icons"},[t._v(t._s(t.expanded?"expand_less":"expand_more"))])]),r("b-tooltip",{attrs:{target:"expand",triggers:"hover"}},[t._v(" Ďalšie možnosti hľadania ")])],1)],1),r("transition",{attrs:{name:"slide"}},[t.expanded?r("div",{staticClass:"search-menu"},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Filtrovacie kritéria ... ",size:"sm"},on:{update:function(i){return t.updateQuery(t.currQuery)}},model:{value:t.currQuery,callback:function(i){t.currQuery=i},expression:"currQuery"}}),r("b-input-group-append",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.filterhelp",modifiers:{filterhelp:!0}}],staticClass:"material-icons",attrs:{id:"filter",variant:"success",size:"sm"}},[t._v(" help ")]),r("b-tooltip",{attrs:{target:"filter"}},[t._v(" Pomoc k filtrovaniu ")]),r("filter-help")],1)],1),t.categories.length>1?r("h6",t._l(t.categories,function(i,s){return r("b-badge",{key:i,staticClass:"m-1 category-toggle",style:{opacity:t.categoriesVisible[s]?1:.5},attrs:{size:"lg"},on:{click:function(c){return t.toggleSearchCategory(i)}}},[t._v(" "+t._s(i)+" ")])}),1):t._e()],1):t._e()])],1)},_sfc_staticRenderFns$2=[],__component__$2=normalizeComponent(SearchBar$1,_sfc_render$2,_sfc_staticRenderFns$2,!1,null,"611d9ccd",null,null);const SearchBar=__component__$2.exports;class Stopwatch{constructor(){fe(this,"startTime",0);fe(this,"selectedTimeOpened",0);fe(this,"currentSelected",null);eventHub.$on("editor:documentChanged",(t,r)=>{this.currentSelected!=null&&(this.currentSelected.timeOpened=this.time,Database.updateDocument(this.currentSelected.id,this.currentSelected,!1)),this.currentSelected=r,this.selectedTimeOpened=r.timeOpened,this.startTime=Date.now()})}get time(){return Date.now()-this.startTime+this.selectedTimeOpened}}var __defProp$1=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__decorateClass$1=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc$1(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp$1(t,r,s),s};const SidebarProps=Vue.extend({props:{autoSave:{type:Boolean,default:!0},showPreviews:{type:Boolean,default:!0},showTimer:{type:Boolean,default:!1},documents:{type:Array,default:[]}}});let Sidebar$1=class extends SidebarProps{constructor(){super(...arguments);fe(this,"$refs");fe(this,"documentsShown");fe(this,"selectedIndex",0);fe(this,"pdf");fe(this,"prefs");fe(this,"timer");fe(this,"stopwatch",new Stopwatch)}mounted(){this.documentsShown=this.documents.map(()=>!0),this.$nextTick(()=>this.init()),this.eventHub.$on("document:save",this.save),this.eventHub.$on("editor:search",this.search),this.eventHub.$on("shortcut:selectNext",()=>this.selectDir(1)),this.eventHub.$on("shortcut:selectPrev",()=>this.selectDir(-1)),this.eventHub.$on("shortcut:save",this.save),this.eventHub.$on("visibilityUpdate",this.updateVisibility),this.timer=setInterval(this.stopwatchUpdate,1e3)}init(){this.eventHub.$on("editor:documentChanged",(i,s)=>{this.selectedIndex=Documents.findIndex(c=>c.id===s.id),this.pdf=i});const r=parseInt(this.$route.params.doc);r!=-1&&(this.updateSelected(r,!0),setTimeout(()=>{this.eventHub.$emit("editor:setDocument",r)},50))}data(){return{tags:JSON.parse(localStorage.getItem("tags")||"[]"),documentsShown:this.documents.map(()=>!0)}}async save(){if(getViewedDocument()==null||getViewedDocument()==null||(this.$refs.documentList[this.selectedIndex].documentBusy=!0,this.pdf==null))return;const r=await this.pdf.save().catch(i=>{this.$bvToast.toast(i,{variant:"danger",title:"Save failed"}),this.$refs.documentList[this.selectedIndex].documentBusy=!1});this.$store.commit("updateDocument",r),this.documentsShown[this.selectedIndex]=filter.getVisibility(Documents[this.selectedIndex])}async selectDir(r){if(!await this.beforeChange())return;let s=Documents.findIndex(c=>c.id==this.pdf.id)+r;for(;this.documentsShown[s]===!1;)s+=r;s<0||s>=Documents.length||(this.updateSelected(Documents[s].id,!0),this.eventHub.$emit("editor:setDocument",Documents[s].id))}updateSelected(r,i){const s=Documents.findIndex(m=>m.id==r);this.$router.replace({name:"Editor",params:{doc:r.toString()}}).catch(()=>{});const c=this.$refs.documentList;let d=0;for(let m=0;m<c.length;m++){const y=c[m];m<s&&(d+=y.$el.getBoundingClientRect().height),y.selected=m==s}i&&this.$refs.previews.scrollTo({top:d,left:0,behavior:"smooth"}),setTimeout(()=>{const m=Documents.find(y=>y.id==r);m&&(this.documentsShown[s]=filter.getVisibility(m),this.$forceUpdate())},30)}async beforeChange(){return getViewedDocument()==null?!0:(this.autoSave&&await this.save(),!!this.$parent.$refs.viewport.loaded)}stopwatchUpdate(){var r;this.$refs.documentList&&this.selectedIndex!=-1&&((r=this.$refs.documentList[this.selectedIndex])==null||r.updateStopwatch(this.stopwatch.time))}async selectIndex(r){await this.beforeChange()&&(this.updateSelected(r,!1),this.eventHub.$emit("editor:setDocument",r))}search(r,i){this.documents.forEach((s,c)=>{s.riesitel.toLowerCase().match(r)!=null&&i.includes(s.kategoria)?this.documentsShown[c]=filter.getVisibility(s):this.documentsShown[c]=!1}),this.$forceUpdate()}updateVisibility(r){const i=this.documents.findIndex(s=>s.id==r.id);if(i==-1)throw new Error("invalid Document");this.documentsShown[i]=filter.getVisibility(r),this.$forceUpdate(),console.log(this.documentsShown[i])}UpdateCurrentPreview(){const r=this.$refs.documentList;if(r.some(s=>s.document==null))return;const i=r.find(s=>{var c;return((c=s.document)==null?void 0:c.id)==this.pdf.id});setTimeout(()=>{i&&i.updatePreview()},500)}};Sidebar$1=__decorateClass$1([Component({components:{DocumentPreview,SearchBar}})],Sidebar$1);const Sidebar_vue_vue_type_style_index_0_scoped_ef95c56f_lang="";var _sfc_render$1=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{staticClass:"right-bar position-relative"},[r("search-bar",{ref:"searchBar"}),r("ul",{ref:"previews",staticClass:"list-group document-list p-0 right-bar"},[t._l(t.documents,function(i,s){return r("transition",{key:i.id,attrs:{name:"document-list"}},[r("document-preview",{directives:[{name:"show",rawName:"v-show",value:t.documentsShown[s],expression:"documentsShown[i]"}],ref:"documentList",refInFor:!0,attrs:{"show-p-d-f-preview":t.showPreviews,"document-i-d":i.id,"show-timer":t.showTimer,index:s+1},nativeOn:{click:function(c){return t.selectIndex(i.id)}}})],1)}),t.documentsShown.some(i=>i)?t._e():r("li",[r("p",{staticClass:"text-danger"},[t._v(" Nenašli sa žiadne riešenia ")])])],2)],1)},_sfc_staticRenderFns$1=[],__component__$1=normalizeComponent(Sidebar$1,_sfc_render$1,_sfc_staticRenderFns$1,!1,null,"ef95c56f",null,null);const Sidebar=__component__$1.exports;var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(e,t,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc(t,r):t,c=e.length-1,d;c>=0;c--)(d=e[c])&&(s=(i?d(t,r,s):d(s))||s);return i&&s&&__defProp(t,r,s),s};let Editor$1=class extends Vue{constructor(){super(...arguments);fe(this,"Documents");fe(this,"documentsShown");fe(this,"selectedIndex",0);fe(this,"pdf",null);fe(this,"loadedDocuments",!1);fe(this,"sidebarVisible",!0);fe(this,"$refs");fe(this,"zoomKeyListener");fe(this,"zoomScrollListener")}get prefs(){return this.$store.state.settings}mounted(){this.$store.commit("loadData"),onEditorStart(),Documents.length==0?loadFromDatabase(this.$store.state.currentProblem).then(i=>{this.Documents=i,this.loadedDocuments=!0,this.$nextTick(()=>r())}).catch(i=>console.log(i)):this.$nextTick(()=>r());const r=()=>{this.loadedDocuments=!0,this.eventHub.$on("editor:documentChanged",i=>{this.pdf=i}),this.eventHub.$on("editor:sidebarToggle",()=>{this.sidebarVisible=!this.sidebarVisible}),loadFonts()};Documents.sort((i,s)=>i.index-s.index),this.Documents=Documents,this.documentsShown=Documents.map(()=>!0),this.pdf=getViewedDocument()}created(){this.zoomKeyListener=r=>{r.ctrlKey&&(r.key=="+"||r.key=="-")&&(r.preventDefault(),r.stopPropagation(),this.eventHub.$emit("viewport:scale",.1*(r.key=="+"?1:-1)))},this.zoomScrollListener=r=>{r.ctrlKey&&(r.preventDefault(),r.stopPropagation(),this.eventHub.$emit("viewport:scale",.1*(r.deltaY<0?1:-1)))},window.addEventListener("keydown",this.zoomKeyListener),window.addEventListener("wheel",this.zoomScrollListener,{passive:!1})}destroyed(){this.zoomKeyListener&&window.removeEventListener("keydown",this.zoomKeyListener),this.zoomScrollListener&&window.removeEventListener("wheel",this.zoomScrollListener),this.zoomKeyListener=void 0,this.zoomScrollListener=void 0}};Editor$1=__decorateClass([Component({components:{Viewport,Topbar,Toolbar,Scoring,Tags,Sidebar,Shortcuts}})],Editor$1);const Editor_vue_vue_type_style_index_0_scoped_fd33a95a_lang="";var _sfc_render=function e(){var t=this,r=t._self._c;return t._self._setupProxy,r("div",{attrs:{id:"app"}},[r("nav",{staticClass:"navbar navbar-light bg-primary",staticStyle:{padding:"0"}},[r("topbar",{ref:"topbar",staticClass:"pdf"})],1),r("div",{staticClass:"d-flex main"},[r("transition",{attrs:{name:"sidebar"}},[t.loadedDocuments?r("sidebar",{directives:[{name:"show",rawName:"v-show",value:t.sidebarVisible,expression:"sidebarVisible"}],ref:"sidebar",attrs:{"auto-save":t.prefs&&t.prefs.other.settings.autoSave,"show-previews":t.prefs&&t.prefs.other.settings.showPreviews,"show-timer":t.prefs&&t.prefs.other.settings.showTimer,documents:t.Documents}}):t._e()],1),r("div",{staticClass:"toggle-button",class:{visible:t.sidebarVisible},on:{click:function(i){return t.eventHub.$emit("editor:sidebarToggle")}}},[r("span",{staticClass:"material-icons"},[t._v("arrow_forward_ios")])]),r("div",{staticStyle:{width:"100%"}},[r("toolbar",{attrs:{pdf:t.pdf}}),t.pdf!=null?r("div",{staticClass:"viewportWrapper"},[r("keep-alive",{attrs:{max:10}},[r("Viewport",{key:t.pdf.id,ref:"viewport",attrs:{pdf:t.pdf}})],1)],1):r("div",{staticClass:"empty-text"},[t._v(" Nie je vybraté žiadne riešenie ")])],1)],1),r("scoring",{staticStyle:{"z-index":"10"}}),r("tags"),r("shortcuts")],1)},_sfc_staticRenderFns=[],__component__=normalizeComponent(Editor$1,_sfc_render,_sfc_staticRenderFns,!1,null,"fd33a95a",null,null);const Editor=__component__.exports;export{Editor as default};
